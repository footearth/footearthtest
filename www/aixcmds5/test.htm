<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 5，s - u - test 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-04-30" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="评估条件, 表达式, 评估, 条件表达式, test 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="test.htm#Bot_Of_Page">页的底部</a> | <a href="termdef.htm">上一页</a> | <a href="tftp.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 5，s - u</h1></center>

<a name="a208936e"></a>
<h2 id="a208936e">test 命令</h2>
<p><a id="idx421" name="idx421"></a> <a id="idx422" name="idx422"></a> <a id="idx423" name="idx423"></a></p>
<a name="a208936f"></a>
<h3 id="a208936f">用途</h3>
<a name="e342933606mart"></a>
<p id="e342933606mart">评估条件表达式。</p>
<a name="a2089371"></a>
<h3 id="a2089371">语法</h3>
<p><span class="bold">test</span>  <a href="test.htm#e342934441mart"><span class="italic">Expression</span></a></p>
<p>或</p>
<p><span class="bold">[</span>  <a href="test.htm#e342934441mart"><span class="italic">Expression</span></a><span class="bold"> ]</span></p>
<a name="a2089372"></a>
<h3 id="a2089372">描述</h3>
<a name="e342934142mart"></a>
<p id="e342934142mart"><span class="bold">test</span> 命令评估 <span class="italic">Expression</span> 参数, 如果表达式值为 True，
返回一个零（true）退出值。否则, <span class="bold">test</span> 命令返回一个非零（false）退出值。 如果没有参数，<span class="bold">test</span> 命令也返回一个非零退出值。</p>
<p></p><blockquote><span class="bold">注：</span>
<ol type="1">
<li><a name="a39c38d0017janb"></a><span id="a39c38d0017janb" class="pk"></span>在命令的第二种格式中，<span class="bold">[&nbsp;]</span>（方括号）必须被空白包围。</li>
<li><a name="a39c38d0029janb"></a><span id="a39c38d0029janb" class="pk"></span>必须在 C shell 中对文件名进行显式测试。文件名替换（全局）导致 shell 脚本退出。</li></ol></blockquote>
<a name="e342934441mart"></a>
<p id="e342934441mart">函数与运算符被 <span class="bold"> test</span> 命令当作独立的参数。<span class="italic">Expression</span> 参数指的是一个需要被检查为 true 或 false 的条件的语句。下列函数可用来构造此参数：</p>
<a name="wq935"></a>
<table id="wq935" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="35%">
<a id="a208937c" name="a208937c"></a><span class="bold">-b</span><span class="italic"> FileName</span></td>
<td width="65%">如果所指定的 <span class="italic">FileName</span> 存在且是一个块特殊文件，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a208937b" name="a208937b"></a><span class="bold">-c</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个字符特殊文件，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a208937a" name="a208937a"></a><span class="bold">-d</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个目录，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="d84c05f259jani" name="d84c05f259jani"></a><span class="bold">-e</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089379" name="a2089379"></a><span class="bold">-f</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个常规文件，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a208937f" name="a208937f"></a><span class="bold">-g</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且它的设置组标识位已设置，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="e47dd59390mart" name="e47dd59390mart"></a><span class="bold">-h</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个符号链接，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089380" name="a2089380"></a><span class="bold">-k</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且其粘滞位已设置，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a184c1144" name="a184c1144"></a><span class="bold">-L</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个符号链接，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089384" name="a2089384"></a><span class="bold">-n</span><span class="italic"> String1</span></td>
<td>如果 <span class="italic">String1</span> 变量的长度为非零，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a208937d" name="a208937d"></a><span class="bold">-p</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且是一个命名管道（FIFO），则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089376" name="a2089376"></a><span class="bold">-r</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且可被当前进程读取，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089381" name="a2089381"></a><span class="bold">-s</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName </span>存在且长度大于零，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089382" name="a2089382"></a><span class="bold">-t</span><span class="italic"> FileDescriptor</span></td>
<td> 如果文件描述符号为 <span class="italic">FileDescriptor</span> 的文件是打开的且与一个终端相连，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a208937e" name="a208937e"></a><span class="bold">-u</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且它的设置用户标识位已被设置，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089377" name="a2089377"></a><span class="bold">-w</span><span class="italic"> FileName</span></td>
<td>如果所指定的 <span class="italic">FileName</span> 存在且写标志打开，则返回一个 true 退出值。 但是，<span class="italic">FileName</span> 在一个只读的文件系统中不可写，即使 <span class="bold">test</span> 指示为 true。</td>
</tr>
<tr>
<td>
<a id="a2089378" name="a2089378"></a><span class="bold">-x</span><span class="italic"> FileName</span></td>
<td>如果所指定的<span class="italic">FileName</span> 存在且执行标志打开，则返回一个 true 退出值。如果所指定的文件存在且是一个目录，true 退出值表示当前进程被允许在目录中搜索。</td>
</tr>
<tr>
<td>
<a id="a2089383" name="a2089383"></a><span class="bold">-z</span><span class="italic"> String1</span></td>
<td>如果 <span class="italic">String1</span> 变量的长度为 0（零），则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089385" name="a2089385"></a><span class="italic">String1</span><span class="bold">=</span><span class="italic"> String2</span></td>
<td>如果 <span class="italic">String1</span> 与 <span class="italic">String2</span> 的变量相同，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089386" name="a2089386"></a><span class="italic">String1</span><span class="bold">!=</span><span class="italic">String2</span></td>
<td>如果 <span class="italic">String1</span> 与 <span class="italic">String2</span> 的变量不相同，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089387" name="a2089387"></a><span class="italic">String1</span></td>
<td>如果 <span class="italic">String1</span> 变量不是一个空字符串，则返回一个 true 退出值。</td>
</tr>
<tr>
<td>
<a id="a2089388" name="a2089388"></a><span class="italic">Integer1</span><span class="bold"> -eq</span><span class="italic"> Integer2</span></td>
<td>如果<span class="italic">Integer1</span> 与 <span class="italic">Integer2</span> 的变量在数学上相等，则返回一个 true 退出值。任一比较 <span class="bold">-ne</span>,<span class="bold"> -gt</span>,<span class="bold"> -ge</span>,<span class="bold"> -lt</span>, <span class="bold">-le</span> 可被
用来代替 <span class="bold">-eq</span>。</td>
</tr>
<tr>
<td><span class="italic">file1</span><span class="bold"> -nt</span><span class="italic"> file2</span></td>
<td>如果 <span class="italic">file1</span> 比 <span class="italic">file2</span> 更新，则为 true。</td>
</tr>
<tr>
<td><span class="italic">file1</span><span class="bold"> -ot</span><span class="italic"> file2</span></td>
<td>如果<span class="italic">file1</span> 比 <span class="italic">file2</span> 旧，则为 true。</td>
</tr>
<tr>
<td><span class="italic">file1</span><span class="bold"> -ef</span><span class="italic"> file2</span></td>
<td>如果 <span class="italic">file1</span> 是 <span class="italic">file2</span> 的另外一个名称，则为 true。</td>
</tr>
</tbody>
</table>
<a name="e342936399mart"></a>
<p id="e342936399mart">这些函数可与下列运算符连在一起：</p>
<a name="wq936"></a>
<table id="wq936" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a208938a" name="a208938a"></a><span class="bold">!</span></td>
<td width="76%">一元“非”运算符</td>
</tr>
<tr>
<td>
<a id="a208938b" name="a208938b"></a><span class="bold">-a</span></td>
<td>二进制“与”运算符</td>
</tr>
<tr>
<td>
<a id="a208938c" name="a208938c"></a><span class="bold">-o</span></td>
<td>二进制“或”运算符（就是说, <span class="bold">-a</span> 运算符的优先权比 <span class="bold">-o</span> 运算符高）</td>
</tr>
<tr>
<td>
<a id="a208938d" name="a208938d"></a><span class="bold">\(</span><span class="italic">Expression</span><span class="bold">\)</span></td>
<td>分组括号</td>
</tr>
</tbody>
</table>
<a name="ac221f2395shar"></a>
<h3 id="ac221f2395shar">退出状态</h3>
<a name="e342936832mart"></a>
<p id="e342936832mart">命令返回以下退出值：</p>
<a name="wq937"></a>
<table id="wq937" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="c441f46361amy" name="c441f46361amy"></a><span class="bold">0</span></td>
<td width="95%"><span class="italic">Expression</span> 参数为 true。</td>
</tr>
<tr>
<td>
<a id="c441f46445amy" name="c441f46445amy"></a><span class="bold">1</span></td>
<td><span class="italic">Expression</span> 参数为 false 或丢失。</td>
</tr>
<tr>
<td>
<a id="c441f46520amy" name="c441f46520amy"></a><span class="bold">&gt;1</span></td>
<td>发生错误。</td>
</tr>
</tbody>
</table>
<a name="a208938e"></a>
<h3 id="a208938e">示例</h3>
<ol type="1">
<li><a name="a208938f"></a><span id="a208938f" class="pk"></span>为测试一个文件是否存在且非空,
输入：
<p></p>
<a name="a2089390"></a>
<pre id="a2089390" class="xmp">if test ! -s "$1"
then
&nbsp;&nbsp;&nbsp;echo $1 does not exist or is empty.
fi</pre> 
<p>如果被第一个位置的参数指定给 shell 过程的文件, <tt>$1</tt>, 不存在, <span class="bold">test</span> 命令显示一条出错消息。如果 <tt>$1</tt> 存在且大小大于 0，<span class="bold">test</span>
 命令什么也不显示。</p> 
<a name="a208936a"></a>
<p id="a208936a"></p><blockquote><span class="bold">注：</span>在 <span class="bold">-s</span> 函数与文件名之间必须有一空格。</blockquote> 
<a name="a2089392"></a>
<p id="a2089392"><tt>$1</tt> 两边的引号确保即使值 <tt>$1</tt> 为一空字符串，
test 也可正常工作。如果引号被省略且 <tt>$1</tt> 是空字符串，<span class="bold">test</span> 命令显示出错消息 <tt>test：期望参数。</tt></p></li>
<li><a name="a2089393"></a><span id="a2089393" class="pk"></span>为做一复杂比较，输入：
<p></p>
<a name="a2089394"></a>
<pre id="a2089394" class="xmp">if [ $# -lt 2  -o  ! -e "$1" ]
then
&nbsp;&nbsp;&nbsp;exit
fi</pre> 
<p>如果给出的 shell 过程少于两个位置参数或被 <tt>$1</tt> 指定的文件不存在，
则 shell 过程退出。特殊 shell 变量 <tt>$#</tt> 表示了在命令行输入的用以运行 shell 过程的位置参数的个数。</p></li></ol>
<a name="e342937769mart"></a>
<p id="e342937769mart"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/aixuser/usrosdev/shells.htm#a127c1ff">『shell 概述』</a>，
总体上描述了 shell，定义了对理解 shell 有帮助的术语，描述了很多有用的 shell 功能。</p>
<a name="a45f014a6"></a>
<h3 id="a45f014a6">文件</h3>
<p></p>
<a name="wq939"></a>
<table id="wq939" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="a208936d" name="a208936d"></a><span class="bold">/usr/bin/test</span></td>
<td width="78%">包含 <span class="bold">test</span> 命令。</td>
</tr>
</tbody>
</table>
<a name="a2089396"></a>
<h3 id="a2089396">相关信息</h3>
<a name="e342938683mart"></a>
<p id="e342938683mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds1/bsh.htm#a27991201"><span class="bold">bsh</span></a>
命令，<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds1/csh.htm#a27991075"><span class="bold">csh</span></a> 命令，<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds2/find.htm#a133z92523"><span class="bold">find</span></a> 命令，<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds3/ksh.htm#a265912f6"><span class="bold">ksh</span></a> 命令，<a href="sh.htm#a66f011a"><span class="bold">sh</span></a> 命令。</p>
<a name="e342938794mart"></a>
<p id="e342938794mart"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/aixuser/usrosdev/shells.htm#a127c1ff">『shell 概述』</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="test.htm#Top_Of_Page">页的顶部</a> | <a href="termdef.htm">上一页</a> | <a href="tftp.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
