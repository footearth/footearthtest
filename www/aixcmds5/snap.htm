<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 5，s - u - snap 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-04-30" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="snap 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="snap.htm#Bot_Of_Page">页的底部</a> | <a href="smundefca.htm">上一页</a> | <a href="snapcore.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 5，s - u</h1></center>
<a id="idx169" name="idx169"></a>
<a name="a352c13f"></a>
<h2 id="a352c13f">snap 命令</h2>
<a name="a352c140"></a>
<h3 id="a352c140">用途</h3>
<a name="f819ac0558mart"></a>
<p id="f819ac0558mart">收集系统配置信息。</p>
<a name="a352c142"></a>
<h3 id="a352c142">语法</h3>
<p><span class="bold">snap</span> [  <a href="snap.htm#a352c14d"><span class="bold">-a </span></a>] [  <a href="snap.htm#a352c14e"><span class="bold">-A </span></a>] [  <a href="snap.htm#i0812971400mkm"><span class="bold">-b </span></a>] [ <a href="snap.htm#snap_flags_bigb"><span class="bold">-B</span></a> ] [  <a href="snap.htm#a352c14f"><span class="bold">-c </span></a>]  [<span class="bold"></span>  <a href="snap.htm#a352c151"><span class="bold">-D </span></a>] [  <a href="snap.htm#a352c153"><span class="bold">-f </span></a>] [  <a href="snap.htm#a352c154"><span class="bold">-g </span></a>] [  <a href="snap.htm#a352c155"><span class="bold">-G </span></a>]
 [  <a href="snap.htm#pa9ap2fvick"><span class="bold">-i</span></a> ] [  <a href="snap.htm#a352c156"><span class="bold">-k </span></a>] [  <a href="snap.htm#a352c157"><span class="bold">-l </span></a>]
[  <a href="snap.htm#i0812971444mkm"><span class="bold">-L </span></a>][  <a href="snap.htm#a352c158"><span class="bold">-n </span></a>] [  <a href="snap.htm#a352c159"><span class="bold">-N </span></a>]
[  <a href="snap.htm#a352c15b"><span class="bold">-p </span></a>] [  <a href="snap.htm#a352c15c"><span class="bold">-r </span></a>] [ <a href="snap.htm#snap_flag_r"><span class="bold">-R </span></a> ] [  <a href="snap.htm#a352c15d"><span class="bold">-s </span></a>] [  <a href="snap.htm#a352c15e"><span class="bold">-S</span></a> ]   [  <a href="snap.htm#a352c15f"><span class="bold">-t </span></a>] [  <a href="snap.htm#uppertflag"><span class="bold">-T </span></a> <span class="italic">Filename</span> ] [ <a href="snap.htm#lowerwflag"><span class="bold">-w </span></a> ] [  <a href="snap.htm#a352c15a"><span class="bold">-o </span></a><span class="italic">OutputDevice</span> ] [  <a href="snap.htm#a352c152"><span class="bold">-d</span></a> <span class="italic">Dir</span> ] [  <a href="snap.htm#a352c160"><span class="bold">-v </span></a><span class="italic">Component</span> ] </p>
<p><span class="bold">snap</span> <a href="snap.htm#snap_flag_e"><span class="bold">-e</span></a> [ <a href="snap.htm#snap_flag_m"><span class="bold">-m</span></a> <span class="italic">Nodelist</span> ] [ <a href="snap.htm#a352c152"><span class="bold">-d</span></a> <span class="italic">Dir</span> ]</p>
<a name="a352c145"></a>
<h3 id="a352c145">描述</h3>
<a name="f819ac1041mart"></a>
<p id="f819ac1041mart"><span class="bold">snap</span> 命令收集系统配置信息并把信息压缩到 <span class="bold">pax</span> 文件中。然后把文件下载到磁盘或磁带，或者发送到远程系统。也许需要用 <span class="bold">snap</span> 命令收集的信息来识别并解决系统问题。</p>
<a name="wq246"></a>
<div class="notetitle" id="wq246">注:</div>
<div class="notebody">需要具有 root 用户权限来执行 <span class="bold">snap</span> 命令。</div>
<a name="f819ac1264mart"></a>
<p id="f819ac1264mart">使用 <span class="bold">snap -o /dev/rfd0</span> 命令把压缩的图象复制到软盘上。使用 <span class="bold">snap -o /dev/rmt0</span> 命令把图象复制到磁带上。</p>
<a name="f819ac1415mart"></a>
<p id="f819ac1415mart">需要将近 8MB 的临时磁盘空间收集所有的系统信息，包含错误日志的内容。如果不使用 <span class="bold">snap -a </span> 命令收集所有的系统信息，可能只需要较少的磁盘空间（取决于选择的选项）。</p>
<a name="wq247"></a>
<div class="notetitle" id="wq247">注:</div>
<div class="notebody">如果想要使用磁带将快照映像发送给 IBM 以获取技术支持，则磁带必须为以下格式之一：
<ul>
<li>8mm, 2.3 Gb 容量</li>
<li>8mm，5.0 Gb 容量</li>
<li>4mm，4.0 Gb 容量</li></ul>
<p>使用其它格式会阻止或延迟 IBM 软件支持检查其内容。</p></div>
<a name="f819ac1564mart"></a>
<p id="f819ac1564mart"><span class="bold">snap -g</span> 命令收集常规系统信息，包括以下的信息：</p>
<ul>
<li>错误报告</li>
<li>定制“对象数据管理器”（ODM）数据库的副本</li>
<li>跟踪文件</li>
<li>用户环境</li>
<li>物理内存和调页空间的数量</li>
<li>设备和属性信息</li>
<li>安全性用户信息</li></ul>
<a name="f819ac2176mart"></a>
<p id="f819ac2176mart">把<span class="bold">snap -g</span> 命令的输出写到 <span class="bold">/tmp/ibmsupt/general/general.snap</span> 文件中。</p>
<a name="f819ac2326mart"></a>
<p id="f819ac2326mart"><span class="bold">snap</span> 命令检查 <span class="bold">/tmp/ibmsupt</span> 目录中的可用的空间，此目录是 <span class="bold">snap</span> 命令输出的缺省目录。可使用 <span class="bold">-d</span> 标志把输出写到另一个目录中。如果没有足够的空间来存放 <span class="bold">snap</span> 命令的输出，那么您必须扩展文件系统。</p>
<a name="f819ac2475mart"></a>
<p id="f819ac2475mart"><span class="bold">snap</span> 命令的每一次执行都会把信息附加到以前创建的文件中。使用 <span class="bold">-r</span> 标志除去以前收集并保存过的信息。</p>
<a name="a352c14c"></a>
<h3 id="a352c14c">标志</h3>
<p></p>
<a name="wq248"></a>
<table id="wq248" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="a352c14d" name="a352c14d"></a><span class="bold">-a</span></td>
<td width="75%">收集所有的系统配置信息。该选项需要大约 8MB 的临时磁盘空间。</td>
</tr>
<tr>
<td>
<a id="a352c14e" name="a352c14e"></a><span class="bold">-A</span></td>
<td>收集异步（TTY）信息。</td>
</tr>
<tr>
<td>
<a id="i0812971400mkm" name="i0812971400mkm"></a><span class="bold">-b</span></td>
<td>收集 SSA 信息。</td>
</tr>
<tr>
<td>
<a id="snap_flags_bigb" name="snap_flags_bigb"></a><span class="bold">-B</span></td>
<td>绕过 SSA 适配器转储集合。<span class="bold">-B</span> 标志仅在同时指定了 <span class="bold">-b</span> 标志的情况下才起作用，否则请忽略 <span class="bold">-B</span> 标志。</td>
</tr>
<tr>
<td>
<a id="a352c14f" name="a352c14f"></a><span class="bold">-c</span></td>
<td>创建 <span class="bold">/tmp/ibmsupt</span>目录树或其它指定输出目录中的所有文件的压缩 <span class="bold">pax</span> 图像（<span class="bold">snap.pax.Z</span> 文件）。
<a name="wq249"></a>
<div class="notetitle" id="wq249">注:</div>
<div class="notebody"> 在使用 <span class="bold">-c</span> 标志之前，应将未使用该选项收集的信息复制到 <span class="bold">snap</span> 目录树中。如果需要一个测试用例来演示系统问题，那么在压缩 <span class="bold">pax</span> 之前，把该测试用例复制到 <span class="bold">/tmp/ibmsupt/testcase</span> 目录中。</div></td>
</tr>
<tr>
<td>
<a id="a352c151" name="a352c151"></a><span class="bold">-D</span></td>
<td>收集转储和 <span class="bold">/unix</span> 信息。使用主要的转储设备。
<a name="wq250"></a>
<div class="notelisttitle" id="wq250">注:</div>
<ol type="1">
<li>如果使用 <span class="bold">bosboot -k</span> 指定非 /<span class="bold">unix</span> 的运行内核，就会收集到不正确的内核。当转储时，请确保 /<span class="bold">unix</span> 是正在使用的内核或者连接到正在使用的内核。</li>
<li>如果将转储文件复制到主机机器上，那么 <span class="bold">snap</span> 命令不能收集 <span class="bold">/tmp/ibmsupt/dump</span> 目录中的转储图象。相反，它创建转储目录和实际转储图像的链接。</li>
</ol></td>
</tr>
<tr>
<td>
<a id="a352c152" name="a352c152"></a><span class="bold">-d</span><span class="italic"> Dir</span><span class="bold"></span></td>
<td>标识可选的 <span class="bold">snap</span> 命令输出目录（<span class="bold">/tmp/ibmsupt</span> 是缺省目录）。</td>
</tr>
<tr>
<td>
<a id="snap_flag_e" name="snap_flag_e"></a><span class="bold">-e</span></td>
<td>收集 HACMP 的特定信息。
<a name="wq252"></a>
<div class="notetitle" id="wq252">注:</div>
<div class="notebody">从属于群集的所有节点收集 HACMP 的特定数据。该标志不能与除 <span class="bold">-m</span> 和 <span class="bold">-d</span> 外的任何其它标志一起使用。</div></td>
</tr>
<tr>
<td>
<a id="a352c153" name="a352c153"></a><span class="bold">-f</span></td>
<td>收集文件系统信息。</td>
</tr>
<tr>
<td>
<a id="a352c154" name="a352c154"></a><span class="bold">-g</span></td>
<td>收集 <span class="bold">lslpp -hBc</span> 命令的输出，要求该命令重新创建确切的操作系统环境。把输出写入 <span class="bold">/tmp/ibmsupt/general/lslpp.hBc</span> 文件。也收集常规系统信息并把输出写到 <span class="bold">/tmp/ibmsupt/general/general.snap</span> 文件中。</td>
</tr>
<tr>
<td>
<a id="a352c155" name="a352c155"></a><span class="bold">-G</span></td>
<td>用 <span class="bold">-g</span> 标志将预定义的<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/aixprggd/genprogc/odm.htm#a29f038e">对象数据管理器</a>（ODM）文件包含到收集到的常规信息中。</td>
</tr>
<tr>
<td>
<a id="pa9ap2fvick" name="pa9ap2fvick"></a><span class="bold">-i</span></td>
<td>收集安装调试关键产品数据（VPD）信息。</td>
</tr>
<tr>
<td>
<a id="a352c156" name="a352c156"></a><span class="bold">-k</span></td>
<td>收集内核信息</td>
</tr>
<tr>
<td>
<a id="a352c157" name="a352c157"></a><span class="bold">-l</span></td>
<td>收集编程语言信息。</td>
</tr>
<tr>
<td>
<a id="i0812971444mkm" name="i0812971444mkm"></a><span class="bold">-L</span></td>
<td>收集 LVM 信息。</td>
</tr>
<tr>
<td>
<a id="snap_flag_m" name="snap_flag_m"></a><span class="bold">-m</span> <span class="italic">Nodelist</span></td>
<td>用于收集 HACMP 信息的节点名称列表（用逗号分开）。
<a name="wq253"></a>
<div class="notetitle" id="wq253">注:</div>
<div class="notebody">当前该标志仅在与 <span class="bold">-e</span> 标志一起使用时有效。</div></td>
</tr>
<tr>
<td>
<a id="a352c158" name="a352c158"></a><span class="bold">-n</span></td>
<td>收集<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/aixbman/commadmn/nfs_intro.htm#a354c98749">网络文件系统</a>（NFS）信息。</td>
</tr>
<tr>
<td>
<a id="a352c159" name="a352c159"></a><span class="bold">-N</span></td>
<td>禁止检查必需的可用空间。</td>
</tr>
<tr>
<td>
<a id="a352c15a" name="a352c15a"></a><span class="bold">-o</span><span class="italic"> OutputDevice</span><span class="bold"></span></td>
<td>将压缩图像复制到软盘或磁带上。</td>
</tr>
<tr>
<td>
<a id="a352c15b" name="a352c15b"></a><span class="bold">-p</span></td>
<td>收集打印机信息。</td>
</tr>
<tr>
<td>
<a id="a352c15c" name="a352c15c"></a><span class="bold">-r</span></td>
<td>从 <span class="bold">/tmp/ibmsupt</span> 目录中除去 <span class="bold">snap</span> 命令的输出。</td>
</tr>
<tr>
<td>
<a id="snap_flag_r" name="snap_flag_r"></a><span class="bold">-R</span></td>
<td>收集 SCSI RAID 信息。</td>
</tr>
<tr>
<td>
<a id="a352c15d" name="a352c15d"></a><span class="bold">-s</span></td>
<td>收集“系统网络体系结构”（SNA）信息。</td>
</tr>
<tr>
<td>
<a id="a352c15e" name="a352c15e"></a><span class="bold">-S</span></td>
<td>用 <span class="bold">-g</span> 标志将安全性文件包含到收集到的一般信息中。</td>
</tr>
<tr>
<td>
<a id="a352c15f" name="a352c15f"></a><span class="bold">-t</span></td>
<td>收集<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/aixbman/commadmn/tcp_protocols.htm#a341c96ba3">传输控制协议／网际协议</a>（TCP/IP）信息。</td>
</tr>
<tr>
<td>
<a id="uppertflag" name="uppertflag"></a><span class="bold">-T</span></td>
<td>为多个 CPU 跟踪收集所有日志文件。<span class="bold">-g</span> 标志只收集库文件 <span class="bold">trcfile</span>。</td>
</tr>
<tr>
<td>
<a id="a352c160" name="a352c160"></a><span class="bold">-v</span><span class="italic"> Component</span><span class="bold"></span></td>
<td>显示 <span class="bold">snap</span> 命令所执行的命令的输出。使用该标志查看指定的文件名称或文件组。
<p></p><blockquote><span class="bold">注：</span>按下 Ctrl-C 按键顺序可中断 <span class="bold">snap</span> 命令。返回带有下列选项的提示：按下 Enter 键返回到当前操作；按下 S 键停止当前操作；按下 Q 键完全退出 <span class="bold">snap</span> 命令。</blockquote></td>
</tr>
<tr>
<td>
<a id="lowerwflag" name="lowerwflag"></a><span class="bold">-w</span></td>
<td>收集 WLM 信息。</td>
</tr>
</tbody>
</table>
<a name="a352c162"></a>
<h3 id="a352c162">示例</h3>
<ol type="1">
<li><a name="a352c163"></a><span id="a352c163" class="pk"></span>输入下列命令收集所有的系统配置信息：
<p></p>
<a name="a352c164"></a>
<pre id="a352c164" class="xmp">snap -a</pre><p class="indatacontent"> 该命令的输出写入 <span class="bold">/tmp/ibmsupt</span> 目录中。</p></li>
<li><a name="a352c166"></a><span id="a352c166" class="pk"></span>输入下列命令创建 <span class="bold">/tmp/ibmsupt </span> 目录中包含的所有文件的 <span class="bold">pax</span> 图象：
<p></p>
<a name="a352c167"></a>
<pre id="a352c167" class="xmp">snap -c</pre></li>
<li><a name="a352c168"></a><span id="a352c168" class="pk"></span>输入下列命令收集常规系统配置信息，包括 <span class="bold">lslpp -hBc</span> 命令的输出：
<p></p>
<a name="a352c169"></a>
<pre id="a352c169" class="xmp">snap -g -o /dev/rfd0</pre><p class="indatacontent"> 输出写入 <span class="bold">/tmp/ibmsupt/general/lslpp.hBc</span> 和 <span class="bold">/tmp/ibmsupt/general/general.snap</span> 文件中。该命令也把系统信息写入可拆卸的软盘中。</p></li>
<li>输入以下命令以从属于单一群集的节点 <tt class="xph">node1</tt> 和 <tt class="xph">node2</tt> 收集 HACMP 的特定信息：
<pre class="xmp">snap -e -m node1,node2</pre>  输出写入 <span class="bold">/tmp/ibmsupt/hacmp</span> 目录中。</li></ol>
<a name="a352c16d"></a>
<h3 id="a352c16d">文件</h3>
<p></p>
<a name="wq255"></a>
<table id="wq255" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="55%">
<a id="bf7e15b429joy" name="bf7e15b429joy"></a><span class="bold">/usr/sbin/snap</span></td>
<td width="45%">  包含 <span class="bold">snap</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a352c16e" name="a352c16e"></a><span class="bold">/tmp/ibmsupt</span></td>
<td>  包含 <span class="bold">snap</span> 命令的输出。</td>
</tr>
<tr>
<td>
<a id="a352c16f" name="a352c16f"></a><span class="bold">/tmp/ibmsupt/general/lslpp.hBc</span></td>
<td>  包含 <span class="bold">lslpp -hBc</span> 命令的输出，需要该命令来重新创建精确的操作系统环境。</td>
</tr>
<tr>
<td>
<a id="a352c170" name="a352c170"></a><span class="bold">/tmp/ibmsupt/general/general.snap</span></td>
<td>  包含用 <span class="bold">snap -g</span> 命令收集到的常规系统信息。</td>
</tr>
<tr>
<td>
<a id="a352c171" name="a352c171"></a><span class="bold">/tmp/ibmsupt/testcase</span></td>
<td>  包含演示您的系统问题的测试用例。</td>
</tr>
</tbody>
</table>
<a name="a352c173"></a>
<h3 id="a352c173">相关信息</h3>
<a name="f819ac5697mart"></a>
<p id="f819ac5697mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds2/errpt.htm#a243y989d2"><span class="bold">errpt</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds3/lslpp.htm#a228y9593"><span class="bold">lslpp</span></a> 命令、<a href="sysdumpdev.htm#a259b91a3"><span class="bold">sysdumpdev</span></a> 命令及 <a href="sysdumpstart.htm#a259b91b5"><span class="bold">sysdumpstart</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="snap.htm#Top_Of_Page">页的顶部</a> | <a href="smundefca.htm">上一页</a> | <a href="snapcore.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
