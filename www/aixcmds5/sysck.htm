<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 5，s - u - sysck 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-04-30" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="sysck 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="sysck.htm#Bot_Of_Page">页的底部</a> | <a href="syscall.htm">上一页</a> | <a href="syscorepath.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 5，s - u</h1></center>

<a name="a169f169"></a>
<h2 id="a169f169">sysck 命令</h2>
<p><a id="idx348" name="idx348"></a></p>
<a name="a169f16a"></a>
<h3 id="a169f16a">用途</h3>
<a name="f929bd4794mart"></a>
<p id="f929bd4794mart">在安装和更新过程中检查清单信息。</p>
<a name="a169f16c"></a>
<h3 id="a169f16c">语法</h3>
<p><span class="bold">sysck</span> {  <a href="sysck.htm#dnp80tayl"><span class="bold">-i</span></a> |  <a href="sysck.htm#brp100tayl"><span class="bold">-u</span></a> } [&nbsp; <a href="sysck.htm#f929bd7247mart"><span class="bold">-R</span></a> <span class="italic">RootPath&nbsp;</span>] [&nbsp; <a href="sysck.htm#nnp2c0tayl"><span class="bold">-N&nbsp;</span></a>] [  <a href="sysck.htm#vrp360tayl"><span class="bold">-v</span></a> ] [&nbsp; <a href="sysck.htm#f929bd7346mart"><span class="bold">-s</span></a> <span class="italic">SaveFile&nbsp;</span>] [&nbsp; <a href="sysck.htm#lnp280tayl"><span class="bold">-O</span></a>
{  <a href="sysck.htm#dpp220tayl"><span class="bold">r</span></a> |  <a href="sysck.htm#mpp340tayl"><span class="bold">s</span></a> |  <a href="sysck.htm#zqp220tayl"><span class="bold">u</span></a>
} ]  <a href="sysck.htm#azlp300tayl"><span class="bold">-f</span></a> <span class="italic">File</span>  <a href="sysck.htm#isp380tayl"><span class="italic">ProductName</span></a>
{&nbsp;<a href="tcbck.htm#a204120frit"><span class="bold">tcbck</span>&nbsp;<span class="italic">Flags&nbsp;</span></a>}</p>
<p>所有的 <a href="tcbck.htm#a204120frit"><span class="bold">tcbck </span></a>命令标志对该命令都是有效的。</p>
<a name="a169f16f"></a>
<h3 id="a169f16f">描述</h3>
<p></p><blockquote><a name="a39c34d8421janb"></a><span id="a39c34d8421janb" class="pk"></span><span class="bold">注：</span><span class="bold">sysck</span> 命令不支持检查大于 2 吉字节的文件。
如果一个产品需要提供大于 2 吉字节的文件，请将它们在 <span class="italic">Fileset</span> 清单中的大小和校验值设置为 <span class="bold">VOLATILE</span>, 这样 <span class="bold">sysck</span> 命令就不会尝试访问这个文件了。</blockquote>
<p></p><blockquote><a name="a221f11c"></a><span id="a221f11c" class="pk"></span><span class="bold">注：</span>所有 <a href="tcbck.htm#a204120frit"><span class="bold">tcbck</span></a> 命令标志对 <span class="bold">sysck</span> 命令都是有效的。此特征提供了与 V3.1 的兼容性。有关 <span class="bold">tcbck</span> 命令的更多信息及其标志的完全列表，请参阅<span class="italic">《AIX 5L V5.2 命令参考大全》</span>。</blockquote>
<a name="f929bd5601mart"></a>
<p id="f929bd5601mart"><span class="bold">sysck</span> 命令对照从安装和更新介质中抽取的文件来检查文件定义，并更新软件重要产品数据（SWVPD）数据库。<span class="bold">sysck</span> 命令无法识别文件名中的以下特殊字符: `, ', \, ", ^, ( ), |, {}, [], &lt;> 和 :。如果文件名中包含
这些字符的其中之一，<span class="bold">sysck</span> 命令就会失败。</p>
<a name="f929bd5770mart"></a>
<p id="f929bd5770mart"><span class="bold">sysck</span> 命令主要在软件产品的安装和更新过程中使用。</p>
<a name="f929bd5868mart"></a>
<p id="f929bd5868mart">在使用 <span class="bold">-i</span> 标志调用时，<span class="bold">sysck</span> 命令根据文件定义检查抽取的文件的属性，更新 SWPCD，并试图修正文件中可能存在的错误。</p>
<a name="f929bd5967mart"></a>
<p id="f929bd5967mart"><span class="italic">File</span> 参数是包含
文件定义的节文件名。此类文件的一个示例是 <span class="bold">/etc/security/sysck.cfg</span> 文件，尽管
 <span class="bold">syschk</span> 命令不使用这个文件。<span class="bold">sysck</span> 命令检查类型属性设为 <span class="bold">FILE</span> 的文件的大小、链接、符号链接、所有者、组和方式属性。当使用 <span class="bold">-v</span> 标志和 <span class="bold">-i</span> 标志调用时，<span class="bold">sysck</span> 也会检查文件校验和的值。</p>
<a name="f929bd6064mart"></a>
<p id="f929bd6064mart"><span class="bold">sysck</span> 命令会更新 SWVPD 数据库中每个文件的文件名、产品名、类型、校验和以及大小。</p>
<a name="f929bd6163mart"></a>
<p id="f929bd6163mart">为了修正错误，<span class="bold">sysck</span> 命令会将已安装或更新的文件的属性重新设置为在 <span class="italic">File</span> 节文件中定义的值，在 <a href="sysck.htm#a169f1ab">“修正错误”</a> 中描述的某些属性除外。</p>
<a name="f929bd6261mart"></a>
<p id="f929bd6261mart">当使用 <span class="bold">-u</span> 标志调用时，<span class="bold">sysck</span> 命令将每个属于软件产品 <span class="italic">ProductName</span> 组成部分的文件的条目从 SWVPD 数据库中除去。 <span class="bold">sysck</span> 命令也按照 SWVPD 数据库中的定义删除每个文件的任何硬链接和符号链接。</p>
<a name="a169f171"></a>
<h3 id="a169f171">标志</h3>
<p></p>
<a name="wq766"></a>
<table id="wq766" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="azlp300tayl" name="azlp300tayl"></a><span class="bold">-f</span><span class="italic"> File</span></td>
<td width="83%">  指定包含文件定义的节文件名。</td>
</tr>
<tr>
<td>
<a id="dnp80tayl" name="dnp80tayl"></a><span class="bold">-i</span></td>
<td>  检查软件产品文件的正确安装。根据文件定义更新 SWVPD 数据库，并尝试修正发现的错误。</td>
</tr>
<tr>
<td>
<a id="nnp2c0tayl" name="nnp2c0tayl"></a><span class="bold">-N</span></td>
<td>  指定不应更新 SWVPD 数据库。</td>
</tr>
<tr>
<td>
<a id="lnp280tayl" name="lnp280tayl"></a><span class="bold">-O</span> {<span class="bold">r</span>|<span class="bold">s</span>|<span class="bold">u</span>}</td>
<td>  指定要更新 SWVPD 的哪一部分，如下：
<dl>
<dt id="dpp220tayl" class="bold">
<a name="dpp220tayl"></a><span class="bold">r</span></dt>
<dd>指定 SWVPD 的根部分。
</dd>
<dt id="mpp340tayl" class="bold">
<a name="mpp340tayl"></a><span class="bold">s</span></dt>
<dd>指定 SWVPD 的 <span class="bold">/usr/share</span> 部分。
</dd>
<dt id="zqp220tayl" class="bold">
<a name="zqp220tayl"></a><span class="bold">u</span></dt>
<dd>指定 SWVPD 的 <span class="bold">/usr</span> 部分（缺省）。
</dd>
</dl></td>
</tr>
</tbody>
</table><p class="indatacontent"> </p>
<a name="wq767"></a>
<table id="wq767" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="18%">
<a id="f929bd7247mart" name="f929bd7247mart"></a><span class="bold">-R</span><span class="italic"> RootPath</span></td>
<td width="81%">  使用 <span class="italic">RootPath</span> 作为根以代替“<span class="bold">/</span>”。</td>
</tr>
<tr>
<td>
<a id="f929bd7346mart" name="f929bd7346mart"></a><span class="bold">-s</span><span class="italic"> SaveFile</span></td>
<td>  制作 VPD（Vital Product Data ：重要产品数据）中当前内容的快照，并以节格式将其保存到 <span class="italic">SaveFile</span> 指定的文件。
用 <span class="bold">-u</span> 选项调用。用这个标志不会对数据库进行操作。
必须与 <span class="bold">-f</span> 选项一起使用。例如：
<p></p>
<a name="f929bd7442mart"></a>
<pre id="f929bd7442mart" class="xmp">sysck -i -s /tmp/save.inv -f /tmp/real.inv bos.rte.shell</pre></td>
</tr>
<tr>
<td>
<a id="brp100tayl" name="brp100tayl"></a><span class="bold">-u</span></td>
<td>  从 SWVPD 中删除文件条目，并删除硬链接和符号链接。</td>
</tr>
<tr>
<td>
<a id="vrp360tayl" name="vrp360tayl"></a><span class="bold">-v</span></td>
<td>  验证校验和是否正确。</td>
</tr>
<tr>
<td>
<a id="isp380tayl" name="isp380tayl"></a><span class="italic">ProductName</span></td>
<td>  指定正在检查的可安装的软件产品或选项。</td>
</tr>
</tbody>
</table>
<a name="a169f1b1"></a>
<h4 id="a169f1b1">环境变量</h4>
<p></p>
<a name="wq768"></a>
<table id="wq768" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="15%">
<a id="a169f1b2" name="a169f1b2"></a><span class="bold">INUTREE</span></td>
<td width="85%">  环境变量 <span class="bold">INUTREE</span> 只有下列四种有效值：

<dl>
<dt id="a169f1b3" class="bold">
<a name="a169f1b3"></a><span class="bold">NULL</span></dt>
<dd>  与未设置 <span class="bold">INUTREE</span> 相同。
</dd>
<dt id="a169f1b4" class="bold">
<a name="a169f1b4"></a><span class="bold">M</span></dt>
<dd>  指定 SWVPD 的根部分。
</dd>
<dt id="a169f1b5" class="bold">
<a name="a169f1b5"></a><span class="bold">S</span></dt>
<dd>  指定 SWVPD 的 <span class="bold">/usr/share</span> 部分。
</dd>
<dt id="a169f1b6" class="bold">
<a name="a169f1b6"></a><span class="bold">U</span></dt>
<dd>  指定 SWVPD 的 <span class="bold">/usr</span> 部分（缺省）。
</dd>
</dl> 
<a name="a169f1b7"></a>
<p id="a169f1b7"><span class="bold">INUTREE</span> 可以用来代替
 <span class="bold">-O</span><span class="italic">Tree</span> 标志。</p></td>
</tr>
<tr>
<td>
<a id="a169f1b9" name="a169f1b9"></a><span class="bold">INUNOVPD</span></td>
<td>  环境变量 <span class="bold">INUNOVPD</span> 可以是空的或设置为 1。
如果设置为 1，则 <span class="bold">sysck</span> 不会更新 SWVPD。<span class="bold">INUNOVPD</span> 可用来代替
 <span class="bold">-N</span> 标志。</td>
</tr>
<tr>
<td>
<a id="a206f19" name="a206f19"></a><span class="bold">INUVERIFY</span></td>
<td>  如果将环境变量 <span class="bold">INUVERIFY</span> 设置为 1，那么 <span class="bold">sysck</span> 会验证节文件中的校验和属性是否正确。
<span class="bold">INUVERIFY</span> 可以用来代替
 <span class="bold">-v</span> 标志。</td>
</tr>
</tbody>
</table>
<a name="a169f19d"></a>
<h4 id="a169f19d">文件定义</h4>
<p></p>
<a name="wq769"></a>
<table id="wq769" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="13%">
<a id="a169f19e" name="a169f19e"></a><span class="bold">acl</span></td>
<td width="86%">  文件的访问控制表。如果该值为空，则会除去 <span class="bold">acl</span> 属性。如果没有指定值，则命令会根据访问控制表中描述的格式计算值。

<a name="a39c34d8480janb"></a>
<p id="a39c34d8480janb">属性会将 x（执行）访问权仅授权给
 root 用户和安全组的成员。该命令应该 <span class="bold">setuid</span> 为 root 用户，并且具有可信计算库属性。</p></td>
</tr>
<tr>
<td>
<a id="a169f19f" name="a169f19f"></a><span class="bold">class</span></td>
<td>  文件的逻辑组。必须指定一个值，因为不能计算得到该值。
该值是 <span class="italic">ClassName</span> [<span class="italic">ClassName</span>]。</td>
</tr>
<tr>
<td>
<a id="a169f1a0" name="a169f1a0"></a><span class="bold">checksum</span></td>
<td>  文件的校验和。如果该值为空，则会除去 <span class="bold">checksum</span> 属性。如果没有指定值，则该命令根据 <a href="sum.htm#a26f0756"><span class="bold">sum</span></a> 命令指定的格式计算值。该值是 <span class="bold">sum -r</span> 命令的输出，包含空格。</td>
</tr>
<tr>
<td>
<a id="a169f1a1" name="a169f1a1"></a><span class="bold">group</span></td>
<td>  文件组。如果该值为空，则会除去 <span class="bold">group</span> 属性。如果没有指定值，那么该命令就会计算值，它可以是组标识或组名称。</td>
</tr>
<tr>
<td>
<a id="a169f1a3" name="a169f1a3"></a><span class="bold">mode</span></td>
<td>  文件方式。如果该值为空，则会除去 <span class="bold">mode</span> 属性。如果没有指定值，则该命令计算值，它可以是八进制数字或字符串（<span class="bold">rwx</span>），并且具有 <span class="bold">TCB</span>、<span class="bold">SUID</span>、<span class="bold">SGID</span> 以及 <span class="bold">SVTX</span> 属性。</td>
</tr>
<tr>
<td>
<a id="a169f1a4" name="a169f1a4"></a><span class="bold">owner</span></td>
<td>  文件所有者。如果该值为空，则会除去 <span class="bold">owner</span> 属性。如果没有指定值，则该命令计算值，
它可以是用户标识或用户名。</td>
</tr>
<tr>
<td>
<a id="a169f1a7" name="a169f1a7"></a><span class="bold">size</span></td>
<td>  文件的大小，以字节表示。如果该值为空，则会除去 <span class="bold">size</span> 属性。在 size 字段中的 <span class="bold">VOLATILE</span> 值表示文件大小会更改（因此不能给出校验和值）。
<span class="bold">NOSIZE</span> 值表示文件为 0 长度。如果没有指定值，则该命令会计算值，该值为十进制数字。</td>
</tr>
<tr>
<td>
<a id="d776859395joyc" name="d776859395joyc"></a><span class="bold">target</span></td>
<td>  允许符号链接和硬链接在清单中以单独节存在。<span class="bold">target</span> 文件定义指向链接源的全路径名称，例如：

<p></p>
<a name="d776859430joyc"></a>
<pre id="d776859430joyc" class="xmp">/etc/foo --> /usr/bar</pre> 
<a name="d776859466joyc"></a>
<p id="d776859466joyc"><span class="bold">target</span> 为 <tt>/usr/bar</tt>。</p></td>
</tr>
<tr>
<td>
<a id="a169f1a9" name="a169f1a9"></a><span class="bold">type</span></td>
<td>  文件类型。该值不能为空。如果没有指定值，则该命令会计算值，它可以是 <span class="bold">FILE</span>、<span class="bold">DIRECTORY</span>、<span class="bold">FIFO</span>、<span class="bold">BLK_DEV</span>、<span class="bold">CHAR_DEV</span>、<span class="bold">LINK</span>、<span class="bold">MPX_DEV</span> 和 <span class="bold">SYMLINK</span> 关键字。</td>
</tr>
<tr>
<td>
<a id="a169f1aa" name="a169f1aa"></a><span class="bold">xacl</span></td>
<td>  对扩展访问控制表的添加。因为不能计算该值，所以值必须指定为扩展访问控制表中的单个条目。该属性仅在使用 <span class="bold">-i</span> 标志时有效。关于格式的更多信息，请参阅上述的 <a href="sysck.htm#a169f19e"><span class="bold">acl</span></a> 文件定义。</td>
</tr>
</tbody>
</table>
<a name="a169f1ab"></a>
<h3 id="a169f1ab">修正错误</h3>
<a name="f929bd9613mart"></a>
<p id="f929bd9613mart">为了修正错误，<span class="bold">sysck</span> 命令会将已安装或已更新的文件的属性重新设置为在 <span class="italic">File</span> 节文件中定义的值，下列的属性例外。对于这些属性，<span class="bold">sysck</span> 命令的操作如下所述：</p>
<a name="wq770"></a>
<table id="wq770" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="13%">
<a id="a169f1ad" name="a169f1ad"></a><span class="bold">links</span></td>
<td width="86%">  创建任何缺失的硬链接。如果存在链接指向本定义中未列出的文件，则删除该链接。</td>
</tr>
<tr>
<td>
<a id="a169f1ae" name="a169f1ae"></a><span class="bold">program</span></td>
<td>  如果该属性包含在 <span class="italic">File</span> 节文件中，<span class="bold">sysck</span> 会调用该程序。如果发生错误，会打印出一条消息，但不采取其它的操作。</td>
</tr>
<tr>
<td>
<a id="a169f1b0" name="a169f1b0"></a><span class="bold">symlinks</span></td>
<td>  创建缺失的符号链接。如果存在链接指向本定义中未列出的文件，则删除该链接。</td>
</tr>
</tbody>
</table>
<a name="a169f175"></a>
<h3 id="a169f175">安全性</h3>
<a name="f929bd9985mart"></a>
<p id="f929bd9985mart">特权控制：只有 root 用户才能运行该命令。</p>
<a name="a169f182"></a>
<h3 id="a169f182">示例</h3>
<ol type="1">
<li><a name="db69bc3965joyc"></a><span id="db69bc3965joyc" class="pk"></span>使用 <span class="bold">installp</span> 命令安装的产品在其映像中提供一个清单文件。要将定义添加到清单数据库并检查许可权、链接、校验和等，输入：
<a id="db69bc4002joyc" name="db69bc4002joyc"></a>
<div class="lines"><tt>sysck&nbsp;&nbsp;<a href="sysck.htm#dnp80tayl">-i</a>&nbsp;&nbsp;<a href="sysck.htm#azlp300tayl">-f</a> dude.rte.inventory dude.rte</tt><br />
</div> 其中 <tt>dude.rte.inventory</tt> 与下列格式相似：

<p></p>
<a name="db69bc4079joyc"></a>
<pre id="db69bc4079joyc" class="xmp">/usr/bin/dude.exec:
&nbsp;&nbsp;&nbsp;class = apply,inventory,dude.rte
&nbsp;&nbsp;&nbsp;owner = bin
&nbsp;&nbsp;&nbsp;group = bin
&nbsp;&nbsp;&nbsp;mode = 555
&nbsp;&nbsp;&nbsp;type = FILE
&nbsp;&nbsp;&nbsp;size = 2744
&nbsp;&nbsp;&nbsp;checksum = "04720        3"</pre></li>
<li><a name="db69bc4117joyc"></a><span id="db69bc4117joyc" class="pk"></span>要除去指向已从系统除去的产品文件的链接并将这些文件从库存数据库中除去，输入：

<a id="db69bc4154joyc" name="db69bc4154joyc"></a>
<div class="lines"><tt>sysck&nbsp;&nbsp;<a href="sysck.htm#brp100tayl">-u</a>&nbsp;&nbsp;<a href="sysck.htm#azlp300tayl">-f</a> dude.rte.inventory dude.rte</tt><br />
</div></li></ol>
<a name="a169f18e"></a>
<h3 id="a169f18e">文件</h3>
<p></p>
<a name="wq772"></a>
<table id="wq772" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="55%">
<a id="a169f1bc" name="a169f1bc"></a><span class="bold">/etc/objrepos/inventory</span></td>
<td width="45%">  在根上指定软件产品文件的名称和位置。</td>
</tr>
<tr>
<td>
<a id="a169f1bd" name="a169f1bd"></a><span class="bold">/usr/lib/objrepos/inventory</span></td>
<td>  在 <span class="bold">/usr</span> 文件系统里指定软件产品文件的名称和位置。</td>
</tr>
<tr>
<td>
<a id="a169f190" name="a169f190"></a><span class="bold">/usr/share/lib/objrepos/inventory</span></td>
<td>  在 <span class="bold">/usr/share</span> 文件系统里指定软件产品文件的名称和位置。</td>
</tr>
</tbody>
</table>
<a name="a169f191"></a>
<h3 id="a169f191">相关信息</h3>
<a name="f929bdb457mart"></a>
<p id="f929bdb457mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds5/cmds/aixcmds3/installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令、<a href="sum.htm#a26f0756"><span class="bold">sum</span></a> 命令以及 <a href="tcbck.htm#a204120frit"><span class="bold">tcbck</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="sysck.htm#Top_Of_Page">页的顶部</a> | <a href="syscall.htm">上一页</a> | <a href="syscorepath.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds502.htm#wq1667">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
