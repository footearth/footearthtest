<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - rdist 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="rdist 命令, rdist, 命令, 用 rdist 命令,
在多个主机上, 发布相同的文件副本, 使用 rdist 命令发布, 在多个主机上，分布,
相同的文件副本, 文件副本，相同, 使用 rdist 命令, 分布相同文件副本, 多个主机,
主机，多个" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="rdist.htm#Bot_Of_Page">页的底部</a> | <a href="rcvtty.htm">上一页</a> | <a href="rdistd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>
<a id="idx479" name="idx479"></a><a id="idx480" name="idx480"></a><a id="idx481" name="idx481"></a><a id="idx482" name="idx482"></a><a id="idx483" name="idx483"></a>
<a name="ntm70sara"></a>
<h2 id="ntm70sara">rdist 命令</h2>
<p>该文档描述位于 <span class="bold">/usr/bin/rdist</span> 文件中的早期 AIX <a href="rdist.htm#usr_bin_rdist"><span class="bold">rdist</span></a> 命令和与 <span class="bold">rdistd</span> 守护程序一起使用的新的 <a href="rdist.htm#usr_sbin_rdist"><span class="bold">/usr/sbin/rdist</span></a> 命令。</p>
<a name="usr_bin_rdist"></a>
<h3 id="usr_bin_rdist">/usr/bin/rdist 命令</h3>
<a name="wq1519"></a>
<h3 id="wq1519">用途</h3>
<a name="f0b18f9565mart"></a>
<p id="f0b18f9565mart">远程文件分布客户机程序</p>
<a name="a213x9bd07"></a>
<h3 id="a213x9bd07">语法</h3>
<a name="wq1520"></a>
<h4 id="wq1520">使用发布文件</h4>
<p><span class="bold">rdist</span> [&nbsp; <a href="rdist.htm#a213x9bd15"><span class="bold">-n&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd16"><span class="bold">-q&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd0e"><span class="bold">-b&nbsp;</span></a>]
[&nbsp; <a href="rdist.htm#pyg9380jbau"><span class="bold">-D&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd17"><span class="bold">-R&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd12"><span class="bold">-h&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd13"><span class="bold">-i&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd18"><span class="bold">-v&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bd19"><span class="bold">-w&nbsp;</span></a>]
[&nbsp; <a href="rdist.htm#a213x9bd1a"><span class="bold">-y&nbsp;</span></a>] [&nbsp; <a href="rdist.htm#a213x9bcfc"><span class="bold">-f</span></a><span class="italic"> FileName&nbsp;</span>] [&nbsp; <a href="rdist.htm#a213x9bd11"><span class="bold">-d&nbsp;</span></a><span class="italic">Argument</span><span class="bold">=</span><span class="italic">Value&nbsp;</span>] [&nbsp; <a href="rdist.htm#a213x9bd14"><span class="bold">-m&nbsp;</span></a><span class="italic">Host&nbsp;</span>]<span class="italic">&nbsp;</span>... [&nbsp;<span class="italic">Name&nbsp;</span>]<span class="italic">&nbsp;</span>...</p>
<a name="wq1521"></a>
<h4 id="wq1521">以一个小的发布文件解释参数</h4>
<p><span class="bold">rdist</span> [&nbsp;<span class="bold">-n&nbsp;</span>] [&nbsp;<span class="bold">-q&nbsp;</span>] [&nbsp;<span class="bold">-b&nbsp;</span>] [&nbsp;<span class="bold">-D&nbsp;</span>] [&nbsp;<span class="bold">-R&nbsp;</span>] [&nbsp;<span class="bold">-h&nbsp;</span>] [&nbsp;<span class="bold">-i&nbsp;</span>] [&nbsp;<span class="bold">-v&nbsp;</span>] [&nbsp;<span class="bold">-w&nbsp;</span>] [&nbsp;<span class="bold">-y&nbsp;</span>]  <a href="rdist.htm#a213x9bd0f"><span class="bold">-c</span></a><span class="italic">&nbsp;Name&nbsp;...</span><span class="bold">&nbsp;</span>[&nbsp;<span class="italic">Login</span><span class="bold">@&nbsp;</span>] <span class="italic">Host</span> [&nbsp;<span class="bold">:</span><span class="italic">Destination&nbsp;</span>]</p>
<a name="a213x9bd09"></a>
<h3 id="a213x9bd09">描述</h3>
<div class="attention"><span class="attentiontitle">注意: </span>不要试图使用 <span class="bold">rdist</span> 命令发送容量大于 2G 的文件给先于 AIX 4.2 或者非 AIX 机器。
这样做会导致未定义的行为，少数情况下会丢失数据。</div>
<a name="f0b18fa525mart"></a>
<p id="f0b18fa525mart"><span class="bold">rdist</span> 命令维护多个主机上的相同文件副本。<span class="bold">rdist</span> 命令保存文件的所有者、组、模式和修改时间，也可能更新正在运行的程序。<span class="bold">rdist</span> 命令能接收来自下列来源的导向信息：</p>
<ul>
<li><a name="c14c6bb716sylv"></a><span id="c14c6bb716sylv" class="pk"></span>缺省的<a href="rdist.htm#cyk2350sara">发布文件</a>，<span class="bold">distfile</span> 文件，此文件位于 <span class="bold">$HOME</span> 目录中。</li>
<li><a name="c14c6bb872sylv"></a><span id="c14c6bb872sylv" class="pk"></span>一个不同的发布文件，此文件由 <a href="rdist.htm#a213x9bcfc"><span class="bold">-f</span> 标志指定。</a>。</li>
<li><a name="c14c6bc173sylv"></a><span id="c14c6bc173sylv" class="pk"></span>在发布文件中增加或重载变量定义的命令行参数</li>
<li><a name="c14c6bc397sylv"></a><span id="c14c6bc397sylv" class="pk"></span>作为一个小的发布文件使用的命令行参数。</li></ul>
<a name="f0b18fb144mart"></a>
<p id="f0b18fb144mart">如果不使用 <span class="bold">-f</span> 标志，<span class="bold">rdist</span> 命令会在 <span class="bold">$HOME</span>目录中查找 <span class="bold">distfile</span> 文件。如果找不到 <span class="bold">distfile</span> 文件，就会查找<span class="bold">Distfile</span> 文件。</p>
<a name="f0b18fb297mart"></a>
<p id="f0b18fb297mart">由 <span class="italic">Name</span> 参数指定的值作为一个要更新的文件名或一个要执行的子命令读入。如果在命令行中不为 <span class="italic">Name</span> 参数指定值，<span class="bold">rdist</span> 命令会更新发布文件中列出的所有文件和目录。如果为 <span class="italic">Name</span> 参数指定<span class="bold">-</span>（负号），<span class="bold">rdist</span> 命令使用标准输入。如果由 <span class="italic">Name</span> 参数指定的文件名与子命令的名称相同，<span class="bold">rdist</span> 命令把 <span class="italic">Name</span> 参数解释为一个子命令。</p>
<a name="f0b18fb445mart"></a>
<p id="f0b18fb445mart"><span class="bold">rdist</span> 命令需要在每个主机上配置 <span class="bold">.rhosts</span> 文件。详细信息请参阅 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/rhosts.htm#i39340sara">".rhosts File Format for TCP/IP"</a><span class="italic">AIX 5L Version 5.2 Files Reference</span></p>
<a name="wq1522"></a>
<div class="notelisttitle" id="wq1522">注:</div>
<ol type="1">
<li><a name="d7f7f7e167jani"></a><span id="d7f7f7e167jani" class="pk"></span>如果 <span class="bold">rdist</span> 命令在一个远程主机上的 <span class="bold">/usr/bin/rdist</span> 目录中不存在，则创建一个从 <span class="bold">/usr/bin/rdist</span> 目录到 <span class="bold">rdist</span> 命令实际位置的链接。该位置通常是 <span class="bold">/usr/ucb/rdist</span> 目录。</li>
<li><a name="d7f7f7e278jani"></a><span id="d7f7f7e278jani" class="pk"></span>当前，<span class="bold">rdist</span> 命令仅能处理 7 位 ASCII 文件名。</li>
</ol>
<a name="a213x9bd0d"></a>
<h3 id="a213x9bd0d">标志</h3>
<p></p>
<a name="wq1524"></a>
<table id="wq1524" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a213x9bd0e" name="a213x9bd0e"></a><span class="bold">-b</span></td>
<td width="76%">  如果它们不相同，执行二进制比较并更新文件。</td>
</tr>
<tr>
<td>
<a id="a213x9bd0f" name="a213x9bd0f"></a><span class="bold">-c</span></td>
<td>  引导 <span class="bold">rdist</span> 命令把剩余的参数当作一个小发布文件解释。可用的参数是：
<dl>
<dt class="bold"><span class="italic">Name</span></dt>
<dd>  指定单一名称或由空格隔开的名称列表。值可以是一个文件名也可以是一个子命令。
</dd>
<dt class="bold">[<span class="italic">Login</span><span class="bold">@</span>]<span class="italic">Host</span></dt>
<dd>  指定要更新的主机，有时指定更新的要通知的登录名称。
</dd>
<dt id="a53c014658" class="bold">
<a name="a53c014658"></a><span class="italic">Destination</span></dt>
<dd>  如果 <span class="italic">Name</span> 参数指定了一个单一的名称则指定为远程主机上的文件；如果指定了多个名称，则指定一个目录。
</dd>
</dl>
<a name="wq1525"></a>
<div class="notetitle" id="wq1525">注:</div>
<div class="notebody">不要把 <span class="bold">-c</span> 标志与 <span class="bold">-f</span>、<span class="bold">-d</span> 或 <span class="bold">-m</span> 标志一起使用。</div></td>
</tr>
<tr>
<td>
<a id="a213x9bd11" name="a213x9bd11"></a><span class="bold">-d</span><span class="italic"> Argument</span><span class="bold">=</span><span class="italic">Value</span></td>
<td>  定义 <span class="italic">Argument</span> 变量，此变量具有 <span class="italic">Value</span> 变量指定的值。<span class="bold">-d</span> 标志在 <span class="bold">distfile</span> 文件中定义或重设变量定义。<span class="italic">Value</span> 可以被指定为一个空字符串、名称或由圆括号包围并由制表符或空格隔开的名称列表。</td>
</tr>
<tr>
<td>
<a id="pyg9380jbau" name="pyg9380jbau"></a><span class="bold">-D</span></td>
<td>  打开调试输出。</td>
</tr>
<tr>
<td>
<a id="a213x9bcfc" name="a213x9bcfc"></a><span class="bold">-f</span><span class="italic"> FileName</span></td>
<td>  指定发布文件的名称。如果不使用 <span class="bold">-f</span> 标志，在 <span class="bold">$HOME</span> 目录中，缺省值是 <span class="bold">distfile</span> 或 <span class="bold">Distfile</span> 文件。</td>
</tr>
<tr>
<td>
<a id="a213x9bd12" name="a213x9bd12"></a><span class="bold">-h</span></td>
<td>  复制链接指向的文件，而不是链接本身。</td>
</tr>
<tr>
<td>
<a id="a213x9bd13" name="a213x9bd13"></a><span class="bold">-i</span></td>
<td>  忽略未解决的链接。<span class="bold">rdist</span> 命令维护正在传输的文件的链接结构，并在不能找到所有链接的情况下给用户警告。</td>
</tr>
<tr>
<td>
<a id="a213x9bd14" name="a213x9bd14"></a><span class="bold">-m</span><span class="italic"> Host</span></td>
<td>  限定被更新的机器。可以使用 <span class="bold">-m</span><span class="italic"> Host</span> 选项多次以限制列在 <span class="bold">distfile</span> 文件中的主机子集的更新。</td>
</tr>
<tr>
<td>
<a id="a213x9bd15" name="a213x9bd15"></a><span class="bold">-n</span></td>
<td>  打印子命令而不执行它们。使用 <span class="bold">-n</span> 标志调试 <span class="bold">distfile</span> 文件。</td>
</tr>
<tr>
<td>
<a id="a213x9bd16" name="a213x9bd16"></a><span class="bold">-q</span></td>
<td>  在静默模式下操作。<span class="bold">-q</span> 选项禁止在标准输出上打印修改的文件。</td>
</tr>
<tr>
<td>
<a id="a213x9bd17" name="a213x9bd17"></a><span class="bold">-R</span></td>
<td>  除去外部的文件。如果更新了一个目录，那么在远程主机上除主目录上的所有文件都会被除去。
使用 <span class="bold">-R</span> 标志维护相同目录副本。</td>
</tr>
<tr>
<td>
<a id="a213x9bd18" name="a213x9bd18"></a><span class="bold">-v</span></td>
<td>  验证所有主机上的最新的文件；列出过期的文件。而 <span class="bold">rdist -v</span> 命令既不改变文件也不发送邮件。当它们一起使用时，这个标志会覆盖<span class="bold">-b</span> 标志。</td>
</tr>
<tr>
<td>
<a id="a213x9bd19" name="a213x9bd19"></a><span class="bold">-w</span></td>
<td>  为目标目录名追加完整的文件路径名。通常，<span class="bold">rdist</span> 命令仅使用名称的最后组成部分以重命名文件，保留所复制文件的目录结构。</td>
</tr>
<tr>
<td>
<a id="c14c6bf566sylv" name="c14c6bf566sylv"></a>&nbsp;</td>
<td>  当 <span class="bold">-w</span> 标志与以 ~  (代字号) 开头的文件名一起使用时，除主目录以外的所有东西都被追加到目标名称。对其余的文件名称，不以 / (斜杠) 或  ~ (代字号) 开头的文件名称使用目标用户的主目录作为根目录。</td>
</tr>
<tr>
<td>
<a id="a213x9bd1a" name="a213x9bd1a"></a><span class="bold">-y</span></td>
<td>  防止最近的文件副本被旧文件副本替换。当时间戳记和大小不同时，通常文件会被更新。<span class="bold">-y</span> 标志防止 <span class="bold">rdist</span> 命令更新比主文件新的文件。</td>
</tr>
</tbody>
</table>
<a name="cyk2350sara"></a>
<h3 id="cyk2350sara">发布文件（distfile File）</h3>
<a name="f0b18fd514mart"></a>
<p id="f0b18fd514mart">发布文件指定要复制的文件，为发布指定目标主机，和当使用 <span class="bold">rdist</span> 命令发布更新文件时执行的操作。通常，<span class="bold">rdist</span> 命令在 <span class="bold">$HOME</span> 目录中使用 <span class="bold">distfile</span> 文件。如果使用 <span class="bold">-f</span> 标志可以指定一个不同的文件。</p>
<a name="rz8pg276jbau"></a>
<h4 id="rz8pg276jbau">记录格式</h4>
<a name="f0b18fd872mart"></a>
<p id="f0b18fd872mart">每个发布文件的记录都有如下格式：</p>
<a name="wq1526"></a>
<table id="wq1526" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%">
<a id="c14c6c0642sylv" name="c14c6c0642sylv"></a><span class="italic">VariableName&nbsp;</span><span class="bold">=&nbsp;</span><span class="italic">NameList</span></td>
<td width="50%">  定义用于发布文件的其它记录变量<span class="italic">SourceList</span>, <span class="italic">DestinationList</span>,
或 <span class="italic">SubcommandList</span>)。</td>
</tr>
<tr>
<td colspan="2">
<a id="c14c6c0827sylv" name="c14c6c0827sylv"></a>[<span class="italic">Label</span><span class="bold">:</span>]&nbsp;<span class="italic">SourceList&nbsp;</span><span class="bold">-&gt;&nbsp;</span><span class="italic">DestinationList&nbsp;SubcommandList</span></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  引导<span class="bold"> rdist</span> 命令发布在 <span class="italic">SourceList</span> 变量中命名的文件到主机，主机在 <span class="italic">DestinationList</span> 变量中命名。发布文件命令执行其它功能。</td>
</tr>
<tr>
<td colspan="2">
<a id="c14c6c0986sylv" name="c14c6c0986sylv"></a>[<span class="italic">Label</span><span class="bold">:</span>]&nbsp;<span class="italic">SourceList&nbsp;</span><span class="bold">::&nbsp;</span><span class="italic">TimeStampFile&nbsp;SubcommandList</span></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  引导 <span class="bold">rdist</span> 命令以更新自给定的日期后改变了的文件。发布文件子命令执行其它功能。如果文件比时间戳记文件新，那么更新每个用 <span class="italic">SourceList</span> 变量指定的文件。此格式对于恢复文件是有用的。</td>
</tr>
</tbody>
</table>
<a name="f0b18fe237mart"></a>
<p id="f0b18fe237mart">标号是可选的，并用于为部分更新标识一个子命令。</p>
<a name="c14c6c1298sylv"></a>
<h4 id="c14c6c1298sylv">记录</h4>
<p></p>
<a name="wq1527"></a>
<table id="wq1527" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="c14c6c1456sylv" name="c14c6c1456sylv"></a><span class="italic">VariableName</span></td>
<td width="75%">  标识在发布文件中使用的变量。</td>
</tr>
<tr>
<td>
<a id="c14c6c1625sylv" name="c14c6c1625sylv"></a><span class="italic">NameList</span></td>
<td>  指定一个文件、目录、主机或子命令的列表。</td>
</tr>
<tr>
<td>
<a id="c14c6c1842sylv" name="c14c6c1842sylv"></a><span class="italic">SourceList</span></td>
<td>  在本地主机上为 <span class="bold">rdist</span> 命令指定文件和目录来作为发布的主副本使用。</td>
</tr>
<tr>
<td>
<a id="c14c6c2191sylv" name="c14c6c2191sylv"></a><span class="italic">DestinationList</span></td>
<td>  表示接收文件副本的主机。</td>
</tr>
<tr>
<td>
<a id="c14c6c2353sylv" name="c14c6c2353sylv"></a><span class="italic">SubcommandList</span></td>
<td>  列出要执行的发布文件子命令。</td>
</tr>
</tbody>
</table>
<a name="f0b18fe812mart"></a>
<p id="f0b18fe812mart"><span class="bold">rdist</span> 命令把换行字符、制表符和空格当作分隔符处理。用于扩展的发布文件变量以一个 $（美元符号）开头，后面接一个单独的字符或一个以 {} (大括号) 括起来的名称。注释以 #（磅号）开头并以一个换行字符结尾。</p>
<a name="c14c6c2752sylv"></a>
<h4 id="c14c6c2752sylv">源和目标列表格式</h4>
<a name="f0b18ff033mart"></a>
<p id="f0b18ff033mart">发布文件源和目标列表包含零个或多个用空格分隔的名称，具有如下格式：</p>
<a name="f0b18ff177mart"></a>
<p id="f0b18ff177mart">[<span class="italic">Name1</span>] [<span class="italic">Name2</span>] [<span class="italic">Name3</span>] ...</p>
<a name="f0b18ff325mart"></a>
<p id="f0b18ff325mart"><span class="bold">rdist</span> 命令在本地主机上标识并扩展如下 shell 元字符，其方式与 <span class="bold">csh</span> 命令相同。</p>
<ul>
<li><a name="d7f7f82141jani"></a><span id="d7f7f82141jani" class="pk"></span>[（左括弧）</li>
<li><a name="d7f7f82236jani"></a><span id="d7f7f82236jani" class="pk"></span>]（右括弧）</li>
<li><a name="d7f7f82350jani"></a><span id="d7f7f82350jani" class="pk"></span>{ (左大括弧)</li>
<li><a name="d7f7f82434jani"></a><span id="d7f7f82434jani" class="pk"></span>} (右大括弧)</li>
<li><a name="d7f7f82564jani"></a><span id="d7f7f82564jani" class="pk"></span>(（左圆括弧）</li>
<li><a name="d7f7f82689jani"></a><span id="d7f7f82689jani" class="pk"></span>)（右圆括弧）</li>
<li><a name="d7f7f82864jani"></a><span id="d7f7f82864jani" class="pk"></span>*（星号）</li>
<li><a name="d7f7f83113jani"></a><span id="d7f7f83113jani" class="pk"></span>? （问号）</li></ul>
<a name="f0b18ff976mart"></a>
<p id="f0b18ff976mart">为了防止这些字符被扩展，在它们之前加上一个 \ (反斜杠)。<span class="bold">rdist</span> 命令也扩展 ~ (代字号)，其方法与 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds1/csh.htm#a27991075"><span class="bold">csh</span></a> 命令相同，但在本地和目标主机上分别进行。</p>
<a name="c14c6c3340sylv"></a>
<h4 id="c14c6c3340sylv">发布文件子命令</h4>
<a name="f0b1900194mart"></a>
<p id="f0b1900194mart">用于 shell 的多个命令必须用 ;（分号）分隔。命令在正在更新的主机上的用户主目录中执行。<span class="bold">special</span> 子命令用于更新程序后重建专用的数据库。</p>
<a name="f0b1900341mart"></a>
<p id="f0b1900341mart">发布文件子命令列表可以包含零个或多个下列子命令：</p>
<a name="wq1528"></a>
<table id="wq1528" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="39%">
<a id="c14c6c3722sylv" name="c14c6c3722sylv"></a><span class="bold">install</span><span class="italic"> Options</span> [<span class="italic">OptionalDestName</span>]<span class="bold">;</span></td>
<td width="60%">复制过期的文件和目录。<span class="bold">rdist</span> 命令把每个源文件或目录复制到目标列表中的每个主机上。由<span class="italic"> Options</span> 变量指定的有效选项是 <span class="bold">rdist</span> 命令标志 <span class="bold">-b</span>, <span class="bold">-h</span>, <span class="bold">-i</span>,<span class="bold"> -R</span>,<span class="bold"> -v</span>, <span class="bold">-w</span>,
和 <span class="bold">-y</span>。这选项仅用于由 <span class="italic">SourceList</span> 变量指定的文件。当使用 <span class="bold">-R</span> 标志时，如果在主机上没有相应的文件名称，非空目录会被除去。<span class="italic">OptionalDestName</span> 参数重命名文件。
<a name="c14c6c3857sylv"></a>
<p id="c14c6c3857sylv">如果没有 <span class="bold">install</span> 子命令出现在子命令列表中，或者目标名称没有被指定，将会使用源文件名。如果在远程主机上不存在路径名中的目录，就创建它们。在目标主机上使用的登录名称与本地主机上的相同，除非目标名称具有格式&nbsp;<span class="italic">login</span><span class="bold"> @</span><span class="italic">host</span>。</p></td>
</tr>
<tr>
<td>
<a id="c14c6c3957sylv" name="c14c6c3957sylv"></a><span class="bold">notify</span><span class="italic"> NameList</span><span class="bold">;</span></td>
<td>发送邮件更新的文件列表和可能产生的任何错误到所列表名（<span class="italic">NameList</span> 参数）。如果没有 <span class="bold">@</span> (符号 "@") 出现在名称中，目标主机追加给名称（ <span class="italic">name</span><span class="bold">@</span><span class="italic">host</span>）。</td>
</tr>
<tr>
<td>
<a id="c14c6c4064sylv" name="c14c6c4064sylv"></a><span class="bold">except</span><span class="italic"> NameList</span><span class="bold">;</span></td>
<td>导致 <span class="bold">rdist</span> 命令更新所有由 <span class="italic">SourceList</span> 记录指定的文件，那些由 <span class="italic">NameList</span> 变量指定的文件除外。</td>
</tr>
<tr>
<td>
<a id="c14c6c4417sylv" name="c14c6c4417sylv"></a><span class="bold">except_pat</span><span class="italic"> NameList</span><span class="bold">;</span></td>
<td>防止 <span class="bold">rdist</span> 命令更新任何包含字符串与 <span class="italic">NameList</span> 变量指定的列表中的成员相匹配的文件。</td>
</tr>
<tr>
<td>
<a id="c14c6c6024sylv" name="c14c6c6024sylv"></a><span class="bold">special</span><span class="italic"> NameList</span><span class="bold"> "</span><span class="italic">String</span><span class="bold">";</span></td>
<td>指定 shell 命令（<span class="bold">"</span><span class="italic">String</span><span class="bold">"</span> 变量） 在远程主机上执行，在此之前，更新或安装由　<span class="italic">NameList</span> 变量指定的文件。如果省略了 <span class="italic">NameList</span> 变量，对每个更新或安装的文件执行 shell。shell 变量 <span class="bold">FILE</span> 在 <span class="bold">rdist</span> 命令执行 <span class="bold">"</span><span class="italic">String</span><span class="bold">"</span> 变量前被设置为当前文件名称。<span class="bold"> "</span><span class="italic">String</span><span class="bold">"</span> 值必须用 <span class="bold">" "</span>（双引号）括起来，并能在发布文件中跨越多行。</td>
</tr>
</tbody>
</table>
<a name="c14c6c6943sylv"></a>
<h3 id="c14c6c6943sylv">退出状态</h3>
<a name="f0b1901061mart"></a>
<p id="f0b1901061mart">此命令返回下列出口值:</p>
<a name="wq1529"></a>
<table id="wq1529" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="c14c6c7285sylv" name="c14c6c7285sylv"></a><span class="bold">0</span></td>
<td width="95%">成功完成。</td>
</tr>
<tr>
<td>
<a id="c14c6c7438sylv" name="c14c6c7438sylv"></a><span class="bold">&gt;0</span></td>
<td>指定错误发生。</td>
</tr>
</tbody>
</table>
<a name="c14c6c7581sylv"></a>
<h3 id="c14c6c7581sylv">示例</h3>
<a name="c14c6c7735sylv"></a>
<h4 id="c14c6c7735sylv">格式示例：VariableName&nbsp;=&nbsp;NameList</h4>
<ol type="1">
<li><a name="c14c6c7898sylv"></a><span id="c14c6c7898sylv" class="pk"></span>为了指明主机文件要更新，按以下行输入：
<p></p>
<a name="c14c6c8045sylv"></a>
<pre id="c14c6c8045sylv" class="xmp">HOSTS&nbsp;=(&nbsp;matisse&nbsp;root@arpa&nbsp;)</pre><p class="indatacontent"> 此处 <tt>HOSTS</tt> 变量被定义为 <tt>matisse</tt> 和 <tt>root@arpa</tt>。<span class="bold">rdist</span> 命令更新在 <tt>matisse</tt> 和 <tt>root@arpa</tt>主机上的文件。
可以把这个变量作为目标列表使用。</p></li>
<li><a name="c14c6c8405sylv"></a><span id="c14c6c8405sylv" class="pk"></span>为指明作为 <span class="italic">SourceList</span> 记录值使用的名称，请输入类似如下的行：
<p></p>
<a name="c14c6c8565sylv"></a>
<pre id="c14c6c8565sylv" class="xmp">FILES&nbsp;=&nbsp;(&nbsp;/bin&nbsp;/lib/usr/bin&nbsp;/usr/games
&nbsp;&nbsp;&nbsp;&nbsp;/usr/include/{*.h,{stand,sys,vax*,pascal,machine}/*.h}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/lib&nbsp;/usr/man/man?&nbsp;/usr/ucb&nbsp;/usr/local/rdist&nbsp;)</pre><p class="indatacontent"> 此处 <tt>FILES</tt> 值定义为为 <span class="italic">SourceList</span> 记录使用的文件。</p></li>
<li><a name="c14c6c8892sylv"></a><span id="c14c6c8892sylv" class="pk"></span>为指明哪些文件需从更新进程中排除，请输入类似如下的行：
<p></p>
<a name="c14c6c9070sylv"></a>
<pre id="c14c6c9070sylv" class="xmp">EXLIB&nbsp;=&nbsp;(&nbsp;Mail.rc&nbsp;aliases&nbsp;aliases.dir&nbsp;aliases.pag&nbsp;crontab&nbsp;dshrc
&nbsp;&nbsp;&nbsp;&nbsp;sendmail.cf&nbsp;sendmail.fc&nbsp;sendmail.hf&nbsp;sendmail.st&nbsp;uucp&nbsp;vfont)</pre><p class="indatacontent"> 此处 <tt>EXLIB</tt> 值被定义为一个文件列表以从更新进程中排除。</p></li>
<li>将所有文件从 <span class="bold">/usr/src/bin</span> 复制到 <span class="bold"> arpa</span>，扩展 <span class="italic">namelist</span> 变量以使除那些存在于 <span class="italic">namelist</span> 变量的文件和具有 <tt>.o</tt> 扩展名的全部文件被复制：
<p></p>
<pre class="xmp">/usr/src/bin -&gt;arpa
except_pat(\e\e.o\e ${&lt;namelist&gt; /SCCS\e ${&lt;namelist&gt;}</pre> 
<p>或　</p>
<p></p>
<pre class="xmp">/usr/src/bin -&gt;arpa
except_pat(\\.o\e ${&lt;namelist&gt; /SCCS\e ${&lt;namelist&gt;}</pre></li>
<li>从 <span class="bold">/usr/src/bin</span> 到 <span class="bold">arpa</span> 复制全部文件，那些具有 <tt>.o</tt> 扩展名的除外：
<p></p>
<pre class="xmp">/usr/src/bin -&gt;arpa
except_pat(\\.o\$ /SCCS\$</pre></li></ol>
<a name="c14c6c9404sylv"></a>
<h4 id="c14c6c9404sylv">格式示例：[label:]&nbsp;SourceList&nbsp;-&nbsp;DestinationList
SubcommandList</h4>
<ol type="1">
<li><a name="c14c6c9570sylv"></a><span id="c14c6c9570sylv" class="pk"></span>为复制一个文件源列表到主机的目标列表，请输入类似如下的行：
<p></p>
<a name="c14c6c9747sylv"></a>
<pre id="c14c6c9747sylv" class="xmp">${FILES}&nbsp;-&gt;${HOSTS}
&nbsp;&nbsp;&nbsp;&nbsp;install&nbsp;-R
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;/usr/lib/${EXLIB}&nbsp;&nbsp;;
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;/usr/games/lib&nbsp;&nbsp;;
&nbsp;&nbsp;&nbsp;&nbsp;special&nbsp;/usr/sbin/sendmail&nbsp;"/usr/sbin/sendmail.bz"&nbsp;&nbsp;;</pre><p class="indatacontent"> 行的 [<span class="italic">Label</span><span class="bold">:</span>] 记录是可选的，并不在此处出现。$（美元标记）和 {} (大括号) 导致文件名 <tt>FILES</tt>, <tt>HOSTS</tt> 和 <tt>EXLIB</tt> 扩展成前面的示例为它们指明的列表。示例的余下部分包含子命令列表。</p></li>
<li><a name="c14c6ca100sylv"></a><span id="c14c6ca100sylv" class="pk"></span>为使用〔<span class="italic">Label</span><span class="bold">:</span>〕记录，请输入下列行：
<p></p>
<a name="c14c6ca290sylv"></a>
<pre id="c14c6ca290sylv" class="xmp">srcsL:
/usr/src/bin&nbsp;-&gt;&nbsp;arpa
&nbsp;&nbsp;&nbsp;&nbsp;except_pat&nbsp;(\e\e.o\e$&nbsp;/SCCS\e$&nbsp;)&nbsp;;</pre> 
<p>标号是 <tt>srcsL:</tt> 并可用于为更新而标识该记录。<tt>/usr/src/bin</tt> 文件是被复制的源而主机 <tt>arpa</tt> 是复制的目的地。第三行包含一个来自子命令列表的子命令。</p></li>
<li><a name="c14c6ca720sylv"></a><span id="c14c6ca720sylv" class="pk"></span>为使用时间戳记文件，请输入类似如下的行:
<p></p>
<a name="c14c6ca894sylv"></a>
<pre id="c14c6ca894sylv" class="xmp">${FILES}&nbsp;::&nbsp;stamp.cory
&nbsp;&nbsp;&nbsp;&nbsp;notify&nbsp;root@cory</pre><p class="indatacontent"> $（美元符号）和 {} (大括号) 引起由 <tt>FILES</tt> 指定的名称扩展成为它指明的列表。时间戳记文件是 <tt>stamp.cory</tt>。最后一行是一个来自子命令列表的子命令。</p></li></ol>
<a name="a213x9bd1b"></a>
<h3 id="a213x9bd1b">文件</h3>
<p></p>
<a name="wq1532"></a>
<table id="wq1532" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a213x9bcfe" name="a213x9bcfe"></a><span class="bold">/usr/bin/rdist</span></td>
<td width="76%">包含 <span class="bold">rdist</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a213x9bd1c" name="a213x9bd1c"></a><a href="rdist.htm#cyk2350sara"><span class="bold">$HOME/distfile</span></a></td>
<td>包含一个子命令列表，此列表由 <span class="bold">rdist</span> 命令读取。</td>
</tr>
<tr>
<td>
<a id="c14c6cb587sylv" name="c14c6cb587sylv"></a><span class="bold">/tmp/rdist</span></td>
<td>包含一个更新列表。这是一个临时文件。</td>
</tr>
</tbody>
</table>
<a name="a213x9bd1e"></a>
<h3 id="a213x9bd1e">相关信息</h3>
<a name="f0b1903508mart"></a>
<p id="f0b1903508mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds1/csh.htm#a27991075"><span class="bold">csh</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/ksh.htm#a265912f6"><span class="bold">ksh</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/sh.htm#a66f011a"><span class="bold">sh</span></a> 命令。</p>
<a name="f0b1903651mart"></a>
<p id="f0b1903651mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/rhosts.htm#i39340sara"><span class="bold">.rhosts</span></a> 文件格式。</p>
<a name="f0b1903799mart"></a>
<p id="f0b1903799mart"><span class="italic">《AIX 5L V5.2 系统管理指南：通信与网络》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/aixbman/commadmn/ch2_ovw.htm#hho1a0dee">『网络概述』</a>。</p>
<a name="usr_sbin_rdist"></a>
<h3 id="usr_sbin_rdist">/usr/sbin/rdist 命令</h3>
<p>该文档描述位于 <span class="bold">/usr/bin/rdist</span> 文件中的早期AIX <a href="rdist.htm#usr_bin_rdist"><span class="bold">rdist</span></a> 命令和与新的 <span class="bold">rdistd</span> 守护程序一起使用的 new <a href="rdist.htm#usr_sbin_rdist"><span class="bold">/usr/sbin/rdist</span></a> 命令。</p>
<a name="wq1533"></a>
<h3 id="wq1533">用途</h3>
<p>用于远程发布文件客户程序。</p>
<a name="wq1534"></a>
<h3 id="wq1534">语法</h3>
<a name="wq1535"></a>
<h4 id="wq1535">使用发布文件</h4>
<p><span class="bold">/usr/sbin/rdist</span> [ <a href="rdist.htm#sbin_rdist_flags_bigf"><span class="bold">-F</span></a><a href="rdist.htm#sbin_rdist_flags_n"><span class="bold">n</span></a> ] [ <a href="rdist.htm#sbin_rdist_flags_biga"><span class="bold">-A </span></a> <span class="italic">num </span>] [ <a href="rdist.htm#sbin_rdist_flags_a"><span class="bold">-a </span></a> <span class="italic">num</span> ] [ <a href="rdist.htm#sbin_rdist_flags_d"><span class="bold">-d </span></a> <span class="italic">var=value</span>] [ <a href="rdist.htm#sbin_rdist_flags_l"><span class="bold">-l </span></a> &lt; <span class="italic">local logopts</span>&gt; ]
[ <a href="rdist.htm#sbin_rdist_flags_bigl"><span class="bold">-L </span></a> &lt;<span class="italic">remote logopts</span>&gt; ] [ <a href="rdist.htm#sbin_rdist_flags_f"><span class="bold">-f </span></a> <span class="italic">distfile</span>] [ <a href="rdist.htm#sbin_rdist_flags_bigm"><span class="bold">-M </span></a> <span class="italic">maxproc</span> <a href="rdist.htm#sbin_rdist_flags_m"><span class="bold">-m</span></a> <span class="italic"> host</span> ] [ <a href="rdist.htm#sbin_rdist_flags_o"><span class="bold">-o </span></a> <span class="italic">distops</span> ] [ <a href="rdist.htm#sbin_rdist_flags_t"><span class="bold">-t </span></a> <span class="italic">timeout</span> ] [ <a href="rdist.htm#sbin_rdist_flags_p"><span class="bold">-p</span></a> &lt;<span class="italic">rdist-path</span>&gt; ] [ <a href="rdist.htm#sbin_rdist_flags_bigp"><span class="bold">-P</span></a> &lt;<span class="italic">transport-path</span>&gt; ] [ <span class="italic">name </span>... ]</p>
<a name="wq1536"></a>
<h4 id="wq1536">以一个小的发布文件解释参数</h4>
<p><span class="bold">/usr/sbin/rdist</span> <span class="bold">-Fn</span> <span class="bold">-c</span> <span class="italic">name</span> ... [ <span class="italic">login@</span> ] <span class="italic">host</span> [ <span class="italic">:dest</span> ]</p>
<a name="wq1537"></a>
<h4 id="wq1537">调用 Old rdist 作为服务器</h4>
<p><span class="bold">/usr/sbin/rdist -Server</span></p>
<a name="wq1538"></a>
<h4 id="wq1538">关于版本信息</h4>
<p><span class="bold">/usr/sbin/rdist <a href="rdist.htm#sbin_rdist_flags_bigv">-V</a></span></p>
<a name="wq1539"></a>
<h3 id="wq1539">描述</h3>
<p><span class="bold">rdist</span> 是一个程序，用于维护存在于多个主机上的文件的相同副本。它保存文件的所有者、组、方式和修改时间，并能更新正在运行的程序。<span class="bold">rdist</span> 命令能接收来自下列来源的导向信息：</p>
<ul>
<li>当前目录中的发布文件 <span class="bold">distfile</span></li>
<li>如果 <span class="bold">distfile</span> 被指定为 -，则是标准输入。</li>
<li>如果未使用 <span class="bold">-f</span> 标志，<span class="bold">rdist</span> 查找名为 <span class="italic">distfile</span> 和 <span class="italic">Distfile</span> 的文件。</li>
<li>如果使用 <span class="bold">-c</span> 标志，则随后的参数被解释为一个小 <span class="bold">distfile</span>。同意义的 <span class="bold">distfile</span> 如下。
<pre class="xmp">( filename ... ) -> [user@]host
     install       [dest name] ;</pre></li></ul>
<p>如果没有指定 <span class="bold">name</span> 参数，<span class="bold">rdist</span> 将会更新全部列在 <span class="bold">distfile</span> 中的文件和目录。否则，这个参数将会是要更新的文件名或一个要执行的命令的标号。如果标号和文件名冲突，它假定为一个标号。这些可以一起使用以更新使用特定命令的特定文件。</p>
<p><span class="bold">-Server</span> 选项为老版本的 <span class="bold">rdist</span> 提供了向后兼容性，老版本用这个选项把 <span class="bold">rdist</span> 放置到服务器模式。如果 <span class="bold">rdist</span> 以 <span class="bold">-Server</span> 命令行选项启动，它试图运行老版本的 <span class="bold">rdist</span>。这个选项只有在旧 <span class="bold">rdist</span> 存在于 <span class="bold">/usr/bin/rdist</span> 时才会有效。</p>
<p><span class="bold">rdist</span> 使用任意的传输程序访问每个目标主机。这个传输程序可在命令行中由 <span class="bold">-P</span> 标志指定。如果不使用 <span class="bold">-P</span> 标志，<span class="bold">rsh</span> 就会被作为传输程序。
如果使用 <span class="bold">rsh</span> 方法，目标主机是字符串 <span class="bold">localhost</span> 并且远程用户名和本地用户名相同，<span class="bold">rdist</span> 会试图运行下列命令: </p>
<pre class="xmp">/bin/sh -c rdistd -S</pre>
<p>否则 <span class="bold">rdist</span> 会运行下列命令：</p>
<pre class="xmp">rsh host -l remuser rdistd -S</pre>
<p>在上面的示例中，<span class="italic">host</span> 参数是目标主机名，<span class="italic">remuser</span> 是以连接作为用户的名称，并且 <span class="bold">rdistd</span> 是 <span class="bold">rdist</span> 目标主机上的服务器命令。</p>
<p>传输程序必须与上面的对于 <span class="bold">rsh</span> 的语法相一致。否则，传输程序应该由 shell 脚本包装，此 shell 脚本理解这个命令行语法。</p>
<p>在每个目标主机上 <span class="bold">rdist</span> 会试图运行下列命令：</p>
<pre class="xmp">rdistd -S</pre>
<p>或　</p>
<pre class="xmp">&lt;rdistd path&gt; -S</pre>
<p>在上面的示例中，指定了 <span class="bold">-p</span> 标志。
如果没有包含 <span class="bold">-p</span> 标志，或者　&lt;rdistd path&gt; 是一个简单文件名，<span class="bold">rdistd</span> 或 &lt;rdistd path&gt; 必须在远程（目标）主机上运行 <span class="bold">rdist</span> 的用户的 <span class="bold">PATH</span> 中存在。</p>
<p><span class="bold">rdist</span> 命令使用下列环境变量：</p>
<a name="wq1540"></a>
<table id="wq1540" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td><span class="bold">TMPDIR</span></td>
<td>要使用的临时目录名称。缺省是 <span class="bold">/tmp</span>。</td>
</tr>
</tbody>
</table>
<a name="wq1541"></a>
<h3 id="wq1541">标志</h3>
<p></p>
<a name="wq1542"></a>
<table id="wq1542" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="sbin_rdist_flags_biga" name="sbin_rdist_flags_biga"></a><span class="bold">-A</span> <span class="italic">num</span></td>
<td width="76%">只要文件系统中存在最小数目的空闲文件（inodes），就更新或安装文件。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_a" name="sbin_rdist_flags_a"></a><span class="bold">-a</span> <span class="italic">num</span></td>
<td>只要文件系统中存在最小的可用空间，就更新或安装文件。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_d" name="sbin_rdist_flags_d"></a><span class="bold">-d</span> <span class="italic">var = value</span></td>
<td>指定 <span class="italic">value</span> 给 <span class="italic">var</span> 变量。这个选项用于定义或覆盖 <span class="bold">distfile</span> 中的变量定义。<span class="italic">Value</span> 可以是空字符串、名称或一个由圆括号括起来并由制表符和（或）空格分隔的名称列表。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_bigf" name="sbin_rdist_flags_bigf"></a><span class="bold">-F</span></td>
<td>相继更新全部客户程序而不全派生子进程。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_f" name="sbin_rdist_flags_f"></a><span class="bold">-f</span> <span class="italic">distfile</span></td>
<td>用 <span class="bold">distfile</span> 作为发布文件。如果 <span class="bold">distfile</span> 被指定为 -，从标准输入读取。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_l" name="sbin_rdist_flags_l"></a><span class="bold">-l</span> <span class="italic">logopts</span></td>
<td>设置本地记录选项。参阅　<a href="rdist.htm#sbin_rdist_message_logging"><span class="bold">Message Logging</span></a> 部分可以看到关于 <span class="italic">logopts</span> 语法的更多信息。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_bigl" name="sbin_rdist_flags_bigl"></a><span class="bold">-L</span> <span class="italic">logopts</span></td>
<td>设置远程记录选项。<span class="italic">logopts</span> 与本地记录相同，那些被传递给远程服务器（<span class="bold">rdistd</span>）的值除外。请参阅 <a href="rdist.htm#sbin_rdist_message_logging"><span class="bold">Message Logging</span></a> 部分可以看到关于 <span class="italic">logopts</span>语法的更多信息。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_bigm" name="sbin_rdist_flags_bigm"></a><span class="bold">-M</span> <span class="italic">num</span></td>
<td>限定同时运行的子 <span class="bold">rdist</span> 进程的最大数目为 <span class="italic">num</span>。缺省值是 4。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_m" name="sbin_rdist_flags_m"></a><span class="bold">-m</span> <span class="italic">machine</span></td>
<td>限定给定机器的文件的更新。可以给定多个 <span class="bold">-m</span> 参数以限定一部分主机的更新，这些主机在 <span class="bold">distfile</span> 中列出。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_n" name="sbin_rdist_flags_n"></a><span class="bold">-n</span></td>
<td>显示但不执行命令。使用 <span class="bold">-n</span> 标志调试 <span class="bold">distfile</span>。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_o" name="sbin_rdist_flags_o"></a><span class="bold">-o</span> <span class="italic">distopts</span></td>
<td>指定要启用的 dist 选项。<span class="italic">distopts</span> 是下面列出的选项的逗号分隔列表。<span class="italic">distopts</span> 的有效值是：
<dl>
<dt class="bold">chknfs</dt>
<dd>如果目标文件系统是 NFS，不检查或更新文件。
</dd>
<dt class="bold">chkreadonly</dt>
<dd>如果目标主机上的文件存在于只读文件系统，并不试图检查或更新文件。
</dd>
<dt class="bold">chksym</dt>
<dd>如果远程主机上的目标是一个符号链接，但并没在主机上，则远程目标会留下一个符号链接。
</dd>
<dt class="bold">compare</dt>
<dd>执行一个二进制比较，如果不相同就更新文件。
</dd>
<dt class="bold">follow</dt>
<dd>复制符号链接指向的文件而不是符号链接本身。
</dd>
<dt class="bold">ignlnks</dt>
<dd>忽略未解析的链接。<span class="bold">rdist</span> 正常作用是警告用户未解析的链接。
</dd>
<dt class="bold">nochkowner</dt>
<dd>如果文件早已存在，不检查用户的所有权。文件的所有权只在文件更新时设置。
</dd>
<dt class="bold">nochkgroup</dt>
<dd>如果文件早已存在，不检查组所有权。文件的所有权只在文件更新时设置。
</dd>
<dt class="bold">nochkmode</dt>
<dd>避免检查文件或目录的许可模式。许可模式只在文件更新时设置。
</dd>
<dt class="bold">nodescend</dt>
<dd>非递归降序成一个目录。只检查其存在性、所有权和目录的模式。
</dd>
<dt class="bold">noexec</dt>
<dd>不要检查或更新具有 <span class="bold">a.out</span> 格式的可执行文件。
</dd>
<dt class="bold">numchkgroup</dt>
<dd>用数字组标识 (gid) 检查组所有权，而不是组名称。
</dd>
<dt class="bold">numchkowner</dt>
<dd>用数字用户标识 (uid) 检查用户所有权，而不是用户名。
</dd>
<dt class="bold">quiet</dt>
<dd>禁止打印正在标准输出上修改的文件。
</dd>
<dt class="bold">remove</dt>
<dd>除去存在于远程主机目录中而本地主机主目录中不存在的全部文件。
</dd>
<dt class="bold">savetargets</dt>
<dd>保存更新后的文件而不是除去它们。更新的目标文件首先从　<span class="bold">filename</span> 到　<span class="bold">filename.OLD</span> 重命名。
</dd>
<dt class="bold">sparse</dt>
<dd>启用稀疏文件的检查。由于这个选项需要一些额外的处理开销，所以应该只对可能包含稀疏文件的目标启用。
</dd>
</dl></td>
</tr>
<tr>
<td><span class="bold">-o</span> <span class="italic">distopts</span></td>
<td><span class="italic">（dist 选项, 接上）</span>: 
<dl>
<dt class="bold">verify</dt>
<dd>任何主机上的任何过期的文件都会被显示，但不改变任何也不发送任何邮件。
</dd>
<dt class="bold">whole</dt>
<dd>整个文件名被追加到目标目录名。通常，重命名文件时，只使用名称的最后组成部分。这样会保持正在复制文件的目录结构，而不是平铺目录结构。例如，要 rdist 一个文件列表如　<span class="bold">/path/dir1/f1</span> 和 <span class="bold">/path/dir2/f2</span> 到 <span class="bold">/tmp/dir</span> 则会创建文件 <span class="bold">/tmp/dir/path/dir1/f1</span> 和 <span class="bold">/tmp/dir/path/dir2/f2</span> 而不是 <span class="bold">/tmp/dir/dir1/f1</span> 和 <span class="bold">/tmp/dir/dir2/f2</span>。
</dd>
<dt class="bold">younger</dt>
<dd>如果它们的 <span class="italic">mtime</span> 和 <span class="italic">size</span> 不一致通常更新文件。这个选项会导致 <span class="bold">rdist</span> 命令不更新比主副本新的文件。这个选项可以用于防止其它主机上的新副本被替换。对于比主副本新的文件打印一条警告信息。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_p" name="sbin_rdist_flags_p"></a><span class="bold">-p</span> &lt;<span class="italic">rdist-path</span>&gt;</td>
<td>在目标主机上的给定路径中搜索 <span class="bold">rdistd</span> 服务器。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_bigp" name="sbin_rdist_flags_bigp"></a><span class="bold">-P</span> &lt;<span class="italic">rdist-path</span>&gt;</td>
<td>使用如 <span class="italic">transport-path</span> 中给定的传输程序。<span class="italic">transport-path</span> 可以是一个冒号分隔的可能路径名列表。在这种情况下，使用存在路径的第一个组成部分。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_t" name="sbin_rdist_flags_t"></a><span class="bold">-t</span> <span class="italic">timeout</span></td>
<td>　设置 <span class="italic">timeout</span> 周期（秒）以等待来自远程 <span class="bold">rdist</span> 服务器的响应。缺省值是 900 秒。</td>
</tr>
<tr>
<td>
<a id="sbin_rdist_flags_bigv" name="sbin_rdist_flags_bigv"></a><span class="bold">-V</span></td>
<td>打印版本信息并退出。</td>
</tr>
</tbody>
</table>
<a name="sbin_rdist_message_logging"></a>
<h3 id="sbin_rdist_message_logging">消息日志</h3>
<p><span class="bold">rdist</span> 命令提供一套消息设备，每个设备包含一个消息类型列表以指定发送给这个设备哪种类型的消息。每个本地客户机 （<span class="bold">rdist</span>）和远程服务器（<span class="bold">rdistd</span>） 都维护单独的关于什么类型的消息记录到什么设备的副本。</p>
<p><span class="bold">-l</span> <span class="italic">logopts</span> 标志指定在本地客户机上使用什么记录选项。<span class="bold">-L</span> <span class="italic">logopts</span> 标志指定传递给远程 <span class="bold">rdistd</span> 服务器什么记录选项。</p>
<p><span class="italic">logopts</span> 应该有如下形式：</p>
<pre class="xmp">facility=types:facility= types... </pre>
<p>有效的设备名如下：</p>
<dl>
<dt class="bold">stdout</dt>
<dd>到标准输出的消息。
</dd>
<dt class="bold">file</dt>
<dd>发送给文件的消息。文件名可以按格式　<tt class="xph"><span class="bold">file</span> = <span class="italic">filename</span> = <span class="italic">types</span></tt> 指定。
</dd>
<dt class="bold">syslog</dt>
<dd>发送给 <span class="bold">syslogd</span> 设备的消息。
</dd>
<dt class="bold">notify</dt>
<dd>发送给内部 <span class="bold">rdistnotify</span> 设备的消息。
这个设备和在 <span class="bold">distfile</span> 中的 <span class="bold">notify</span> 关键字一起使用以指定发送邮件给 <span class="bold">notify</span> 地址什么消息。
</dd>
</dl>
<p><span class="italic">types</span> 是一个消息类型的逗号分隔列表。每个指定的消息类型启用消息级别。这不同于 <span class="bold">syslog</span> 系统设备，它使用升序方案。下列是有效的类型：</p>
<dl>
<dt class="bold">change</dt>
<dd>　记录更改的事物的消息。
</dd>
<dt class="bold">info</dt>
<dd>　记录常规信息。
</dd>
<dt class="bold">notice</dt>
<dd>记录更改的事物的常规消息。这包含像为安装特定的目标所需要的生成目录这样的事物，但并不在 <span class="bold">distfile</span> 中明确指定。
</dd>
<dt class="bold">nerror</dt>
<dd>　为正常的非致命错误记录消息。
</dd>
<dt class="bold">ferror</dt>
<dd>记录致命错误消息。
</dd>
<dt class="bold">warning</dt>
<dd>记录错误的警告，这些错误并不像 <span class="bold">nerror</span> 类型消息那样严重。
</dd>
<dt class="bold">verbose</dt>
<dd>为更多的信息记录消息，但低于调试级别。
</dd>
<dt class="bold">debug</dt>
<dd>记录调试信息。
</dd>
<dt class="bold">all</dt>
<dd>记录除调试消息之外的信息。
</dd>
</dl>
<a name="wq1543"></a>
<h3 id="wq1543">发布文件</h3>
<p>发布文件指定要复制的文件，为发布指定目标主机，和当使用 <span class="bold">rdist</span> 命令发布更新文件时执行的操作。</p>
<a name="wq1544"></a>
<h4 id="wq1544">记录格式</h4>
<p>每个发布文件的记录都有如下格式：</p>
<a name="wq1545"></a>
<table id="wq1545" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td>VariableName = NameList</td>
<td>定义在发布文件（<span class="italic">SourceList</span>, <span class="italic">DestinationList</span> 或 <span class="italic">SubcommandList</span>）其它记录中使用的变量。</td>
</tr>
<tr>
<td>[Label:] SourceList -> DestinationList SubcommandList</td>
<td>引导<span class="bold"> rdist</span> 命令发布在 <span class="italic">SourceList</span> 变量中命名的文件到主机，主机在 <span class="italic">DestinationList</span> 变量中命名。发布文件命令执行其它的功能。</td>
</tr>
<tr>
<td>[Label:] SourceList :: TimeStampFile SubcommandList</td>
<td>引导 <span class="bold">rdist</span> 命令以更新自给定的日期后改变了的文件。发布文件子命令执行其它功能。如果文件比时间戳记文件新，那么更新每个用 <span class="italic">SourceList</span> 变量指定的文件。</td>
</tr>
</tbody>
</table>
<p>标号是可选的。它们用于为部分更新标识命令。</p>
<a name="wq1546"></a>
<h4 id="wq1546">记录</h4>
<a name="wq1547"></a>
<table id="wq1547" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td><span class="italic">VariableName</span></td>
<td>标识在发布文件中使用的变量。</td>
</tr>
<tr>
<td><span class="italic">NameList</span></td>
<td>指定一个文件，目录，主机或子命令的列表。</td>
</tr>
<tr>
<td><span class="italic">SourceList</span></td>
<td>在本地主机上为 <span class="bold">rdist</span> 命令指定文件和目录作为发布的主副本使用。</td>
</tr>
<tr>
<td><span class="italic">DestinationList</span></td>
<td>表示接收文件副本的主机。</td>
</tr>
<tr>
<td><span class="italic">SubcommandList</span></td>
<td>列出要执行的发布文件子命令。</td>
</tr>
</tbody>
</table>
<p><span class="bold">rdist</span> 命令把换行字符，制表符和空格当作分隔符处理。用于扩展的发布文件变量以一个美元符号开头，后面接一个单独的字符或一个以大括号括起来的名称。
注释以英镑符号开头，以一个换行符结束。</p>
<a name="wq1548"></a>
<h4 id="wq1548">源和目标列表格式</h4>
<p>发布文件源和目标列表包含零个或多个用空格分隔的名称，具有如下格式：</p>
<pre class="xmp">[Name1] [Name2] [Name3] ...</pre>
<p><span class="bold">rdist</span> 命令在本地主机上标识和扩展下列 shell 元字符，其方式与　<span class="bold">csh</span> 命令相同。</p>
<ul>
<li>[ 左方括弧</li>
<li>] 右方括弧</li>
<li>{ 左大括弧</li>
<li>} 右大括弧</li>
<li>( 左圆括号</li>
<li>) 右圆括号</li>
<li>* 星号</li>
<li>? 问号</li></ul>
<p>为防止扩展这些字符，在它们之前加上一个反斜杠。
<span class="bold">rdist</span> 命令也扩展代字号，其方式与　<span class="bold">csh</span> 命令相同，但在本地和目标主机上分别进行。当　<span class="bold">-o</span> <span class="italic">whole</span> 选项与一个以代字号开头的文件名一起使用时，除主目录之外的所有东西都会被附加到目标名称。对其余的文件名称，不以正斜杠或代字号开头的文件名使用目标用户的主目录作为根目录。</p>
<a name="wq1549"></a>
<h4 id="wq1549">发布文件子命令</h4>
<p>用于 shell 的多个命令需用分号隔开。命令在正在更新的主机上的用户主目录中执行。程序更新后，特定的子命令可被用于重建专用的数据库。</p>
<p>发布文件子命令列表可以包含零个或多个下列子命令：</p>
<a name="wq1550"></a>
<table id="wq1550" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td>install Options[OptionalDestName];</td>
<td>复制过期的文件和目录。         
                  <span class="bold">rdist</span> 命令复制每个源文件或目录到每个目标列表中的主机上。由<span class="italic">Options</span> 变量指定的有效选项是 <span class="bold">rdist</span> 命令标志 <span class="bold">-b</span>, <span class="bold">-h</span>, <span class="bold">-i</span>,<span class="bold"> -R</span>,<span class="bold"> -v</span>, <span class="bold">-w</span>,
和 <span class="bold">-y</span>。这选项仅用于由 <span class="italic">SourceList</span> 变量指定的文件。当使用 <span class="bold">-R</span> 标志时，如果在主机上没有相应的文件名称，非空目录会被除去。<span class="italic">OptionalDestName</span> 参数重命名文件。
<p>如果该子命令没有出现在子命令列表中，或者目标名称没有被指定，将会使用源文件名。如果在远程主机上不存在路径名中的目录，就创建它们。在目标主机上使用的登录名称与本地主机上的相同，除非目标名称具有格式： login@host。</p></td>
</tr>
<tr>
<td>notify NameList;</td>
<td>发送邮件更新的文件列表和可能产生的任何错误到所列表名（<span class="italic">NameList</span> 参数）。如果没有 @ (符号 "@") 出现在名称中，目标主机追加给名称 (name@host)。</td>
</tr>
<tr>
<td>except NameList;</td>
<td>导致　<span class="bold">rdist</span> 命令更新所有由 <span class="italic">SourceList</span> 记录指定的文件，那些由 <span class="italic">NameList</span> 变量指定的文件除外。</td>
</tr>
<tr>
<td>except_pat NameList;</td>
<td>防止 <span class="bold">rdist</span> 命令更新任何包含字符串与 <span class="italic">NameList</span> 变量指定的列表中的成员相匹配的文件。</td>
</tr>
<tr>
<td>special NameList "String";</td>
<td>指定在远程主机上执行的 shell 命令（ "String"　变量），在此之前，更新或安装由 <span class="italic">NameList</span> 变量指定的文件。
如果 <span class="italic">NameList</span> 变量被省略，对每个更新或安装的文件执行 shell。变量 FILE 在
<span class="bold">rdist</span> 命令执行 "String" 变量之前被设置为当前文件名，变量 REMFILE 包含刚被更新的远程文件的全路径名，变量 BASEFILE 包含刚被更新的远程文件的 basename 。"String" 值必须用双引号括起来，并能在发布文件中跨越多行。</td>
</tr>
<tr>
<td>cmdspecial NameList "String";</td>
<td><span class="bold">cmdspecial</span> 命令与 <span class="bold">special</span> 命令相似，只有当全部命令执行完毕时而不是更新每个文件后执行此命令这点除外。shell 变量 FILES 包含文件列表。每个在 FILES shell 变量中的文件名用一个冒号隔开。</td>
</tr>
</tbody>
</table>
<p>如果主机名以一个加号结尾，NFS 检查禁用。这相当于只对此主机禁用 <span class="bold">-o</span> <span class="italic">chknfs</span> 选项。</p>
<a name="wq1551"></a>
<h3 id="wq1551">退出状态</h3>
<p>此命令返回下列出口值:</p>
<a name="wq1552"></a>
<table id="wq1552" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%"><span class="bold">0</span></td>
<td width="95%">成功完成。</td>
</tr>
<tr>
<td><span class="bold">&gt;0</span></td>
<td>一个错误发生。</td>
</tr>
</tbody>
</table>
<a name="wq1553"></a>
<h3 id="wq1553">示例</h3>
<ol type="1">
<li>为指明主机文件要更新，按以下行输入：
<pre class="xmp">HOSTS =( matisse root@arpa )</pre>
<p>在上面的示例中，HOSTS 变量被定义为 matisse 和 root@arpa。<span class="bold">rdist</span> 命令更新在 matisse 和 root@arpa　主机上的文件。 可以把这个变量作为目标列表使用。</p></li>
<li>为指示一个名称作为 SourceList 记录的值使用，请输入类似下列的行：
<pre class="xmp">FILES = ( /bin /lib/usr/bin /usr/games
    /usr/include/{*.h,{stand,sys,vax*,pascal,machine}/*.h}
       /usr/lib /usr/man/man? /usr/ucb /usr/local/rdist )</pre>
<p>在上面的示例中，FILES 值被定义为用于 <span class="italic">SourceList</span> 记录的文件。</p></li>
<li>为表示从更新进程中除去哪些文件，请输入类似下列的行：
<pre class="xmp">EXLIB = ( Mail.rc aliases aliases.dir aliases.pag crontab dshrc
    sendmail.cf sendmail.fc sendmail.hf sendmail.st uucp vfont)</pre>
<p>在上面的示例中，EXLIB 值被定义为一个从更新进程中移除的文件列表。</p></li>
<li>为从 /usr/src/bin 到 arpa 复制全部文件，扩展名称列表变量，以复制全部文件除了在名称列表中存在和具有 .o 扩展名的文件以外：
<pre class="xmp">/usr/src/bin ->arpa
except_pat(\e\e.o\e ${&lt;namelist&gt; /SCCS\e ${&lt;namelist&gt;}</pre>
<p>或　</p>
<pre class="xmp">/usr/src/bin ->arpa
except_pat(\\.o\e ${&lt;namelist&gt; /SCCS\e ${&lt;namelist&gt;}</pre></li>
<li>从 /usr/src/bin 到 arpa 复制全部文件，以 .o　为扩展名的文件除外：
<pre class="xmp">/usr/src/bin ->arpa
except_pat(\\.o\$ /SCCS\$</pre></li></ol>
<a name="wq1555"></a>
<h3 id="wq1555">格式示例： [label:] SourceList - DestinationList SubcommandList</h3>
<ol type="1">
<li>为复制一个文件源列表到主机的目标列表，请输入类似如下的行：
<pre class="xmp">${FILES} ->${HOSTS}
    install -R
    except /usr/lib/${EXLIB}  ;
    except /usr/games/lib  ;
    special /usr/sbin/sendmail "/usr/sbin/sendmail.bz"  ;</pre>
<p>行 [Label:] 记录是可选的，并不在此显示。美元符号和大括弧会使文件名  FILES、 HOSTS 和 EXLIB 扩展成前面示例中为它们指明的列表。示例的余下部分包含子命令列表。</p></li>
<li>为使用 [Label:] 记录，请输入下列行：
<pre class="xmp">srcsL:
/usr/src/bin -> arpa
    except_pat (\e\e.o\e$ /SCCS\e$ ) ;</pre>
<p>标号是 srcsL: ，并可用于为更新而标识该记录。     <span class="bold">/usr/src/bin</span> 文件是被复制的源，主机 arpa 是复制的目的地。第三行包含一个来自子命令列表的子命令。</p></li>
<li>为使用时间戳记文件，请输入类似如下的行:
<pre class="xmp">${FILES} :: stamp.cory
    notify root@cory</pre>
<p>美元符号和大括号引起由 FILES 指定的名称扩展成为它指明的列表。时间戳记文件是　<span class="bold">stamp.cory</span>。最后一行是一个来自子命令列表的子命令。</p></li></ol>
<a name="wq1557"></a>
<h3 id="wq1557">文件</h3>
<p></p>
<a name="wq1558"></a>
<table id="wq1558" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%"><span class="bold">/usr/sbin/rdist</span></td>
<td width="76%">版本 6.1.5 中包含 <span class="bold">rdist</span> 命令。</td>
</tr>
<tr>
<td><span class="bold">distfile</span></td>
<td>包含输入命令。</td>
</tr>
<tr>
<td><span class="bold">$ TMPDIR/rdist*</span></td>
<td>更新列表的临时文件。</td>
</tr>
</tbody>
</table>
<a name="wq1559"></a>
<h3 id="wq1559">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds1/csh.htm#a27991075"><span class="bold">csh</span></a> 命令、<span class="bold">rcmd()</span> 系统调用、<a href="rdistd.htm#rdistd"><span class="bold">rdistd</span></a> 命令、<a href="rsh.htm#a2049833"><span class="bold">rsh</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/sh.htm#a66f011a"><span class="bold">sh</span></a> 命令、<span class="bold">stat()</span> 系统调用。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="rdist.htm#Top_Of_Page">页的顶部</a> | <a href="rcvtty.htm">上一页</a> | <a href="rdistd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
