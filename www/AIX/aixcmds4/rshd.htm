<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - rshd 守护程序</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="rshd 守护程序, rshd, TCP/IP 守护程序, 守护程序,
使用 rshd 守护程序, 提供服务器功能, TCP/IP, 远程命令执行, 远程命令执行，提供,
服务器功能" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="rshd.htm#Bot_Of_Page">页的底部</a> | <a href="rsh.htm">上一页</a> | <a href="rstatd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>

<a name="bed1b0sara"></a>
<h2 id="bed1b0sara">rshd 守护程序</h2><a id="idx736" name="idx736"></a><a id="idx737" name="idx737"></a><a id="idx738" name="idx738"></a>
<a name="mk91e0sara"></a>
<h3 id="mk91e0sara">用途</h3><a id="idx739" name="idx739"></a><a id="idx740" name="idx740"></a><a id="idx741" name="idx741"></a>
<a name="dff1ca7685mart"></a>
<p id="dff1ca7685mart">为远程命令执行提供服务器功能。</p>
<a name="a213x9ae68"></a>
<h3 id="a213x9ae68">语法</h3>
<a name="wq2235"></a>
<div class="notetitle" id="wq2235">注:</div>
<div class="notebody"><a name="a81c018c30"></a><span id="a81c018c30" class="pk"></span><span class="bold">rshd</span> 守护程序通常由 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/inetd.htm#dwd290sara"><span class="bold">inetd</span></a> 守护程序启动。也可以使用 SRC 命令在命令行中控制。</div>
<p><span class="bold">/usr/sbin/rshd</span> [  <a href="rshd.htm#a13c0mkmbe2f"><span class="bold">-c&nbsp;</span></a>] [  <a href="rlogind.htm#a13c0be2f"><span class="bold">-s&nbsp;</span></a>]</p>
<a name="a213x9ae6a"></a>
<h3 id="a213x9ae6a">描述</h3>
<a name="dff1ca8121mart"></a>
<p id="dff1ca8121mart"><span class="bold">/usr/sbin/rshd</span> 守护程序是 <a href="rcp.htm#iwj80jstu"><span class="bold">rcp</span></a> 和 <a href="rsh.htm#a2049833"><span class="bold">rsh</span></a> 命令的服务器。<span class="bold">rshd</span> 守护程序提供 shell 命令的远程执行。这些命令基于在可信的主机上的特权套接字的请求。shell 命令必须有用户认证。<span class="bold">rshd</span> 守护程序监听在 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/services.htm#ys8120sara"><span class="bold">/etc/services</span></a> 文件中定义的套接字。</p>
<a name="dff1ca8217mart"></a>
<p id="dff1ca8217mart">使用系统管理界面程序（SMIT）或系统资源控制器（SRC）来编辑 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/inetd.conf.htm#zb52b0joe"><span class="bold">/etc/inetd.conf </span></a> 或/<span class="bold">etc</span>/<span class="bold">services</span> 文件可以更改 <span class="bold">rshd</span> 守护程序。不推荐在命令行中输入 <tt> rshd</tt>。缺省情况下，在 <span class="bold">/etc/inetd.conf</span> 文件中没有注释时启动 <span class="bold">rshd</span> 守护程序。</p>
<a name="dff1ca8313mart"></a>
<p id="dff1ca8313mart"><span class="bold">inetd</span> 守护程序从 /<span class="bold">etc</span>/<span class="bold">inetd.conf</span> 文件和 /<span class="bold">etc</span>/<span class="bold">services</span> 文件中获取信息。</p>
<a name="dff1ca8487mart"></a>
<p id="dff1ca8487mart">更改 <span class="bold">/etc/inetd.conf</span> 或 /<span class="bold">etc</span>/<span class="bold"> services</span> 文件后，运行 <a href="refresh.htm#a20092dd"><span class="bold">refresh</span></a> <span class="bold">-s inetd</span> 或 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/kill.htm#a1579872"><span class="bold">kill</span></a><span class="bold">&nbsp;-1&nbsp;</span><span class="italic">InetdPID</span> 命令来通知 <span class="bold">inetd</span> 守护程序已对它的配置文件作了更改。</p>
<a name="ac2331e700dee"></a>
<h4 id="ac2331e700dee">服务请求协议（Service Request Protocol）</h4>
<a name="dff1ca8648mart"></a>
<p id="dff1ca8648mart">当 <span class="bold">rshd</span> 守护程序收到一个服务请求时，初始化以下协议：</p>
<ol type="1">
<li><a name="a213x9ae6e"></a><span id="a213x9ae6e" class="pk"></span><span class="bold">rshd</span> 守护程序检查请求的源端口号。如果端口号不在 0－1023 范围内，<span class="bold">rshd</span> 守护程序终止连接。</li>
<li><a name="a213x9ae6f"></a><span id="a213x9ae6f" class="pk"></span><span class="bold">rshd</span> 守护程序从套接字读取字符直至空字节。读取的字符串解释为一个 ASCII 数字（十进制）。如果此数字不为零，<span class="bold">rshd</span> 守护程序将其解释为用做标准错误的第二个流的端口号。创建第二个到客户机指定端口的连接。本地主机上的源端口变化范围也是 0 到 1023。</li>
<li><a name="a213x9ae70"></a><span id="a213x9ae70" class="pk"></span><span class="bold">rshd</span> 守护程序使用初始化连接请求的源地址来确定客户机名。如果不能确定客户机名，<span class="bold">rshd</span> 守护程序使用点分十进制表示的客户机地址。</li>
<li><a name="a213x9ae71"></a><span id="a213x9ae71" class="pk"></span><span class="bold">rshd</span> 守护程序从初始套接字检索以下信息：
<ul>
<li><a name="a213x9ae72"></a><span id="a213x9ae72" class="pk"></span>至多 16 字节的以空字符结尾的字符串解释为客户机上的用户的用户名。</li>
<li><a name="a213x9ae73"></a><span id="a213x9ae73" class="pk"></span>至多 16 字节的以空字符结尾的字符串解释为本地服务器上的用户的用户名。</li>
<li><a name="a213x9ae74"></a><span id="a213x9ae74" class="pk"></span>另一个以空字符结尾的字符串解释为传递到本地服务器主机上的 shell 的命令行。</li></ul></li>
<li><a name="a213x9ae75"></a><span id="a213x9ae75" class="pk"></span><span class="bold">rshd</span> 守护程序试图使用如下步骤验证用户：
<ol type="a">
<li><a name="a213x9ae76"></a><span id="a213x9ae76" class="pk"></span><span class="bold">rshd</span> 守护程序在
<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/passwd.htm#x9a1f0frit"><span class="bold">/etc/passwd</span></a> 和 <span class="bold">/etc/security/passwd</span> 文件中查找本地用户名，并检查是否密码，并由此导致用户，已到期。它也验证加密的密码字符串的有效性并尝试切换到主目录（使用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/libs/basetrf1/chdir.htm#sqje0gaco"><span class="bold">chdir</span></a> 子例程）。如果查找或目录更改失败，<span class="bold">rshd</span> 守护程序终止连接。</li>
<li><a name="a213x9ae77"></a><span id="a213x9ae77" class="pk"></span>如果本地用户 ID 为非零值，<span class="bold">rshd</span> 守护程序查找 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/hosts.equiv.htm#yl7330sara"><span class="bold">/etc/hosts.equiv</span></a> 文件来查看客户机工作站的名称是否被列出。如果客户机工作站作为同等的主机列出，<span class="bold">rshd</span> 守护程序确认用户。</li>
<li><a name="a213x9ae65"></a><span id="a213x9ae65" class="pk"></span>如果存在 <span class="bold">$HOME/.rhosts</span> 文件，<span class="bold">rshd</span> 守护程序尝试通过检查 <span class="bold">.rhosts</span> 文件来认证用户。</li>
<li><a name="a213x9ae78"></a><span id="a213x9ae78" class="pk"></span>如果 <span class="bold">$HOME/.rhosts</span> 认证失败或客户机不是同等主机，<span class="bold">rshd</span> 守护程序终止连接。</li></ol></li>
<li><a name="a213x9ae79"></a><span id="a213x9ae79" class="pk"></span><span class="bold">rshd</span> 验证用户后，<span class="bold">rshd</span> 守护程序在初始连接上返回空字节并传递命令行到用户的本地登录 shell。shell 接着继承由 <span class="bold"> rshd</span> 守护程序建立的网络连接。</li></ol>
<a name="dff1ca9713mart"></a>
<p id="dff1ca9713mart">应该使用系统管理界面程序（SMIT）或通过更改 <span class="bold">/etc/inetd.conf</span> 文件来控制 <span class="bold">rshd</span> 守护程序。不推荐在命令行中输入 <tt> rshd</tt>。</p>
<a name="a992be5820dee"></a>
<h4 id="a992be5820dee">用系统资源控制器来操作 rshd 守护程序</h4>
<a name="dff1ca9883mart"></a>
<p id="dff1ca9883mart"><span class="bold">rshd</span> 守护程序是
 <span class="bold">inetd</span> 守护程序的子服务器，这是系统资源控制器（<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/aixbman/admnconc/sys_res_overview.htm#a2729f9">SRC</a>）的子系统。<span class="bold">rshd</span> 守护程序是 <span class="bold">tcpip</span> SRC 子系统组的成员。本守护程序在 <span class="bold">/etc/inetd.conf</span> 文件中缺省设置为启用并可以使用以下 SRC 命令操作：</p>
<a name="wq2238"></a>
<table id="wq2238" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="14%">
<a id="c0e5d8c699judy" name="c0e5d8c699judy"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/startsrc.htm#a200945a"><span class="bold">startsrc</span></a></td>
<td width="85%">  启动子系统、子系统组或子服务器。</td>
</tr>
<tr>
<td>
<a id="c0e5d8d479judy" name="c0e5d8d479judy"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/stopsrc.htm#a20094a5"><span class="bold">stopsrc</span></a></td>
<td>  停止子系统、子系统组或子服务器。</td>
</tr>
<tr>
<td>
<a id="c0e5d8d559judy" name="c0e5d8d559judy"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/lssrc.htm#a2009166"><span class="bold">lssrc</span></a></td>
<td>  得到子系统、子系统组或子服务器的状态。</td>
</tr>
</tbody>
</table>
<a name="a213x9ae61"></a>
<h3 id="a213x9ae61">标志</h3>
<p></p>
<a name="wq2239"></a>
<table id="wq2239" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="a13c0mkmbe2f" name="a13c0mkmbe2f"></a><span class="bold">-c</span></td>
<td width="95%">  禁用逆向主机名查找。</td>
</tr>
<tr>
<td>
<a id="dup0305" name="dup0305"></a><span class="bold">-s</span></td>
<td>  打开套接字级别的调试。</td>
</tr>
</tbody>
</table>
<a name="a992be6219dee"></a>
<h3 id="a992be6219dee">示例</h3>
<a name="wq2240"></a>
<div class="notetitle" id="wq2240">注:</div>
<div class="notebody"><a name="c0e5d8e024judy"></a><span id="c0e5d8e024judy" class="pk"></span><span class="bold">rshd</span> 守护程序的参数可以使用 SMIT 或编辑 <span class="bold">/etc/inetd.conf</span> 文件来指定。</div>
<ol type="1">
<li><a name="c0e5d8e189judy"></a><span id="c0e5d8e189judy" class="pk"></span>要启动 <span class="bold">rshd</span> 守护程序，输入如下：
<a id="c0e5d8e371judy" name="c0e5d8e371judy"></a>
<div class="lines"><tt>startsrc <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/startsrc.htm#ws6120jvh">-t</a> shell</tt><br />
</div> 本命令启动 <span class="bold">rshd</span> 子服务。</li>
<li><a name="c0e5d8e594judy"></a><span id="c0e5d8e594judy" class="pk"></span>要停止<span class="bold">rshd</span> 守护程序，输入如下：
<a id="c0e5d8e723judy" name="c0e5d8e723judy"></a>
<div class="lines"><tt>stopsrc <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/stopsrc.htm#a2139a7d">-t</a> shell</tt><br />
</div> 本命令允许启动所有暂挂连接和完成现有的连接但是禁止启动新连接。</li>
<li><a name="c0e5d8f044judy"></a><span id="c0e5d8f044judy" class="pk"></span>要强制停止 <span class="bold">rshd</span> 守护程序和所有 <span class="bold">rshd</span> 连接，输入如下：
<a id="c0e5d8f200judy" name="c0e5d8f200judy"></a>
<div class="lines"><tt>stopsrc -t <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/stopsrc.htm#a20094af">-f</a> shell</tt><br />
</div> 本命令立即终止所有暂挂连接和现有的连接。</li>
<li><a name="c0e5d8f511judy"></a><span id="c0e5d8f511judy" class="pk"></span>显示关于 <span class="bold">rshd</span> 守护程序的简短的状态报告，输入如下：
<a id="c0e5d8f641judy" name="c0e5d8f641judy"></a>
<div class="lines"><tt>lssrc <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/lssrc.htm#a206910d5">-t</a> shell</tt><br />
</div> 本命令返回守护程序的名称、进程 ID 和状态（活动的或不活动的）。</li></ol>
<a name="a213x9ae4a"></a>
<h3 id="a213x9ae4a">相关信息</h3>
<a name="dff1cab511mart"></a>
<p id="dff1cab511mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/kill.htm#a1579872"><span class="bold">kill</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/lssrc.htm#a2009166"><span class="bold">lssrc</span></a> 命令、<a href="refresh.htm#a20092dd"><span class="bold">refresh</span></a> 命令、<a href="rsh.htm#a2049833"><span class="bold">rsh</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/startsrc.htm#a200945a"><span class="bold">startsrc</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/stopsrc.htm#a20094a5"><span class="bold">stopsrc</span></a> 命令。</p>
<a name="dff1cab598mart"></a>
<p id="dff1cab598mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/inetd.htm#dwd290sara"><span class="bold">inetd</span></a> 守护程序。</p>
<a name="dff1cab695mart"></a>
<p id="dff1cab695mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/rhosts.htm#i39340sara"><span class="bold">$HOME/.rhosts</span></a> 文件格式、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/hosts.equiv.htm#yl7330sara"><span class="bold">/etc/hosts.equiv</span></a> 文件格式、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/inetd.conf.htm#zb52b0joe"><span class="bold">/etc/inetd.conf</span></a> 文件格式、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/services.htm#ys8120sara"><span class="bold">/etc/services</span></a> 文件格式。</p>
<a name="dff1cab784mart"></a>
<p id="dff1cab784mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/libs/commtrf2/rcmd.htm#dm330cher"><span class="bold">rcmd</span></a> 子例程。</p>
<a name="dff1cab880mart"></a>
<p id="dff1cab880mart">在 <span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/aixbman/commadmn/tcp_daemons.htm#a8c0a85e">『TCP／IP 守护程序』</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="rshd.htm#Top_Of_Page">页的顶部</a> | <a href="rsh.htm">上一页</a> | <a href="rstatd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
