<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - pkgmk 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="pkgmk 命令, 使用 pkgmk 命令, 制作可安装的,
软件包，, 制作, 可安装的软件包，" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="pkgmk.htm#Bot_Of_Page">页的底部</a> | <a href="pkginfo.htm">上一页</a> | <a href="pkgparam.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>

<a name="pkgmk"></a>
<h2 id="pkgmk">pkgmk 命令</h2><a id="idx277" name="idx277"></a><a id="idx278" name="idx278"></a><a id="idx279" name="idx279"></a>
<a name="wq894"></a>
<h3 id="wq894">用途</h3>
<p>制作可安装的软件包。</p>
<a name="wq895"></a>
<h3 id="wq895">语法</h3>
<p><span class="bold">pkgmk</span> [ <a href="pkgmk.htm#pkgmk_flag_c"><span class="bold">-c</span></a> ] [ <a href="pkgmk.htm#pkgmk_flag_o"><span class="bold">-o</span></a> ] [ <a href="pkgmk.htm#pkgmk_flag_a"><span class="bold">-a</span></a> <span class="italic">Arch</span> ] [ <a href="pkgmk.htm#pkgmk_flag_b"><span class="bold">-b</span></a> <span class="italic">BaseDir</span> ] [ <a href="pkgmk.htm#pkgmk_flag_d"><span class="bold">-d</span></a> <span class="italic">Directory</span> ] [ <a href="pkgmk.htm#pkgmk_flag_f"><span class="bold">-f</span></a> <span class="italic">Prototype</span> ] [ <a href="pkgmk.htm#pkgmk_flag_l"><span class="bold">-l</span></a> <span class="italic">Limit</span> ] [ <a href="pkgmk.htm#pkgmk_flag_p"><span class="bold">-p</span></a> <span class="italic">PStamp</span> ] [ <a href="pkgmk.htm#pkgmk_flag_r"><span class="bold">-r</span></a> <span class="italic">RootPath</span> ] [ <a href="pkgmk.htm#pkgmk_flag_v"><span class="bold">-v</span></a> <span class="italic">Version</span> ]    [ <a href="pkgmk.htm#pkgmk_flag_variable"><span class="italic">Variable</span></a>=<span class="italic">Value</span> ... ] [ <a href="pkgmk.htm#pkgmk_flag_pkginst"><span class="italic">PkgInst</span></a>
]</p>
<a name="wq896"></a>
<h3 id="wq896">描述</h3>
<p><span class="bold">pkgmk</span> 制作一个被用作 <span class="bold">pkgadd</span> 命令的输入的可安装软件包。软件包是相关文件和可独立安装的可执行文件的集合。软件包的内容将是目录结构格式。</p>
<p><span class="bold">pkgmk</span> 命令将软件包原型文件用作输入，并且创建 <span class="bold">pkgmap</span> 文件。每个原型文件条目的内容被复制到适当的输出位置。
关于内容的信息（校验和、文件大小和修改日期）被计算并被存储在 <span class="bold">pkgmap</span> 文件中，同时还有在原型文件中指定的属性信息。</p>
<a name="wq897"></a>
<h3 id="wq897">标志</h3>
<a name="wq898"></a>
<table id="wq898" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td>
<a id="pkgmk_flag_a" name="pkgmk_flag_a"></a><span class="bold">-a</span> <span class="italic"> Arch</span></td>
<td> 用 <span class="italic">Arch</span> 覆盖 <span class="bold">pkginfo</span> 文件中提供的体系结构信息。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_b" name="pkgmk_flag_b"></a><span class="bold">-b</span> <span class="italic">BaseDir</span></td>
<td>预先考虑指定的 <span class="italic">BaseDir</span>
以在源及机器上定位可重定位的对象。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_c" name="pkgmk_flag_c"></a><span class="bold">-c</span></td>
<td>压缩非信息文件。当使用 <span class="bold">-c</span> 时，必须也指定 <span class="bold">-r</span> 选项。<span class="italic">Prototype</span> 文件中引用在 <span class="italic">RootPath</span> 规范之上的相对路径的条目将不会被压缩。
任何在被 <span class="bold">pkgmk</span> 处理前已被压缩的文件（也就是仅那些“.Z”格式的文件）将不会被 <span class="bold">pkgadd</span> 命令解压。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_d" name="pkgmk_flag_d"></a><span class="bold">-d</span> <span class="italic">Directory</span></td>
<td>在 <span class="italic">Directory</span> 中创建软件包。指定的目录必须存在。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_f" name="pkgmk_flag_f"></a><span class="bold">-f</span> <span class="italic">Prototype</span></td>
<td>将文件 <span class="italic">Prototype</span> 用作命令的输入。该文件的缺省名或者是 <span class="bold">Prototype</span> 或者是 <span class="bold">prototype</span>。
<p>可以使用 <span class="bold">pkgproto</span> 来创建 <span class="italic">Prototype</span> 文件。在这种情况下，必须为在软件包中使用的任何安装脚本和文件手工添加条目。仅需要你所使用的文件和脚本的条目。然而，必须总是为软件包中的 <span class="bold">pkginfo</span> 文件添加条目。参见 <span class="bold">pkgproto</span> 获取更多的信息。</p></td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_l" name="pkgmk_flag_l"></a><span class="bold">-l</span> <span class="italic">Limit</span></td>
<td>指定输出设备的以 512 字节大小的块表示的最大尺寸为 <span class="italic">Limit</span> 。 缺省情况下，如果输出文件是目录或可安装的设备， <span class="bold">pkgmk</span> 将使用 <span class="bold">df</span> 命令来动态计算输出设备上可用空间的数量。对于与 <span class="bold">pkgtrans</span> 关联来创建带数据流格式的软件包时很有用。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_o" name="pkgmk_flag_o"></a><span class="bold">-o</span></td>
<td>覆盖相同实例。如果已经存在，软件包实例将被覆盖。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_p" name="pkgmk_flag_p"></a><span class="bold">-p</span> <span class="italic">PStamp</span></td>
<td> 用 <span class="italic">PStamp</span> 覆盖 <span class="bold">pkginfo</span> 文件中的产品戳记定义。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_r" name="pkgmk_flag_r"></a><span class="bold">-r</span> <span class="italic">RootPath</span></td>
<td>将 <span class="italic">Prototype</span> 文件中的源路径名附加到指定的 <span class="italic">RootPath</span> 中来定位源机器上的对象。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_v" name="pkgmk_flag_v"></a><span class="bold">-v</span> <span class="italic"> Version</span></td>
<td>用 <span class="italic">Version</span> 覆盖 <span class="bold">pkginfo</span> 文件中提供的版本信息。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_variable" name="pkgmk_flag_variable"></a><span class="italic">变量</span>=<span class="italic">值</span></td>
<td> 将指定变量放置到封装环境中。</td>
</tr>
<tr>
<td>
<a id="pkgmk_flag_pkginst" name="pkgmk_flag_pkginst"></a><span class="italic">PkgInst</span></td>
<td>用于表示软件包名缩写的短字符串。<span class="bold">pkgmk</span> 将自动创建新实例，如果版本和/或体系结构不同的话。用户应该仅指定软件包名缩写；特殊的实例不应该被指定，除非用户要覆盖它。</td>
</tr>
</tbody>
</table>
<a name="wq899"></a>
<h3 id="wq899">示例</h3>
<ol type="1">
<li>如果要创建一个 名为 <tt class="xph">mypkgA</tt> 且包含 <span class="bold">lsps</span> 和 <span class="bold">lsuser</span> 命令的软件包，必须首先创建软件包的内容。例如：
<pre class="xmp">mkdir -p /home/myuser/example/pkgmk/sbin
cp /usr/sbin/lsps /home/myuser/example/pkgmk/sbin
cp /usr/sbin/lsuser /home/myuser/example/pkgmk/sbin</pre>然后，创建 <span class="bold">pkginfo</span> 文件。在这个示例中， <span class="bold">pkginfo</span> 文件是 <tt class="xph">/home/myuser/example/pkgmk/pkginfo</tt>，它包含下列内容：
<pre class="xmp">PKG="mypkgA"
NAME="My Package A"
ARCH="PPC"
RELEASE="1.0"
VERSION="2"
CATEGORY="Application"
PSTAMP="AIX  2001/02/05"
</pre>然后，创建 <span class="italic">Prototype</span> 文件 <tt class="xph">/home/myuser/example/pkgmk/prototype</tt>，它包含下列内容：
<pre class="xmp">!search /home/myuser/example/pkgmk/sbin
i pkginfo=/home/myuser/example/pkgmk/pkginfo
d example /example 1777 bin bin
d example /example/pkgmk 1777 bin bin
d example /example/pkgmk/sbin 1777 bin bin
f example /example/pkgmk/sbin/lsps 555 bin bin
f example /example/pkgmk/sbin/lsuser 555 bin bin
</pre>然后，用上述的 <span class="italic">Prototype</span> 和 <span class="bold">pkginfo</span> 文件通过 <span class="bold">pkgmk</span> 命令创建软件包：
<pre class="xmp">pkgmk -d /tmp -f /home/myuser/example/pkgmk/prototype</pre>产生如下的输出：
<pre class="xmp">Building pkgmap from package prototype file
## Processing pkginfo file
    WARNING:parameter &lt;CLASSES> set to "example"

## Attempting to volumize 5 entries in pkgmap
Part  1 -- 218 blocks, 10 entries
/tmp/mypkgA/pkgmap
/tmp/mypkgA/pkginfo
/tmp/mypkgA/root/example/pkgmk/sbin/lsps
/tmp/mypkgA/root/example/pkgmk/sbin/lsuser
## Packaging complete
</pre>新建的名为 <tt class="xph">mypkgA</tt> 的软件包现在存在于 <tt class="xph">/tmp/mypkgA</tt> 中。</li></ol>
<a name="wq901"></a>
<h3 id="wq901">退出状态</h3>
<a name="wq902"></a>
<table id="wq902" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td width="16%"><span class="bold">0</span></td>
<td width="83%"> 脚本成功完成。</td>
</tr>
<tr>
<td><span class="bold">1</span></td>
<td>致命错误。在此点上安装进程终止。</td>
</tr>
<tr>
<td><span class="bold">99</span></td>
<td>内部错误。</td>
</tr>
</tbody>
</table>
<a name="wq903"></a>
<h3 id="wq903">文件</h3>
<a name="wq904"></a>
<table id="wq904" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td width="33%">  <span class="bold"> /usr/sbin/pkgmk</span></td>
<td width="66%">包含 <span class="bold">pkgmk</span> 命令.</td>
</tr>
</tbody>
</table>
<a name="wq905"></a>
<h3 id="wq905">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/installp.htm"><span class="bold">installp</span></a> 命令、<a href="pkgadd.htm#pkgadd_1mpur"><span class="bold">pkgadd</span></a> 命令、<a href="pkgask.htm#pkgask_1m"><span class="bold">pkgask</span></a> 命令、<a href="pkgchk.htm#pkgchk_1m"><span class="bold">pkgchk</span></a> 命令、<a href="pkginfo.htm#pkginfo_1"><span class="bold">pkginfo</span></a>
命令、<a href="pkgparam.htm#pkgparam_1"><span class="bold">pkgparam</span></a> 命令、<a href="pkgproto.htm#pkgproto"><span class="bold">pkgproto</span></a> 命令、<a href="pkgrm.htm#pkgrm_1m"><span class="bold">pkgrm</span></a> 命令、<a href="pkgtrans.htm#pkgtrans_1"><span class="bold">pkgtrans</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/tar.htm#a101938a7"><span class="bold">tar</span></a>
命令。</p>
<p><span class="bold"><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/files/aixfiles/pkginfo_4.htm">pkginfo</a></span> 文件格式。</p>
<p>要获取有关如何使用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/installp.htm"><span class="bold">installp</span></a> 命令准备要安装的应用程序的信息，参见 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/aixprggd/genprogc/pkging_sw4_install.htm">关于安装的封装软件</a>，它在 <span class="italic">AIX 5L Version 5.2 General Programming Concepts: Writing and Debugging Programs</span> 中。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="pkgmk.htm#Top_Of_Page">页的顶部</a> | <a href="pkginfo.htm">上一页</a> | <a href="pkgparam.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
