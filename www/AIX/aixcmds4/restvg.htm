<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - restvg 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="restvg 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="restvg.htm#Bot_Of_Page">页的底部</a> | <a href="restorevgfiles.htm">上一页</a> | <a href="resumevsd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>
<a id="idx546" name="idx546"></a>
<a name="d29ef13290fhol"></a>
<h2 id="d29ef13290fhol">restvg 命令</h2>
<a name="d29ef13358fhol"></a>
<h3 id="d29ef13358fhol">用途</h3>
<a name="f0b1e80196mart"></a>
<p id="f0b1e80196mart">恢复用户卷组和它所有的容器与文件。</p>
<a name="d29ef13501fhol"></a>
<h3 id="d29ef13501fhol">语法</h3>
<p><span class="bold">restvg</span> [ <a href="restvg.htm#d29ef14490fhol"><span class="bold">-b</span></a> <span class="italic">Blocks</span> ] [  <a href="restvg.htm#d29ef14490fjan"><span class="bold">-d</span></a> <span class="italic">FileName</span> ][  <a href="restvg.htm#d29ef14642fhol"><span class="bold">-f</span></a> <span class="italic">Device</span> ] [ <a href="restvg.htm#restvg_flags_l"><span class="bold">-l</span></a> ] [  <a href="restvg.htm#d29ef14566fhol"><span class="bold">-q</span></a> ] [ <a href="restvg.htm#restvg_flags_r"><span class="bold">-r</span></a> ]
[  <a href="restvg.htm#d29ef14713fhol"><span class="bold">-s</span></a><span class="bold"></span> ]
[ <a href="restvg.htm#i0828971233mkm"><span class="bold">-n</span></a><span class="bold"></span> ]
[ <a href="restvg.htm#i0828971235mkm"><span class="bold">-P</span></a> <span class="italic">PPsize</span><span class="bold"></span> ] [ <span class="italic">DiskName ...</span> ]</p>
<a name="d29ef13709fhol"></a>
<h3 id="d29ef13709fhol">描述</h3>
<p><span class="bold">restvg</span> 命令恢复用户卷组以及所有它的容器和文件，
正如 <span class="bold">/tmp/vgdata/</span><span class="italic">vgname</span><span class="bold">/</span><span class="italic">vgname</span><span class="bold">.data</span> 文件中指定的那样（其中 <span class="italic">vgname</span> 是卷组名），该文件包含在 <span class="bold">savevg</span> 命令创建的备份映像中。</p>
<p><span class="bold">restvg</span> 命令恢复用户卷组。
<span class="bold">bosinstall</span> 例程重新安装 root 卷组
（<span class="bold">rootvg</span>）。如果 <span class="bold">restvg</span> 命令
在备份映像遇到 <span class="bold">rootvg</span> 卷组，
<span class="bold">restvg</span> 命令退出且带有一个错误。</p>
<p>如果 <span class="bold">yes</span> 值已经在 <span class="bold">/tmp/vgdata/</span><span class="italic">vgname</span><span class="bold">/</span><span class="italic">vgname</span><span class="bold">.data</span> 文件的  <span class="bold">logical_volume_policy</span> 节的 <tt>EXACT_FIT</tt> 字段指定，<span class="bold">restvg</span> 命令使用映射文件保持每个逻辑卷的物理分区的放置。
目标磁盘必须是相同大小或者更大，然后源磁盘在 <span class="italic">vgname</span><span class="bold">.data</span> 文件的 <span class="bold">source_disk_data</span> 节指定。</p>
<a name="wq1720"></a>
<div class="notetitle" id="wq1720">注:</div>
<div class="notebody">在备份映像查看文件或从备份映像恢复个别的文件，用户必须分别使用带有 <span class="bold">-T</span> 或 <span class="bold">-x</span> 标记的 <span class="bold">restore</span> 命令。（参考 <span class="bold">restore</span> 命令获得更多信息。）</div>
<a name="d29ef14410fhol"></a>
<h3 id="d29ef14410fhol">标志</h3>
<p></p>
<a name="wq1721"></a>
<table id="wq1721" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="38%">
<a id="d29ef14490fhol" name="d29ef14490fhol"></a><span class="bold">-b</span><span class="italic"> Blocks</span></td>
<td width="61%">  指定读入到单一输入操作的 512 字节块的数量。
如果参数未指定，<span class="bold">restore</span> 命令使用缺省值 100。至磁带设备的物理传输越大，值越大。</td>
</tr>
<tr>
<td><span class="italic">DiskName...</span></td>
<td>  指定要使用的设备名而不是在 <span class="italic">vgname</span><span class="bold">.data</span> 文件中列出的磁盘设备。目标磁盘设备必须定义为空物理卷；即，它们必须包含物理卷标识符并且不属于卷组。
如果目标磁盘设备是新的，则必须使用 <span class="bold">mkdev</span> 命令将它们添加到系统。
如果目标磁盘设备属于卷组，则必须使用 <span class="bold">reducevg</span> 命令从卷组中将它们除去。</td>
</tr>
<tr>
<td>
<a id="d29ef14490fjan" name="d29ef14490fjan"></a><span class="bold">-d</span> <span class="italic">FileName</span></td>
<td>-d 标志是可选的标志，如果指定，必须后跟文件名。
该文件用来作为 <span class="bold">vgname.data</span> 文件使用，而不是正在恢复的备份映像所包含的文件。
文件名既可以由相对路径名指定，又可以由绝对路径名指定。</td>
</tr>
<tr>
<td>
<a id="d29ef14642fhol" name="d29ef14642fhol"></a><span class="bold">-f</span><span class="italic"> Device</span></td>
<td>  指定备份介质的设备名。缺省值是 <span class="bold">/dev/rmt0</span>。</td>
</tr>
<tr>
<td>
<a id="restvg_flags_l" name="restvg_flags_l"></a><span class="bold">-l</span></td>
<td>显示关于卷组备份的有用信息。
<p>该标志需要
 <span class="bold">-f</span> <span class="italic">device</span> 标志。
该标志导致 <span class="bold">restvg</span> 显示信息，如卷组、
备份的日期和时间、从备份系统得到输出的 uname、操作系统级别、推荐的维护级别、以兆字节为单位的备份大小以及以兆字节为单位的备份压缩大小。
压缩大小是所有文件系统上数据的大小。
全部的大小是每个文件系统（未用的 + 数据）的整个大小。
<span class="bold">-l</span> 标志也显示逻辑卷和备份卷组的文件系统信息，这等价于运行“<span class="bold">lsvg -l</span> <span class="italic">vgname</span>”。</p></td>
</tr>
<tr>
<td>
<a id="i0828971233mkm" name="i0828971233mkm"></a><span class="bold">-n</span></td>
<td>  指定忽略存在的 MAP 文件。<span class="bold">-n</span> 标志重设 <span class="italic">vgname</span><span class="bold">.data</span> 文件的 logical_volume_policy 节中的 <tt>EXACT_FIT</tt> 字段的值。</td>
</tr>
<tr>
<td>
<a id="i0828971235mkm" name="i0828971235mkm"></a><span class="bold">-P</span><span class="italic"> PPsize</span></td>
<td>  指定每个物理分区的兆字节数。如果未指定，
<span class="bold">restvg</span> 依据正在恢复的最大磁盘，为 <span class="italic">PPsize</span> 使用最优值。
如果该值与在 <span class="italic">vgname</span><span class="bold">.data</span> 文件中指定的大小不同，在每个逻辑卷的分区数将根据新的 <span class="italic">PPsize</span> 适当的改变。 
<p>如果对于磁盘大小来说，<span class="italic">PPsize</span> 指定的值比适当的值小，那么使用较大的 <span class="italic">PPsize</span>。</p> 
<p>如果对于磁盘大小来说，<span class="italic">PPsize</span> 指定的值比适当的值大，那么使用指定的较大的 <span class="italic">PPsize</span>。</p></td>
</tr>
<tr>
<td>
<a id="d29ef14566fhol" name="d29ef14566fhol"></a><span class="bold">-q</span></td>
<td>  指定在卷组映像恢复以前，通常的提示不显示。
如果该标志未指定，提示显示卷组名和目标磁盘设备名。</td>
</tr>
<tr>
<td>
<a id="restvg_flags_r" name="restvg_flags_r"></a><span class="bold">-r</span></td>
<td>仅仅重新创建卷组结构。这允许从备份创建（为指定的备份
 <span class="italic">FileName</span> 或 <span class="italic">Device</span>）卷组、逻辑卷和文件系统而不恢复任何文件或数据。
这对于使用第三方软件恢复数据和仅在适当的位置需要所有的 AIX 逻辑卷结构的用户有用。

<a name="wq1722"></a>
<div class="notetitle" id="wq1722">注:</div>
<div class="notebody">或者使用 <span class="bold">-f</span> <span class="italic">Device</span> 标志或者使用 <span class="bold">-d</span> <span class="italic">FileName</span> 标志。这是因为 <span class="bold">restvg</span> 需要备份映像或 <span class="italic">vgname</span><span class="bold">.data</span> 文件来获得重新创建期望的卷组的逻辑卷结构所需要的所有信息。</div></td>
</tr>
<tr>
<td>
<a id="d29ef14713fhol" name="d29ef14713fhol"></a><span class="bold">-s</span></td>
<td>  指定以尽可能小（可以容纳文件系统）的磁盘空间创建逻辑卷。
该大小由 <span class="italic">vgname</span><span class="bold">.data</span> 文件
 （其中 <span class="italic">vgname</span> 是卷组名）的 <span class="bold">lv_data</span> 节的 <tt>LV_MIN_LPS</tt> 字段值指定。
<a name="f0b1e82765mart"></a>
<p id="f0b1e82765mart"><span class="bold">-s</span> 标志重设 <span class="italic">vgname</span><span class="bold">.data</span> 文件的 <span class="bold">logical_volume_policy </span>
节的 <tt>SHRINK</tt> 和 <tt>EXACT_FIT</tt> 字段的值。
<span class="bold">-s</span> 标志与 <tt>SHRINK=yes</tt> 和 <tt>EXACT_FIT=no</tt> 将引起的效果相同。</p></td>
</tr>
</tbody>
</table>
<a name="d29ef14858fhol"></a>
<h3 id="d29ef14858fhol">示例</h3>
<ol type="1">
<li><a name="d29ef14933fhol"></a><span id="d29ef14933fhol" class="pk"></span>从 <span class="bold">/dev/rmt1</span> 设备恢复卷组映像到 <span class="bold">hdisk2</span> 和 <span class="bold"> hdisk3</span> 磁盘，请输入：
<p></p>
<a name="d29ef15016fhol"></a>
<pre id="d29ef15016fhol" class="xmp">restvg -f/dev/rmt1 hdisk2 hdisk3</pre></li>
<li><a name="d29ef15093fhol"></a><span id="d29ef15093fhol" class="pk"></span>要恢复保存在 <span class="bold">/mydata/myvg</span> 文件中的卷组映像到包含在备份映像中的 <span class="italic">vgname</span><span class="bold">.data</span> 文件中指定的磁盘上，请输入：

<p></p>
<a name="d29ef15175fhol"></a>
<pre id="d29ef15175fhol" class="xmp">restvg -f/mydata/myvg</pre></li>
<li> 要仅使用 <span class="italic">vgname</span><span class="bold">.data</span> 文件 <span class="bold">/home/my_dir/my_vg.data</span> 而不恢复任何文件来重新创建卷组逻辑卷结构，请输入：
<pre class="xmp">restvg -r -d /home/my_dir/my_vg.data</pre>
<a name="wq1724"></a>
<div class="notetitle" id="wq1724">注:</div>
<div class="notebody">可以为卷组创建 <span class="italic">vgname</span><span class="bold">.data</span> 文件，通过使用 <span class="bold">mkvgdata</span> 命令即可。</div></li>
<li>要重新创建卷组逻辑卷结构，而不使用位于 <span class="bold">/dev/rmt0</span> 中磁带上的卷组备份中的 <span class="italic">vgname</span><span class="bold">.data</span> 文件来恢复任何文件，请输入以下内容：
<pre class="xmp">restvg -r -f /dev/rmt0</pre></li>
<li>显示备份在 <span class="bold">/dev/rmt0</span> 中磁带上有关卷组的卷组信息，输入：
<pre class="xmp">restvg -l -f /dev/rmt0</pre></li></ol>
<a name="d29ef15246fhol"></a>
<h3 id="d29ef15246fhol">相关信息</h3>
<a name="f0b1e84928mart"></a>
<p id="f0b1e84928mart"><span class="bold"></span> <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/mkvgdata.htm#d29ee0f383fhol"><span class="bold">mkvgdata</span></a> 命令、<a href="restore.htm#a1019422a"><span class="bold">restore</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds5/savevg.htm#d29efd0624fhol"><span class="bold">savevg</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/mkdev.htm#a33p06be"><span class="bold">mkdev</span></a> 命令、<a href="reducevg.htm#lxi4390frit"><span class="bold">reducevg</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="restvg.htm#Top_Of_Page">页的顶部</a> | <a href="restorevgfiles.htm">上一页</a> | <a href="resumevsd.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
