<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - nisaddent 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="nisaddent.htm#Bot_Of_Page">页的底部</a> | <a href="nisaddcred.htm">上一页</a> | <a href="niscat.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>

<a name="endr52913"></a>
<h2 id="endr52913">nisaddent 命令</h2>
<a name="a1219010js"></a>
<h3 id="a1219010js">用途</h3>
<p>从相应的 <span class="bold">/etc</span> 文件或 NIS 映射创建 NIS+ 表。</p>
<a name="wq331"></a>
<h3 id="wq331">语法</h3>
<p><span class="bold">nisaddent</span> [  <a href="nisaddent.htm#minusd"><span class="bold">-D</span></a> <span class="italic">defaults</span> ] [
 <a href="nisaddent.htm#minusp"><span class="bold">-P</span></a> ] [  <a href="nisaddent.htm#minusa"><span class="bold">-a</span></a> ] [ 
 <a href="nisaddent.htm#minusr"><span class="bold">-r</span></a>
] [  <a href="nisaddent.htm#minusv"><span class="bold">-v</span></a> ] [
 <a href="nisaddent.htm#minust"><span class="bold">-t</span></a> <span class="italic">table</span> ] <span class="italic">type</span> [ <span class="italic">nisdomain</span> ]</p>
<p><span class="bold">nisaddent</span> [  <a href="nisaddent.htm#minusd"><span class="bold">-D</span></a> <span class="italic">defaults</span> ]
[  <a href="nisaddent.htm#minusp"><span class="bold">-P</span></a> ] [  <a href="nisaddent.htm#minusa"><span class="bold">-a</span></a> ] [ 
 <a href="nisaddent.htm#minusp"><span class="bold">-p</span></a> ]
[  <a href="nisaddent.htm#minusr"><span class="bold">-r</span></a> ] [  <a href="nisaddent.htm#minusm"><span class="bold">-m</span></a> ] [ 
 <a href="nisaddent.htm#minusv"><span class="bold">-v</span></a> ]
 <a href="nisaddent.htm#minusf"><span class="bold">-f</span></a> <span class="italic">file</span> [  <a href="nisaddent.htm#minust"><span class="bold">-t</span></a>
<span class="italic">table</span> ]
<span class="italic">type</span>
[ <span class="italic">nisdomain</span> ]</p>
<p><span class="bold">nisaddent</span> [  <a href="nisaddent.htm#minusd"><span class="bold">-D</span></a> <span class="italic">defaults</span> ]
[  <a href="nisaddent.htm#minusp"><span class="bold">-P</span></a> ] [  <a href="nisaddent.htm#minusa"><span class="bold">-a</span></a> ] [ 
 <a href="nisaddent.htm#minusr"><span class="bold">-r</span></a> ]
[  <a href="nisaddent.htm#minusm"><span class="bold">-m</span></a> ] [  <a href="nisaddent.htm#minusv"><span class="bold">-v</span></a> ] [ 
 <a href="nisaddent.htm#minust"><span class="bold">-t</span></a> <span class="italic">table</span> ]
 <a href="nisaddent.htm#minusy"><span class="bold">-y</span></a> <span class="italic">ypdomain</span>
[  <a href="nisaddent.htm#minusy"><span class="bold">-Y</span></a> <span class="italic">map</span> ] <span class="italic">type</span> [ <span class="italic">nisdomain</span>
]</p>
<p><span class="bold">nisaddent</span>  <a href="nisaddent.htm#minusd"><span class="bold">-d</span></a> [ 
 <a href="nisaddent.htm#minusa"><span class="bold">-A</span></a> ]
[  <a href="nisaddent.htm#minusm"><span class="bold">-M</span></a> ] [  <a href="nisaddent.htm#minusq"><span class="bold">-q</span></a> ] [ 
 <a href="nisaddent.htm#minust"><span class="bold">-t</span></a> <span class="italic">table</span> ] <span class="italic">type</span> [ <span class="italic">nisdomain</span> ]</p>
<a name="a1219011js"></a>
<h3 id="a1219011js">描述</h3>
<p><span class="bold">nisaddent</span> 命令从它们相应的 <span class="bold">/etc</span> 文件和 NIS 映射在 NIS+ 表中创建项。为系统管理中使用的每一个标准表定制该操作。<span class="italic">type</span> 参数指定被处理的数据类型。该类型的合法值是以下值之一：<span class="bold">aliases</span>，<span class="bold">bootparams</span>，<span class="bold">ethers</span>，<span class="bold">group</span>，<span class="bold">hosts</span>，<span class="bold">netid</span>，<span class="bold">netmasks</span>，<span class="bold">networks</span>，<span class="bold">passwd</span>，<span class="bold">protocols</span>，<span class="bold">publickey</span>，<span class="bold">rpc</span>，<span class="bold">services</span>，<span class="bold">shadow</span>，或者是标准表的 <span class="bold">timezone</span> 或通用两栏（关键字、值）表的 <span class="bold">key-value</span>。针对不是 <span class="bold">key-value</span> 类型的位置特定表，您可使用 <a href="nistbladm.htm#wcc33099blch"><span class="bold">nistbladm</span></a> 来管理它。</p>
<p>NIS+ 表应该已由 <a href="nistbladm.htm#wcc33099blch"><span class="bold">nistbladm</span></a>、<a href="nissetup.htm#a033001js"><span class="bold">nissetup</span></a> 或 <a href="nisserver.htm#wc41699nsv"><span class="bold">nisserver</span></a> 创建。</p>
<p>使用 <a href="nispopulate.htm#nispopulate"><span class="bold">nispopulate</span></a> 而不是 <span class="bold">nisaddent</span> 来填充系统表更为简单。</p>
<p>缺省情况下，<span class="bold">nisaddent</span> 从标准输入读取数据，将其添加到与命令行上指定的 <span class="italic">type</span> 相关的 NIS+ 表中。备用 NIS+ 表可由 <a href="nisaddent.htm#minust"><span class="bold">-t</span></a> 标志指定。针对类型 <span class="bold">key-value</span>，必须指定表。</p>
<p></p><blockquote><span class="bold">注：</span><span class="italic">data</span> 类型可与表名不同（<a href="nisaddent.htm#minust"><span class="bold">-t</span></a>）。例如，自动安装程序表将 <span class="bold">key-value</span> 作为表类型。</blockquote>
<p>尽管有 <span class="italic">shadow</span> 数据类型，但却没有相应的 <span class="italic">shadow</span> 表。加密密码和密码数据存贮于 <span class="bold">passwd</span> 表中。</p>
<p>使用 <a href="nisaddent.htm#minusf"><span class="bold">-f</span></a> 标志可处理文件，使用  <a href="nisaddent.htm#minusy"><span class="bold">-y</span></a> 标志可处理 NIS V2（YP）映射。当从标准输入读取数据时，<a href="nisaddent.htm#minusm"><span class="bold">-m</span></a> 标志是不可用的。</p>
<p>当已指定 <span class="italic">ypdomain</span> 时，<span class="bold">nisaddent</span> 命令从 <span class="bold">dbm</span> 文件获取输入，作为适当的 NIS 映射（<span class="bold">mail.aliases</span>，<span class="bold">bootparams</span>，<span class="bold">ethers.byaddr</span>，<span class="bold">group.byname</span>，<span class="bold">hosts.byaddr</span>，<span class="bold">netid.byname</span>，<span class="bold">netmasks.byaddr</span>，<span class="bold">networks.byname</span>，<span class="bold">passwd.byname</span>，<span class="bold">protocols.byname</span>，<span class="bold">publickey.byname</span>，<span class="bold">rpc.bynumber</span>，<span class="bold">services.byname</span> 或 <span class="bold">timezone.byname</span>）。一个备用 NIS 映射可使用 <a href="nisaddent.htm#minusy"><span class="bold">-Y</span></a> 标志指定。针对类型 <span class="bold">key-value</span>，必须指定映射。映射必须在本地机器上的 <span class="bold">/var/yp/</span><span class="italic">ypdomain</span> 目录中。</p>
<p></p><blockquote><span class="bold">注：</span><span class="italic">  ypdomain</span> 是区分大小写的。<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds6/ypxfr.htm"><span class="bold">ypxfr</span></a> 命令可用于获取 NIS 映射。</blockquote>
<p>如果已指定 <span class="italic">nisdomain</span>，<span class="bold">nisaddent</span> 操作 NIS+ 域的 NIS+ 表，否则使用缺省域。</p>
<p>就性能而言，通过 <span class="bold">dbm</span> 文件装入表是最快的（<span class="bold">y</span>）。</p>
<a name="a1219012js"></a>
<h3 id="a1219012js">标志</h3>
<p></p>
<a name="wq332"></a>
<table id="wq332" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="30%">
<a id="minusa" name="minusa"></a><span class="bold">-a</span></td>
<td width="70%">在不删除任意现有的项的情况下，添加文件或映射到 NIS+ 表。此标志是缺省的。这种方式仅传播增加和修改，不传播删除。</td>
</tr>
<tr>
<td>
<a id="dup0021" name="dup0021"></a><span class="bold">-A</span></td>
<td>指定返回表中的数据和在初始表的串联路径上的表中的所有数据。</td>
</tr>
<tr>
<td>
<a id="minusd" name="minusd"></a><span class="bold">-d</span></td>
<td>以适当的格式为给定的 <span class="italic">type</span> 将 NIS+ 表转储到标准输出。对于 <span class="bold">key-value</span> 类型的表，使用 <a href="niscat.htm#endr39557"><span class="bold">niscat</span></a> 代替。要转储凭证表，转储 <span class="bold">publickey</span> 和 <span class="bold">netid</span> 类型。</td>
</tr>
<tr>
<td>
<a id="dup0022" name="dup0022"></a><span class="bold">-D</span><span class="italic"> defaults</span></td>
<td>指定在此操作过程中使用的不同的缺省值集合。<span class="italic">defaults</span> 字符串是一系列被冒号分隔的标记。这些标记表示通用对象属性使用的缺省值。所有合法标记描述如下：
<dl>
<dt class="bold"><span class="bold">ttl=</span><span class="italic">time</span></dt>
<dd>为该命令创建的对象设置缺省生存时间。值 <span class="italic">time</span> 以 <a href="nischttl.htm#endr95003"><span class="bold">nischttl</span></a> 命令所定义的格式被指定。缺省值是 12 小时。
</dd>
<dt class="bold"><span class="bold">owner=</span><span class="italic">ownername</span></dt>
<dd>指定 NIS+ 主体 <span class="italic">ownername</span> 应该拥有已创建的对象。该值的缺省值是正在执行命令的主体。
</dd>
<dt class="bold"><span class="bold">group=</span><span class="italic">groupname</span></dt>
<dd>指定组 <span class="italic">groupname</span> 应该是已创建对象的组所有者。缺省值是 <span class="bold">NULL</span>。
</dd>
<dt class="bold"><span class="bold">access=</span><span class="italic"> rights</span></dt>
<dd>指定赋予给定对象的访问权的集合。值 <span class="italic">rights</span> 以 <a href="nischmod.htm#a03252js"><span class="bold">nischmod</span></a> 命令所定义的格式被指定。缺省值是 <span class="bold">----rmcdr---r---</span>。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="minusf" name="minusf"></a><span class="bold">-f</span><span class="italic"> file</span></td>
<td>指定 <span class="italic">file</span> 应作为输入源（而不是标准输入）使用。</td>
</tr>
<tr>
<td>
<a id="minusm" name="minusm"></a><span class="bold">-m</span></td>
<td>用 NIS+ 表合并文件或映射。当只有少数更改时，这是用文件或 NIS 映射更新 NIS+ 表的最有效途径。
此标志添加那些不在数据库中的项，修改那些已存在的项（如果已更改），并且删除那些不在源中的项。无论何时，只要数据库足够大且已被复制，装入的映射仅在很少的项有所不同，则使用 <span class="bold">-m</span> 标志。该标志减少必须发送到副本的更新信息的数目。同时请参考 <a href="nisaddent.htm#minusr"><span class="bold">-r</span></a> 标志。</td>
</tr>
<tr>
<td>
<a id="dup0023" name="dup0023"></a><span class="bold">-M</span></td>
<td>指定查询应该发送到主控服务器。这确保大部分最新信息在以可能导致主控服务器忙或者由该操作导致服务器忙为代价的情况下可以被看到。</td>
</tr>
<tr>
<td>
<a id="minusp" name="minusp"></a><span class="bold">-p</span></td>
<td>当从一个文件中装入密码信息时，处理密码字段。缺省情况下，密码字段被忽略，因为它通常是无效的（真实密码显示在加密密码文件中）。</td>
</tr>
<tr>
<td>
<a id="dup0024" name="dup0024"></a><span class="bold">-P</span></td>
<td>如果初始搜索失败，指定查询应该跟随表的串联路径。</td>
</tr>
<tr>
<td>
<a id="minusq" name="minusq"></a><span class="bold">-q</span></td>
<td>以“quick” 方式转储表。转储表的缺省方法单独处理每一个项。对一些表（例如，主机），多个项必须组合为一行，因此必须对服务器生成额外请求。在“quick”方式下，表的全部项在对服务器的一次调用中都被检索到，所以表能更快地转储。然而，对于大的表，进程有可能耗尽虚拟内存且不能转储表。</td>
</tr>
<tr>
<td>
<a id="minusr" name="minusr"></a><span class="bold">-r</span></td>
<td>通过首先删除任意现有的项，然后从源（<span class="bold">/etc</span> 文件或 NIS+ 映射）添加项来在现有的 NIS+ 表中替换文件或者映射。该标志和 <a href="nisaddent.htm#dup0023"><span class="bold">-m</span></a> 标志有相同的作用。由于对性能的负面影响，除非有大量的更改，否则不推荐使用该标志。</td>
</tr>
<tr>
<td>
<a id="minust" name="minust"></a><span class="bold">-t</span><span class="italic"> table</span></td>
<td>为该操作指定 <span class="italic">table</span> 是 NIS+ 表。如果指定了该标志，这就应该是被比作为您的缺省域或 <span class="italic">domainname</span> 的相对名称。</td>
</tr>
<tr>
<td>
<a id="minusv" name="minusv"></a><span class="bold">-v</span></td>
<td>设置详细方式。</td>
</tr>
<tr>
<td>
<a id="minusy" name="minusy"></a><span class="bold">-y</span><span class="italic"> ypdomain</span></td>
<td>从 NIS 域 <span class="italic">ypdomain</span>，将相应 NIS 映射的 <span class="bold">dbm</span> 文件用作输入源。期望那些文件位于本地机器的 <span class="bold">/var/yp/</span><span class="italic">ypdomain</span> 目录中。如果机器不是 NIS 服务器，则使用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds6/ypxfr.htm"><span class="bold">ypxfr</span></a> 命令为相应映射获取 <span class="bold">dbm</span> 文件的副本。</td>
</tr>
<tr>
<td>
<a id="dup0025" name="dup0025"></a><span class="bold">-Y</span><span class="italic"> map</span></td>
<td>将 <span class="italic">map</span> 的 <span class="bold">dbm</span> 文件用为输入源。</td>
</tr>
</tbody>
</table>
<a name="a1219013js"></a>
<h3 id="a1219013js">环境</h3>
<p></p>
<a name="wq333"></a>
<table id="wq333" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%"><span class="bold">NIS_DEFAULTS</span></td>
<td width="50%">该变量包含覆盖 NIS+ 标准缺省值的缺省字符串。如果使用 <span class="bold">-D</span> 标志，那些值将覆盖 <span class="bold">NIS_DEFAULTS</span> 变量和标准缺省值。为避免安全性意外事件，对于 <span class="bold">passwd</span> 表，忽略 <span class="bold">NIS_DEFAULTS</span> 变量中的访问权，而使用 <a href="nisaddent.htm#dup0022"><span class="bold">-D</span></a> 标志指定的访问权。</td>
</tr>
<tr>
<td><span class="bold">NIS_PATH</span></td>
<td>如果已设置该变量，且 <span class="italic">nisdomain</span> 和 <span class="italic">table</span> 均未被全限定，则要搜索 <span class="bold">NIS_PATH</span> 中指定的每一个目录，直到查找到该表（参阅 <a href="nisdefaults.htm#a03256js"><span class="bold">nisdefaults</span></a> 命令）。</td>
</tr>
</tbody>
</table>
<a name="a1219014js"></a>
<h3 id="a1219014js">退出状态</h3>
<p>这个命令返回如下的出口值：</p>
<a name="wq334"></a>
<table id="wq334" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%">0</td>
<td width="50%">成功</td>
</tr>
<tr>
<td>1</td>
<td>由错误而并非分析造成的故障。</td>
</tr>
<tr>
<td>2</td>
<td>在某项中发生分析错误。分析错误不会导致终止；忽略无效项即可。</td>
</tr>
</tbody>
</table>
<a name="a1219015js"></a>
<h3 id="a1219015js">示例</h3>
<ol type="1">
<li>要添加 <span class="bold">/etc/passwd</span> 的内容到 <span class="bold">passwd.org_dir</span> 表，请输入：

<p></p>
<pre class="xmp">cat /etc/passwd | nisaddent passwd</pre></li>
<li>要添加加密密码信息，请输入：

<p></p>
<pre class="xmp">cat /etc/shadow | nisaddent shadow</pre> 
<p>即使真实信息存储在 <span class="bold">passwd</span> 表中，该表的类型是加密密码，而不是密码。</p></li>
<li>要用 <span class="bold">/etc/hosts</span> 的内容替换 <span class="bold">hosts.org_dir</span> 表（以详细方式），请输入：

<p></p>
<pre class="xmp">nisaddent -rv -f /etc/hosts hosts</pre></li>
<li>要将 <span class="bold">yypdomain</span> 中的 <span class="bold">passwd</span> 映射与 <span class="bold">passwd.org_dir.nisdomain</span> 表合并（以详细方式），请输入：
<p></p>
<pre class="xmp">nisaddent -mv -y myypdomain passwd nisdomain</pre> 
<p>该示例假定 <span class="bold">/var/yp/myypdomain</span> 目录包含 <span class="bold">yppasswd</span> 映射。</p></li>
<li>要将 <span class="bold">myypdomain</span> 中的 <span class="bold">auto.master</span> 映射和 <span class="bold">auto_master.org_dir</span> 表合并，请输入：
<p></p>
<pre class="xmp">nisaddent -m -y myypdomain -Y auto.master -t auto_master.org_dir key-value</pre></li>
<li>要转储 <span class="bold">hosts.org_dir</span> 表，请输入：

<p></p>
<pre class="xmp">nisaddent -d hosts</pre></li></ol>
<a name="wq336"></a>
<h3 id="wq336">信息</h3>
<p><a href="niscat.htm#endr39557"><span class="bold">niscat</span></a> 命令、<a href="nischmod.htm#a03252js"><span class="bold">nischmod</span></a> 命令、<a href="nisdefaults.htm#a03256js"><span class="bold">nisdefaults</span></a> 命令、<a href="nispopulate.htm#nispopulate"><span class="bold">nispopulate</span></a> 命令、<a href="nisserver.htm#wc41699nsv"><span class="bold">nisserver</span></a> 命令、<a href="nissetup.htm#a033001js"><span class="bold">nissetup</span></a> 命令、<a href="nistbladm.htm#wcc33099blch"><span class="bold">nistbladm</span></a> 命令、<a href="passwd.htm#oah1a0craw"><span class="bold">passwd</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds6/ypxfr.htm"><span class="bold">ypxfr</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="nisaddent.htm#Top_Of_Page">页的顶部</a> | <a href="nisaddcred.htm">上一页</a> | <a href="niscat.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
