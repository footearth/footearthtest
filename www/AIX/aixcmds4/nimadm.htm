<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 4，n - r - nimadm 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="nimadm 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="nimadm.htm#Bot_Of_Page">页的底部</a> | <a href="nimadapters.htm">上一页</a> | <a href="nimclient.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 4，n - r</h1></center>
<a id="idx81" name="idx81"></a>
<a name="nimadm"></a>
<h2 id="nimadm">nimadm 命令</h2>
<a name="wq263"></a>
<h3 id="wq263">用途</h3>
<p>使用 NIM 资源执行备用磁盘迁移到 AIX 的新版本或发行版。</p>
<a name="wq264"></a>
<h3 id="wq264">语法</h3>
<p>执行备用磁盘迁移：</p>
<p><span class="bold">nimadm</span> <a href="nimadm.htm#nimadm_flags_l"><span class="bold">-l</span></a> <span class="italic">lpp_source</span> <a href="nimadm.htm#nimadm_flags_c"><span class="bold">-c</span></a> <span class="italic">NIMClient</span> <a href="nimadm.htm#nimadm_flags_s"><span class="bold">-s</span></a> <span class="italic">SPOT</span> <a href="nimadm.htm#nimadm_flags_d"><span class="bold">-d</span></a> <span class="italic">TargetDisks</span> [ <a href="nimadm.htm#nimadm_flags_a"><span class="bold">-a</span></a> <span class="italic">PreMigrationScript</span> ] [ <a href="nimadm.htm#nimadm_flags_b"><span class="bold">-b</span></a> <span class="italic">installp_bundle</span>] [ <a href="nimadm.htm#nimadm_flags_z"><span class="bold">-z</span></a> <span class="italic">PostMigrationScript</span>] [ <a href="nimadm.htm#nimadm_flags_e"><span class="bold">-e</span></a> <span class="italic">exclude_files</span>] [ <a href="nimadm.htm#nimadm_flags_i"><span class="bold">-i</span></a> <span class="italic">image_data</span> ] [ <a href="nimadm.htm#nimadm_flags_j"><span>-j</span></a> <var class="pv">VGname</var> ] [ <a href="nimadm.htm#nimadm_flags_m"><span class="bold">-m</span></a> <span class="italic">NFSMountOptions</span> ] [ <a href="nimadm.htm#nimadm_flags_o"><span class="bold">-o</span></a> <span class="italic">bosinst_data</span>] [<a href="nimadm.htm#nimadm_flags_bigp"><span class="bold">-P</span></a> <span class="italic">Phases</span>] [<a href="nimadm.htm#nimadm_flags_bigy"><span class="bold">-Y</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigf"><span class="bold">-F</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigd"><span class="bold">-D</span></a> ]
[ <a href="nimadm.htm#nimadm_flags_bige"><span class="bold">-E</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigv"><span class="bold">-V</span></a> ] [ { <a href="nimadm.htm#nimadm_flags_bigb"><span class="bold">-B</span></a> | <a href="nimadm.htm#nimadm_flags_r"><span class="bold">-r</span></a> } ]</p>
<p>在客户机上清理备用磁盘迁移：</p>
<p><span class="bold">nimadm</span> <a href="nimadm.htm#nimadm_flags_bigc"><span class="bold">-C</span></a> <a href="nimadm.htm#nimadm_flags_c"><span class="bold">-c</span></a> <span class="italic">NIMClient</span> <a href="nimadm.htm#nimadm_flags_s"><span class="bold">-s</span></a> <span class="italic">SPOT</span> [ <a href="nimadm.htm#nimadm_flags_bigf"><span class="bold">-F</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigd"><span class="bold">-D</span></a> ]
[ <a href="nimadm.htm#nimadm_flags_bige"><span class="bold">-E</span></a> ]</p>
<p>唤醒卷组：</p>
<p><span class="bold">nimadm</span> <a href="nimadm.htm#nimadm_flags_bigw"><span class="bold">-W</span></a> <a href="nimadm.htm#nimadm_flags_c"><span class="bold">-c</span></a> <span class="italic">NIMClient</span> <a href="nimadm.htm#nimadm_flags_s"><span class="bold">-s</span></a> <span class="italic">SPOT</span> <a href="nimadm.htm#nimadm_flags_d"><span class="bold">-d</span></a> <span class="italic">TargetDisks</span> [<a href="nimadm.htm#nimadm_flags_m"><span class="bold">-m</span></a> <span class="italic">NFSMountOptions</span> ] [<a href="nimadm.htm#nimadm_flags_z"><span class="bold">-z</span></a> <span class="italic">PostMigrationScript</span> ] [ <a href="nimadm.htm#nimadm_flags_bigf"><span class="bold">-F</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigd"><span class="bold">-D</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bige"><span class="bold">-E</span></a> ]</p>
<p>设置卷组休眠：</p>
<p><span class="bold">nimadm</span> <a href="nimadm.htm#nimadm_flags_bigs"><span class="bold">-S</span></a> <a href="nimadm.htm#nimadm_flags_c"><span class="bold">-c</span></a> <span class="italic">NIMClient</span> <a href="nimadm.htm#nimadm_flags_s"><span class="bold">-s</span></a> <span class="italic">SPOT</span> [ <a href="nimadm.htm#nimadm_flags_bigf"><span class="bold">-F</span></a> ] [ <a href="nimadm.htm#nimadm_flags_bigd"><span class="bold">-D</span></a> ]
[ <a href="nimadm.htm#nimadm_flags_bige"><span class="bold">-E</span></a> ]</p>
<a name="wq265"></a>
<h3 id="wq265">描述</h3>
<p><span class="bold">nimadm</span>（网络安装管理器备用磁盘迁移）是一个实用程序，它允许系统管理员创建 <span class="bold">rootvg</span> 的副本到一个空白磁盘（或多个磁盘）并同步将其迁移到 AIX 的一个新版本或发行版级别。<span class="bold">nimadm</span> 使用 NIM 资源执行这个功能。</p>
<p>使用 <span class="pk">nimadm</span> 相对于常规迁移有诸多好处：</p>
<ol type="1">
<li>减少停机时间。迁移是在系统已经启动和功能正常时执行的。不要求从安装介质引导，并且大部分处理发生在 NIM 主控机上。</li>
<li><span class="bold">nimadm</span> 便于在发生迁移故障时快速恢复。由于 <span class="bold">nimadm</span> 使用 <span class="bold">alt_disk_install</span> 来创建 <span class="bold">rootvg</span> 的副本, 所有的更改都用于执行复制（altinst_rootvg）。如果发生严重的迁移安装故障，清除失败的迁移且管理员没有必要采取额外措施。在 AIX 的新（迁移的）级别发生问题的情况下，系统通过从原始磁盘引导能够迅速的返回到迁移前的操作系统。</li>
<li><span class="bold">nimadm</span> 在迁移过程中允许高度的适应性和定制。这是通过使用可选 NIM 定制资源来完成的：image_data、bosinst_data、exclude_files、pre-migration script、installp_bundle 和 post-migration script。</li></ol>
<p>请注意此文档仅提及与 <span class="bold">nimadm</span> 相关的主题。关于 alt_disk_install、NIM、迁移和其它相关的安装问题的完整内容，请查阅以下出版物的最新版本：</p>
<ul>
<li>"Network Installation Management Guide and Reference"</li>
<li>"AIX Installation Guide"</li>
<li>"Migration Redbook"</li></ul>
<a name="wq267"></a>
<h4 id="wq267">nimadm 本地磁盘高速缓存</h4>
<p>本地磁盘高速缓存允许 NIM 主控机避免必须将 NFS 写入客户机，这种功能在 NFS 写瓶颈导致 <span class="pk">nimadm</span> 操作无法正常执行时非常有用。如果使用 <span class="pk">-j</span> <var class="pv">VGname</var> 标志调用此功能，<span class="pk">nimadm</span> 将在指定卷组（在 NIM 主控机上）上创建文件系统并使用该系统将来自客户机的所有数据高速缓存到该文件系统上。</p>
<p>下面是此功能的优缺点：</p>
<p><span class="pk">优点：</span></p>
<ol type="1">
<li>提高了在相对较慢的网络上执行 nimadm 操作的性能。</li>
<li>提高了在 NFS 写（NFS 写占用的资源非常大）中存在瓶颈的 nimadm 操作的性能。</li>
<li>降低了客户机上的 CPU 使用量。</li>
<li>不导出客户机文件系统。</li></ol>
<p><span class="pk">缺点：</span></p>
<ol type="1">
<li>高速缓存文件系统占用 nim 主控机的空间（必须拥有足够的空间才能主管客户机的 <span class="pk">rootvg</span> 文件系统和每个客户机的迁移空间）。</li>
<li>增加了主控机上的 CPU 使用量。</li>
<li>增加了主控机上的 I/O（ 为了达到最佳性能而使用了不包含此操作中所用的 NIM 资源的卷组（磁盘））。</li></ol>
<p>如何执行磁盘高速缓存：</p>
<ol type="1">
<li>确保您处于 NIM 主控机上的 <span class="pk">bos.alt_disk_install.rte</span> 的最高级别。</li>
<li>将 <span class="pk">-j</span> <var class="pv">VGName</var> 标志添加到任何 <span class="pk">nimadm</span> 操作。例如：
<pre class="xmp">nimadm -j rootvg ...</pre>  或 
<pre class="xmp">nimadm -j cachevg</pre></li></ol>
<p>可以排除特定文件系统（迁移将不涉及该文件系统）通过网络高速缓存（这些文件系统仍将在本地复制到客户机的 <span class="pk">altinst_rootvg</span> 上）。要指定排除从网络高速缓存的文件系统列表，您需要在将用于迁移的 SPOT 资源的位置中创建一个文件。要获取此 SPOT 路径的准确位置，请输入：</p>
<pre class="xmp"># lsnim -a location <var class="pv">SpotName</var></pre>
<p>此文件应以以下格式命名：</p>
<pre class="xmp"><var class="pv">Nim_Client</var>.nimadm_cache.excl
</pre>
<a name="wq271"></a>
<div class="notetitle" id="wq271">注:</div>
<div class="notebody">此文件将仅适用于 <var class="pv">Nim_Client</var> 中指定的 nim 客户机。完整路径应为：
<pre class="xmp"><var class="pv">Spot_Location</var>/<var class="pv">Nim_Client</var>.nimadm_cache.excl</pre> 例如：<span class="pk">/nim_resources/520spot/usr/myclient.nimadm_cache.excl</span>。</div>
<p>要排除某个文件系统进行高速缓存，请在该文件中每行输入一个要排除的文件系统。应注意两个要点。</p>
<ol type="1">
<li>请勿排除迁移进程将调用的任何文件系统。换句话说，这些文件系统包含将迁移的软件文件。否则将导致不可预测的结果。</li>
<li>不应（不能）排除以下 AIX 文件系统：<span class="pk">/、/usr、/var、/opt、/home 和 /tmp</span>。</li></ol>
<p>使用磁盘高速缓存，<span class="pk">nimadm</span> 可更改以下四个阶段（所有其它阶段保留不变）：</p>
<p><span class="pk">阶段 2：</span>NIM 主控机在指定的目标卷组（NIM 主控机上）上创建本地高速缓存文件系统。</p>
<p><span class="pk">阶段 3：</span>NIM 主控机使用客户机的数据填充高速缓存文件系统。</p>
<p><span class="pk">阶段 9：</span>NIM 主控机将所有迁移的数据写入客户机得备用 <span class="pk">rootvg</span>。</p>
<p><span class="pk">阶段 10；</span>NIM 主控机清理并除去本地高速缓存文件系统。</p>
<a name="wq273"></a>
<h4 id="wq273">nimadm 要求</h4>
<p><span class="bold">nimadm</span> 的要求是：</p>
<ol type="1">
<li>已配置的 NIM 主控机，该主控机运行 AIX 5.1 或更高版本并安装了推荐的维护级别 5100-03 或更高的 AIX。</li>
<li>NIM 主控机必须与安装在其 <span class="bold">rootvg</span> 中的 <span class="bold">bos.alt_disk_install.r</span> 及用于执行迁移的 SPOT 有相同的级别。（注：不必在客户机上安装 <span class="bold">alt_disk_install</span> 实用程序）。</li>
<li>选定的 <span class="bold">lpp_source</span> NIM 资源和选定的 SPOT NIM 资源必须与正迁移到的 AIX 级别相匹配。</li>
<li>NIM 主控机所在的级别必须等同于或更高于要迁移到的 AIX 级别。</li>
<li>客户机（将被迁移的系统）必须在 AIX 4.3.3 或更高版本的级别上。</li>
<li>客户机必须有一个足够大的磁盘（或多个磁盘）用来克隆 <span class="bold">rootvg</span> 和一个用于迁移的额外的 500 兆（大约）可用空间。所需空间的总量取决于原始系统配置和 <span class="bold">nimadm</span> 定制。</li>
<li>目标客户机必须作为一个独立的 NIM 客户机在主控机上注册（参阅 <span class="bold">niminit</span> 命令获取更多信息）。nim 主控机必须能够使用 <span class="bold">rshd</span> 协议在客户机上执行远程命令。</li>
<li>nim 主控机必须能够使用 <span class="bold">rshd</span> 协议在客户机上执行远程命令。</li>
<li>NIM 主控机和客户机两者都必须拥有最小 128 兆字节的 RAM。</li>
<li>在 NIM 主控机和客户机之间必须存在一个可信赖的网络，它能够促进大量的 NFS 流量。NIM 主控机和客户机必须能够执行 NFS 安装和读／写操作。</li>
<li>客户机的硬件和软件应该支持正被迁移到的 AIX 级别并且满足其它全部的常规迁移要求。</li></ol>
<a name="wq275"></a>
<div class="notetitle" id="wq275">注:</div>
<div class="notebody">如果不能满足 1-10 的要求，则需要执行一次常规迁移。如果不能满足第 11 条要求，那么迁移将是不可能的。</div>
<div class="attention"><span class="attentiontitle">注意: </span>在执行 <span class="bold">nimadm</span> 迁移之前，要求您必须同意将要安装的软件的所有软件许可证协议。可以通过将 <span class="bold">-Y</span> 标志指定为 <span class="bold">nimadm</span> 命令的参数或将 <span class="bold">ADM_ACCEPT_LICENSES</span> 环境变量设置为“yes”来执行此操作。</div>
<a name="wq276"></a>
<h4 id="wq276">nimadm 限制</h4>
<p>以下的限制适用于 <span class="bold">nimadm</span>：</p>
<ol type="1">
<li>如果客户机的 <span class="bold">rootvg</span> 已将 TCB 打开，则需要禁用它（永久的）或者执行一次常规迁移。（该限制的存在是因为 TCB 需要访问 NFS 上不可见的文件元数据）。</li>
<li><span class="bold">nimadm</span> 使用的所有 NIM 资源对于 NIM 主控机必须是本地的。</li>
<li>尽管在迁移过程中对于客户机活动的 <span class="bold">rootvg</span> 几乎没有干扰，但由于增加的磁盘 I/O、biod 活动和与 <span class="bold">alt_disk_install</span> 克隆有关的 CPU 使用，客户机的性能可能会稍微降低一点。</li>
<li>NFS 调节对于优化 <span class="bold">nimadm</span> 性能是必需的。</li></ol>
<a name="wq278"></a>
<h4 id="wq278">nimadm 使用的 NIM 资源：</h4>
<dl>
<dt class="bold">SPOT 资源（-s 标志）</dt>
<dd>所有的 <span class="bold">nimadm</span> 操作（迁移、清除、唤醒、休眠）都需要 NIM 复合点资源。客户机将使用的全部 <span class="bold">nimadm</span> 和 <span class="bold">alt_disk_install</span> 实用程序均安装在这种资源里。不必在客户机上安装 <span class="bold"> nimadm</span> 软件。NIM 的 cust 操作应该用于安装下列文件集到复合点：
<ul>
<li>要求：<span class="bold">bos.alt_disk_install.rte</span>（必须与 NIM 主控机的级别相匹配）。</li>
<li>可选的消息目录：<span class="bold">bos.msg.<span class="italic">$LANG</span>.alt_disk_install.rte</span></li></ul>
</dd>
<dt class="bold">lpp_source 资源（-l 标志）</dt>
<dd>该 NIM 资源是将用于迁移系统的安装映像源。它对于 nimadm 迁移操作是必需的。<span class="bold">lpp_source</span> 必须包含正被迁移到的级别的全部系统映像（检查 <span class="bold">lsnim -l</span> <span class="bold">lpp_source</span> 输出中的 lpp_source 映像属性）。它还必须包含需要被迁移的任何可选的 <span class="pk">installp</span> 映像。
</dd>
<dt class="bold">pre-migration</dt>
<dd>此脚本资源在 NIM 主控机上运行，但是需在主控机安装有客户机的 <span class="pk">alt_inst</span> 文件系统的环境中（这是通过使用 <span class="bold">chroot</span> 命令来完成的）。该脚本在迁移开始前运行。
</dd>
<dt class="bold">post-migration</dt>
<dd>这种脚本资源与 <span class="bold">pre-migration</span> 脚本类似，但在迁移完成后执行。
</dd>
<dt class="bold">image_data</dt>
<dd>指定传递到 <span class="bold">alt_disk_install</span> 的 <span class="bold">image_data</span> 资源（作为 <span class="bold">-i</span> 标志的参数）。NIM 在调用 <span class="bold">alt_disk_install</span> 之前将在客户机上分配和安装这种资源。
</dd>
<dt class="bold">exclude_files</dt>
<dd>指定要传递到 <span class="bold">alt_disk_install</span> 的 <span class="bold">exclude_files</span> 资源（作为 <span class="pk">-e</span> 标志的参数）。
NIM 在调用 <span class="bold">alt_disk_install</span> 之前将在客户机上分配和安装这种资源。
</dd>
<dt class="bold">installp_bundle</dt>
<dd>这种 NIM 资源指定完成迁移后 <span class="bold">nimadm</span> 将要安装的任何额外的软件。
</dd>
<dt class="bold">bosinst_data</dt>
<dd>这种 NIM 资源指定 <span class="bold">nimadm</span> 可能使用的各种安装设置。
</dd>
</dl>
<a name="wq279"></a>
<h4 id="wq279">nimadm 迁移过程</h4>
<p><span class="bold">nimadm</span> 执行迁移分为 12 个阶段。每个阶段都可使用 <span class="bold">-P</span> 标志独立的执行。分阶段执行迁移之前用户应该对 <span class="bold">nimadm</span> 的过程有很好的理解。以下是 <span class="bold">nimadm</span> 各阶段：</p>
<ol type="1">
<li>主控机对客户机发出一个 <span class="bold">alt_disk_install</span> 命令，将 <span class="bold">rootvg</span> 复制到目标磁盘（这是 <span class="bold">alt_disk_install</span> 过程的第一阶段）。在这个阶段创建了 <span class="bold">altinst_rootvg</span>（备用 rootvg）。</li>
<li>主控机运行远程客户机命令来将所有的 <span class="bold">/alt_inst</span> 文件系统导出到主控机。文件系统作为对主控机拥有 root 访问权限的读／写被导出。</li>
<li>主控机 NFS 安装第二阶段导出的文件系统。</li>
<li>如果已指定预迁移脚本资源，那么它在此时执行。</li>
<li> 保存系统配置文件。计算初始迁移空间并且进行适当的文件系统扩展。恢复“bos” 同时合并设备数据库（类似于常规迁移）。执行全部的迁移合并方法并且进行一些多样化处理。</li>
<li>所有系统文件集都使用 <span class="bold">installp</span> 迁移。
任何所需要的 RPM 映像也在这个阶段安装。</li>
<li>如果已指定 <span class="bold">post-migration</span> 脚本资源，那么它在此时执行。</li>
<li>执行 <span class="bold">bosboot</span> 来创建客户机引导映像，该映像被写出到客户机的引导逻辑卷（<span class="bold">hd5</span>）。</li>
<li>除去第三阶段主控机上进行的全部安装。</li>
<li>除去创建于第二阶段的全部客户机导出。</li>
<li>再次调用 <span class="bold">alt_disk_install</span>（<span class="bold">alt_disk_install</span> 的第三阶段）来进行最终调整，使 <span class="bold">altinst_rootvg</span> 进入休眠状态。对目标磁盘设置引导列表（除非已使用 <span class="pk">-B</span> 标志）。</li>
<li>执行清除来结束迁移。如果指定了 <span class="pk">-r</span> 标志，将重新引导此客户机。</li></ol>
<a name="wq281"></a>
<div class="notetitle" id="wq281">注:</div>
<div class="notebody"><span class="bold">nimadm</span> 支持数台客户机的同时迁移。</div>
<a name="wq282"></a>
<h4 id="wq282">nimadm 清除操作</h4>
<p>这种操作（用“<span class="bold">-C</span>” 标志表示）是为在失败的迁移后进行清除而设计，由于某些原因此迁移自身不能执行清除。它也可用于为执行一次新的迁移而清除以前的迁移。</p>
<a name="wq283"></a>
<h4 id="wq283">nimadm 唤醒与休眠</h4>
<p>迁移完成后，<span class="bold">nimadm</span> 可以用来“唤醒”迁移的 <span class="bold">altinst_rootvg</span> 或者原始的 <span class="bold">rootvg</span>（如果从迁移的磁盘引导）。<span class="bold">nimadm</span> 唤醒操作（<span class="bold">-W</span> 标志）执行 <span class="bold">alt_disk_install</span> 唤醒，NFS 导出 <span class="bold">／alt_inst</span> 文件系统，并将它们安装到 NIM 主控机上。<span class="bold">nimadm</span> 休眠功能（<span class="bold">-S</span> 标志）通过在客户机上卸除 NIM 主控机上的安装，取消导出 <span class="bold">/alt_inst</span> 文件系统以及执行 <span class="bold">alt_disk_install</span> 休眠功能来撤销唤醒。</p>
<a name="wq284"></a>
<h3 id="wq284">标志</h3>
<a name="wq285"></a>
<table id="wq285" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td width="27%">
<a id="nimadm_flags_a" name="nimadm_flags_a"></a><span class="bold">-a</span> <span class="italic">PreMigrationScript</span></td>
<td width="72%">指定预迁移 NIM 脚本资源。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_b" name="nimadm_flags_b"></a><span class="bold">-b</span> <span class="italic">installp_bundle</span></td>
<td>指定 installp_bundle NIM 资源。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigb" name="nimadm_flags_bigb"></a><span class="bold">-B</span></td>
<td>指定 <span class="bold">nimadm</span> 迁移后不运行 <span class="bold">bootlist</span>。如果设置此标志，那么 <span class="bold">-r</span> 标志不可用。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_c" name="nimadm_flags_c"></a><span class="bold">-c</span> <span class="italic">TargetDisks</span></td>
<td>指定将作为该 <span class="bold">nimadm</span> 操作的目标的 NIM 定义客户机。此标志对于所有 <span class="bold">nimadm</span> 操作是必需的。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigc" name="nimadm_flags_bigc"></a><span class="bold">-C</span></td>
<td>执行 <span class="bold">nimadm</span> 清除。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_d" name="nimadm_flags_d"></a><span class="bold">-d</span> <span class="italic">TargetDisks</span></td>
<td>指定用于创建 <span class="bold">altinst_rootvg</span> 客户机目标磁盘（将迁移的卷组）。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigd" name="nimadm_flags_bigd"></a><span class="bold">-D</span></td>
<td>设置 <span class="bold">nimadm</span> 进入调试方式。该功能仅用于调试与 <span class="bold">nimadm</span> 相关的问题，在缺省情况下未设置。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_e" name="nimadm_flags_e"></a><span class="bold">-e</span> <span class="italic">exclude_files</span></td>
<td>指定 <span class="bold">exclude_files</span> NIM 资源。在第一阶段 <span class="bold">alt_disk_install</span> 命令使用此资源。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bige" name="nimadm_flags_bige"></a><span class="bold">-E</span></td>
<td>如果发生严重迁移错误，则进入 <span class="bold">nimadm</span> 调试器。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigf" name="nimadm_flags_bigf"></a><span class="bold">-F</span></td>
<td>强制客户机解锁。通常情况下，<span class="bold">nimadm</span> 锁定某一客户机以执行各种操作。当客户机被锁定时，其它 <span class="bold">nimadm</span> 或者 NIM 操作均不能执行。该标志应仅用于客户机发生误锁的非正常情况（由于某些原因使得出错后 <span class="bold">nimadm</span> 不能调用清除操作时可能发生这种情况）。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_i" name="nimadm_flags_i"></a><span class="bold">-i</span> <span class="italic">image_data</span></td>
<td>指定 <span class="bold">image_data</span> NIM 资源。从第一阶段到第十一阶段，<span class="bold">alt_disk_install</span> 命令使用该资源。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_j" name="nimadm_flags_j"></a><span class="pk">-j</span> <var class="pv">VGname</var></td>
<td> 在指定卷组（NIM 主控机上）上创建文件系统并使用流将来自客户机的数据高速缓存到这些文件系统。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_l" name="nimadm_flags_l"></a><span class="bold">-l</span> <span class="italic">lpp_source</span></td>
<td>指定 lpp_source NIM 资源用于 <span class="bold">nimadm</span> 操作。此标志对于迁移操作是必需的。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_m" name="nimadm_flags_m"></a><span class="bold">-m</span> <span class="italic">NFSMountOptions</span></td>
<td>指定将被传递到安装命令的参数，该命令在主控机上<span class="bold">安装</span>客户机资源。该标志用于调节与  <span class="bold">nimadm</span> 相关的 NFS 性能。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_o" name="nimadm_flags_o"></a><span class="bold">-o</span> <span class="italic">bosinst_data</span></td>
<td>指定 <span class="bold">bosinst_data</span> NIM 资源。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigp" name="nimadm_flags_bigp"></a><span class="bold">-P</span> <span class="italic">Phase</span></td>
<td>此阶段在 <span class="bold">nimadm</span> 的调用过程中执行。如果有多个阶段，可以用空格或逗号分隔这些阶段。第一到第十二阶段都是有效阶段。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_r" name="nimadm_flags_r"></a><span class="bold">-r</span></td>
<td>指定 <span class="bold">nimadm</span> 迁移完成后客户机应该重新引导。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_s" name="nimadm_flags_s"></a><span class="bold">-s</span> <span class="italic">SPOT</span></td>
<td>指定用于该 <span class="bold">nimadm</span> 操作的 <span class="bold">SPOT</span> NIM 资源。此标志对于所有 <span class="bold">nimadm</span> 操作是必需的。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigs" name="nimadm_flags_bigs"></a><span class="bold">-S</span></td>
<td>执行 <span class="bold">nimadm</span>“休眠”功能。执行此功能来结束 <span class="bold">nimadm</span>“唤醒”。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigv" name="nimadm_flags_bigv"></a><span class="bold">-V</span></td>
<td>打开详细输出。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigw" name="nimadm_flags_bigw"></a><span class="bold">-W</span></td>
<td>执行 <span class="bold">nimadm</span>“唤醒”功能。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_bigy" name="nimadm_flags_bigy"></a><span class="bold">-Y</span></td>
<td>同意将要安装的软件所需要的软件许可证协议。</td>
</tr>
<tr>
<td>
<a id="nimadm_flags_z" name="nimadm_flags_z"></a><span class="bold">-z</span> <span class="italic">PostMigrationScript</span></td>
<td>指定后移植 NIM 脚本资源。</td>
</tr>
</tbody>
</table>
<a name="wq286"></a>
<h3 id="wq286">退出状态</h3>
<dl>
<dt class="bold">0</dt>
<dd>所有与 nimadm 相关的操作成功完成。
</dd>
<dt class="bold">0</dt>
<dd>一个错误发生。
</dd>
</dl>
<a name="wq287"></a>
<h3 id="wq287">安全性</h3>
<p>仅 root 用户能够执行 <span class="bold">nimadm</span>。</p>
<a name="wq288"></a>
<h3 id="wq288">示例</h3>
<ol type="1">
<li>要执行 <span class="bold">nimadm</span> 到目标 NIM 客户机 aix1 的迁移，需使用 NIM <span class="bold">SPOT</span> 资源 spot1、NIM <span class="bold">lpp_source</span> 资源 lpp1 和目标磁盘 hdisk1 &amp; hdisk2。请注意，<span class="bold">-Y</span> 标志认同要安装的软件所需的全部软件许可证协议，请输入以下命令：
<pre class="xmp">nimadm -c aix1 -s spot1 -l lpp1 -d "hdisk1 hdisk2" -Y</pre></li>
<li>要对 hdisk2 执行与上例中相同的操作，并且也运行预迁移脚本 nimscript1 和后移植脚本 nimscript2，请输入以下命令：
<pre class="xmp">nimadm -c aix1 -s spot1 -a nimscrip1 -z nimscript2 -l lpp1 -d hdisk1 -Y</pre></li>
<li>要使用 NIM <span class="bold">SPOT</span> 资源 spot1，在客户机 aix1 上执行 <span class="bold">nimadm</span> 清除，请输入以下命令：
<pre class="xmp">nimadm -C -c aix1 -s spot1</pre></li></ol>
<a name="wq290"></a>
<h3 id="wq290">文件</h3>
<a name="wq291"></a>
<table id="wq291" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td width="27%"><span class="bold">/usr/sbin/nimadm</span></td>
<td width="72%">包含 <span class="bold">nimadm</span> 命令。</td>
</tr>
</tbody>
</table>
<a name="wq292"></a>
<h3 id="wq292">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/lslpp.htm#a228y9593"><span class="bold">lslpp</span></a> 命令、<a href="nim.htm#gsjqi2badoug"><span class="bold">nim</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/lsnim.htm#arjqi345doug"><span class="bold">lsnim</span></a> 命令、<span class="bold">alt_disk_install</span> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds3/installp.htm"><span class="bold">installp</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds4/cmds/aixcmds1/chroot.htm"><span class="bold">chroot</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="nimadm.htm#Top_Of_Page">页的顶部</a> | <a href="nimadapters.htm">上一页</a> | <a href="nimclient.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds402.htm#wq2312">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
