<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 6，v - z - watch 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="watch 命令, 使用 watch 命令, 监视, 程序" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="watch.htm#Bot_Of_Page">页的底部</a> | <a href="wallevent.htm">上一页</a> | <a href="wc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 6，v - z</h1></center>

<a name="a27097"></a>
<h2 id="a27097">watch 命令</h2>
<p><a id="idx60" name="idx60"></a></p>
<a name="a27099"></a>
<h3 id="a27099">用途</h3>
<a name="fa52063262mart"></a>
<p id="fa52063262mart">观察一个可能不可信赖的程序。<a id="idx61" name="idx61"></a></p>
<a name="a2709a"></a>
<h3 id="a2709a">语法</h3>
<p><span class="bold">watch</span> [&nbsp; <a href="watch.htm#a1d4110frit"><span class="bold">-e</span></a><span class="italic"> Events&nbsp;</span>] [&nbsp; <a href="watch.htm#ed4270frit"><span class="bold">-o</span>&nbsp;</a><span class="italic">File&nbsp;</span>] <span class="italic">Command&nbsp;</span>[&nbsp;<span class="italic">Parameter&nbsp;</span>...&nbsp;]</p>
<a name="a2709d"></a>
<h3 id="a2709d">描述</h3>
<a name="fa52063635mart"></a>
<p id="fa52063635mart"><span class="bold">watch</span> 命令允许
root 用户或一个审计组成员观察一个认为是不可信赖的程序操作。<span class="bold">watch</span> 命令
执行用 <span class="italic">Command</span> 参数指定的程序，
可以带任何 <span class="italic">Parameter</span> 字段也可以不带，记录
所有审计事件或用 <span class="bold">-e</span> 标志指定的审计事件。</p>
<a name="fa52063734mart"></a>
<p id="fa52063734mart"><span class="bold">watch</span> 命令观察所有
在程序运行时创建的进程，包括任何子进程。<span class="bold">watch</span> 命令
会继续直到所有的进程（包括它创建的进程）退出，以观察所有发生的事件。</p>
<a name="fa52063830mart"></a>
<p id="fa52063830mart"><span class="bold">watch</span> 命令格式化
审计记录并把它们写到标准输出或用 <span class="bold">-o</span> 标志指定的一个文件。</p>
<a name="fa52063926mart"></a>
<p id="fa52063926mart">为了使 <span class="bold">watch</span> 命令起作用，
一定不要配置和启用审计子系统。</p>
<a name="a2709e"></a>
<h3 id="a2709e">标志</h3>
<p></p>
<a name="wq245"></a>
<table id="wq245" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="15%">
<a id="a1d4110frit" name="a1d4110frit"></a><span class="bold">-e</span><span class="italic">Events</span></td>
<td width="85%">  指定要审计的事件。<span class="italic">Events</span> 参数是
在 <span class="bold">/etc/security/audit/events</span> 文件中定义的
以逗号分隔的审计事件列表。缺省值是所有事件。</td>
</tr>
<tr>
<td>
<a id="ed4270frit" name="ed4270frit"></a><span class="bold">-o</span><span class="italic"> File</span></td>
<td>  指定输出文件的路径名。如果没有使用 <span class="bold">-o</span> 标志，则输出写到标准输出。</td>
</tr>
</tbody>
</table>
<a name="a3139a84"></a>
<h3 id="a3139a84">安全性</h3>
<a name="fa52064292mart"></a>
<p id="fa52064292mart">访问控制：这个命令应授予 root 用户
和审计组成员执行（x）访问权。该命令应该为 root 用户的 <span class="bold">setuid</span>，以使其能访问其它审计
子系统命令和文件，并有<span class="bold">可信计算库</span>属性。</p>
<a name="fa52064378mart"></a>
<p id="fa52064378mart">访问的文件：</p>
<a name="wq246"></a>
<table id="wq246" width="100%" summary="" border="0" frame="void" rules="none">
<thead valign="bottom">
<tr>
<th id="wq247" width="8%" align="left">方式</th>
<th id="wq248" width="91%" align="left">  文件</th>
</tr>
</thead>
<tbody valign="top">
<tr>
<td headers="wq247">
<a id="a3139a8a" name="a3139a8a"></a><span class="bold">r</span></td>
<td headers="wq248">  <span class="bold">/dev/audit</span></td>
</tr>
<tr>
<td headers="wq247">
<a id="a355f935" name="a355f935"></a><span class="bold">x</span></td>
<td headers="wq248">  <span class="bold">/usr/sbin/auditstream</span></td>
</tr>
<tr>
<td headers="wq247">
<a id="a355f936" name="a355f936"></a><span class="bold">x</span></td>
<td headers="wq248">  <span class="bold">/usr/sbin/auditselect</span></td>
</tr>
<tr>
<td headers="wq247">
<a id="a355f937" name="a355f937"></a><span class="bold">x</span></td>
<td headers="wq248">  <span class="bold">/usr/sbin/auditpr</span></td>
</tr>
</tbody>
</table>
<a name="a2709f"></a>
<h3 id="a2709f">示例</h3>
<ol type="1">
<li><a name="a270910"></a><span id="a270910" class="pk"></span>要观察 <span class="bold">bar</span> 命令打开的所有文件，请输入：
<p></p>
<a name="a270911"></a>
<pre id="a270911" class="xmp">watch&nbsp;-e&nbsp;FILE_Open&nbsp;/usr/lpp/foo/bar&nbsp;-x</pre><p class="indatacontent"> 这个命令打开审计设备并执行 <span class="bold">/usr/lpp/foo/bar</span> 命令。然后
它读取所有记录并选择和格式化那些 <tt>FILE_Open</tt> 事件类型的记录。</p></li>
<li><a name="a64f0408"></a><span id="a64f0408" class="pk"></span>要观察 <tt>xyzproduct</tt> 程序的安装，
该程序可能是不可信赖的，请输入：
<p></p>
<a name="a1179177"></a>
<pre id="a1179177" class="xmp">watch&nbsp;/usr/sbin/installp&nbsp;xyzproduct</pre><p class="indatacontent"> 这个命令
打开审计设备并执行 <span class="bold">/usr/sbin/installp</span> 命令。然后
读取所有记录并将它们格式化。</p></li></ol>
<a name="a270914"></a>
<h3 id="a270914">文件</h3>
<p></p>
<a name="wq250"></a>
<table id="wq250" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="a270915" name="a270915"></a><span class="bold">/usr/sbin/watch</span></td>
<td width="75%">  包含 <span class="bold">watch</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a270916" name="a270916"></a><span class="bold">/dev/audit</span></td>
<td>  指定从中读取审计记录的审计设备。</td>
</tr>
</tbody>
</table>
<a name="a270918"></a>
<h3 id="a270918">相关信息</h3>
<a name="fa52065947mart"></a>
<p id="fa52065947mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/audit.htm#a14294a5"><span class="bold">audit</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/auditbin.htm#a116951b"><span class="bold">auditbin</span></a> 守护进程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/auditcat.htm#phn3310frit"><span class="bold">auditcat</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/auditpr.htm#a1169571"><span class="bold">auditpr</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/auditselect.htm#a163c11669"><span class="bold">auditselect</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds1/auditstream.htm#a1169478"><span class="bold">auditstream</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds3/login.htm#a68v042f7"><span class="bold">login</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds3/logout.htm#a68v042da"><span class="bold">logout</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds5/su.htm#a248y99c6d"><span class="bold">su</span></a> 命令。</p>
<a name="fa52066038mart"></a>
<p id="fa52066038mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds6/libs/basetrf1/auditread.htm#a28295d4"><span class="bold">auditread </span></a> 子例程。</p>
<a name="fa52066234mart"></a>
<p id="fa52066234mart">关于用户的标识和认证、自主访问控制、可信计算库和审计的更多信息，请参阅<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/aixbman/security/About.htm"><span class="italic">《AIX 5L V5.2 安全指南》</span></a>。</p>
<a name="fa52066332mart"></a>
<p id="fa52066332mart">关于审计的更多信息，请参阅<span class="italic">《AIX 5L V5.2 安全指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/aixbman/security/auditing_overview.htm">『审计综述』</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="watch.htm#Top_Of_Page">页的顶部</a> | <a href="wallevent.htm">上一页</a> | <a href="wc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
