<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 6，v - z - xntpdc 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="xntpdc 命令, xntpdc, 命令, 使用 xntpdc 命令,
xntpdc 守护进程, 查询／控制程序，启动, 启动 xntpdc, 网络计时协议守护进程" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="xntpdc.htm#Bot_Of_Page">页的底部</a> | <a href="xntpd.htm">上一页</a> | <a href="xpr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 6，v - z</h1></center>

<a name="mjcanfamart"></a>
<h2 id="mjcanfamart">xntpdc 命令</h2>
<p><a id="idx181" name="idx181"></a><a id="idx182" name="idx182"></a></p>
<a name="a3b2840d141endr"></a>
<h3 id="a3b2840d141endr">用途</h3><a id="idx183" name="idx183"></a><a id="idx184" name="idx184"></a>
<a name="a3b2840d220endr"></a>
<p id="a3b2840d220endr">启动网络计时协议守护进程 <span class="bold">xntpd</span> 的查询／控制程序。</p>
<a name="a3b2840d259endr"></a>
<h3 id="a3b2840d259endr">语法</h3>
<p><span class="bold">xntpdc</span> [&nbsp; <a href="xntpdc.htm#sccan391mart"><span class="bold">-i&nbsp;</span></a>] [&nbsp; <a href="xntpdc.htm#pdcan2a8mart"><span class="bold">-l&nbsp;</span></a>] [&nbsp; <a href="xntpdc.htm#qecan245mart"><span class="bold">-n&nbsp;</span></a>]
[&nbsp; <a href="xntpdc.htm#fecan5bmart"><span class="bold">-p&nbsp;</span></a>] [&nbsp; <a href="xntpdc.htm#qecan82mart"><span class="bold">-s&nbsp;</span></a>] [&nbsp; <a href="xntpdc.htm#gccan395mart"><span class="bold">-c&nbsp;</span><span class="italic">SubCommand&nbsp;</span></a>] [<span class="bold">&nbsp;</span> <a href="xntpdc.htm#a2gcan32bmart"><span class="italic">Host&nbsp;</span>...&nbsp;</a>]</p>
<a name="a3b2840d405endr"></a>
<h3 id="a3b2840d405endr">描述</h3>
<a name="a3b2840d484endr"></a>
<p id="a3b2840d484endr"><span class="bold">xntpdc</span> 命令查询 <span class="bold">xntpd</span> 守护进程有关当前状态并请求对状态的更改。它以交互方式运行，或者通过使用命令行自变量运行。<span class="bold">xntpdc</span> 命令接口显示大量的状态信息和统计信息。几乎所有那些在启动时可用  <span class="bold">xntpd</span> 守护进程配置文件指定的配置选项，也都能够在运行时用 <span class="bold">xntpdc</span> 命令指定。</p>
<a name="a3b2840d530endr"></a>
<p id="a3b2840d530endr">如果输入 <span class="bold">xntpdc</span> 命令，并带有一个或多个请求标志，则在每个所指定的主机上运行的 NTP 服务器（或缺省为本地主机）接收每个请求。如果不输入任何请求标志，<span class="bold">xntpdc</span> 命令试图从标准输入读取命令，并在运行于所指定的第一个主机上或者缺省情况下本地主机上的 NTP 服务器上运行它们。如果标准输入是终端，则它会提示要求输入子命令。</p>
<a name="a3b2840d574endr"></a>
<p id="a3b2840d574endr"><span class="bold">xntpdc</span> 命令使用 NTP 方式 7 的包与 NTP 服务器通信，并能够在允许它的网络上查询任何兼容的服务器。</p>
<a name="a3b2840d619endr"></a>
<p id="a3b2840d619endr"><span class="bold">xntpdc</span> 命令不试图重新发送请求，如果远程主机在适当的时间内没有响应，它将使请求超时。</p>
<a name="a3b2840d665endr"></a>
<p id="a3b2840d665endr">指定 <span class="bold">-i</span> 或 <span class="bold">-n</span> 之外的标志会立刻将查询请求发送至指定的主机。否则，<span class="bold">xntpdc</span> 命令尝试从标准输入读取交互式格式的命令。</p>
<a name="a3b2840d703endr"></a>
<h3 id="a3b2840d703endr">标志</h3>
<p></p>
<a name="wq499"></a>
<table id="wq499" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="gccan395mart" name="gccan395mart"></a><span class="bold">-c&nbsp;</span><span class="italic">SubCommand</span></td>
<td width="78%">  指定交互式格式的命令。此标志将 <span class="italic">SubCommand</span> 添加到在指定的主机上运行的命令列表中。可以输入多个 <span class="bold">-c</span> 标志。</td>
</tr>
<tr>
<td>
<a id="sccan391mart" name="sccan391mart"></a><span class="bold">-i</span></td>
<td>  指定交互方式。标准输出显示提示，标准输入读取命令。</td>
</tr>
<tr>
<td>
<a id="pdcan2a8mart" name="pdcan2a8mart"></a><span class="bold">-l</span></td>
<td>  （小写的 L)显示服务器已知的同级设备的列表。本选项等同于 <span class="bold">listpeers</span> 子命令。</td>
</tr>
<tr>
<td>
<a id="qecan245mart" name="qecan245mart"></a><span class="bold">-n</span></td>
<td>  以点分十进制格式（0.0.0.0）显示所有的主机地址，而不是规范的主机名。</td>
</tr>
<tr>
<td>
<a id="fecan5bmart" name="fecan5bmart"></a><span class="bold">-p</span></td>
<td>  显示服务器已知的同级设备列表及其状态的摘要。本选项等同于 <span class="bold">peers</span> 子命令。</td>
</tr>
<tr>
<td>
<a id="qecan82mart" name="qecan82mart"></a><span class="bold">-s</span></td>
<td>  显示服务器已知的同级设备列表及其状态的摘要，但格式和 <span class="bold">-p</span> 标志不同。本选项等同于 <span class="bold">dmpeers</span> 子命令。</td>
</tr>
</tbody>
</table>
<a name="a3b2840d987endr"></a>
<h3 id="a3b2840d987endr">参数</h3>
<p></p>
<a name="wq500"></a>
<table id="wq500" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="a2gcan32bmart" name="a2gcan32bmart"></a><span class="italic">Host</span><span class="bold">&nbsp;</span>...</td>
<td width="83%">  指定主机。</td>
</tr>
</tbody>
</table>
<a name="a3b2840e093endr"></a>
<h3 id="a3b2840e093endr">退出状态</h3>
<a name="a3b2840e172endr"></a>
<p id="a3b2840e172endr">本命令返回以下出口值：</p>
<a name="wq501"></a>
<table id="wq501" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="a3b2840e215endr" name="a3b2840e215endr"></a><span class="bold">0</span></td>
<td width="95%">  成功完成。</td>
</tr>
<tr>
<td>
<a id="a3b2840e255endr" name="a3b2840e255endr"></a><span class="bold">&gt;0</span></td>
<td>  发生错误。</td>
</tr>
</tbody>
</table>
<a name="a3b2840e294endr"></a>
<h3 id="a3b2840e294endr">安全性</h3>
<a name="a3b2840e373endr"></a>
<p id="a3b2840e373endr">访问控制：必须是系统组的成员才能运行该命令。</p>
<a name="a3b2840e414endr"></a>
<p id="a3b2840e414endr">审计事件：N/A</p>
<a name="a3b2840e464endr"></a>
<p id="a3b2840e464endr">显示与指定的同级设备相关联的每个同级设备的统计计数器。</p>
<a name="a3b2840e503endr"></a>
<h3 id="a3b2840e503endr">示例</h3>
<ol type="1">
<li><a name="a3b2840e581endr"></a><span id="a3b2840e581endr" class="pk"></span>要为网络计时协议守护进程启动查询／控制程序，输入：
<p></p>
<a name="a3b2840e677endr"></a>
<pre id="a3b2840e677endr" class="xmp">xntpdc</pre></li>
<li><a name="a3b2840e721endr"></a><span id="a3b2840e721endr" class="pk"></span>要显示主机 9.3.149.107 上地址为 127.127.1.0 的同级设备的统计计数器，请输入：
<p></p>
<a name="a3b2840e766endr"></a>
<pre id="a3b2840e766endr" class="xmp">xntpdc -c "pstats 127.127.1.0" 9.3.149.107</pre><p class="indatacontent"> 显示类似于以下内容的输出：</p>
<a name="a3b2840e857endr"></a>
<pre id="a3b2840e857endr" class="xmp">远程主机：&nbsp;&nbsp;&nbsp;LOCAL(0)
本地接口：&nbsp;&nbsp;&nbsp;127.0.0.1
上次接收时间：&nbsp;&nbsp;&nbsp;49s
到下次发送的时间：&nbsp;&nbsp;&nbsp;15s
可达性更改：&nbsp;&nbsp;&nbsp;818s
发送的包数：&nbsp;&nbsp;&nbsp;13
收到的包数&nbsp;&nbsp;&nbsp;13
错误的认证：&nbsp;&nbsp;&nbsp;0
无效的原点：&nbsp;&nbsp;&nbsp;0
副本：&nbsp;&nbsp;&nbsp;0
错误分散度：&nbsp;&nbsp;&nbsp;4
错误的引用时间：&nbsp;&nbsp;&nbsp;0
侯选者顺序：&nbsp;&nbsp;&nbsp;1</pre></li></ol>
<a name="a3b2840e900endr"></a>
<h3 id="a3b2840e900endr">xntpdc 内部子命令</h3>
<a name="a3b2840e980endr"></a>
<p id="a3b2840e980endr">完全可以在运行 <span class="bold">xntpdc</span> 命令时还运行若干交互式格式的子命令，而这些 xntpdc 命令并不会将 NTP 方式 7 的请求发送到服务器。下列子命令只能在运行 <span class="bold">xntpdc</span> 查询程序时使用。</p>
<a name="a3b2840f025endr"></a>
<h4 id="a3b2840f025endr">交互式格式的子命令</h4>
<a name="a3b2840f070endr"></a>
<p id="a3b2840f070endr">交互式格式子命令由 0 到 4 个自变量跟随的关键字组成。只需输入整个关键字的足够的字符来唯一标识子命令。子命令输出到标准输出，但是可以通过向命令行附加大于符号（<span class="bold">&gt;</span>），然后跟随一个文件名来重定向单个子命令的输出到一个文件。</p>
<a name="wq503"></a>
<table id="wq503" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="30%">
<a id="a3b2840f115endr" name="a3b2840f115endr"></a><span class="bold">?&nbsp;</span>[&nbsp;<span class="italic">SubCommand&nbsp;</span>]</td>
<td width="69%">  显示命令用法信息。当使用时，如果没有带 <span class="italic">SubCommand</span>，则显示所有的 <span class="bold">xntpdc</span> 命令关键字的列表。当与 <span class="italic">SubCommand</span> 一起使用时，显示命令的功能和用法信息。</td>
</tr>
<tr>
<td>
<a id="a3b2840f159endr" name="a3b2840f159endr"></a><span class="bold">help&nbsp;</span>[&nbsp;<span class="italic">SubCommand&nbsp;</span>]</td>
<td>  和 <span class="bold">?&nbsp;</span>[&nbsp;<span class="italic">Subcommand&nbsp;</span>] 子命令相同。</td>
</tr>
<tr>
<td>
<a id="a3b2840f206endr" name="a3b2840f206endr"></a><span class="bold">delay</span><span class="italic">Milliseconds</span></td>
<td>  指定添加到需要认证的请求中包含的时间戳记的时间间隔。使用此子命令可以在长延迟网络路径上、或时钟不同步的机器之间进行不可靠服务器的重新配置。如果输入此子命令没有带自变量，则它打印子命令的当前设置。</td>
</tr>
<tr>
<td>
<a id="a3b2840f250endr" name="a3b2840f250endr"></a><span class="bold">host&nbsp;</span><span class="italic">HostName</span></td>
<td>  指定查询被发送至的主机。<span class="italic">HostName</span> 可以是主机名，也可以是数字地址。如果输入此子命令没有带自变量，则它打印子命令的当前设置。</td>
</tr>
<tr>
<td>
<a id="a3b2840f296endr" name="a3b2840f296endr"></a><span class="bold">hostnames</span><span class="bold">yes</span> | <span class="bold">no</span></td>
<td>  指定是显示主机名（<span class="bold">yes</span>）还是数字地址（<span class="bold">no</span>）。 缺省值为 <span class="bold">yes</span>，除非使用 <span class="bold">-n</span> 标志。如果输入此子命令没有带自变量，则它打印子命令的当前设置。</td>
</tr>
<tr>
<td>
<a id="a3b2840f343endr" name="a3b2840f343endr"></a><span class="bold">keyid</span><span class="italic">Number</span></td>
<td>  指定认证配置请求的服务器密钥数字。如果输入此子命令没有带自变量，则它打印子命令的当前设置。</td>
</tr>
<tr>
<td>
<a id="a3b2840f388endr" name="a3b2840f388endr"></a><span class="bold">passwd</span></td>
<td>  提示输入 NTP 服务器认证密码来认证配置请求。</td>
</tr>
<tr>
<td>
<a id="a3b2840f432endr" name="a3b2840f432endr"></a><span class="bold">quit</span></td>
<td>  退出 <span class="bold">xntpdc</span> 查询程序。</td>
</tr>
<tr>
<td>
<a id="a3b2840f482endr" name="a3b2840f482endr"></a><span class="bold">timeout</span><span class="italic">Milliseconds</span></td>
<td>  指定响应服务器查询的超时周期。缺省值是 8000 毫秒。如果输入此子命令没有带自变量，则它打印子命令的当前设置。</td>
</tr>
</tbody>
</table>
<a name="a3b2840f523endr"></a>
<h4 id="a3b2840f523endr">查询子命令</h4>
<a name="a3b2840f567endr"></a>
<p id="a3b2840f567endr"><span class="bold">xntpdc</span> 查询子命令导致向服务器发送包含请求的 NTP 方式 7 的包。这些子命令是只读的（它们不修改服务器配置状态）。</p>
<a name="wq504"></a>
<table id="wq504" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%">
<a id="a3b2840f613endr" name="a3b2840f613endr"></a><span class="bold">clkbug</span><span class="italic">ClockPeerAddress</span> [ <span class="italic">Addr2</span> ] [ <span class="italic">Addr3</span> ] [ <span class="italic">Addr4</span> ]</td>
<td width="50%">  显示参考时钟驱动程序的调试信息。一些时钟驱动程序提供这种在多数情况下手头没有驱动程序源的副本就无法解码的信息。</td>
</tr>
<tr>
<td>
<a id="a3b2840f659endr" name="a3b2840f659endr"></a><span class="bold">clockbug</span><span class="italic">ClockPeerAddress</span> [ <span class="italic">Addr2</span> ] [ <span class="italic">Addr3</span> ] [ <span class="italic">Addr4</span> ]</td>
<td>  显示有关同级时钟的信息。所获取的值提供了有关设置干扰因子的信息和其它时钟性能信息。</td>
</tr>
<tr>
<td>
<a id="a3b2840f704endr" name="a3b2840f704endr"></a><span class="bold">dmpeers</span></td>
<td>  显示服务器正在维护状态的同级设备的列表以及状态摘要。除了最左列的字符外，其它都等同于 <span class="bold">peers</span> 子命令的输出。除了显示曾包含在时钟选择算法最后阶段的同级设备外，其它的只显示了字符。
<a name="a3b2840f749endr"></a>
<p id="a3b2840f749endr">在最左列可能的字符有：</p> 
<dl>
<dt id="a3b2840f793endr" class="bold">
<a name="a3b2840f793endr"></a><span class="bold">.</span></dt>
<dd>  表明这个同级设备曾经在故障告知检测中被释放。
</dd>
<dt id="a3b2840f839endr" class="bold">
<a name="a3b2840f839endr"></a><span class="bold">+</span></dt>
<dd>  表明这个同级设备完成它。
</dd>
<dt id="a3b2840f883endr" class="bold">
<a name="a3b2840f883endr"></a><span class="bold">*</span></dt>
<dd>  表示服务器目前同步的同级设备。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="a3b2840f928endr" name="a3b2840f928endr"></a><span class="bold">iostats</span></td>
<td>  显示在输入／输出模块中的统计计数器。</td>
</tr>
<tr>
<td>
<a id="a3b2840f979endr" name="a3b2840f979endr"></a><span class="bold">kerninfo</span></td>
<td>  显示内核周期固定的循环的操作参数。只有正在生成的主机内核已经进行特别修改使之适合精度计时函数后，这个信息才可用。</td>
</tr>
<tr>
<td>
<a id="a3b28410025endr" name="a3b28410025endr"></a><span class="bold">listpeers</span></td>
<td>  显示服务器正在维护状态的同级设备的简要列表。这些包含所有配置好的同级设备关联，以及那些在服务器看来其层次可能是将来同步候选的同级设备。</td>
</tr>
<tr>
<td>
<a id="a3b28410071endr" name="a3b28410071endr"></a><span class="bold">loopinfo</span> [ <span class="bold">oneline</span> | <span class="bold">multiline</span> ]</td>
<td>  显示选中的循环过滤器变量值。此循环过滤器是 NTP 的一部分，它用来调整本地系统时钟。<tt>offset</tt> 是包处理代码传递给循环过滤器的最后偏移量。<tt>frequency</tt> 是在以每百万分率（ppm）表示的本地时钟频率错误。<tt>poll adjust</tt> 控制周期固定的循环抗干扰性（对更改的抵抗力）和它适应振荡器偏移的速度。<tt>watchdog timer</tt> 是自最后的样本偏移量传递给循环过滤器以来用掉的秒数。<span class="bold">oneline</span> 和 <span class="bold">multiline</span> 选项指定显示本信息的格式。<span class="bold">multiline</span> 选项是缺省值。</td>
</tr>
<tr>
<td>
<a id="a3b28410115endr" name="a3b28410115endr"></a><span class="bold">memstats</span></td>
<td>  显示有关内存分配代码的统计计数器。</td>
</tr>
<tr>
<td>
<a id="a3b28410159endr" name="a3b28410159endr"></a><span class="bold">monlist</span></td>
<td>  显示监视工具收集的和维护的流量计数。</td>
</tr>
<tr>
<td>
<a id="a3b28410206endr" name="a3b28410206endr"></a><span class="bold">peers</span></td>
<td>  显示服务器正在维护状态的同级设备的列表以及状态摘要。摘要信息包含：
<ul>
<li id="a3b28410248endr">
<a name="a3b28410248endr"></a>远程同级设备的地址，</li>
<li id="a3b28410292endr">
<a name="a3b28410292endr"></a>参考标识（0.0.0.0 用于未知参考标识），</li>
<li id="a3b28410338endr">
<a name="a3b28410338endr"></a>远程同级设备的层次（层次 16 表明远程同级设备未同步），</li>
<li id="a3b28410380endr">
<a name="a3b28410380endr"></a>轮询间隔（秒），</li>
<li id="a3b28410427endr">
<a name="a3b28410427endr"></a>可达性寄存器（八进制），和</li>
<li id="a3b28410470endr">
<a name="a3b28410470endr"></a>同级设备的当前估计延迟、偏移量和分散度（秒）。</li></ul> 
<a name="a3b28410514endr"></a>
<p id="a3b28410514endr">左页边距中的字符表示同级设备条目所处的方式是：</p> 
<dl>
<dt id="a3b28410554endr" class="bold">
<a name="a3b28410554endr"></a>+</dt>
<dd>  主动均衡。
</dd>
<dt id="a3b28410595endr" class="bold">
<a name="a3b28410595endr"></a>-</dt>
<dd>  被动均衡。
</dd>
<dt id="a3b28410639endr" class="bold">
<a name="a3b28410639endr"></a>=</dt>
<dd>  服务器在客户机方式下被轮询。
</dd>
<dt id="a3b28410683endr" class="bold">
<a name="a3b28410683endr"></a>^</dt>
<dd>  服务器在向这个地址广播。
</dd>
<dt id="a3b28410726endr" class="bold">
<a name="a3b28410726endr"></a>~</dt>
<dd>  远程同级设备正在发送广播。
</dd>
<dt id="a3b28410770endr" class="bold">
<a name="a3b28410770endr"></a>*</dt>
<dd>  标记服务器目前同步的同级设备。
</dd>
</dl> 
<a name="a3b28410817endr"></a>
<p id="a3b28410817endr">主机字段内容可以是主机名、IP 地址、带参数的参考时钟实现名或 REFCLK（<span class="italic">ImplementationNumber</span>, <span class="italic">Parameter</span>）。当使用 <span class="bold">hostnames no</span> 时，只能显示 IP 地址。</p></td>
</tr>
<tr>
<td>
<a id="a3b28410862endr" name="a3b28410862endr"></a><span class="bold">pstats</span><span class="italic">PeerAddress</span> [ <span class="italic">Addr2</span> ] [ <span class="italic">Addr3</span> ] [ <span class="italic">Addr4</span> ]</td>
<td>  显示与指定的同级设备相关联的每个同级设备的统计计数器。</td>
</tr>
<tr>
<td>
<a id="a3b28410906endr" name="a3b28410906endr"></a><span class="bold">reslist</span></td>
<td>  显示服务器的约束条件列表，这也许有助于理解约束条件是如何应用的。</td>
</tr>
<tr>
<td>
<a id="a3b28410954endr" name="a3b28410954endr"></a><span class="bold">sysinfo</span></td>
<td>  显示与本地服务器相关的一系列系统状态变量。除了最后四行外其它所有的都在 NTP 版本 3 规范，RFC 1305 中有描述。系统标志显示各种不同系统标志，其中一些能够通过 <span class="bold">enable</span> 和 <span class="bold">disable</span> 配置语句设置或清除。<tt>稳定性</tt>是在应用系统频率更正后剩余的残留频率错误。可以用它来进行维护和调试。在大多数体系结构中，这个值会从最初的高达 500ppm 下降到一个从 0.01 到 0.1 ppm 之间额定的值。如果启动了守护进程后这个值有时仍然高出正常水平，则可能是本地时钟出了问题，或者是内核变量 <span class="italic">Tick</span> 的值不正确。<tt>广播延时</tt>显示了缺省广播延迟，该值是用 <span class="bold">broadcastdelay</span> 配置语句设置的，而<tt>认证延时</tt>显示
缺省认证延迟，它由 <span class="bold">authdelay</span> 配置语句设置。</td>
</tr>
<tr>
<td>
<a id="a3b28411001endr" name="a3b28411001endr"></a><span class="bold">sysstats</span></td>
<td>  显示在协议模块中的统计计数器。</td>
</tr>
<tr>
<td>
<a id="a3b28411045endr" name="a3b28411045endr"></a><span class="bold">timerstats</span></td>
<td>  显示在计时器／事件队列支持代码中的统计计数器。</td>
</tr>
</tbody>
</table>
<a name="a3b28411090endr"></a>
<h4 id="a3b28411090endr">运行时配置请求子命令</h4>
<a name="a3b28411137endr"></a>
<p id="a3b28411137endr">服务器通过使用配置好的 NTP 密钥来认证所有导致服务器状态更改的请求命令。如果没有配置密钥，服务器就会禁用这项功能。必须使 <span class="bold">xtnpdc</span> 命令知道密钥号和相应的密钥。可以用 <span class="bold">keyid</span> 和 <span class="bold">passwd</span> 子命令来设置密钥，它们在终端提示输入密码作为加密密钥。第一次给出在服务器上要求认证的子命令时，<span class="bold">xtnpdc</span> 命令也可以自动提示要求输入密钥号和密码。认证不仅验证请求者是否有执行上述更改的许可权，而且防止传输错误。</p>
<a name="a3b28411181endr"></a>
<p id="a3b28411181endr">如同执行对认证代码的计算一样，认证请求总是在数据包中包含一个时间戳记。服务器将这个时间戳记与它收到这个包的时间进行比较。</p>
<a name="a3b28411228endr"></a>
<p id="a3b28411228endr">如果他们的差别大于 10 秒，服务器就会拒绝请求。这使得可截取 LAN 流量的某些人在服务器上执行简单的重放攻击变得更困难。这也使得从拓扑上的远程主机请求更改服务器配置变得更困难。当重新配置工具在本地主机上与服务器工作良好，以及完全能在相同 LAN 的时间同步主机之间工作时，它与更远的主机之间的工作变得相当困难。因此，如果选择合理的密码，小心密钥的分发和保护，并应用相应的源地址限制，运行时的重新配置工具应该提供完全级别上的安全性保护。</p>
<a name="a3b28411271endr"></a>
<p id="a3b28411271endr">以下子命令都执行认证请求。</p>
<a name="wq505"></a>
<table id="wq505" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="a3b28411318endr" name="a3b28411318endr"></a><span class="bold">addpeer</span><span class="italic">PeerAddress</span> [ <span class="italic">Keyid</span> ] [ <span class="italic">Version</span> ] [ <span class="bold">prefer</span> ]</td>
<td width="75%">  添加配置好的、以主动均衡方式在特定地址操作的同级设备关联。可以用这个子命令删除已经存在的相同的同级设备关联或者只是将现有关联转换为符合新配置。如果 <span class="italic">Keyid</span> 是一个非零整数，所有传输到远程服务器上的外发包都将附加一个使用此密钥加密的认证字段。如果不想指定认证，将 <span class="italic">Keyid</span> 输入为 0 或保留为空白。<span class="italic">Version</span> 的值应该是 1、2 或 3，3 为缺省值。<span class="bold">prefer</span> 选项表明在可能情况下首先用于时钟同步的首选同级设备。首选同级设备也决定 PPS 信号的有效性。如果这个首选同级设备适合于同步，同样 PPS 信号也适合。</td>
</tr>
<tr>
<td>
<a id="a3b28411364endr" name="a3b28411364endr"></a><span class="bold">addserver</span><span class="italic">PeerAddress</span> [ <span class="italic">Keyid</span> ] [ <span class="italic">Version</span> ] [ <span class="bold">prefer</span> ]</td>
<td>  除了运行方式是客户机以外，其它的与 <span class="bold">addpeer</span> 子命令相同。</td>
</tr>
<tr>
<td>
<a id="a3b28411410endr" name="a3b28411410endr"></a><span class="bold">addtrap</span><span class="italic">Address</span> [ <span class="italic">Port</span> ] [ <span class="italic">Interface</span> ]</td>
<td>  设置在用于以指定本地接口地址发送消息的指定地址和端口号的异步消息陷阱。如果不指定端口号，则设置为缺省值 18447。如果不指定接口地址，则值缺省为本地接口的源地址。</td>
</tr>
<tr>
<td>
<a id="a3b28411455endr" name="a3b28411455endr"></a><span class="bold">authinfo</span></td>
<td>  显示与认证模块相关的信息，包含已知密钥以及执行加密和解密的计数。</td>
</tr>
<tr>
<td>
<a id="a3b28411500endr" name="a3b28411500endr"></a><span class="bold">broadcast</span><span class="italic">PeerAddress</span> [ <span class="italic">Keyid</span> ] [ <span class="italic">Version</span> ]</td>
<td>  除了运行方式是广播以外，其它的与 <span class="bold">addpeer</span> 子命令相同。<span class="italic">PeerAddress</span> 是本地网络的广播地址，或者是分配给 NTP（224.0.0.1）的多点广播组地址。</td>
</tr>
<tr>
<td>
<a id="a3b28411545endr" name="a3b28411545endr"></a><span class="bold">clrtrap</span><span class="italic">Address</span> [ <span class="italic">Port</span> ] [ <span class="italic">Interface</span> ]</td>
<td>  清除在用于以指定本地接口地址发送消息的指定地址和端口号的异步消息陷阱。如果不指定端口号，则设置为缺省值 18447。如果不指定接口地址，则值缺省为本地接口的源地址。</td>
</tr>
<tr>
<td>
<a id="a3b28411590endr" name="a3b28411590endr"></a><span class="bold">delrestrict</span><span class="italic">Address</span><span class="italic"> Mask</span> [ <span class="bold">ntpport</span> ]</td>
<td>  从限制列表中删除匹配的条目。</td>
</tr>
<tr>
<td>
<a id="a3b28411635endr" name="a3b28411635endr"></a><span class="bold">disable</span><span class="italic">Option</span> ...</td>
<td>  禁用各种服务器选项。不影响没有提到的选项。<span class="bold">enable</span> 子命令描述选项。</td>
</tr>
<tr>
<td>
<a id="a3b28411680endr" name="a3b28411680endr"></a><span class="bold">enable</span><span class="italic">Option</span> ...</td>
<td>  启用各种服务器选项。不影响没有提到的选项。可以为 <span class="italic">Option</span> 指定以下一个或多个值：
<dl>
<dt id="a3b28411725endr" class="bold">
<a name="a3b28411725endr"></a><span class="bold">auth</span> </dt>
<dd>  使服务器仅当同级设备已经使用可信的密钥和密钥标识正确认证时才与未配置的同级设备同步。这个选项的缺省值是禁用的（off）。
</dd>
<dt id="a3b28411769endr" class="bold">
<a name="a3b28411769endr"></a><span class="bold">bclient</span></dt>
<dd>  使服务器侦听来自广播或多点广播服务器的消息，在此之后自动为该服务器实例化一个关联。这个自变量的缺省值是禁用的（off）。
</dd>
<dt id="a3b28411814endr" class="bold">
<a name="a3b28411814endr"></a><span class="bold">monitor</span></dt>
<dd>  启用监视设备，缺省值为启用（on）。
</dd>
<dt id="a3b28411860endr" class="bold">
<a name="a3b28411860endr"></a><span class="bold">pll</span> </dt>
<dd>  使服务器能够调整本地时钟，缺省值为启用（on）。如果不设置，本地时钟会以它的本征时间和频率偏移量自由运行。当本地时钟被一些别的设备或协议控制，NTP 只是用来提供与其它客户机的同步时，此选项十分有用。
</dd>
<dt id="a3b28411904endr" class="bold">
<a name="a3b28411904endr"></a><span class="bold">stats</span></dt>
<dd>  启用统计工具 filegen，缺省值为启用（on）。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="a3b28411948endr" name="a3b28411948endr"></a><span class="bold">fudge</span><span class="italic">PeerAddress</span> [ <span class="italic">Time1</span> ] [ <span class="italic">Time2</span> ] [ <span class="italic">Stratum</span> ] [ <span class="italic">Refid</span> ]</td>
<td>  提供一种为参考时钟设置某些数据的方法。
<a name="a3b28411994endr"></a>
<p id="a3b28411994endr"><span class="italic">Time1</span> 和 <span class="italic">Time2</span> 都是定点的秒数并作为校正常量用于一些时钟驱动程序中。</p> 
<a name="a3b28412038endr"></a>
<p id="a3b28412038endr"><span class="italic">stratum</span> 是一个从 0 到 15 的数，用于将非标准操作层分配给时钟。</p> 
<a name="a3b28412083endr"></a>
<p id="a3b28412083endr"><span class="italic">refid</span> 是一个长度为 1 到 4 个字符的 ASCII 字符串，用于分配非标准的参考标识符给时钟。</p></td>
</tr>
<tr>
<td>
<a id="a3b28412128endr" name="a3b28412128endr"></a><span class="bold">monitor</span><span class="bold">yes</span> | <span class="bold">no</span></td>
<td>  启用或禁用监视设备。<span class="bold">monitor</span><span class="bold"> no</span> 子命令后跟一个 <span class="bold">monitor</span><span class="bold"> yes</span> 子命令是重新设置包计数的一种好方法。</td>
</tr>
<tr>
<td>
<a id="a3b28412172endr" name="a3b28412172endr"></a><span class="bold">readkeys</span></td>
<td>  清除认证密钥的当前设置并通过重新读取在 <span class="bold">xntpd</span> 配置文件中指定的密钥文件获取新的设置。这使得可以更改加密密钥而不用重新启动服务器。</td>
</tr>
<tr>
<td>
<a id="a3b28412218endr" name="a3b28412218endr"></a><span class="bold">reset</span><span class="italic">Module</span></td>
<td>  清除在服务器各个模块中的统计计数器。可以为 <span class="italic">Module</span> 指定以下一个或多个值：<span class="bold">io</span>、<span class="bold">sys</span>、<span class="bold">mem</span>、<span class="bold">timer</span>、<span class="bold">auth</span>、<span class="bold">allpeers</span>。</td>
</tr>
<tr>
<td>
<a id="a3b28412263endr" name="a3b28412263endr"></a><span class="bold">restrict</span><span class="italic">Address</span><span class="italic"> Mask</span><span class="italic"> Option</span> ...</td>
<td>  将 <span class="italic">Option</span> 值添加到现有的限制列表条目中，或者用指定的 <span class="italic">Option</span> 将新的条目添加到列表。<span class="bold">mask</span> 选项按缺省值设置为 255.255.255.255，表明 <span class="italic">Address</span> 被当作一个独立主机的地址。可以为 <span class="italic">Option</span> 指定以下一个或多个值：
<dl>
<dt id="a3b28412307endr" class="bold">
<a name="a3b28412307endr"></a><span class="bold">ignore</span></dt>
<dd>  忽略来自匹配此条目的主机的所有包。既不响应查询也不响应服务器轮询。
</dd>
<dt id="a3b28412355endr" class="bold">
<a name="a3b28412355endr"></a><span class="bold">limited</span></dt>
<dd>  指定这些主机服从相同网络的客户机限制。在上下文中的网络指的是网络的 IP 类别（A 类、B 类、C 类等等)。只接受第一个在服务器上显示并在最后 <span class="bold">client_limit_period</span> 秒内曾处于活动状态的 <span class="bold">client_limit</span> 主机。拒绝来自相同网络的其它客户机的请求。只考虑时间请求包。专用、控制和广播包都不符合客户机限制，因此对客户机计数没有影响。<span class="bold">xntpd</span> 守护进程的监视能力保存客户机的历史记录。当使用这个选项时，监视功能保持为活动状态。<span class="bold">client_limit</span> 的缺省值是 3。<span class="bold">client_limit_period</span> 的缺省值是 3600 秒。
</dd>
<dt id="a3b28412402endr" class="bold">
<a name="a3b28412402endr"></a><span class="bold">lowpriotrap</span></dt>
<dd>  通过将主机与低优先级状态匹配来声明陷阱设置。服务器可以维护有限数量的陷阱（当前限制是 3），这些陷阱按“先来先服务”的基础分配，并拒绝对后来的陷阱请求者提供服务。这个参数通过允许后来的普通优先级陷阱的请求覆盖低优先级的请求来修改分配算法。
</dd>
<dt id="a3b28412446endr" class="bold">
<a name="a3b28412446endr"></a><span class="bold">nomodify</span></dt>
<dd>  忽略所有试图修改服务器状态（运行时重新配置）的 NTP 方式 6 和 7 的包。允许返回信息的查询。
</dd>
<dt id="a3b28412490endr" class="bold">
<a name="a3b28412490endr"></a><span class="bold">nopeer</span></dt>
<dd>  向轮询主机提供无状态时间服务，但不分配同级设备内存资源给这些主机。
</dd>
<dt id="a3b28412534endr" class="bold">
<a name="a3b28412534endr"></a><span class="bold">noquery</span></dt>
<dd>  忽略来自于源的所有 NTP 方式 6 和 7 的包（信息查询和配置请求）。不影响时间服务。
</dd>
<dt id="a3b28412579endr" class="bold">
<a name="a3b28412579endr"></a><span class="bold">noserve</span></dt>
<dd>  忽略 NTP 方式不是 6 或 7 的包。它拒绝时间服务，但允许查询。
</dd>
<dt id="a3b28412624endr" class="bold">
<a name="a3b28412624endr"></a><span class="bold">notrap</span></dt>
<dd>  拒绝向匹配主机提供方式 6 的控制消息陷阱服务。陷阱服务是方式 6 控制消息协议的一个子系统，供远程事件记录程序使用。
</dd>
<dt id="a3b28412669endr" class="bold">
<a name="a3b28412669endr"></a><span class="bold">notrust</span></dt>
<dd>  在其它方面正常使用这些主机，只是不能将它们用作同步源。
</dd>
<dt id="a3b28412713endr" class="bold">
<a name="a3b28412713endr"></a><span class="bold">ntpport</span></dt>
<dd>  仅当包中的源端口是标准 NTP UDP 端口（123）时才匹配约束条目。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="a3b28412757endr" name="a3b28412757endr"></a><span class="bold">setprecision</span><span class="italic">Precision</span></td>
<td>  设置服务器通告的精度。<span class="italic">Precision</span> 应该是一个从 -4 到 -20 的负整数。</td>
</tr>
<tr>
<td>
<a id="a3b28412802endr" name="a3b28412802endr"></a><span class="bold">traps</span></td>
<td>  显示在服务器上设置的陷阱。</td>
</tr>
<tr>
<td>
<a id="a3b28412848endr" name="a3b28412848endr"></a><span class="bold">trustkey</span><span class="italic">Keyid</span> ...</td>
<td>  将一个或多个密钥添加到可信的密钥列表。当启用认证时，使用可信的密钥来认证具有可信时间的同级设备。</td>
</tr>
<tr>
<td>
<a id="a3b28412892endr" name="a3b28412892endr"></a><span class="bold">unconfig</span><span class="italic"> PeerAddress</span> [ <span class="italic">Addr2</span> ] [ <span class="italic">Addr3</span> ] [ <span class="italic">Addr4</span> ]</td>
<td>  从指定的同级设备除去配置位。在很多情况下，删除同级设备关联。但是，在合适的情况下，如果远程同级设备希望继续使用这个方式，则关联可以保持为未配置方式。</td>
</tr>
<tr>
<td>
<a id="a3b28412936endr" name="a3b28412936endr"></a><span class="bold">unrestrict</span><span class="italic"> Address</span><span class="italic"> Mask</span><span class="italic"> Option</span> ...</td>
<td>  从 <span class="italic">Address</span> 和 <span class="italic">Mask</span> 显示的限制列表条目中除去指定的选项。<span class="bold">restrict</span> 子命令描述 <span class="italic">Option</span> 的值。</td>
</tr>
<tr>
<td>
<a id="a3b28412981endr" name="a3b28412981endr"></a><span class="bold">untrustkey</span><span class="italic">Keyid</span> ...</td>
<td>  从可信的密钥列表除去一个或多个密钥。</td>
</tr>
</tbody>
</table>
<a name="a3b28413021endr"></a>
<h3 id="a3b28413021endr">文件</h3>
<p></p>
<a name="wq506"></a>
<table id="wq506" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a3b28413100endr" name="a3b28413100endr"></a><span class="bold">/usr/sbin/xntpdc</span></td>
<td width="76%">  包含 <span class="bold">xntpdc</span> 命令。</td>
</tr>
</tbody>
</table>
<a name="a3b28413140endr"></a>
<h3 id="a3b28413140endr">相关信息</h3>
<a name="a3b28413221endr"></a>
<p id="a3b28413221endr"><a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntpq.htm#ouban11fmart"><span class="bold">ntpq</span></a>、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntpdate.htm#a3pban366mart"><span class="bold">ntpdate</span></a> 和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntptrace.htm#a9xban21bmart"><span class="bold">ntptrace</span></a> 命令。</p>
<a name="a3b28413259endr"></a>
<p id="a3b28413259endr"><a href="xntpd.htm#kbcan17mart"><span class="bold">xntpd</span></a> 守护进程。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="xntpdc.htm#Top_Of_Page">页的顶部</a> | <a href="xntpd.htm">上一页</a> | <a href="xpr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
