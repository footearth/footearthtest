<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 6，v - z - xntpd 守护进程</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="" />
<meta name="keywords" content="xntpd 守护进程, xntpd, 网络计时协议命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="xntpd.htm#Bot_Of_Page">页的底部</a> | <a href="XNSrouted.htm">上一页</a> | <a href="xntpdc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 6，v - z</h1></center>

<a name="kbcan17mart"></a>
<h2 id="kbcan17mart">xntpd 守护进程</h2>
<p><a id="idx179" name="idx179"></a> <a id="idx180" name="idx180"></a></p>
<a name="a3b283f0542endr"></a>
<h3 id="a3b283f0542endr">用途</h3>
<a name="a3b283f0623endr"></a>
<p id="a3b283f0623endr">启动网络计时协议（NTP) 守护进程</p>
<a name="a3b283f0662endr"></a>
<h3 id="a3b283f0662endr">语法</h3>
<p><span class="bold">xntpd</span> [&nbsp; <a href="xntpd.htm#aqban194mart"><span class="bold">-a&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#fqban73mart"><span class="bold">-b&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#a2aban14cmart"><span class="bold">-d&nbsp;</span></a>]
[&nbsp; <a href="xntpd.htm#a9dcan8dmart"><span class="bold">-m&nbsp;</span></a>] [<a href="xntpd.htm#xntpd_flags_lowerx"><span class="pk">-x</span></a>][&nbsp; <a href="xntpd.htm#pqban1fbmart"><span class="bold">-c&nbsp;</span><span class="italic">ConfigFile&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#cabane8mart"><span class="bold">-e&nbsp;</span><span class="italic">AuthenticationDelay&nbsp;</span></a>]
[&nbsp; <a href="xntpd.htm#oaban330mart"><span class="bold">-f&nbsp;</span><span class="italic">DriftFile&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#maban32bmart"><span class="bold">-k&nbsp;</span><span class="italic">KeyFile&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#qaban29emart"><span class="bold">-l&nbsp;</span><span class="italic">LogFile&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#ldcan3b7mart"><span class="bold">-p&nbsp;</span><span class="italic">pidFile&nbsp;</span></a>]  [&nbsp; <a href="xntpd.htm#ydcan298mart"><span class="bold">-r&nbsp;</span><span class="italic">BroadcastDelay&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#kdcan3b4mart"><span class="bold">-s&nbsp;</span><span class="italic">StatsDirectory&nbsp;</span></a>]
[&nbsp; <a href="xntpd.htm#xdcan14emart"><span class="bold">-t&nbsp;</span><span class="italic">TrustedKey&nbsp;</span></a>]  [&nbsp; <a href="xntpd.htm#k1can24amart"><span class="bold">-v&nbsp;</span><span class="italic">SystemVariable&nbsp;</span></a>] [&nbsp; <a href="xntpd.htm#x1can1aemart"><span class="bold">-V&nbsp;</span><span class="italic">SystemVariable&nbsp;</span></a>]</p>
<a name="a3b283f0811endr"></a>
<h3 id="a3b283f0811endr">描述</h3>
<a name="a3b283f0893endr"></a>
<p id="a3b283f0893endr"><span class="bold">xntpd</span> 守护进程设置和维护一个与因特网标准时间服务器相一致的 Unix 系统时间。<span class="bold">xntpd</span> 守护进程是根据 RFC1035 定义的网络计时协议（NTP）版本 3 标准的完整实现，同时也保持与根据 RFC1059 和 RFC1119 分别定义的版本 1 和版本 2 服务器的兼容性。<span class="bold">xntpd</span> 守护进程用定点算法进行所有的计算，并不需要浮点代码。</p>
<a name="a3b283f0940endr"></a>
<p id="a3b283f0940endr"><span class="bold">xntpd</span> 守护进程在启动时从配置文件（<span class="bold">/etc/ntp.conf</span> 是缺省值）中读取配置。可以在命令行重设这个配置文件的名称。同样也完全可以通过命令行指定一个工作配置，尽管可指定的配置会受到限制，但不需要使用配置文件。使用这种方法将 <span class="bold">xntpd</span> 守护进程配置为一个广播客户机或多点广播客户机，以便在运行时用侦听广播的方法确定所有的同级设备。您可以用 <span class="bold">ntpq</span> 命令（网络计时协议（NTP）查询程序）来显示 <span class="bold">xntpd</span> 守护进程的内部变量。您可以使用 <span class="bold">xntpdc</span> 命令更改配置选项。</p>
<a name="a3b283f0987endr"></a>
<p id="a3b283f0987endr"><span class="bold">xntpd</span> 守护进程有几种工作方式，包含主动均衡／被动均衡、客户机／服务器和广播／多点广播。广播／多点广播客户机能够自动发现远程服务器，计算单向延时校正因子并自动进行自我配置。这种方式使得部署一组工作站而不用针对环境指定特定的配置文件或配置详细信息成为可能。</p>
<p></p><blockquote><a name="a3b283f1099endr"></a><span id="a3b283f1099endr" class="pk"></span><span class="bold">注：</span>以运行 AIX 4.2.1 或更新版本的客户机方式进行操作时，如果在 1000 秒的本地系统时间内没有已经配置好的服务器，<span class="bold">xntpd</span> 守护进程将会退出并报告错误。在运行 <span class="bold">xntpd</span> 前，用 <span class="bold">date</span> 或 <span class="bold">ntpdate</span> 命令来设置一个失真系统的时间。</blockquote>
<a name="a3b283f1173endr"></a>
<h3 id="a3b283f1173endr">标志</h3>
<p></p>
<a name="wq495"></a>
<table id="wq495" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="35%">
<a id="aqban194mart" name="aqban194mart"></a><span class="bold">-a</span></td>
<td width="64%"> 以认证方式运行。</td>
</tr>
<tr>
<td>
<a id="fqban73mart" name="fqban73mart"></a><span class="bold">-b</span></td>
<td> 侦听广播 NTP，如果可用则与之保持同步。</td>
</tr>
<tr>
<td>
<a id="pqban1fbmart" name="pqban1fbmart"></a><span class="bold">-c&nbsp;</span><span class="italic">ConfigFile&nbsp;</span></td>
<td> 指定一个备用的配置文件的名称。</td>
</tr>
<tr>
<td>
<a id="a2aban14cmart" name="a2aban14cmart"></a><span class="bold">-d</span></td>
<td> 指定调试方式。这个标志可以多次出现（最多 10 次），每次出现都表明显示器的更多详细信息。</td>
</tr>
<tr>
<td>
<a id="cabane8mart" name="cabane8mart"></a><span class="bold">-e&nbsp;</span><span class="italic">AuthenticationDelay&nbsp;</span></td>
<td> 以秒为单位指定时间，这将用来计算这台计算机上的 NTP 加密字段。</td>
</tr>
<tr>
<td>
<a id="oaban330mart" name="oaban330mart"></a><span class="bold">-f&nbsp;</span><span class="italic">DriftFile&nbsp;</span></td>
<td> 指定偏差文件的位置。</td>
</tr>
<tr>
<td>
<a id="maban32bmart" name="maban32bmart"></a><span class="bold">-k&nbsp;</span><span class="italic">KeyFile&nbsp;</span></td>
<td> 指定包含 NTP 认证密钥的文件的位置。</td>
</tr>
<tr>
<td>
<a id="qaban29emart" name="qaban29emart"></a><span class="bold">-l</span><span class="italic">  LogFile&nbsp;</span></td>
<td> （小写的 L）指定使用日志文件而不是记录到 syslog 中。</td>
</tr>
<tr>
<td>
<a id="a9dcan8dmart" name="a9dcan8dmart"></a><span class="bold">-m</span></td>
<td> 侦听多点广播消息，如果可用则与之保持同步。假设多点广播地址为 224.0.1.1。</td>
</tr>
<tr>
<td>
<a id="ldcan3b7mart" name="ldcan3b7mart"></a><span class="bold">-p&nbsp;</span><span class="italic">pidFile&nbsp;</span></td>
<td> 指定记录守护进程进程标识的文件的名称。无缺省值。</td>
</tr>
<tr>
<td>
<a id="ydcan298mart" name="ydcan298mart"></a><span class="bold">-r&nbsp;</span><span class="italic">BroadcastDelay&nbsp;</span></td>
<td> 如果校正程序失败，则指定缺省延时（以秒为单位）。通常，<span class="bold">xntpd</span> 守护进程会自动补偿广播／多点广播服务器和客户机之间的网络延时。</td>
</tr>
<tr>
<td>
<a id="kdcan3b4mart" name="kdcan3b4mart"></a><span class="bold">-s&nbsp;</span><span class="italic">StatsDirectory&nbsp;</span></td>
<td>指定用于创建统计信息文件的目录。</td>
</tr>
<tr>
<td>
<a id="xdcan14emart" name="xdcan14emart"></a><span class="bold">-t&nbsp;</span><span class="italic">TrustedKey&nbsp;</span></td>
<td>将指定的密钥号添加到可信的密钥列表。</td>
</tr>
<tr>
<td>
<a id="k1can24amart" name="k1can24amart"></a><span class="bold">-v&nbsp;</span><span class="italic">SystemVariable&nbsp;</span></td>
<td>添加指定的系统变量。</td>
</tr>
<tr>
<td>
<a id="x1can1aemart" name="x1can1aemart"></a><span class="bold">-V&nbsp;</span><span class="italic">SystemVariable&nbsp;</span></td>
<td>添加指定的、以缺省方式列出的系统变量。</td>
</tr>
<tr>
<td>
<a id="xntpd_flags_lowerx" name="xntpd_flags_lowerx"></a><span class="pk">-x</span></td>
<td>进行细微的时间调整。（快速进行）</td>
</tr>
</tbody>
</table>
<a name="a3b283f1769endr"></a>
<h3 id="a3b283f1769endr">参考时钟支持</h3>
<a name="a3b283f1852endr"></a>
<p id="a3b283f1852endr">为了方便配置，<span class="bold">xntpd</span> 守护进程尽可能以对待类似于一般 NTP 同级设备的方式对待参考时钟。它通过地址来引用参考时钟，这和引用普通的同级设备一样，尽管它使用无效的 IP 地址来将其与普通同级设备区分开。AIX 4.2 支持一种基于系统时钟类型（类型 1）的参考时钟。</p>
<a name="a3b283f1897endr"></a>
<p id="a3b283f1897endr">参考时钟地址格式为 127.127.<span class="italic">Type</span>.<span class="italic">Unit</span>，其中 <span class="italic">Type</span> 是一个表示时钟类型的整数，<span class="italic">Unit</span> 表示特定于类型的单元号。通过在 <span class="italic">HostAddress</span> 是时钟地址配置文件中的一条服务器语句配置参考时钟。密钥、版本和 ttl 选项不用于参考时钟支持。</p>
<a name="a3b283f1941endr"></a>
<p id="a3b283f1941endr">参考时钟支持提供 <span class="bold">fudge</span> 命令，这个命令用特殊的方式配置参考时钟。这个命令采用以下格式：</p>
<a name="a3b283f1988endr"></a>
<p id="a3b283f1988endr"><span class="bold">fudge</span><span class="bold"> 127.127.</span><span class="italic">Type</span><span class="bold">.</span><span class="italic">Unit</span> [&nbsp;<span class="bold">time1&nbsp;</span><span class="italic">Seconds&nbsp;</span>] [&nbsp;<span class="bold">time2&nbsp;</span><span class="italic">Seconds&nbsp;</span>] [&nbsp;<span class="bold">stratum&nbsp;</span><span class="italic">Integer&nbsp;</span>] [&nbsp;<span class="bold">refid&nbsp;</span><span class="italic">Integer&nbsp;</span>] [&nbsp;<span class="bold">flag1&nbsp;&nbsp;</span><span class="bold">0&nbsp;</span>|&nbsp;<span class="bold">1&nbsp;</span>] [&nbsp;<span class="bold">flag2&nbsp;&nbsp;</span><span class="bold">0&nbsp;</span>|&nbsp;<span class="bold">1&nbsp;</span>] [&nbsp;<span class="bold">flag3&nbsp;&nbsp;</span><span class="bold">0&nbsp;</span>|&nbsp;<span class="bold">1&nbsp;</span>] [&nbsp;<span class="bold">flag4&nbsp;&nbsp;</span><span class="bold">0&nbsp;</span>|&nbsp;<span class="bold">1&nbsp;</span>]</p>
<a name="a3b283f2032endr"></a>
<p id="a3b283f2032endr"><span class="bold">time1</span> 和 <span class="bold">time2</span> 选项都是定点的秒数并作为校正常量用于一些时钟驱动程序中。</p>
<a name="a3b283f2078endr"></a>
<p id="a3b283f2078endr"><span class="bold">stratum</span> 选项是一个从 0 到 15 的数，用于将非标准操作层分配给时钟。由于 <span class="bold">xntpd</span> 守护进程对每个同级设备的层数加一，主服务器一般显示第一层。为了提供工程备份， 用 <span class="bold">stratum</span> 选项指定一个大于 0 的参考时钟层。除非特别注明，该选项可以应用于所有的时钟驱动程序。</p>
<a name="a3b283f2122endr"></a>
<p id="a3b283f2122endr"><span class="bold">refid</span> 选项是一个长度从 1 到 4 的 ASCII 字符串，用于分配非标准的参考标识符给时钟。</p>
<a name="a3b283f2166endr"></a>
<p id="a3b283f2166endr">二进制标志：<span class="bold">flag1</span>、<span class="bold">flag2</span>、<span class="bold">flag3</span> 和 <span class="bold">flag4</span> 是用于定制时钟驱动程序。这些值的具体解释以及它们是否都在用要看特定时钟驱动程序的需要。</p>
<a name="a3b283f2207endr"></a>
<h3 id="a3b283f2207endr">退出状态</h3>
<a name="a3b283f2285endr"></a>
<p id="a3b283f2285endr">本命令返回以下出口值：</p>
<a name="wq496"></a>
<table id="wq496" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="a3b283f2327endr" name="a3b283f2327endr"></a><span class="bold">0</span></td>
<td width="95%">  成功结束。</td>
</tr>
<tr>
<td>
<a id="a3b283f2368endr" name="a3b283f2368endr"></a><span class="bold">>0</span></td>
<td>  发生错误。</td>
</tr>
</tbody>
</table>
<a name="a3b283f2408endr"></a>
<h3 id="a3b283f2408endr">安全性</h3>
<a name="a3b283f2487endr"></a>
<p id="a3b283f2487endr">访问控制：必须具有 root 权限才能运行该命令。</p>
<a name="a3b283f2526endr"></a>
<p id="a3b283f2526endr">审计事件：N/A</p>
<a name="a3b283f2565endr"></a>
<h3 id="a3b283f2565endr">示例</h3>
<ol type="1">
<li><a name="a3b283f2644endr"></a><span id="a3b283f2644endr" class="pk"></span>要启动 <span class="bold">xntpd</span> 守护进程，输入：
<p></p>
<a name="a3b283f2684endr"></a>
<pre id="a3b283f2684endr" class="xmp">startsrc -s xntpd</pre></li>
<li><a name="a3b283f2727endr"></a><span id="a3b283f2727endr" class="pk"></span>要停止 <span class="bold">xntpd</span> 守护进程，输入：
<p></p>
<a name="a3b283f2766endr"></a>
<pre id="a3b283f2766endr" class="xmp">stopsrc -s xntpd</pre></li>
<li><a name="a3b283f2812endr"></a><span id="a3b283f2812endr" class="pk"></span>要在运行 <span class="bold">xntpd</span> 守护进程时使用认证密钥文件 <tt>/etc/ntp.new.keys</tt>，输入：
<p></p>
<a name="a3b283f2857endr"></a>
<pre id="a3b283f2857endr" class="xmp">/usr/sbin/xntpd -k /etc/ntp.new.keys</pre></li></ol>
<a name="a3b283f2896endr"></a>
<h3 id="a3b283f2896endr">文件</h3>
<p></p>
<a name="wq498"></a>
<table id="wq498" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="a3b283f2978endr" name="a3b283f2978endr"></a><span class="bold">/usr/sbin/xntpd</span></td>
<td width="75%">  包含 <span class="bold">xntpd</span> 守护进程。</td>
</tr>
<tr>
<td>
<a id="a3b283f3023endr" name="a3b283f3023endr"></a><span class="bold">/etc/ntp.conf</span></td>
<td>  包含缺省配置文件。</td>
</tr>
<tr>
<td>
<a id="a3b283f3067endr" name="a3b283f3067endr"></a><span class="bold">/etc/ntp.drift</span></td>
<td>  包含缺省偏差文件。</td>
</tr>
<tr>
<td>
<a id="a3b283f3110endr" name="a3b283f3110endr"></a><span class="bold">/etc/ntp.keys</span></td>
<td>  包含缺省的密钥文件。</td>
</tr>
</tbody>
</table>
<a name="a3b283f3151endr"></a>
<h3 id="a3b283f3151endr">相关信息</h3>
<a name="a3b283f3232endr"></a>
<p id="a3b283f3232endr"><a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntpq.htm#ouban11fmart"><span class="bold">ntpq</span></a>、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntpdate.htm#a3pban366mart"><span class="bold">ntpdate</span></a>、<a href="http://study.chyangwa.com/IT/AIX/aixcmds6/cmds/aixcmds4/ntptrace.htm#a9xban21bmart"><span class="bold">ntptrace</span></a> 和 <a href="xntpdc.htm#mjcanfamart"><span class="bold">xntpdc</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="xntpd.htm#Top_Of_Page">页的顶部</a> | <a href="XNSrouted.htm">上一页</a> | <a href="xntpdc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds602.htm#wq704">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
