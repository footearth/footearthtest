<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 1，a - c - alt_disk_install 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="alt_disk_install 命令, 备用磁盘，安装,
安装备用磁盘, 安装 mksysb 映像" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="alt_disk_install.htm#Bot_Of_Page">页的底部</a> | <a href="alstat.htm">上一页</a> | <a href="anno.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 1，a - c</h1></center>
<a id="idx85" name="idx85"></a><a id="idx86" name="idx86"></a><a id="idx87" name="idx87"></a><a id="idx88" name="idx88"></a>
<a name="i0723971004mkm"></a>
<h2 id="i0723971004mkm">alt_disk_install 命令</h2>
<a name="wq132"></a>
<h3 id="wq132">用途</h3>
<p>安装具有 mksysb 安装映像的备用磁盘或将当前运行的系统克隆到备用磁盘。</p>
<a name="wq133"></a>
<h3 id="wq133">语法</h3>
<p><a name="cc0304adi924"></a><span id="cc0304adi924" class="pk"></span></p>
<p></p><blockquote>
<dl>
<dt class="bold">“创建备用磁盘：”</dt>
<dd><a name="altdiskbb"></a><span id="altdiskbb" class="pk"></span> <span class="bold">alt_disk_install</span> { <a href="alt_disk_install.htm#a042298bcl"><span class="bold">-d</span></a> <span class="italic">device</span> |   <a href="alt_disk_install.htm#i012298200tmh1"><span class="bold">-C</span>}</a> [ <a href="alt_disk_install.htm#i012298200tmh2"><span class="bold">-i</span></a> <span class="italic">image.data</span>]  [ <a href="alt_disk_install.htm#i012298200tmh3"><span class="bold">-s</span></a> <span class="italic">script</span> ] [ <a href="alt_disk_install.htm#i012298200tmh4"><span class="bold">-R</span></a> <span class="italic">resolv_conf</span>] [ <a href="alt_disk_install.htm#i012298200tmh5"><span class="bold">-D</span></a>]  [ <a href="alt_disk_install.htm#i012298200tmh6"><span class="bold">-B</span></a>] [ <a href="alt_disk_install.htm#i012298200tmh7"><span class="bold">-V</span></a>] 
[ <a href="alt_disk_install.htm#i012298200tmh8"><span class="bold">-r</span></a>] [ <a href="alt_disk_install.htm#alt_disk_install_flags_bigo"><span class="bold">-O</span></a> ]
</dd>
<dt class="bold">&nbsp;</dt>
<dd>[ <a href="alt_disk_install.htm#i012298200tmh9"><span class="bold">-p</span></a> <span class="italic">platform</span> ]  [ <a href="alt_disk_install.htm#i012298200tmh10"><span class="bold">-L</span></a> <span class="italic">mksysb_level</span> ]
</dd>
<dt class="bold">&nbsp;</dt>
<dd>[ <a href="alt_disk_install.htm#i012298200tmh11"><span class="bold">-b</span></a> <span class="italic">bundle_name</span> ]  [ <a href="alt_disk_install.htm#i012298200tmh12"><span class="bold">-I</span></a> <span class="italic">installp_flags</span> ]
</dd>
<dt class="bold">&nbsp;</dt>
<dd>[ <a href="alt_disk_install.htm#i012298200tmh13"><span class="bold">-l</span></a> <span class="italic">images_location</span> ]  [ <a href="alt_disk_install.htm#i012298200tmh14"><span class="bold">-f</span></a> <span class="italic">fix_bundle</span> ]
</dd>
<dt class="bold">&nbsp;</dt>
<dd>[ <a href="alt_disk_install.htm#i012298200tmh15"><span class="bold">-F</span></a> <span class="italic">fixes</span> ]  [ <a href="alt_disk_install.htm#i012298200tmh16"><span class="bold">-e</span></a> <span class="italic">exclude_list</span> ]  [ <a href="alt_disk_install.htm#i012298200tmh17"><span class="bold">-w</span></a> <span class="italic">filesets</span> ]
</dd>
<dt class="bold">&nbsp;</dt>
<dd>[ <a href="alt_disk_install.htm#i012298200tmh18"><span class="bold">-n</span></a>]  [ <a href="alt_disk_install.htm#i012298200tmh19"><span class="bold">-P</span></a> <span class="italic">phase_option</span> ] <span class="italic">target_disks...</span>
</dd>
</dl> 
<dl>
<dt class="bold">“清空备用磁盘卷组：”</dt>
<dd><span class="bold">alt_disk_install</span>  <a href="alt_disk_install.htm#i030899cc1230"><span class="bold">-X</span></a>
</dd>
</dl></blockquote>
<a name="wq134"></a>
<h3 id="wq134">对于 alt_disk_install AIX 4.3.2 或更高版本：</h3>
<dl>
<dt class="bold">“确定卷组引导磁盘：”</dt>
<dd><span class="bold">alt_disk_install  <a href="alt_disk_install.htm#i030899cc1250"> -q</a></span><span class="italic"> disk</span>
</dd>
</dl>
<dl>
<dt class="bold">“置于睡眠卷组：”</dt>
<dd><span class="bold">alt_disk_install  <a href="alt_disk_install.htm#i030899cc1251"> -S</a></span>
</dd>
</dl>
<dl>
<dt class="bold">“重命名备用磁盘卷组：”</dt>
<dd><span class="bold">alt_disk_install  <a href="alt_disk_install.htm#i030899cc1252"> -v </a></span> <span class="italic">new_volume_group_name</span><span class="italic"> disk</span>
</dd>
</dl>
<dl>
<dt class="bold">“唤醒卷组：”</dt>
<dd><span class="bold">alt_disk_install <a href="alt_disk_install.htm#i030899cc1253"> -W </a></span><span class="italic"> disk</span>
</dd>
</dl>
<dl>
<dt class="bold">“清空备用磁盘卷组：”</dt>
<dd><span class="bold">alt_disk_install <a href="alt_disk_install.htm#i030899cc1230">-X</a></span> [ <span class="italic">volume_group</span>]
</dd>
</dl>
<a name="wq135"></a>
<h3 id="wq135">描述</h3>
<p><span class="bold">alt_disk_install</span> 命令允许用户使用一种方法可以不用花费时间卸下机器就将操作系统更新至下一个发行或维护级别。这可以通过两种方法进行，即通过将 mksysb 映像安装到分开的磁盘上，或通过克隆当前系统然后应用更新来达到下一个维护包。</p>
<p><span class="bold">注意：</span><span class="bold">alt_disk_install</span> 创建卷组、逻辑卷、特定设备文件以及使用“alt”前缀的系统文件。如果在系统上利用了 <span class="bold">alt_disk_install</span>，则管理员应该避免具有或创建卷组、逻辑卷、特定设备文件或具有“alt”前缀的文件系统 ― <span class="bold">alt_disk_install</span> 操作系统可能会不经意地除去、改变或破坏这些项。</p>
<p>第一种功能（安装 mksysb）要求 AIX 4.3 或更高版本 mksysb 映像、AIX 4.3 或更高版本 mksysb 磁带、AIX 4.3.3 或更高版本 mksysb CD。用当前使用的一个或多个磁盘调用 <span class="bold">alt_disk_install</span> 命令，然后将 mksysb 恢复到那些磁盘，这样（如果用户使用）下一个重新引导在 AIX 4.3 或更高版本系统上引导系统。</p>
<a name="wq136"></a>
<div class="notelisttitle" id="wq136">注:</div>
<ol type="1">
<li>不能使用 <span class="bold">alt_disk_install</span> 安装比当前安装在系统上的版本更早的 AIX 版本。例如，不能在 AIX 5.1 上安装 AIX 4.3 mksysb。</li>
<li>如果需要，<span class="bold">bootlist</span> 命令可以在已经引导新磁盘后运行，并可以更改引导列表来引导回操作系统的较旧版本。</li>
</ol>
<p>第二种功能（克隆正在运行的 rootvg）允许用户创建根卷组的备份副本。此副本在 rootvg 失败时可用作备份，或它可以通过安装附加的更新来修改。一种情况可能是克隆 4.2.0 系统，然后安装更新以将克隆的 rootvg 升到 4.2.1.0。这将在系统还在运行时更新系统，然后自新的 rootvg 的重新引导使正在运行的系统的级别达到 4.2.1。如果该级别有问题，将引导列表更改回 4.2.0 磁盘并重新启动将使系统返回到 4.2.0。其它情况将包含克隆 rootvg 并应用各修正包，重新引导系统并测试那些修正包，以及当有问题时重新引导回原始 rootvg。</p>
<a name="wq138"></a>
<div class="notetitle" id="wq138">注:</div>
<div class="notebody">NIM 备用磁盘迁移（升级版本或发行版级别）通过 AIX 5.1 和更高版本中的 <span class="bold">nimadm</span> 命令受支持。请参阅 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds4/nimadm.htm"><span class="bold">nimadm</span></a> 文档以获取更多详细信息。</div>
<p>当前，对于这两种功能，您可以在 4.1.4.0 或更高级别的系统上运行 <span class="bold">alt_disk_install</span> 命令。必须在系统上安装 <span class="bold">bos.alt_disk_install.rte</span> 文件集来执行 <span class="bold">alt_disk_install</span> 命令，且也必须安装 <span class="bold">bos.alt_disk_install.boot_images</span> 文件集来执行将 mksysb 安装到备用磁盘上。</p>
<p>使用的 mksysb 映像必须提前创建，且必须具有要装入此映像的系统所需的所有必要的设备和内核支持。在系统从新安装的磁盘重新引导之前，不能安装新的设备或内核支持。</p>
<p><span class="bold">注：</span>您要安装的 mksysb 的版本发行版维护包必须与 <span class="bold">bos.alt_disk_install.boot_images</span> 文件集中级别匹配。</p>
<p>当克隆 rootvg 卷组时，用 <span class="bold">bosboot</span> 命令创建一个新的引导映像。当安装 mksysb 映像时，mksysb 的级别的引导映像和平台类型复制到新的备用 rootvg 的引导逻辑卷中。当重新引导系统时，<span class="bold">bosboot</span> 命令在引导的前期运行，然后再次重新引导系统。这是为了将引导映像和刚刚重新恢复的 mksysb 同步。系统然后以常规方式引导。</p>
<p>在安装结束时，一个卷组 altinst_rootvg，保留在目标磁盘上处于脱机状态并作为占位符。如果联机，它显示不具有任何逻辑卷，但它的确实际包含逻辑卷，只是因为它们的名称和正在运行的系统上的逻辑卷的名称冲突，它们已经从 ODM 除去。推荐您不要将 altinst_rootvg 组卷联机，只要将定义保留在那里作为占位符。</p>
<p>在系统从新的备用磁盘重新引导之后，除非 <span class="bold">alt_disk_install</span> 版本是 4.3.2 或更高，否则先前的 rootvg 卷组不在 <span class="bold">lspv</span> 列表中出现。</p>
<p>对于 <span class="bold">alt_disk_install</span> 4.3.2 或更高版本：</p>
<p></p><blockquote>在从新的备用磁盘重新启动后，先前的 rootvg 卷组在 <span class="bold">lspv</span> 列表中出现，名为“old_rootvg”，且包含原始 rootvg 中的所有磁盘。此先前的 rootvg 卷组设置为重新引导时不联机，且仅应该用 -X 标志除去它（即 <span class="bold">alt_disk_install</span> -X old_rootvg）。</blockquote>
<p>如果有必要返回到原始 rootvg，则使用 bootlist 命令更改引导列表以从原始 rootvg 重新引导。</p>
<p>对于 <span class="bold">alt_disk_install</span> 4.3.2 或更高版本：</p>
<p></p><blockquote>如果不清楚哪个磁盘是特定卷组的引导磁盘，可以用 -q 标志来确定引导磁盘。当卷组由多个磁盘构成且有必要更改引导列表时，这会显得非常有用。</blockquote>
<p>备用根文件系统作为 <span class="bold">/alt_inst</span> 安装，这样其它文件系统将具有该前缀（<span class="bold">/alt_inst/usr</span>、<span class="bold">/alt_inst/var</span>）。这就是如果使用定制脚本时，该如何访问它们的方式。</p>
<p></p><blockquote><span class="bold">注意：</span>如果用 <span class="bold">alt_disk_install</span> 创建了备用 rootvg，当不再希望使用它，或不想再运行 <span class="bold">alt_disk_install</span> 命令时，请不要在 altinst_rootvg 命令上运行 exportvg。</blockquote>
<p></p><blockquote>仅运行 <span class="bold">alt_disk_install -X</span> 命令来从 ODM 数据库中除去 altinst_rootvg 定义。您不能运行 <span class="bold">exportvg</span> 命令（或 <span class="bold">reducevg</span> 命令）的原因是逻辑卷名称和文件系统名称现在具有实际名称，且 <span class="bold">exportvg</span> 将从实际 rootvg 的 <span class="bold">/etc/filesystems</span> 除去实际文件系统的节。</blockquote>
<p></p><blockquote>如果偶然运行了 <span class="bold">exportvg</span> ，请确保在重新启动系统前重新创建 <span class="bold">/etc/filesystems</span> 文件。如果没有正确的 <span class="bold">/etc/filesystems</span> 文件，系统不会重新引导。</blockquote>
<p>此功能还可用于“网络安装管理”（NIM）。有关更多信息，请参阅 NIM Guide。</p>
<a name="i0120981245tmhj"></a>
<p id="i0120981245tmhj"><span class="bold">alt_disk_install</span> 的 AIX 4.3.1 及更高版本可以分阶段执行。安装分为三个阶段，而缺省值是执行所有三个阶段。</p>
<a name="wq139"></a>
<table id="wq139" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="11%">
<a id="i0120981245tmhd" name="i0120981245tmhd"></a><span class="bold">阶段 1</span></td>
<td width="88%">创建 <span class="bold">altinst_rootvg</span> 卷组、<span class="bold">alt_</span>“逻辑卷”、<span class="bold">/alt_inst</span> 文件系统，并恢复 mksysb 或 rootvg 数据。</td>
</tr>
<tr>
<td><span class="bold">阶段 2</span></td>
<td>运行任何指定的定制脚本，安装更新、新文件集、修正包或卷（仅克隆时），复制一个 <span class="bold">resolv.conf</span> 文件（如果指定），以及复制文件过去以保留一个 NIM 客户机（如果指定）。</td>
</tr>
<tr>
<td><span class="bold">阶段 3</span></td>
<td>卸装 <span class="bold">/alt_inst</span> 文件系统，重命名文件系统和逻辑卷，除去 <span class="bold">alt_ logical</span> 卷，命名 ODM 以及使 altinst_rootvg 脱机。如果指定，它设置引导列表和重新引导程序。</td>
</tr>
</tbody>
</table>
<a name="i0120981245tmhk"></a>
<p id="i0120981245tmhk">可以分开运行每个阶段，同时运行阶段 1 和 2，或同时运行阶段 2 和 3。在阶段 3 运行之前，阶段 2 可以多次运行。</p>
<a name="i0120981245tmh2k"></a>
<p id="i0120981245tmh2k">  必须运行阶段 3 来获取是可用 rootvg 的卷组。运行阶段 1 和 2 使 /alt_inst 文件系统保留已安装状态。</p>
<a name="i0120981245tmh1k"></a>
<p id="i0120981245tmh1k">如果已经运行了阶段 1 和／或阶段 2，而想要重头再来（除去 altinst_rootvg），请运行 <span class="bold">alt_disk_install-x</span> 命令来清空。</p>
<p>对于 <span class="bold">alt_disk_install</span> 4.3.2 或更高版本：</p>
<p></p><blockquote>如果有必要在原始 rootvg 和新的备用磁盘间进行数据存取，则卷组“唤醒”可以在非已引导卷组上使用 -W 标志来实现。“唤醒”将卷组置于<span class="bold">alt_disk_install</span> 阶段 1 状态后（即，将安装 /alt_inst 文件系统）。
<p></p><blockquote><span class="bold">注</span>：经历“唤醒”的卷组将重命名为“altinst_rootvg”。</blockquote> 
<p>限制</p> 
<p>正在运行系统的操作系统的版本必须高于或等于经历“唤醒”的卷组的操作系统的版本。这可能意味着有必要从“altinst_rootvg”引导并“唤醒”“old_rootvg”。</p> 
<p></p><blockquote>例如：从正运行 4.1.5 系统上的 <span class="bold">alt_disk_install</span> 4.3.3 mksysb 创建一个备用磁盘。要在两个卷组之间存取数据，有必要从 4.3.3 备用磁盘引导并“唤醒”4.1.5“old_rootvg”卷组。</blockquote> 
<p>此限制是由 jfs 日志条目的不兼容性引起的。“唤醒”包含更高操作系统版本的卷组是可能的，但那个卷组不能是曾经作为系统 rootvg 的卷组。如果这样，当卷组正经历“唤醒”时，它可能已经记录了不能由旧的操作系统版本 rootvg 解释的 jfs 日志条目。JFS 日志条目通常代表在重新引导之前未卸装的文件系统，例如 /,/usr。</p> 
<p>除非 FORCE 环境变量设置为“yes”，否则 <span class="bold">alt_disk_install</span> 命令不会允许“唤醒”在具有更高操作系统版本的卷组上发生。</p> 
<p><span class="bold">注意</span>：如果在包含更高操作系统版本的卷组上和正在运行的卷组上依次尝试一个 FORCE“唤醒”，<span class="bold">且</span>“唤醒”卷组已经是一个系统 rootvg，将发生错误。</p> 
<p>当不再需要数据存取时，可以使用 -S 标志将卷组置于睡眠状态。</p> 
<p><span class="bold">注：</span>已经历“唤醒”的卷组必须在它能被引导和用作 rootvg 之前“置于睡眠”。</p></blockquote>
<a name="a042298bclk"></a>
<h3 id="a042298bclk">标志</h3>
<p></p>
<a name="wq140"></a>
<table id="wq140" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="25%">
<a id="i012298200tmh6" name="i012298200tmh6"></a><span class="bold">-B</span></td>
<td width="75%">将指定在 mksysb 或克隆后不运行引导列表。如果设置它，那么 <span class="bold">-r</span> 标志就不能使用。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh1" name="i012298200tmh1"></a><span class="bold">-C</span></td>
<td>克隆 rootvg。
<p><span class="bold">注：-d</span> 和 <span class="bold">-C</span> 是互斥的。</p></td>
</tr>
<tr>
<td>
<a id="a042298bcl" name="a042298bcl"></a><span class="bold">-d</span><span class="italic"> device</span></td>
<td><span class="italic">device</span> 的值可能是：
<p></p>
<pre class="xmp">磁带机 － 例如，/dev/rmt0</pre> 
<p>或</p> 
<p></p>
<pre class="xmp">文件系统中的 mksysb 映像的路径名称。</pre> 
<p><span class="bold">注：-d</span> 和 <span class="bold">-C</span> 是互斥的。</p></td>
</tr>
<tr>
<td>
<a id="i012298200tmh5" name="i012298200tmh5"></a><span class="bold">-D</span></td>
<td>打开调试（设置 <span class="bold">-x</span> 输出）。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh2" name="i012298200tmh2"></a><span class="bold">-i</span>  <span class="italic">image.data</span></td>
<td>使用可选的 image.data 文件，而不用来自 mksysb 映像的缺省 image.data 或从 rootvg 创建的 image.data。image.date 文件名称必须是一个完整的路径名，例如 <tt>/tmp/my_image.data</tt>。
<p>对于 <span class="bold">alt_disk_install</span> 4.3.2 或更高版本：</p> 
<p></p><blockquote>如果某逻辑卷需要置于特定的目标磁盘上，这应在用户指定的 image.data 文件的逻辑卷 LV_SOURCE_DISK_LIST 字段中做注释。</blockquote></td>
</tr>
<tr>
<td>
<a id="i012298200tmh9" name="i012298200tmh9"></a><span class="bold">-p</span><span class="italic"> platform</span></td>
<td>这是用来创建磁盘引导映像名称的平台，它可能由想要支持此功能的供应商提供。此标志仅对 mksysb 安装有效（<span class="bold">-d</span> 标志）。</td>
</tr>
<tr>
<td>
<a id="i0120981245tmhf" name="i0120981245tmhf"></a><span class="bold">-P</span><span class="italic">phase</span></td>
<td>
<a id="i012298200tmh19" name="i012298200tmh19"></a>在 <span class="bold">alt_disk_install</span> 这个调用过程中要执行的<span class="italic">阶段</span>。有效值是：1、2、3、12、23 或 all。
<ul>
<li>12 － 执行阶段 1 和 2。</li>
<li>23 － 执行阶段 2 和 3。</li>
<li>all － 执行所有三个阶段</li></ul></td>
</tr>
<tr>
<td>
<a id="i012298200tmh8" name="i012298200tmh8"></a><span class="bold">-r</span></td>
<td>将指定当 <span class="bold">alt_disk_install</span> 命令完成时，从新磁盘重新引导。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh4" name="i012298200tmh4"></a><span class="bold">-R</span><span class="italic"> resolv_conf</span></td>
<td>在已经恢复了 mksysb 或克隆了 rootvg 之后，<span class="bold">resolv.conf</span> 文件用来替代现有的文件。必须使用 <span class="italic">resolv_conf</span> 的完整路径名。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh3" name="i012298200tmh3"></a><span class="bold">-s</span><span class="italic"> script</span></td>
<td>在 mksysb 安装或 rootvg 克隆运行结束时要运行的可选的定制脚本。此文件必须是可执行的。/alt_inst 文件系统卸装之前在正运行的系统上调用此脚本，这样，文件可在重新引导前从正运行的系统复制到 <span class="bold">/alt_inst</span> 文件系统。这是在备用文件系统中复制或修改文件的唯一机会，因为逻辑卷名称将更改以与 rootvg 的逻辑卷名称匹配，而且在用新的备用 rootvg 重新引导系统或在 altinst_rootvg 上执行“唤醒”之后才能访问它们。必须使用 <span class="italic">script</span> 的完整路径名。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh7" name="i012298200tmh7"></a><span class="bold">-V</span></td>
<td>打开详细的输出。这将显示正为 rootvg 克隆而备份的文件。此标志显示为 mksysb alt_disk_installs 而恢复的文件。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh10" name="i012298200tmh10"></a><span class="bold">-L</span>  <span class="italic">mksysb_level</span></td>
<td>此级别将与平台类型组合在一起以创建要使用的引导映像名称（例如，AIX 5.1 及较早版本中的 rspc_4.3.0_boot）。这必须是 V.R.M. 格式。缺省值将是 AIX 4.3。将相对该级别检查 mksysb 映像以验证它们是相同的。</td>
</tr>
<tr>
<td>
<a id="i0120981245tmhc" name="i0120981245tmhc"></a><a name="i012298200tmh18"></a><span id="i012298200tmh18" class="pk"></span><span class="bold">-n</span></td>
<td>保留 NIM 客户机。<span class="bold">/.rhosts</span> 和 <span class="bold">/etc/niminfo</span> 文件复制到备用 rootvg 的文件系统。</td>
</tr>
<tr>
<td>
<a id="i030899cc1230" name="i030899cc1230"></a><span class="bold">-X</span></td>
<td>从 ODM 数据库中除去 altinst_rootvg 卷组定义。这将返回卷组的 <span class="bold">lspv</span> 列表的值“None”。这不会从卷组中除去实际数据。所以，如果重新设置引导列表，您依旧可以从该卷组重新引导。
<p></p><blockquote>对于 <span class="bold">alt_disk_install</span> 4.3.2 或更高版本，此标志允许指定的卷组名称 ODM 数据库定义的删除，例如 -X old_rootvg。</blockquote></td>
</tr>
<tr>
<td>
<a id="alt_disk_install_flags_bigo" name="alt_disk_install_flags_bigo"></a><span class="bold">-O</span></td>
<td>在目标 altinst_rootvg 上执行设备的复位。这将使 <span class="bold">alt_disk_install</span> 不保留任何用户定义的设备配置。如果一个或多个目标磁盘将成为不同系统的 rootvg（比如在逻辑分区或系统磁盘交换的情况下），此标志是非常有用的。</td>
</tr>
</tbody>
</table>
<p>以下标志仅当克隆 rootvg 时使用才有效（<span class="bold">-C</span>）。</p>
<a name="wq141"></a>
<table id="wq141" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="30%">
<a id="i012298200tmh11" name="i012298200tmh11"></a><span class="bold">-b</span>  <span class="italic">bundle_name</span></td>
<td width="70%">具有将在 rootvg 克隆后安装的软件包或文件集列表的可选文件的路径名。<span class="bold">-l</span> 标志必须和该选项一起使用。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh16" name="i012298200tmh16"></a><span class="bold">-e</span>  <span class="italic">exclude_list</span></td>
<td>当克隆 rootvg 时使用的可选的 exclude.list。排除的规则遵循 <span class="bold">grep</span> 命令的模式匹配规则。<span class="italic">exclude_list</span> 必须是一个完整的路径名。
<p></p><blockquote><span class="bold">注：</span>如果要从备份中排除某些文件，请用 ASCII 编辑器创建 <span class="bold">/etc/exclude.rootvg</span> 文件，并输入您不想包括在系统备份映像中的文件名称的模式。此文件中的模式是 <span class="bold">grep</span> 命令模式匹配约定的输入内容，此输入内容用来确定要从备份中排除哪些文件。如果要排除在 <span class="bold">/etc/exclude.rootvg</span> 文件中列出的文件，请选择“排除文件”字段或按跳格一次来将缺省值更改至“yes”。
<p>例如，要排除名为 scratch 目录中的所有内容，请编辑 exclude 文件使其读起来如下所示：</p> 
<p></p>
<pre class="xmp">     /scratch/
</pre> 
<p>例如，要排除名为 <span class="bold">/tmp</span> 目录中的内容，并避免其它任何路径名中具有 <span class="bold">/tmp</span> 的目录，请编辑 exclude 文件使其读起来如下所示：</p> 
<p></p>
<pre class="xmp">     ^./tmp/</pre> 
<p>所有的文件都相对于（当前工作目录）备份。要排除任何对于在行首使搜索匹配字符串非常重要的文件或目录，请在搜索字符串的第一个字符使用 ^ (插入记号)，后面紧跟 <span class="bold">.</span>（点字符），再紧跟要排除的文件名或目录。</p> 
<p>如果要排除的文件名或目录是另一个文件名或目录的子串，请使用 <span class="bold">^.</span>（插入记号后紧跟点字符）来指定搜索应在行首开始和／或使用 <span class="bold">$</span>（美元符号）来指明搜索应在行末结束。</p></blockquote></td>
</tr>
<tr>
<td>
<a id="i012298200tmh14" name="i012298200tmh14"></a><span class="bold">-f</span><span class="italic"> fix_bundle</span></td>
<td>克隆 rootvg 之后具有要安装的 APAR 列表的可选文件。<span class="bold">-l</span> 标志必须和该选项一起使用。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh15" name="i012298200tmh15"></a><span class="bold">-F</span><span class="italic"> fixes</span></td>
<td>要在 rootvg 克隆后安装的 APAR 可选列表（例如，“IX123456”）。<span class="bold">-l</span> 标志必须和该选项一起使用。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh12" name="i012298200tmh12"></a><span class="bold">-I</span><span class="italic"> installp_flags</span></td>
<td>当将新文件集更新或安装到已克隆的 alt_inst_rootvg 中时要使用的标志。缺省标志：“-acgX”，<span class="bold">-l</span> 标志必须和该选项一起使用。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh13" name="i012298200tmh13"></a><span class="bold">-l</span>  <span class="italic">images_location</span></td>
<td>在 rootvg 克隆后要应用的 installp 映像或更新的位置。这可以是目录完整的路径名或设备名称（如 <span class="bold">/dev/rmt0</span>）。</td>
</tr>
<tr>
<td>
<a id="i012298200tmh17" name="i012298200tmh17"></a><span class="bold">-w</span>  <span class="italic">filesets</span></td>
<td>在克隆 rootvg 后要安装的文件集列表。<span class="bold">-l</span> 标志必须和该选项一起使用。</td>
</tr>
</tbody>
</table>
<p>以下标志可用于 <span class="bold">alt_disk_install</span> 版本 4.3.2  或更高版本：</p>
<a name="wq142"></a>
<table id="wq142" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="48%">
<a id="i030899cc1250" name="i030899cc1250"></a><span class="bold">-q</span><span class="italic"> disk</span></td>
<td width="51%">用于返回卷组引导磁盘名称。从备用磁盘重新启动后，尝试从“old_rootvg”卷组中的多个磁盘确定引导磁盘时，这特别有用。</td>
</tr>
<tr>
<td>
<a id="i030899cc1251" name="i030899cc1251"></a><span class="bold">-S</span></td>
<td>将卷组“置于睡眠”。这在卷组“唤醒”后使用。（<span class="bold">-W</span>）。</td>
</tr>
<tr>
<td>
<a id="i030899cc1252" name="i030899cc1252"></a><span class="bold">-v</span><span class="italic"> new_volume_group_name</span><span class="italic"> disk</span></td>
<td>用于重命名备用磁盘卷组。当在多个卷组中创建多个备用磁盘时特别有用，而且名称标识是必需的。</td>
</tr>
<tr>
<td>
<a id="i030899cc1253" name="i030899cc1253"></a><span class="bold">-W</span><span class="italic"> disk</span></td>
<td>用来“唤醒”卷组以在 rootvg 和备用磁盘 rootvg 间的数据存取。
<p></p><blockquote><span class="bold">注</span>：经历“唤醒”的卷组将重命名为“altinst_rootvg”。</blockquote></td>
</tr>
</tbody>
</table>
<p></p><blockquote>限制</blockquote>
<p></p><blockquote>正在运行系统的操作系统版本必须高于或等于经历“唤醒”的卷组的操作系统版本。这可能意味着有必要从“altinst_rootvg”引导并“唤醒”“old_rootvg”。</blockquote>
<a name="a042298bclo"></a>
<h3 id="a042298bclo">参数</h3>
<p></p>
<a name="wq143"></a>
<table id="wq143" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="20%"><span class="italic">target_disks</span></td>
<td width="80%">指定备用 rootvg 要创建于其上的目标磁盘的一个或多个名称。这个磁盘或这些磁盘当前不得包含任何卷组定义。<span class="bold">lspv</span> 命令应该将这些磁盘显示为属于卷组 <span class="bold">None</span>。</td>
</tr>
</tbody>
</table>
<a name="wq144"></a>
<h3 id="wq144">示例</h3>
<ol type="1">
<li>要将正在运行的 4.2.0 rootvg 克隆至 hdisk3，然后从 /updates 应用更新以将被克隆的 rootvg 提高到 4.2.1 级别：
<p></p>
<pre class="xmp">alt_disk_install -C -F 4.2.1.0_AIX_ML -l /updates hdisk3</pre> 
<p>引导列表将被设置为下一次从 hdisk3 重新引导。</p></li>
<li>要在 hdisk3 上安装 4.3 mksysb 映像，然后在重新引导前，运行定制的脚本（/home/myscript）来将一些用户文件复制到备用 rootvg 文件系统：
<p></p>
<pre class="xmp">alt_disk_install -d /mksysb_images/4.3_mksysb -s /home/myscript hdisk3</pre></li>
<li>要在从新的备用磁盘引导后，除去原始 rootvg ODM 数据库条目：
<p></p>
<pre class="xmp">alt_disk_install -X old_rootvg</pre> 
<p>原始 rootvg 的 <span class="bold">lspv</span> 清单将更改至“None”。所以，新的卷组可以在那些磁盘上创建。</p></li>
<li>要确定具有多个物理卷的卷组的引导磁盘：
<p></p>
<pre class="xmp">alt_disk_install -q hdisk0</pre> 
<p>说明示例</p> 
<p></p>
<pre class="xmp"># lspv
hdisk0          00006091aef8b687     old_rootvg
hdisk1          00076443210a72ea     rootvg
hdisk2          0000875f48998649     old_rootvg
# alt_disk_install -q hdisk0
hdisk2</pre> 
<p>在这种情况下，“old_rootvg”的引导磁盘实际上是 hdisk2。所以，您应将引导列表重新设置为 hdisk2，并重新引导至原始 rootvg 卷组。</p></li>
<li>要修改 <span class="bold">alt_disk_install</span> 卷组名称：
<p></p>
<pre class="xmp">alt_disk_install -v alt_disk_432 hdisk2</pre> 
<p>说明示例</p> 
<p></p>
<pre class="xmp"># lspv
hdisk0          00006091aef8b687     rootvg
hdisk1          00000103000d1a78     rootvg
hdisk2          000040445043d9f3     altinst_rootvg
hdisk3          00076443210a72ea     altinst_rootvg
hdisk4          0000875f48998649     None
hdisk5          000005317c58000e     None
# alt_disk_install -v alt_disk_432   hdisk2
#lspv
hdisk0          00006091aef8b687     rootvg
hdisk1          00000103000d1a78     rootvg
hdisk2          000040445043d9f3     alt_disk_432
hdisk3          00076443210a72ea     alt_disk_432
hdisk4          0000875f48998649     None
hdisk5          000005317c58000e     None</pre></li>
<li>要在从新的备用磁盘引导后“唤醒”一个原始 rootvg：
<p></p>
<pre class="xmp">alt_disk_install -W hdisk0</pre> 
<p>说明示例</p> 
<p></p>
<pre class="xmp"># lspv
hdisk0          000040445043d9f3     old_rootvg
hdisk1          00076443210a72ea     rootvg
# alt_disk_install -W hdisk0
# lspv
hdisk0          000040445043d9f3     altinst_rootvg
hdisk1          00076443210a72ea     rootvg</pre> 
<p>此时，“altinst_rootvg”卷组是联机的，且将安装 /alt_inst 文件系统。</p></li>
<li>要将已经经历了“唤醒”的卷组“置于睡眠”：
<p></p>
<pre class="xmp">alt_disk_install -S</pre> 
<p>说明示例</p> 
<p></p>
<pre class="xmp"># lspv
hdisk0          000040445043d9f3     altinst_rootvg
hdisk1          00076443210a72ea     rootvg
# alt_disk_install -S
# lspv
hdisk0          000040445043d9f3     altinst_rootvg
hdisk1          00076443210a72ea     rootvg</pre> 
<p>“altinst_rootvg”不再处于联机状态且不再安装 /alt_inst 文件系统。如果有必要将卷组名称“altinst_rootvg”更改回“old_rootvg”，这可以通过“-v”标志来进行。</p></li></ol>
<a name="wq146"></a>
<h3 id="wq146">文件</h3>
<p></p>
<a name="wq147"></a>
<table id="wq147" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="43%"><span class="bold">/usr/sbin/alt_disk_install</span></td>
<td width="56%">包含 alt_disk_install 命令</td>
</tr>
</tbody>
</table>
<a name="wq148"></a>
<h3 id="wq148">相关信息</h3>
<p><a href="bootlist.htm#az7x8b0chri"><span class="bold">bootlist</span></a> 命令、<a href="bosboot.htm#a275977f"><span class="bold">bosboot</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/lspv.htm#a7do3280frit"><span class="bold">lspv</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds4/nim.htm#gsjqi2badoug"><span class="bold">nim</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds4/nimadm.htm"><span class="bold">nimadm</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="alt_disk_install.htm#Top_Of_Page">页的顶部</a> | <a href="alstat.htm">上一页</a> | <a href="anno.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
