<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 1，a - c - acctdisk 或 acctdusg 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="acctdisk 命令, acctdusg 命令, 磁盘使用计数,
记帐系统" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="acctdisk.htm#Bot_Of_Page">页的底部</a> | <a href="acctcon1.htm">上一页</a> | <a href="acctmerg.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 1，a - c</h1></center>

<a name="a10991a6d"></a>
<h2 id="a10991a6d">acctdisk 或 acctdusg 命令</h2>
<p><a id="idx11" name="idx11"></a> <a id="idx12" name="idx12"></a> <a id="idx13" name="idx13"></a> <a id="idx14" name="idx14"></a></p>
<a name="a10991a6f"></a>
<h3 id="a10991a6f">用途</h3>
<a name="ea6c976558mela"></a>
<p id="ea6c976558mela">执行磁盘使用计数。</p>
<a name="a10991a71"></a>
<h3 id="a10991a71">语法</h3>
<p><span class="bold">/usr/sbin/acct/acctdisk</span></p>
<p><span class="bold">/usr/sbin/acct/acctdusg</span> [  <a href="acctdisk.htm#a10991a7b"><span class="bold">-u</span></a> <span class="italic">File</span> ] [  <a href="acctdisk.htm#a10991a7a"><span class="bold">-p</span></a> <span class="italic">File</span> ]</p>
<a name="a10991a73"></a>
<h3 id="a10991a73">描述</h3>
<a name="ea6c977015mela"></a>
<p id="ea6c977015mela"><span class="bold">acctdisk</span> 和 <span class="bold">acctdusg</span> 命令由 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds2/dodisk.htm#p9b6i10csylv"><span class="bold">dodisk</span></a> 命令调用来执行磁盘使用计数。通常，这个过程在 <a href="cron.htm#a15292a"><span class="bold">cron</span></a> 守护进程运行 <span class="bold">dodisk</span> 命令时启动。</p>
<a name="ea6c977112mela"></a>
<p id="ea6c977112mela">通常，<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds2/diskusg.htm#a165917c6"><span class="bold">diskusg</span></a> 命令的输出成为 <span class="bold">acctdisk</span> 命令的输入。如果需要更彻底但是较慢的磁盘记帐版本，请使用 <span class="bold">dodisk&nbsp;-o</span> 命令代替 <span class="bold">diskusg</span> 命令来调用 <span class="bold">acctdusg</span> 命令。</p>
<a name="ea6c977279mela"></a>
<p id="ea6c977279mela">只为本地用户在本地文件系统上的文件进行记帐。要统计远程用户（比如 YP 客户机或无磁盘客户机）的系统管理员应使用 <span class="bold">acctdusg -p</span> 命令。</p>
<a name="a163990a"></a>
<h4 id="a163990a">acctdisk</h4>
<a name="ea6c977435mela"></a>
<p id="ea6c977435mela"><span class="bold">acctdisk</span> 命令读取来自标准输入的 <span class="bold">diskusg</span> 或 <span class="bold">acctdusg</span> 命令的输出行，并将每个单独的记录转换为总记帐记录，然后将这些记录写至标准输出。通过 <span class="bold">acctmerg</span> 命令，这些记录和其它总记帐记录合并在一起来产生日常记帐报告。</p>
<a name="a1639907"></a>
<h4 id="a1639907">acctdusg</h4>
<a name="ea6c977589mela"></a>
<p id="ea6c977589mela">当需要磁盘记帐的缓慢且彻底的版本时，则通过使用 <span class="bold">dodisk -o</span> 命令来调用 <span class="bold">acctdusg</span> 命令。其它情况下，<span class="bold">dodisk</span> 命令调用 <span class="bold">diskusg</span> 命令。</p>
<a name="ea6c977685mela"></a>
<p id="ea6c977685mela"><span class="bold">acctdusg</span> 命令从标准输入（通常从 <span class="bold">find&nbsp;/&nbsp;-print</span> 命令传送）读取一个文件列表，并计算分配给每个文件所有者的磁盘块的数量（包含间接块），然后将每个用户的单独记录写至标准输出。缺省情况下，此命令在 <span class="bold">/etc/passwd</span> 文件中搜索登录名和登录次数。可以通过指定 <span class="bold">-p</span><span class="italic"> File</span> 标志和变量来搜索其它文件。每个输出记录具有以下格式：</p>
<p></p>
<a name="a1639908"></a>
<pre id="a1639908" class="xmp">uid&nbsp;login&nbsp;#blocks</pre>
<a name="ea6c977841mela"></a>
<p id="ea6c977841mela"><tt>#blocks</tt> 值是用户使用的 1KB 块的数量。</p>
<a name="a10991a76"></a>
<h3 id="a10991a76">标志</h3>
<p></p>
<a name="wq22"></a>
<table id="wq22" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="18%">
<a id="a10991a7a" name="a10991a7a"></a><span class="bold">-p&nbsp;</span><span class="italic">File</span></td>
<td width="81%">  搜索指定文件中的登录名和次数，而不是搜索 <span class="bold">/etc/passwd</span> 文件。</td>
</tr>
<tr>
<td>
<a id="a10991a7b" name="a10991a7b"></a><span class="bold">-u&nbsp;</span><span class="italic">File</span></td>
<td>  在指定文件中放置免于责任的文件名称的记录。</td>
</tr>
</tbody>
</table>
<a name="a71f0b4"></a>
<h3 id="a71f0b4">安全性</h3>
<a name="ea6c978197mela"></a>
<p id="ea6c978197mela">访问控制：这些命令应仅向 <span class="bold">adm</span> 组的成员授予执行（x）访问权。</p>
<a name="a10991a7c"></a>
<h3 id="a10991a7c">示例</h3>
<ol type="1">
<li><a name="a10991a7d"></a><span id="a10991a7d" class="pk"></span>要开始常规磁盘记帐过程，请在 <span class="bold">crontab</span> 文件中添加类似以下命令的一行，这样
<span class="bold">cron</span> 守护进程将自动运行磁盘记帐命令：
<p></p>
<a name="a10991a7e"></a>
<pre id="a10991a7e" class="xmp">0 2 * * 4 /usr/sbin/acct/dodisk </pre><p class="indatacontent"> 在这个示例中，<span class="bold">dodisk</span> 过程在每周四（<tt>4</tt>）凌晨 2 点（<tt>0 2</tt>）运行，且 <span class="bold">dodisk</span> 过程调用 <span class="bold">diskusg</span> 和 <span class="bold">acctdisk</span> 命令以将磁盘使用记录写至<span class="bold"> /usr/adm/acct/nite/dacct&nbsp;</span>文件。</p></li>
<li><a name="a10991a80"></a><span id="a10991a80" class="pk"></span>要启动一个详尽的磁盘记帐过程，请在 <span class="bold">crontab</span> 文件中添加类似以下命令的一行，这样 <span class="bold">cron</span> 守护进程就会自动运行记帐命令：
<p></p>
<a name="a10991a81"></a>
<pre id="a10991a81" class="xmp">0 2 * * 4 /usr/sbin/acct/dodisk -o</pre><p class="indatacontent"> 在这个示例中，<span class="bold">dodisk</span> 过程在每周四（<tt>4</tt>）凌晨 2 点（<tt>0 2</tt>）运行，且 <span class="bold">dodisk</span> 过程调用 <span class="bold">acctdusg</span> 和 <span class="bold">acctdisk</span> 命令以将磁盘使用记录写至<span class="bold"> /var/adm/acct/nite/dacct&nbsp;</span>文件。</p></li></ol>
<a name="a10991a88"></a>
<h3 id="a10991a88">文件</h3>
<p></p>
<a name="wq24"></a>
<table id="wq24" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="38%">
<a id="a10991a89" name="a10991a89"></a><span class="bold">/usr/sbin/acct/acctdisk</span></td>
<td width="61%">  包含<span class="bold"> acctdisk</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a150b0e4607mart" name="a150b0e4607mart"></a><span class="bold">/usr/sbin/acct/acctdusg</span></td>
<td>  包含 <span class="bold">acctdusg</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a65f04e2" name="a65f04e2"></a><span class="bold">/etc/passwd</span></td>
<td>  包含用户的基本属性。</td>
</tr>
<tr>
<td>
<a id="a10991a8c" name="a10991a8c"></a><span class="bold">/usr/sbin/acct</span></td>
<td>  具有所有记帐命令的目录。</td>
</tr>
</tbody>
</table>
<a name="a10991a8d"></a>
<h3 id="a10991a8d">相关信息</h3>
<a name="ea6c979575mela"></a>
<p id="ea6c979575mela"><a href="acctmerg.htm#a10991ac5"><span class="bold">acctmerg</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds2/diskusg.htm#a165917c6"><span class="bold">diskusg</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds2/dodisk.htm#p9b6i10csylv"><span class="bold">dodisk</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds4/runacct.htm#a10991b49"><span class="bold">runacct</span></a> 命令。</p>
<a name="ea6c979764mela"></a>
<p id="ea6c979764mela"><a href="cron.htm#a15292a"><span class="bold">cron</span></a> 守护进程。</p>
<a name="ea6c979858mela"></a>
<p id="ea6c979858mela"><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/acct.htm#j23190clm"><span class="bold">acct</span></a> 文件格式、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/utmp.htm#a3039269f"><span class="bold">utmp</span>、<span class="bold">wtmp</span>、<span class="bold">failedlogin</span></a> 文件格式。</p>
<a name="ea6c979946mela"></a>
<p id="ea6c979946mela"><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/acct.htm#a087914aa"><span class="bold">acct</span></a> 子例程。</p>
<a name="ea6c97a039mela"></a>
<p id="ea6c97a039mela"><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/admnconc/acct_overview.htm#a346f9497">Accounting Overview</a> 提供了有关记帐系统、日常和每月报告的准备以及记帐文件的信息。</p>
<a name="a26fbb30700janb"></a>
<p id="a26fbb30700janb"><span class="italic">《AIX 5L V5.2 系统管理指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/baseadmn/sys_acctg.htm#a290915">『建立一个记帐系统』</a>描述了您建立一个记帐系统时须采取的步骤。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="acctdisk.htm#Top_Of_Page">页的顶部</a> | <a href="acctcon1.htm">上一页</a> | <a href="acctmerg.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
