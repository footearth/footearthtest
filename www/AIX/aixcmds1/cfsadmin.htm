<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 1，a - c - cfsadmin 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="cfadmin 命令, 管理磁盘空间, 磁盘空间,
列出高速缓存内容, 删除高速缓存, 高速缓存内容" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="cfsadmin.htm#Bot_Of_Page">页的底部</a> | <a href="cflow.htm">上一页</a> | <a href="chargefee.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 1，a - c</h1></center>

<a name="a26491mkm54e"></a>
<h2 id="a26491mkm54e">cfsadmin 命令</h2><a id="idx329" name="idx329"></a><a id="idx330" name="idx330"></a><a id="idx331" name="idx331"></a><a id="idx332" name="idx332"></a><a id="idx333" name="idx333"></a><a id="idx334" name="idx334"></a>
<a name="wq767"></a>
<h3 id="wq767">用途</h3>
<p>使用高速缓存文件系统（CacheFS）来管理用于高速缓存文件系统的磁盘空间。</p>
<a name="wq768"></a>
<h3 id="wq768">语法</h3>
<p><span class="bold">cfsadmin</span>  <a href="cfsadmin.htm#cfsadminflagc"><span class="bold">-c</span></a> [-o <span class="bold-italic">param=</span><span class="italic">n</span> [,<span class="bold-italic">param=</span><span class="italic">n</span>]] <span class="italic">cache_directory</span></p>
<p><span class="bold">cfsadmin</span>  <a href="cfsadmin.htm#cfsadminflagd"><span class="bold">-d</span></a> <span class="italic">cacheID</span>|<span class="bold">all</span> <span class="italic">cache_directory</span></p>
<p><span class="bold">cfsadmin</span>  <a href="cfsadmin.htm#cfsadminflagl"><span class="bold">-l</span></a> <span class="italic">cache_directory</span></p>
<p><span class="bold">cfsadmin</span>  <a href="cfsadmin.htm#cfsadminflags"><span class="bold">-s</span></a> mntpnt . . .|<span class="bold">all</span></p>
<p><span class="bold">cfsadmin</span>  <a href="cfsadmin.htm#minusu"><span class="bold">-u</span></a> <span class="italic">cache_directory</span></p>
<a name="wq769"></a>
<h3 id="wq769">描述</h3>
<p><span class="bold">cfsadmin</span> 命令提供以下功能：</p>
<ul>
<li>高速缓存创建</li>
<li>高速缓存文件系统的删除</li>
<li>高速缓存内容和统计信息列表</li>
<li>未安装文件系统时的资源参数调整。</li></ul>
<p>对于命令的每种格式，除非指定 <span class="bold">-u</span> 标志，否则必须指定高速缓存目录，即实际存储了高速缓存的目录。在前端文件系统中的路径名会标识该高速缓存目录。当使用 <span class="bold">-s</span> 标志时，必须指定安装点。</p>
<p>在使用 CatheFS 安装文件系统时，可以指定高速缓存标识或者让系统自己生成一个。<span class="bold">-l</span>
标志将高速缓存标识包括在它的信息列表中。要删除高速缓存的文件系统，就必须知道高速缓存标识。</p>
<a name="wq770"></a>
<h3 id="wq770">标志</h3>
<p></p>
<a name="wq771"></a>
<table id="wq771" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="33%">
<a id="cfsadminflagc" name="cfsadminflagc"></a><span class="bold">-c</span> <span class="italic">cache_directory</span></td>
<td width="66%">在由 <span class="italic">cache_directory</span> 指定的目录下创建高速缓存。在创建高速缓存之前此目录不得先存在。</td>
</tr>
<tr>
<td>
<a id="cfsadminflagd" name="cfsadminflagd"></a><span class="bold">-d</span> <span class="bold"></span></td>
<td>除去您指定了其高速缓存标识的文件系统并释放其资源，或者通过指定 <span class="italic">cache_directory</span> 除去高速缓存中的所有文件系统。从高速缓存删除文件系统之后，必须运行命令来更正高速缓存的资源计数。</td>
</tr>
<tr>
<td>
<a id="cfsadminflagl" name="cfsadminflagl"></a><span class="bold">-l</span> <span class="italic">cache_directory</span></td>
<td>列出存储在指定高速缓存中的文件系统，以及有关它们的统计信息。按高速缓存标识列出每个高速缓存的文件系统。统计信息记录了资源应用与高速缓存资源参数。</td>
</tr>
<tr>
<td>
<a id="cfsadminflago" name="cfsadminflago"></a><span class="bold">-o</span> [ <span class="bold-italic">param=</span><span class="italic">n</span> ]<span class="italic">cache_directory</span></td>
<td>允许通过将 <a href="cfsadmin.htm#cachefsresparam">CacheFS 资源参数</a> 用作变量来更改参数。</td>
</tr>
<tr>
<td>
<a id="cfsadminflags" name="cfsadminflags"></a><span class="bold">-s</span> <span class="italic">cache_directory</span></td>
<td>请求在指定的文件系统（或所有 <span class="bold">cachefs</span> 安装的文件系统）上的一致性检查。仅当安装高速缓存文件系统时启用了 <span class="bold">demandconst</span> 时 <span class="bold">-s</span> 才起作用。 会对指定的高速缓存文件系统中的每个文件进行与其后备文件系统中对应文件的一致性检查。一致性检查是在访问文件时一个文件一个文件地执行的。如果没有访问任何文件，则不执行检查。此标志的使用并不会导致突然发生大量的一致性检查。<span class="bold">-s</span> 标志当前在此操作系统 CacheFS 中不受支持。</td>
</tr>
<tr>
<td>
<a id="minusu" name="minusu"></a><span class="bold">-u</span> <span class="italic">cache_directory</span></td>
<td>更新指定的高速缓存目录的资源参数。只能增加参数值。要减少该值，必须除去高速缓存并重新创建它。使用该标志时，必须卸装高速缓存目录中的所有文件系统。下次在指定的高速缓存目录中安装任何文件系统时，更改才会生效。
<a name="wq772"></a>
<div class="notetitle" id="wq772">注:</div>
<div class="notebody">不具有 <span class="bold">-o</span> 标志的 <span class="bold">-u</span> 标志将所有参数设置为它们的缺省值。</div></td>
</tr>
</tbody>
</table>
<a name="cachefsresparam"></a>
<h3 id="cachefsresparam">CacheFS 资源参数</h3>
<p>可以将以下 cacheFS 资源参数指定为至 <span class="bold">-o</span> 标志的参数。用逗号分隔多个参数。</p>
<a name="wq773"></a>
<table id="wq773" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%"><span class="bold">maxblocks</span>=<span class="italic">n</span></td>
<td width="50%">CacheFS 可以使用的存储空间最大值，表示为前端文件系统中块的总数的百分比。如果 CacheFS 不具有前端文件系统的专用权，则不保证 <span class="bold">maxblocks</span> 参数允许的所有空间都可用。缺省值为 90。</td>
</tr>
<tr>
<td><span class="bold">minblocks</span>=<span class="italic">n</span></td>
<td>CacheFS 总是可以通过其内部控制机制无限制地使用的存储空间的最小值，表示为前端文件系统中块的总数的百分比。如果 CacheFS 不具有前端文件系统的专用权，则不保证 <span class="bold">minblocks</span> 参数试图保留的所有空间都可用。缺省值为 0。</td>
</tr>
<tr>
<td><span class="bold">threshblocks</span>=<span class="italic">n</span></td>
<td>前端文件系统中块总数的百分比，若超过此值，则一旦 CacheFS 的块使用已达到了由 <span class="bold">minblocks</span> 指定的级别，它将无法索取资源。缺省值为 85。</td>
</tr>
<tr>
<td><span class="bold">maxfiles</span>=<span class="italic">n</span></td>
<td>CacheFS 可使用的文件的最大数目，表示为前端文件系统中信息节点总数的百分比。如果 CacheFS 不具有前端文件系统的专用权，则不保证 <span class="bold">maxfiles</span>  参数允许的所有信息节点都可用。缺省值为 90。</td>
</tr>
<tr>
<td><span class="bold">minfiles</span>=<span class="italic">n</span></td>
<td>CacheFS 总是可以通过其内部控制机制无限制地使用的文件的最小数量，表示为前端文件系统中信息节点总数的百分比。如果 CacheFS 不具有前端文件系统的专用权，则不保证 <span class="bold">minfiles</span> 参数试图保留的所有信息节点都可用。缺省值为 0。</td>
</tr>
<tr>
<td><span class="bold">threshfiles</span>=<span class="italic">n</span></td>
<td>前端文件系统中信息节点总数的百分比，若超过此值，一旦 CacheFS 对信息节点的使用达到了 <span class="bold">minfiles</span> 指定的级别，那么它将无法索取信息节点。缺省值为 85。</td>
</tr>
<tr>
<td><span class="bold">maxfilesize=</span>=<span class="italic">n</span></td>
<td>允许 CacheFS 进行高速缓存的最大文件大小，以兆字节表示。缺省值为 3。</td>
</tr>
</tbody>
</table>
<a name="wq774"></a>
<div class="notetitle" id="wq774">注:</div>
<div class="notebody">不能减少用于高速缓存的块或 i-node 分配。要减少高速缓存的大小，必须先将它除去，然后使用不同参数重新创建它。</div>
<a name="wq775"></a>
<h3 id="wq775">示例</h3>
<ol type="1">
<li>要创建名为 <span class="bold">cache</span> 的高速缓存目录，请输入：
<p></p>
<pre class="xmp">cfsadmin -c /cache</pre></li>
<li>要创建名为 <span class="bold">/cache1</span> 的高速缓存目录，而它在前端文件系统中可索取高达 60% 的块，也可以不受 CacheFS 内部控制机制的干扰使用 40% 的前端文件系统块，并具有 50% 的阈值。阈值表示在 CacheFS 达到其保证的最小值后，如果已经使用了前端文件系统中 50%  的块，则它不能索取更多的空间。
<p></p>
<pre class="xmp">cfsadmin -c -o maxblocks=60,minblocks=40,threshblocks=50 /cache1</pre></li>
<li>要将用于高速缓存目录 <span class="bold">/cache2</span> 的 <span class="bold">maxfilesize</span> 参数更改为 2 兆字节，请输入：
<p></p>
<pre class="xmp">cfsadmin -u -o maxfilesize=2 /cache2</pre></li>
<li>要列出名为 <span class="bold">/cache3</span> 的高速缓存目录的内容，并提供有关资源优化的统计信息，请输入：
<p></p>
<pre class="xmp">cfsadmin -l /cache3</pre></li>
<li>要从高速缓存目录 <span class="bold">/cache3</span> 除去具有高速缓存标识 23 的高速缓存文件系统，并释放其资源（高速缓存标识是返回信息的一部分），请输入：
<p></p>
<pre class="xmp">cfsadmin -d 23 /cache3</pre></li>
<li>要从 <span class="bold">/cache3</span> 目录除去所有高速缓存文件系统，请输入：
<p></p>
<pre class="xmp">cfsadmin -d all /cache3</pre></li>
<li>要检查在启用 <span class="bold">demandconst</span> 的情况下安装的所有文件系统的一致性。如果未找到 <span class="bold">demandconst</span> 文件系统，则不会报告错误。输入：
<p></p>
<pre class="xmp">cfsadmin</pre></li></ol>
<a name="wq777"></a>
<h3 id="wq777">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/mount.htm#a1019286a"><span class="bold">mount</span></a> 命令和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds2/fsck_cachefs.htm#i0818970845mkm"><span class="bold">fsck_cachefs</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="cfsadmin.htm#Top_Of_Page">页的顶部</a> | <a href="cflow.htm">上一页</a> | <a href="chargefee.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
