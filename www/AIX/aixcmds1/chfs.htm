<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 1，a - c - chfs 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="chfs, 命令, chfs 命令, 使用 chfs 命令, 更改项,
/etc/filesystems 文件" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="chfs.htm#Bot_Of_Page">页的底部</a> | <a href="chfont.htm">上一页</a> | <a href="chgif.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 1，a - c</h1></center>

<a name="a3059b2"></a>
<h2 id="a3059b2">chfs 命令</h2>
<p><a id="idx369" name="idx369"></a><a id="idx370" name="idx370"></a></p>
<a name="a3059b4"></a>
<h3 id="a3059b4">用途</h3>
<a name="f007570480mart"></a>
<p id="f007570480mart">更改文件系统的属性。<a id="idx371" name="idx371"></a></p>
<a name="d72239e075jani"></a>
<h3 id="d72239e075jani">语法</h3>
<p><span class="bold">chfs</span> [  <a href="chfs.htm#chfs_flags_n"><span class="bold">-n</span> <span class="italic">NodeName</span></a> ] [  <a href="chfs.htm#chfs_flags_m"><span class="bold">-m</span></a> <span class="italic">NewMountPoint</span> ] [  <a href="chfs.htm#chfs_flags_u"><span class="bold">-u</span></a> <span class="italic">MountGroup</span> ] [  <a href="chfs.htm#chfs_flags_biga"><span class="bold">-A </span></a>{  <span class="bold">yes </span>|  <span class="bold">no </span>} ] [  <a href="chfs.htm#chfs_flags_p"><span class="bold">-p </span></a>{  <span class="bold">ro </span>|  <span class="bold">rw </span>} ] [  <a href="chfs.htm#chfs_flags_t"><span class="bold">-t</span></a> {  <span class="bold">yes</span> |  <span class="bold">no</span> } ] [  <a href="chfs.htm#chfs_flags_a"><span class="bold">-a</span></a> <span class="italic">Attribute</span><span class="bold">=</span><span class="italic">Value</span> ] [  <a href="chfs.htm#chfs_flags_d"><span class="bold">-d</span></a> <span class="italic">Attribute</span> ] <span class="italic">FileSystem</span></p>
<a name="a3059b7"></a>
<h3 id="a3059b7">描述</h3>
<p><span class="bold">chfs</span> 命令更改文件系统的属性。新的安装点、自动安装、许可权以及文件系统大小都可以被设置或更改。<span class="italic">FileSystem</span> 参数指定文件系统的名称，表示为安装点。</p>
<p>有些文件系统的属性是在创建该文件系统时设置的，因而不能更改。对于日志文件系统（JFS），这样的属性包括段的大小、块的大小、每个 i 节点的字节数、压缩以及最小文件系统大小。对于增强的日志文件系统（JFS2），不能更改块的大小。</p>
<p>可以使用基于 Web 的系统管理器中的“文件系统”应用程序来更改文件系统特征。还可以使用系统管理界面程序（SMIT）<span class="bold">smit chfs</span> 快速路径来运行此命令。</p>
<a name="wq898"></a>
<div class="notetitle" id="wq898">注:</div>
<div class="notebody">要获取有关更改条带逻辑卷上的文件系统的信息，请参考 <a href="chlv.htm#a067916ee"><span class="bold">chlv</span></a> 文档中的 <a href="chlv.htm#chlv_description_fs_on_striped_lv">条带逻辑卷上的文件系统</a> 文件。</div>
<a name="a263911d"></a>
<h3 id="a263911d">标志</h3>
<dl>
<dt id="chfs_flags_a" class="bold">
<a name="chfs_flags_a"></a>-a<span class="italic">  Attribute</span><span class="bold">=</span><span class="italic">Value</span></dt>
<dd>  指定 <span class="italic">Attribute</span><span class="bold">=</span><span class="italic">Value</span> 对；它依赖于虚拟文件系统类型。要指定多个 <span class="italic">Attribute=Value</span> 对，需提供多个 <span class="bold">-a</span><span class="italic"> Attribute=Value</span> 参数。
<a name="dac5745707mich"></a>
<p id="dac5745707mich">以下属性／值对是特别针对日志文件系统（JFS）的：</p> 
<dl>
<dt class="bold">-a<span class="italic"> Size=NewSize</span></dt>
<dd> 指定日志文件系统的大小。可以 512 字节块、兆字节或吉字节等单位来指定大小。如果 Value 具有 M 后缀，它将被解释为以兆字节为单位。如果 Value 具有 G 后缀，它将被解释为以吉字节为单位。如果 Value 以 + 开头，它将被解释为以指定量来增加文件系统大小的请求。如果通过物理分区大小没有对指定的大小进行平均分割，最终所得是最接近平均分割数的大小。
<p>JFS 文件系统的最大大小为其段大小和 nbpi 值的函数。这些值可得出以下大小限制：</p> 
<a name="wq899"></a>
<table id="wq899" width="100%" summary="" border="1" frame="border" rules="all">
<thead valign="bottom">
<tr>
<th id="wq900" width="20%" align="left" valign="top">nbpi</th>
<th id="wq901" width="20%" align="left" valign="top">段的大小（字节）</th>
<th id="wq902" width="20%" align="left" valign="top">最大大小（512 字节块）</th>
<th id="wq903" width="20%" align="left" valign="top">最大大小（兆字节）</th>
<th id="wq904" width="20%" align="left" valign="top">最大大小（吉字节）</th>
</tr>
</thead>
<tbody valign="top">
<tr>
<td headers="wq900">512</td>
<td headers="wq901">512、1024、2048、4096</td>
<td headers="wq902">16777216</td>
<td headers="wq903">8192</td>
<td headers="wq904">8</td>
</tr>
<tr>
<td headers="wq900">1024</td>
<td headers="wq901">512、1024、2048、4096</td>
<td headers="wq902">33554432</td>
<td headers="wq903">16384</td>
<td headers="wq904">16</td>
</tr>
<tr>
<td headers="wq900">2048</td>
<td headers="wq901">512、1024、2048、4096</td>
<td headers="wq902">67108864</td>
<td headers="wq903">32768</td>
<td headers="wq904">32</td>
</tr>
<tr>
<td headers="wq900">4096</td>
<td headers="wq901">512、1024、2048、4096</td>
<td headers="wq902">134217728</td>
<td headers="wq903">65536</td>
<td headers="wq904">64</td>
</tr>
<tr>
<td headers="wq900">8192</td>
<td headers="wq901">512、1024、2048、4096</td>
<td headers="wq902">268435456</td>
<td headers="wq903">131072</td>
<td headers="wq904">128</td>
</tr>
<tr>
<td headers="wq900">16384</td>
<td headers="wq901">512</td>
<td headers="wq902">268435456</td>
<td headers="wq903">262144</td>
<td headers="wq904">256</td>
</tr>
<tr>
<td headers="wq900">16384</td>
<td headers="wq901">1024、2048、4096</td>
<td headers="wq902">536870912</td>
<td headers="wq903">524288</td>
<td headers="wq904">512</td>
</tr>
<tr>
<td headers="wq900">32768</td>
<td headers="wq901">512</td>
<td headers="wq902">268435456</td>
<td headers="wq903">1048576</td>
<td headers="wq904">1024</td>
</tr>
<tr>
<td headers="wq900">32768</td>
<td headers="wq901">1024</td>
<td headers="wq902">536870912</td>
<td headers="wq903">2097152</td>
<td headers="wq904">2048</td>
</tr>
<tr>
<td headers="wq900">32768</td>
<td headers="wq901">2048、4096</td>
<td headers="wq902">1073741824</td>
<td headers="wq903">4194304</td>
<td headers="wq904">4096</td>
</tr>
<tr>
<td headers="wq900">65536、131072</td>
<td headers="wq901">512</td>
<td headers="wq902">268435456</td>
<td headers="wq903">8388608</td>
<td headers="wq904">8192</td>
</tr>
<tr>
<td headers="wq900">65536、131072</td>
<td headers="wq901">1024</td>
<td headers="wq902">536870912</td>
<td headers="wq903">16777216</td>
<td headers="wq904">16384</td>
</tr>
<tr>
<td headers="wq900">65536、131072</td>
<td headers="wq901">2048</td>
<td headers="wq902">1073741824</td>
<td headers="wq903">33554432</td>
<td headers="wq904">32768</td>
</tr>
<tr>
<td headers="wq900">65536、131072</td>
<td headers="wq901">4096</td>
<td headers="wq902">2147483648</td>
<td headers="wq903">67108804</td>
<td headers="wq904">65536</td>
</tr>
<tr>
<td colspan="3" headers="wq900 wq901 wq902">AIX 4.3 中，可以具有 512 到 128K 的 NBPI 值，连同相对应的最大文件系统大小。</td>
<td headers="wq903"></td>
<td headers="wq904"></td>
</tr>
</tbody>
</table>
<p>文件系统驻留在其中的卷组定义最大逻辑卷的大小，并且限制文件系统大小。</p>
</dd>
</dl>
<dl>
<dt class="bold">-a<span class="italic">  Log=LVName</span></dt>
<dd> 对于使用 OUTLINE 日志的文件系统，此选项可用于将行外日志从某个逻辑卷更改为另一个逻辑卷，只要该逻辑卷已正确格式化且类型为 <span class="pk">jfs2log</span>。如果调用 <span class="pk">chfs</span> 来更改行外日志时加载了文件系统，<span class="pk">/etc/filesystems</span> 将显示此更改，但实际日志将不会更改，除非对文件进行下次加载（随后紧跟 <span class="pk">umount</span> 操作或系统崩溃和恢复）。对于使用 INLINE 日志的文件系统，此操作将不支持在 INLINE 和 OUTLINE 日志之间切换。当前要从行内日志切换为行外日志（或反之），必须删除并重新创建文件系统。
</dd>
</dl> 
<dl>
<dt class="bold">-a<span class="italic"> splitcopy</span>=<span class="italic">NewMountPointName</span></dt>
<dd>分割文件系统的镜像副本，并将它以只读形式安装在新的安装点处。这样提供了文件系统的副本连同可用于备份用途且与之一致的 JFS 元数据。不保证用户数据的完整性，因此建议您进行此操作时，文件系统的活动应处于最小状态。只有一个副本可以指定为联机分割镜像副本。
</dd>
<dt class="bold">-a<span class="italic"> copy</span>=<span class="italic">Copy#</span></dt>
<dd>指定当与分割副本属性联合使用时，应分割哪个镜像副本。缺省副本为第二个副本。有效的值是 1、2 或 3。
</dd>
</dl> 
<p>以下的属性／值对是具体针对增强的日志文件系统（JFS2）：</p> 
<dl>
<dt class="bold">-a<span class="italic"> size=NewSize</span></dt>
<dd>以 521 字节块、兆字节或吉字节为单位来指定增强的日志文件系统的大小。如果 Value 具有 M 后缀，它将被解释为以兆字节为单位。如果 Value 具有 G 后缀，它将被解释为以吉字节为单位。如果 Value 以 <span class="bold">+</span> 开头，它将被解释为以指定量来增加文件系统大小的请求。如果通过物理分区大小没有对指定的大小进行平均分割，最终所得是最接近平均分割数的大小。文件系统驻留在其中的卷组定义最大逻辑卷的大小，并且限制文件系统大小。
<a name="wq905"></a>
<div class="notetitle" id="wq905">注:</div>
<div class="notebody">JFS2 不具有影响文件系统最终大小的 nbpi 或段的大小的值。</div>
</dd>
</dl> 
<dl>
<dt class="bold">-a<span class="italic"> logname=LVName</span></dt>
<dd>指定正在记录要使用的现有日志的逻辑卷名的文件系统的完整路径名。用于此文件系统的日志设备必须驻留在与文件系统相同的卷组上。可以使用关键字 INLINE 来指定该日志位于具有 JFS2 文件系统的逻辑卷中。此文件系统创建时必须具有将使用此选项的 INLINE 日记。此选项更新 <span class="bold">/etc/filesystems</span> 文件，这样的话，如果对包含文件系统的逻辑卷的名称进行了更改，仍可以识别日志。
<a name="wq906"></a>
<div class="notetitle" id="wq906">注:</div>
<div class="notebody">在发行版 AIX 5L 和 AIX 5.1 中，如果文件系统使用<span class="pk">行内日志</span>，日志条目将与 <span class="pk">/etc/filesystems</span> 中的文件系统相同：
<pre class="xmp">EX:  /j2.1:         
dev             = /dev/fslv00         
vfs             = jfs2         
log             = /dev/fslv00         
mount           = false         
account         = false</pre>但在 AIX 5.2 中，如果文件系统使用<span class="pk">行内日志</span>，日志条目则为 <span class="pk">/etc/filesystems</span> 中的关键字 INLINE：
<pre class="xmp">EX:  /j2.23:         
dev             = /dev/fslv04         
vfs             = jfs2         
log             = INLINE         
mount           = false         
options         = rw         
account         = false</pre>如果文件系统是在 AIX 5L 或 AIX 5.1 上创建并随后升级为 AIX 5.2，则可使用 <span class="pk">chfs</span> 更改 <span class="pk">/etc/filesystems</span> 中的 <span class="pk">inlinelog</span> 名。</div>
</dd>
<dt class="bold">-a <span class="italic">logsize</span>=<span class="italic">Value</span></dt>
<dd>为 INLINE 日志指定大小（兆字节）。如果没有使用 INLINE 日志，将会忽略此项。不能大于文件系统大小的 10%。
</dd>
</dl>
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_biga" name="chfs_flags_biga"></a>-A</dt>
<dd>  指定自动安装的属性。
</dd>
</dl>
<dl>
<dt class="bold">yes</dt>
<dd>  系统重新启动时不会安装文件系统。
</dd>
<dt class="bold">no</dt>
<dd>  系统启动时不会安装文件系统。
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_d" name="chfs_flags_d"></a>-d<span class="italic"> Attribute</span></dt>
<dd>  从 <span class="bold">/etc/filesystems</span> 文件为指定的文件系统删除指定的属性。
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_m" name="chfs_flags_m"></a>-m<span class="italic"> NewMountPoint</span></dt>
<dd>  指定新的安装点。
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_n" name="chfs_flags_n"></a>-n<span class="italic"> NodeName</span></dt>
<dd>  为指定的文件系统指定节点名。<span class="bold">/etc/filesystems</span> 文件中的节点名属性用新名称来更新。节点名属性具体针对某些远程虚拟文件系统类型，比如 NFS（网络文件系统）虚拟文件系统类型。
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_p" name="chfs_flags_p"></a>-p</dt>
<dd>  为文件系统设置许可权。
<dl>
<dt class="bold">ro</dt>
<dd>  指定只读许可权。
</dd>
<dt class="bold">rw</dt>
<dd>  指定读写许可权。
</dd>
</dl>
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_t" name="chfs_flags_t"></a>-t</dt>
<dd>为指定的文件系统设置记帐属性：
<dl>
<dt class="bold">yes</dt>
<dd>将由记帐子系统来处理文件系统记帐。
</dd>
<dt class="bold">no</dt>
<dd>文件系统记帐不由记帐子系统来处理；这是缺省值。
</dd>
</dl>
</dd>
</dl>
<dl>
<dt class="bold"><a id="chfs_flags_u" name="chfs_flags_u"></a>-u<span class="italic"> MountGroup</span> </dt>
<dd>  指定安装组。安装组用于对相关的安装进行分组，这样一来，它们可以作为一个整体一起进行安装而不是对每个分开安装。例如，如果当执行特定测试时，总是需要一起安装几个暂存文件系统，那么它们中的每个系统都可以被放入测试安装组中。然后可以使用单个命令，比如 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/mount.htm#a1019286a"><span class="bold">mount -t</span> <span class="italic">test</span></a> 命令，对它们全部进行安装。
</dd>
</dl>
<a name="b032000mkm"></a>
<h3 id="b032000mkm">安全性</h3>
<p>访问控制：只有 root 用户可以运行此命令。</p>
<a name="a3059c5"></a>
<h3 id="a3059c5">示例</h3>
<ol type="1">
<li>要更改 <tt>/test</tt> 日志文件系统的文件系统大小，输入：
<pre class="xmp">chfs  <a href="chfs.htm#chfs_flags_a">-a </a>size=24576 /test</pre> 此命令将 <tt>/test</tt> 日志文件系统的大小更改为 24576 个 512 字节块，或 12MB（只要先前的大小没有这么大）。</li>
<li>要增加 <tt>/test</tt> 日志文件系统的大小，输入：
<pre class="xmp">chfs  <a href="chfs.htm#chfs_flags_a">-a </a>size=+8192 /test</pre> 此命令会将 <tt>/test</tt> 日志文件系统的大小增加 8192 个 512 字节块或 4MB。</li>
<li>要更改文件系统的安装点，输入：
<pre class="xmp">chfs  <a href="chfs.htm#chfs_flags_m">-m </a>/test2 /test</pre> 此命令将文件系统的安装点从 <tt>/test</tt> 更改为 <tt>/test2</tt>。</li>
<li>要从文件系统删除记帐属性，输入：
<p></p>
<pre class="xmp">chfs -d account /home</pre><p class="indatacontent"> 此命令将记帐属性从 <span class="bold">/home</span> 文件系统中除去。记帐属性从 <span class="bold">/etc/filesystems</span> 文件的 <tt>/home:</tt> 节中被删除。</p></li>
<li>要分割镜像文件系统的副本并安装它作为只读形式用以联机备份，输入：
<p></p>
<pre class="xmp">chfs -a splitcopy=/backup -a copy=2 /testfs</pre><p class="indatacontent"> 这样就在 /backup 安装了 /testfs 的只读副本。</p></li>
<li>要更改 <span class="bold">/test</span> 日志文件系统的文件系统大小，输入：
<pre class="xmp">chfs -a size=12M /test</pre>  此命令将 <span class="bold"> /test</span>  日志文件系统的大小更改为 12MB（只要先前的大小没这么大）。</li></ol>
<a name="a3059d1"></a>
<h3 id="a3059d1">文件</h3>
<p></p>
<a name="wq908"></a>
<table id="wq908" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="26%">
<a id="a3059d2" name="a3059d2"></a><span class="bold">/etc/filesystems</span></td>
<td width="73%">  列出已知的文件系统并定义它们的特征。</td>
</tr>
</tbody>
</table>
<a name="a3059d3"></a>
<h3 id="a3059d3">相关信息</h3>
<p><a href="crfs.htm#d860c4b271joyc"><span class="bold">crfs</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/mkfs.htm#a1019296c"><span class="bold">mkfs</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/mklv.htm#izk4160frit"><span class="bold">mklv</span></a> 命令。</p>
<p><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/admnconc/acct_overview.htm#a346f9497">Accounting Overview</a> 解释了文件系统记帐子系统。</p>
<p><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/admnconc/file_sys.htm#filesys">File Systems</a> 解释了文件系统类型、管理、结构和维护。</p>
<p>有关安装基于 Web 的系统管理器的信息，请参阅<span class="italic">《AIX 5L V5.2 基于 Web 的系统管理器管理指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/wsmadmn/install.htm">『第 2 章：安装与系统需求』</a>。</p>
<p><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/admnconc/sys_mgt_tools.htm">System Management Interface Tool</a> 解释了 SMIT 结构、主菜单和任务。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="chfs.htm#Top_Of_Page">页的顶部</a> | <a href="chfont.htm">上一页</a> | <a href="chgif.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
