<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 1，a - c - audit 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="audit 命令, 控制, 审计系统" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="audit.htm#Bot_Of_Page">页的底部</a> | <a href="attachrset.htm">上一页</a> | <a href="auditbin.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 1，a - c</h1></center>

<a name="a14294a5"></a>
<h2 id="a14294a5">audit 命令</h2>
<p><a id="idx176" name="idx176"></a></p>
<a name="a362f93"></a>
<h3 id="a362f93">用途</h3>
<a name="eef67d5902mart"></a>
<p id="eef67d5902mart">控制系统审计。<a id="idx177" name="idx177"></a></p>
<a name="a362f95"></a>
<h3 id="a362f95">语法</h3>
<p><span class="bold">audit</span> {  <a href="audit.htm#bhv70frit"><span class="bold">start</span></a> |  <a href="audit.htm#a9rw1a0frit"><span class="bold">shutdown</span></a> }</p>
<p><span class="bold">audit</span> {  <a href="audit.htm#frw160frit"><span class="bold">off</span></a> |  <a href="audit.htm#qrw40frit"><span class="bold">on</span></a> [&nbsp;<span class="bold">panic&nbsp;</span>] }</p>
<p><span class="bold">audit</span>  <a href="audit.htm#eov70frit"><span class="bold">query</span></a></p>
<a name="a14294ae"></a>
<h3 id="a14294ae">描述</h3>
<a name="eef67d6446mart"></a>
<p id="eef67d6446mart"><span class="bold">audit</span> 命令通过它的几个关键字控制系统审计。每次给出命令时必须包含一个关键字。<span class="bold">start</span> 关键字和 <span class="bold">shutdown</span> 关键字启动和停止审计系统并重新设置系统配置。<span class="bold">off</span> 关键字和 <span class="bold">on</span> 关键字暂挂和重新启动审计系统，且不会影响系统配置。<span class="bold">query</span> 关键字让您查询当前状态。</p>
<a name="eef67d6543mart"></a>
<p id="eef67d6543mart">审计系统遵循以下配置文件中建立的指示信息：</p>
<ul>
<li><a name="ahn12886"></a><span id="ahn12886" class="pk"></span><span class="bold">/etc/security/audit/config</span></li>
<li><a name="ahn12887"></a><span id="ahn12887" class="pk"></span><span class="bold">/etc/security/audit/events</span></li>
<li><a name="ahn12888"></a><span id="ahn12888" class="pk"></span><span class="bold">/etc/security/audit/objects</span></li>
<li><a name="ahn12889"></a><span id="ahn12889" class="pk"></span><span class="bold">/etc/security/audit/bincmds</span></li>
<li><a name="ahn12890"></a><span id="ahn12890" class="pk"></span><span class="bold">/etc/security/audit/streamcmds</span></li></ul>
<a name="eef67d6975mart"></a>
<p id="eef67d6975mart">这些文件中的每一个都在<a href="audit.htm#a14294dd">“文件”</a>一节中得到描述。有关配置审计系统的信息，请参阅<span class="italic">《AIX 5L V5.2 系统管理指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/security/setting_up_auditing.htm">『建立审计』</a>。</p>
<a name="a296941a"></a>
<h3 id="a296941a">关键字</h3>
<p></p>
<a name="wq248"></a>
<table id="wq248" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="bhv70frit" name="bhv70frit"></a><span class="bold">start</span></td>
<td width="83%">  启动审计子系统。此命令从配置文件中读取指示信息，并执行以下操作：
<dl>
<dt class="bold"><span class="bold">对象审计</span> </dt>
<dd>  将 <span class="bold">/etc/security/audit/objects&nbsp;</span>文件中的审计事件定义写入内核以定义目标审计事件。
</dd>
<dt class="bold"><span class="bold">事件审计</span></dt>
<dd>  将 <span class="bold">/etc/security/audit/config&nbsp;</span>文件中的审计类定义写入内核以定义审计类。
</dd>
<dt class="bold"><span class="bold">二进制审计</span></dt>
<dd>  如果启动节包含 <tt>binmode=on</tt>，则根据 <span class="bold">/etc/security/audit/config&nbsp;</span>文件中的二进制节中的配置信息来启动 <span class="bold">auditbin&nbsp;</span>守护进程。
</dd>
<dt class="bold"><span class="bold">流审计</span></dt>
<dd>  如果启动节包含 <tt>streammode=on</tt>，则如 <span class="bold">/etc/security/audit/config&nbsp;</span>文件的流节中所定义的那样调用审计流命令。
<p><span class="bold">注意：</span>应避免从 <span class="bold">/etc/inittab</span> 中调用流审计。</p>
</dd>
<dt class="bold"><span class="bold">用户审计</span></dt>
<dd>  审计当前登录到系统的所有用户，如果在 <span class="bold">/etc/security/audit/config</span> 文件的用户节中已配置他们。
</dd>
<dt class="bold"><span class="bold">审计记录日志</span></dt>
<dd>  如 <span class="bold">/etc/security/audit/config&nbsp;</span>文件中的启动节中定义的那样启用审计记录日志组件。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="a9rw1a0frit" name="a9rw1a0frit"></a><span class="bold">shutdown</span></td>
<td>  终止审计记录的收集并通过从内核表中除去类的定义来重新设置配置信息。根据后端命令的规范，将所有审计记录从内核缓冲区清仓到二进制文件中（包含在用于二进制方式审计的 <span class="bold">/etc/security/audit/bincmds</span> 文件中）或审计流中（包含在用于流审计的 <span class="bold">/etc/security/audit/streamcmds</span> 文件中）。审计数据的收集停止，直到给出下一个 <span class="bold">audit start</span> 命令才重新开始。</td>
</tr>
<tr>
<td>
<a id="frw160frit" name="frw160frit"></a><span class="bold">off</span></td>
<td>  暂挂审计系统，但使配置保留有效。数据收集暂停，直到给出<span class="bold"> audit on</span> 命令才重新开始。</td>
</tr>
<tr>
<td>
<a id="qrw40frit" name="qrw40frit"></a><span class="bold">on</span> [<span class="bold">panic</span>]<span class="bold"></span></td>
<td>  如果系统正确配置（例如事先使用 <span class="bold">audit start</span> 命令且配置依旧有效），则在暂挂后重新启动审计系统。如果给出命令时，审计已经启动，则只有二进制数据收集可以更改。
<p>如果指定 <span class="bold">panic</span> 选项，则假如启用二进制数据收集但它们不能写至二进制文件，那么系统将关闭。如果未启用二进制格式，则系统将关闭。</p></td>
</tr>
<tr>
<td>
<a id="eov70frit" name="eov70frit"></a><span class="bold">query</span></td>
<td>  以下列格式显示审计子系统的当前状态：
<p></p>
<a name="a2969423"></a>
<pre id="a2969423" class="xmp">auditing&nbsp;on&nbsp;{panic}&nbsp;|&nbsp;auditing&nbsp;off
  
二进制管理器关闭&nbsp;|&nbsp;是进程号&nbsp;pid
 
审计事件：
&nbsp;&nbsp;&nbsp;&nbsp;审计类：审计事件，审计事件...
审计对象：
&nbsp;&nbsp;&nbsp;&nbsp;对象名称：对象方式：审计事件</pre></td>
</tr>
</tbody>
</table>
<a name="a2969426"></a>
<h3 id="a2969426">安全性</h3>
<a name="eef67d8293mart"></a>
<p id="eef67d8293mart">访问控制：此命令应向 root 用户和审计组的成员授予执行（x）访问权。此命令应该是 root 用户的 <span class="bold">setuid</span> 并具有<span class="bold">可信计算基</span>属性。</p>
<a name="eef67d8377mart"></a>
<p id="eef67d8377mart">访问的文件：</p>
<a name="wq249"></a>
<table id="wq249" width="100%" summary="" border="0" frame="void" rules="none">
<thead valign="bottom">
<tr>
<th id="wq250" width="8%" align="left">方式</th>
<th id="wq251" width="91%" align="left">  文件</th>
</tr>
</thead>
<tbody valign="top">
<tr>
<td headers="wq250">
<a id="a296942c" name="a296942c"></a><span class="bold">r</span></td>
<td headers="wq251">  <span class="bold">/etc/security/audit/config</span></td>
</tr>
<tr>
<td headers="wq250">
<a id="a296942d" name="a296942d"></a><span class="bold">r</span></td>
<td headers="wq251">  <span class="bold">/etc/security/audit/objects</span></td>
</tr>
<tr>
<td headers="wq250">
<a id="a296942e" name="a296942e"></a><span class="bold">x</span></td>
<td headers="wq251">  <span class="bold">/usr/sbin/auditbin</span></td>
</tr>
<tr>
<td headers="wq250">
<a id="a296942f" name="a296942f"></a><span class="bold">x</span></td>
<td headers="wq251">  <span class="bold">/usr/sbin/auditstream</span></td>
</tr>
</tbody>
</table>
<a name="a14294be"></a>
<h3 id="a14294be">示例</h3>
<ol type="1">
<li><a name="a14294c0"></a><span id="a14294c0" class="pk"></span>要启动审计进程，请如在<span class="italic">《AIX 5L V5.2 安全指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/security/setting_up_auditing.htm">『建立审计』</a>中所描述的那样配置审计系统，并将以下行添加到系统初始化文件（<span class="bold">/etc/rc</span> 文件）中：
<p></p>
<a name="a14294c1"></a>
<pre id="a14294c1" class="xmp">/usr/sbin/audit&nbsp;start 1&gt;&amp;- 2&gt;&amp;- </pre><p class="indatacontent"> 每次系统初始化时，审计进程启动（如配置的那样）。</p></li>
<li><a name="a14294ca"></a><span id="a14294ca" class="pk"></span>要终止审计进程的运行，请输入：
<p></p>
<a name="a14294cb"></a>
<pre id="a14294cb" class="xmp">/usr/sbin/audit&nbsp;shutdown</pre><p class="indatacontent"> 数据收集停止直到再次给出 <span class="bold">audit start</span> 命令才重新开始。操作系统内核中的类的配置丢失。</p> 
<a name="bf2b965180joy"></a>
<p id="bf2b965180joy"></p><blockquote><span class="bold">注：</span><span class="bold">audit
shutdown</span> 命令也应位于 <span class="bold">/etc/shutdown</span> 文件中。</blockquote></li>
<li><a name="a14294cd"></a><span id="a14294cd" class="pk"></span>要暂挂审计子系统，请输入：
<p></p>
<a name="a14294ce"></a>
<pre id="a14294ce" class="xmp">/usr/sbin/audit&nbsp;off</pre></li>
<li><a name="a14294c3"></a><span id="a14294c3" class="pk"></span>要重新启动用 <span class="bold">audit off</span> 命令暂挂的审计进程，请输入：
<p></p>
<a name="a14294c4"></a>
<pre id="a14294c4" class="xmp">/usr/sbin/audit&nbsp;on</pre><p class="indatacontent"> 只要系统正确配置，则暂挂的状态结束，再次生成审计记录。</p></li>
<li><a name="a14294d1"></a><span id="a14294d1" class="pk"></span>要显示审计系统的当前状态，请输入：
<p></p>
<a name="a14294d2"></a>
<pre id="a14294d2" class="xmp">/usr/sbin/audit&nbsp;query</pre><p class="indatacontent"> <span class="bold">audit query</span> 状态消息的示例如下：</p>
<a name="a14294d4"></a>
<pre id="a14294d4" class="xmp">auditing&nbsp;on
 
二进制管理器是进程号 123
 
审计事件：
&nbsp;&nbsp;&nbsp;&nbsp;authentication-&nbsp;USER_Login,&nbsp;USER_Logout
&nbsp;&nbsp;&nbsp;&nbsp;administration-&nbsp;USER_Create,&nbsp;GROUP_Create
 
审计对象：
&nbsp;&nbsp;&nbsp;&nbsp;/etc/security/passwd&nbsp;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r&nbsp;=&nbsp;AUTH_Read
&nbsp;&nbsp;&nbsp;&nbsp;/etc/security/passwd&nbsp;:&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w&nbsp;=&nbsp;AUTH_Write </pre><p class="indatacontent"> 此查询告诉您当指定的用户登录或注销时、当指定的管理员创建用户或组时，以及当系统接收到对 <span class="bold">/etc/security/passwd</span> 文件进行读写的授权的读写指令时，都将写下审计记录。</p></li></ol>
<a name="a14294dd"></a>
<h3 id="a14294dd">文件</h3>
<p></p>
<a name="wq253"></a>
<table id="wq253" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="50%">
<a id="a14294de" name="a14294de"></a><span class="bold">/usr/sbin/audit</span></td>
<td width="50%">  包含 <span class="bold">audit</span> 命令的路径。</td>
</tr>
<tr>
<td>
<a id="a1179202" name="a1179202"></a><span class="bold">/etc/rc</span></td>
<td>  包含系统初始化命令。</td>
</tr>
<tr>
<td colspan="2">
<a id="a14294e0" name="a14294e0"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/config.htm#evc0frit"><span class="bold">/etc/security/audit/config</span></a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  包含审计配置信息。</td>
</tr>
<tr>
<td colspan="2">
<a id="a14294df" name="a14294df"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/events.htm#a137914cd"><span class="bold">/etc/security/audit/events</span></a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  列出审计事件和它们的尾部格式规范。</td>
</tr>
<tr>
<td colspan="2">
<a id="a1699203d" name="a1699203d"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/objects.htm#a1219943"><span class="bold">/etc/security/audit/objects</span></a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  列出了每个文件（对象）的审计事件。</td>
</tr>
<tr>
<td colspan="2">
<a id="a29991328" name="a29991328"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/bincmds.htm#aw51a0frit"><span class="bold">/etc/security/audit/bincmds</span></a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  包含处理审计二进制数据的 shell 命令。</td>
</tr>
<tr>
<td colspan="2">
<a id="a29991329" name="a29991329"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/files/aixfiles/streamcmds.htm#a7co140frit"><span class="bold">/etc/security/audit/streamcmds</span></a><span class="bold"></span></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>  包含审计流命令。</td>
</tr>
</tbody>
</table>
<a name="a14294e1"></a>
<h3 id="a14294e1">相关信息</h3>
<a name="eef67db193mart"></a>
<p id="eef67db193mart"><a href="auditbin.htm#a116951b"><span class="bold">auditbin</span></a> 守护进程、<a href="auditcat.htm#phn3310frit"><span class="bold">auditcat</span></a> 命令、<a href="auditconv.htm#hi9si161thom"><span class="bold">auditconv</span></a> 命令、<a href="auditpr.htm#a1169571"><span class="bold">auditpr</span></a> 命令、<a href="auditselect.htm#a163c11669"><span class="bold">auditselect</span></a> 命令、<a href="auditstream.htm#a1169478"><span class="bold">auditstream</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/login.htm#a68v042f7"><span class="bold">login</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds3/logout.htm#a68v042da"><span class="bold">logout</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/cmds/aixcmds5/su.htm#a248y99c6d"><span class="bold">su</span></a> 命令。</p>
<a name="eef67db289mart"></a>
<p id="eef67db289mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/audit.htm#uqm2c0gaco"><span class="bold">audit</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/auditbin.htm#a8u6b0gaco"><span class="bold">auditbin</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/auditevents.htm#sand0gaco"><span class="bold">auditevents</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/auditlog.htm#zdm220gaco"><span class="bold">auditlog</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/libs/basetrf1/auditproc.htm#eam40gaco"><span class="bold">auditproc</span></a> 子例程。</p>
<a name="eef67db384mart"></a>
<p id="eef67db384mart">有关审计的一般信息，请参考<span class="italic">《AIX 5L V5.2 安全指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/security/auditing_overview.htm">『审计概述』</a>。</p>
<a name="eef67db481mart"></a>
<p id="eef67db481mart">有关用户的标识和认证，任意访问控制、可信计算基以及审计的更多信息，请参考<span class="italic">《AIX 5L V5.2 安全指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/security/security_admin.htm#standalone_sys_security_part">『单机系统安全性』</a>。</p>
<a name="eef67db576mart"></a>
<p id="eef67db576mart">要参阅您建立“审计系统”必须采取的步骤，请参考<span class="italic">《AIX 5L V5.2 安全指南》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds1/zh_CN/aixbman/security/setting_up_auditing.htm">『建立审计』</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="audit.htm#Top_Of_Page">页的顶部</a> | <a href="attachrset.htm">上一页</a> | <a href="auditbin.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds102.htm#wq1687">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
