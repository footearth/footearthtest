<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 2，d - h - gated 守护进程</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-29" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="描述, gated 守护进程, gated, TCP/IP 守护进程,
提供, 网关路由功能, TCP/IP, 信号, 用 SRC 进行管理" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="gated.htm#Bot_Of_Page">页的底部</a> | <a href="fxfer.htm">上一页</a> | <a href="gdc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 2，d - h</h1></center>

<a name="fvd70sara"></a>
<h2 id="fvd70sara">gated 守护进程</h2>
<p><a id="idx548" name="idx548"></a> <a id="idx549" name="idx549"></a> <a id="idx550" name="idx550"></a></p>
<a name="wx1240sara"></a>
<h3 id="wx1240sara">用途</h3>
<a name="e493036108mart"></a>
<p id="e493036108mart">为 RIP、RIPng、EGP、BGP、BGP4+、HELLO、IS-IS、ICMP、ICMPv6 和 SNMP 协议提供网关路由功能。</p>
<p></p><blockquote><a name="d767831866jani"></a><span id="d767831866jani" class="pk"></span><span class="bold">注：</span>从命令行用 SRC 命令来控制<span class="bold">gated</span> 守护进程。每次系统启动时用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/files/aixfiles/rc.tcpip.htm#utd4300sami"><span class="bold">rc.tcpip</span></a> 文件启动守护进程。</blockquote>
<a name="d767831950jani"></a>
<h3 id="d767831950jani">语法</h3>
<p><span class="bold">/usr/sbin/gated</span> [  <a href="gated.htm#d767834841jani"><span class="bold">-c </span></a>] [  <a href="gated.htm#ermbjeeharr"><span class="bold">-C</span></a>] [  <a href="gated.htm#sic2140sara"><span class="bold">-n </span></a>]<span class="bold"></span>
[  <a href="gated.htm#a1smbj3afharr"><span class="bold">-N </span></a>] [  <a href="gated.htm#d767835259jani"><span class="bold">-t</span></a><span class="italic"> 跟踪选项 </span> ] [  <a href="gated.htm#d767835036jani"><span class="bold">-f</span></a><span class="italic"> 配置文件 </span> ] [ <span class="italic"> 跟踪文件 </span> ]</p>
<a name="xf5360sara"></a>
<h3 id="xf5360sara">描述</h3>
<a name="e493037254mart"></a>
<p id="e493037254mart"><span class="bold">/usr/sbin/gated</span> 守护进程用于处理多路由协议并替换<span class="bold"> routed</span> 和任何使用<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36">（HELLO）</a> 路由协议的路由守护进程。<span class="bold">/usr/sbin/gated</span> 守护进程目前处理路由信息协议<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36"> (RIP)</a>、下一代路由信息协议<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36"> (RIPng)</a>、外部网关协议<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36"> (EGP)</a>、边界网关协议 (BGP) 和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36">BGP4+</a>、防御通信网络本地网协议 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36">(HELLO)</a> 以及开放最短路径优先<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36">（OSPF）</a>、中间系统到中间系统<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa36">（IS-IS）</a>以及因特网控制消息协议（ICMP）/ 路由器发现路由协议。此外，<span class="bold">gated</span> 守护进程支持简单网络管理协议（SNMP）。<span class="bold">gated</span> 进程可以被配置以执行所有这些协议或这些协议中的任何组合。<span class="bold">gated</span>守护进程的默认配置文件为 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/files/aixfiles/gated.conf.htm#g7a180sara"><span class="bold">/etc/gated.conf</span></a> 文件。<span class="bold">gated</span>守护进程将其进程标识存储在 <span class="bold">/etc/gated.pid</span> 文件中。</p>
<p></p><blockquote><a name="a213x9a85a"></a><span id="a213x9a85a" class="pk"></span><span class="bold">注：</span>当<span class="bold"> gated </span>和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/routed.htm#idd270sara"><span class="bold">routed</span></a> 守护进程在同一主机上一起运行时，可能会发生不可预测的结果。</blockquote><p class="indatacontent">
如果在命令行指定了跟踪文件，或没有指定跟踪标志的话，则<span class="bold">gated</span>守护进程从终端中分离出来并在后台运行。如果指定了跟踪标志，但却没有指定跟踪文件，则<span class="bold">gated</span>假定跟踪目标为一个<span class="bold">标准错误</span>并仍在前台运行。</p>
<p><span class="bold">注：</span>IS-IS 路由协议协议不能在64位的内核上运行。</p>
<a name="a213x9a867"></a>
<h4 id="a213x9a867">信号</h4>
<p><a id="idx551" name="idx551"></a></p>
<a name="e493039594mart"></a>
<p id="e493039594mart"><span class="bold">gated</span> 服务器在您使用<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds3/kill.htm#a1579872"><span class="bold"> kill</span></a> 命令向它发出信号时执行下列操作：</p>
<a name="wq1354"></a>
<table id="wq1354" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="11%">
<a id="a213x9a869" name="a213x9a869"></a><span class="bold">SIGHUP</span></td>
<td width="88%">  重新阅读配置。
<a name="e5ce1f4623mart"></a>
<p id="e5ce1f4623mart"><span class="bold">SIGHUP</span>会使 gated 重新阅读配置文件。而<span class="bold">gated</span>守护进程首先会对所有分配的策略结构进行清理。所有 BGP 和 EGP 同位体都被标志为删除，而配置文件则被重新分解。</p> 
<a name="a39caba4003janb"></a>
<p id="a39caba4003janb">如果重新分解成功，则不再存在于配置中的 BGP 和 EGP 同位体都被关闭，新的同位体被启动。<span class="bold">gated</span>守护进程试图决定，对现有的同位体所做的改变是否需要关机并重新启动程序。</p> 
<p></p><blockquote><span class="bold">注：</span>当 OSPF（开放最短路径优先）被启用时，重新配置功能则处于禁用状态。</blockquote></td>
</tr>
<tr>
<td>
<a id="a213x9a86b" name="a213x9a86b"></a><span class="bold">SIGTIN</span></td>
<td>  当前状态的快照。
<a name="a39caba4022janb"></a>
<p id="a39caba4022janb">所有 gated 任务、定时器、协议和表格的当前状态都被写入<span class="bold">/var/tmp/gated_dump</span>中。</p> 
<a name="a39caba4040janb"></a>
<p id="a39caba4040janb">派生出一个子进程以转储表信息即可实现上述操作。这样，就不会影响<span class="bold">gated</span>守护进程的路由功能。</p></td>
</tr>
<tr>
<td>
<a id="a151c11627" name="a151c11627"></a><span class="bold">SIGTERM</span></td>
<td>  适当的关机。
<a name="a39caba4058janb"></a>
<p id="a39caba4058janb">当收到 <span class="bold">SIGTERM</span> 信号时，<span class="bold">gated</span>守护进程试图进行适时的关机。所有任务和协议都要被关闭。其中绝大多数都将立即被终止，而 EGP 同位体例外，因为它要等待确认。这时，有必要重复 <span class="bold">SIGTERM</span> 一次或两次，如果该过程时间太长的话。</p> 
<a name="a39caba4083janb"></a>
<p id="a39caba4083janb">当收到 <span class="bold">SIGTERM</span> 信号时，所有协议路由都将从内核的路由表中清除掉。界面路由、带 <span class="bold">RTF_STATIC</span> 设置的路由（来自支持的 <span class="bold">route</span> 命令）和指定 <span class="bold">retain</span> 的静态路由仍将被保留。终止带完整的外部路由的 <span class="bold">gated</span> 守护进程，请用 <span class="bold">SIGKILL</span> 或 <span class="bold">SIGQUIT</span> 信号（这些信号可以产生核心转储）。</p></td>
</tr>
<tr>
<td>
<a id="a151c11629" name="a151c11629"></a><span class="bold">SIGUSR1</span></td>
<td>  切换跟踪。
<a name="a39caba4130janb"></a>
<p id="a39caba4130janb">一旦收到 <span class="bold">SIGUSR1</span> 信号，<span class="bold">gated</span>守护进程将关闭跟踪文件。其后的 <span class="bold">SIGUSR1</span> 信号将使其重新打开。这允许文件被规则的移动。</p> 
<p></p><blockquote><span class="bold">注：</span><span class="bold">SIGUSR1</span>信号在没有指定跟踪文件或正在执行跟踪到 <span class="bold">stderr</span> 的情况下不可能使用。</blockquote></td>
</tr>
<tr>
<td>
<a id="d767833882jani" name="d767833882jani"></a><span class="bold">SIGUSR2</span></td>
<td>  检查界面的变化。
<a name="a39caba4154janb"></a>
<p id="a39caba4154janb">一旦收到 <span class="bold">SIGUSR2</span> 信号，<span class="bold">gated</span>守护进程会重新扫描内核界面清单，看看有没有什么变化。</p></td>
</tr>
</tbody>
</table>
<a name="a213x9a852"></a>
<h4 id="a213x9a852">gated 和 snmpd 守护进程</h4>
<a name="e49303b481mart"></a>
<p id="e49303b481mart"><span class="bold">gated</span> 守护进程被内部配置成一个 <span class="bold">snmpd</span> 守护进程的 SNMP 多路复用（SMUX）协议同位体或代理进程。有关更多信息，请参考<span class="italic">《AIX 5L V5.2 系统管理指南：通信与网络》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/snmp_dprocs.htm#a69c0174d3">『SNMP 守护进程处理』</a>。</p>
<a name="a273x929ee"></a>
<h4 id="a273x929ee">使用系统资源控制器来操作 gated 守护进程。</h4>
<p><a id="idx552" name="idx552"></a></p>
<a name="e49303c583mart"></a>
<p id="e49303c583mart"><span class="bold">gated</span>守护进程可以通过系统资源控制器（<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/admnconc/sys_res_overview.htm#a2729f9">SRC</a>）来控制。<span class="bold">gated</span> 守护进程是 SRC <span class="bold">tcpip</span> 系统组的成员。缺省情况下，该守护进程是禁用的，且可以由以下 SRC 命令来操作：</p>
<a name="wq1355"></a>
<table id="wq1355" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="13%">
<a id="a273x929f1" name="a273x929f1"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds5/startsrc.htm#a200945a"><span class="bold">startsrc</span></a></td>
<td width="86%">启动一个子系统，子系统组，或是一个子服务器。</td>
</tr>
<tr>
<td>
<a id="a273x929f2" name="a273x929f2"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds5/stopsrc.htm#a20094a5"><span class="bold">stopsrc</span></a><span class="bold"></span></td>
<td>终止子系统、子系统组或子服务器。</td>
</tr>
<tr>
<td>
<a id="a273x929f3" name="a273x929f3"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/refresh.htm#a20092dd"><span class="bold">refresh</span></a></td>
<td>使子系统或子系统组重新读取适当的配置文件。</td>
</tr>
<tr>
<td>
<a id="a273x929f6" name="a273x929f6"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds3/lssrc.htm#a2009166"><span class="bold">lssrc</span></a></td>
<td>获取一个子系统，子系统组，或是一个子服务器的状态。</td>
</tr>
</tbody>
</table>
<p></p><blockquote><a name="d767834688jani"></a><span id="d767834688jani" class="pk"></span><span class="bold">注：</span> 从 <span class="bold">startsrc</span> 命令进行初始启动时，直到所有 <span class="bold">gated</span> 初始化都完成之后 <span class="bold">gated</span> 守护进程才开始响应其它 SRC 命令。一个非常大的 <span class="bold">/etc/gated.conf</span> 文件会需要一分钟或更多的时间来完成分析。</blockquote>
<a name="a213x9a871"></a>
<h3 id="a213x9a871">标志</h3>
<p></p>
<a name="wq1356"></a>
<table id="wq1356" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="20%">
<a id="d767834841jani" name="d767834841jani"></a><span class="bold">-c</span></td>
<td width="80%">为查找语法错误指定配置文件解析，在发生那些错误后 <span class="bold">gated</span> 守护进程退出。如果没有错误发生，则 <span class="bold">gated</span> 守护进程会将一个转储文件放入 <span class="bold">/var/tmp/gated_dump</span> 文件中。<span class="bold">-c</span> 标志表示<span class="bold">-tgeneral、kernel、nostamp</span> 标志。如果指定了<span class="bold">-c</span>标志，则<span class="bold">gated</span>守护进程会忽略配置文件中的所有<span class="bold">跟踪选项</span>和<span class="bold">跟踪文件</span>子句。</td>
</tr>
<tr>
<td>
<a id="ermbjeeharr" name="ermbjeeharr"></a><span class="bold">-C</span></td>
<td>指定只为语法错误分析配置文件。如果发现错误，<span class="bold">gated</span>守护进程的退出且状态为 <span class="bold">1</span>，如果没有发现任何错误，则其退出状态为 <span class="bold">0</span>。<span class="bold">-C</span>标志表示 <span class="bold">-tnostamp</span> 标志。</td>
</tr>
<tr>
<td>
<a id="d767835036jani" name="d767835036jani"></a><span class="bold">-f</span><span class="italic"> ConfigFile</span></td>
<td>  指定备用配置文件。缺省情况，<span class="bold">gated</span>守护进程使用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/files/aixfiles/gated.conf.htm#g7a180sara"><span class="bold">/etc/gated.conf</span></a> 文件。</td>
</tr>
<tr>
<td>
<a id="sic2140sara" name="sic2140sara"></a><span class="bold">-n</span></td>
<td>指定<span class="bold">gated</span>守护进程不会对内核路由表进行修改。这用于对带有实际路由数据的<span class="bold">gated</span>配置文件进行测试。</td>
</tr>
<tr>
<td>
<a id="a1smbj3afharr" name="a1smbj3afharr"></a><span class="bold">-N</span></td>
<td>指定<span class="bold">gated</span>守护进程不守护。通常来说，如果没有指定对 <span class="bold">stderr</span> 的追踪，同时父进程标识不是 1 的话，那么<span class="bold">gated</span>守护进程起守护作用。该标志允许使用一种类似于 <span class="bold">/etc/inittab</span> 的方法调用一个进程标识不是 1 的<span class="bold">gated</span>守护进程。</td>
</tr>
<tr>
<td>
<a id="d767835259jani" name="d767835259jani"></a><span class="bold">-t</span><span class="italic"> 跟踪选项</span></td>
<td>指定哪些跟踪选项是在系统启动时被起用。当在没有<span class="italic">TraceOptions</span>变量时使用，该标志就启动<span class="bold">一般</span>跟踪选项。用逗号将每个跟踪选项隔开。不要在标志和第一个跟踪选项之间插入空格。
<a name="e49303e250mart"></a>
<p id="e49303e250mart">必须使用 <span class="bold">-t</span> 标志，这种标志用于跟踪那些在对 <span class="bold">/etc/gated.conf</span> 文件分析之前发生的事件，如决定界面配置并从内核中读取路由。</p> 
<p>而 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/files/aixfiles/gated.conf.htm#g7a180sara"><span class="bold">gated.conf</span></a>文件则描述了可用的跟踪选项。</p></td>
</tr>
</tbody>
</table>
<a name="a273x929f7"></a>
<h3 id="a273x929f7">示例</h3>
<ol type="1">
<li><a name="a277x9683"></a><span id="a277x9683" class="pk"></span>启动<span class="bold">gated</span>守护进程，请输入类似下列的命令：
<p></p>
<a name="d767836688jani"></a>
<pre id="d767836688jani" class="xmp">startsrc -s gated -a "-tall /var/tmp/gated.log"</pre><p class="indatacontent"> 该命令启动<span class="bold">gated</span>守护进程并把消息记入日志。信息被发送至 <span class="bold">/var/tmp/gated.log</span> 文件。</p></li>
<li><a name="a273x929f8"></a><span id="a273x929f8" class="pk"></span>正常终止<span class="bold">gated</span>守护进程，请输入：
<p></p>
<a name="a273x929f9"></a>
<pre id="a273x929f9" class="xmp">stopsrc -s gated</pre><p class="indatacontent"> 该命令会终止守护进程。<span class="bold">-s</span>标志指出跟随的子系统将被停止。</p></li>
<li><a name="a273x929fb"></a><span id="a273x929fb" class="pk"></span>从<span class="bold">gated</span>守护进程中获取短状态，请输入：
<p></p>
<a name="a273x929fc"></a>
<pre id="a273x929fc" class="xmp">lssrc -s gated</pre><p class="indatacontent"> 这个命令返回了守护进程的名字，进程标识和状态（活动或非活动）。</p></li></ol>
<a name="a213x9a874"></a>
<h3 id="a213x9a874">文件</h3>
<p></p>
<a name="wq1358"></a>
<table id="wq1358" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="33%">
<a id="a213x9a876" name="a213x9a876"></a><span class="bold">/etc/gated.pid</span></td>
<td width="66%">包含 <span class="bold">gated</span> 进程标识。</td>
</tr>
<tr>
<td>
<a id="a213x9a877" name="a213x9a877"></a><span class="bold">/var/tmp/gated_dump</span></td>
<td>指定存储器转储文件。</td>
</tr>
<tr>
<td>
<a id="d767837049jani" name="d767837049jani"></a><span class="bold">/var/tmp/gated.log</span></td>
<td>指定记录错误信息的日志文件。</td>
</tr>
</tbody>
</table>
<a name="a213x9a878"></a>
<h3 id="a213x9a878">相关信息</h3>
<a name="e493042099mart"></a>
<p id="e493042099mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds3/kill.htm#a1579872"><span class="bold">kill</span></a>、<a href="gdc.htm#fvd70smkmara"><span class="bold">gdc</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/ospf_monitor.htm"><span class="bold">ospf_monitor</span></a> 命令及 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/ripquery.htm"><span class="bold">ripquery</span></a> 命令。</p>
<a name="e493042188mart"></a>
<p id="e493042188mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/routed.htm#idd270sara"><span class="bold">routed</span></a>守护进程。</p>
<a name="e493042280mart"></a>
<p id="e493042280mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/files/aixfiles/gated.conf.htm#g7a180sara"><span class="bold"> gated.conf</span></a> 文件格式。</p>
<a name="e493042376mart"></a>
<p id="e493042376mart"><span class="italic">《AIX 5L V5.2 系统管理指南：通信与网络》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a9c0aa7a">『如何配置 gated 守护进程』</a>。</p>
<a name="e493042472mart"></a>
<p id="e493042472mart">><span class="italic">《AIX 5L V5.2 系统管理指南：通信与网络》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_route.htm#a341c96d64">『TCP/IP 路由』</a>、<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_protocols.htm#a341c96ac0">『TCP/IP 协议』</a>、<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixbman/commadmn/tcp_daemons.htm#a8c0a85e">『TCP/IP 守护进程』</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="gated.htm#Top_Of_Page">页的顶部</a> | <a href="fxfer.htm">上一页</a> | <a href="gdc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
