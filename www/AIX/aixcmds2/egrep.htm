<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 2，d - h - egrep 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-29" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="egrep 命令, 用 egrep 命令, 搜索模式, 文件,
elogevent 脚本, logevent 脚本, elogevent, 脚本, logevent, ERRM 脚本,
事件响应资源管理器 (ERRM), logevent 命令, elogevent 命令, 命令集, ERRM 命令,
命令, 记录, 事件信息, ERRM" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="egrep.htm#Bot_Of_Page">页的底部</a> | <a href="edquota.htm">上一页</a> | <a href="emgr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 2，d - h</h1></center>

<a name="a167z9401d"></a>
<h2 id="a167z9401d">egrep 命令</h2>
<p><a id="idx351" name="idx351"></a></p>
<a name="a167z9401e"></a>
<h3 id="a167z9401e">用途</h3>
<a name="f0ad09b339mart"></a>
<p id="f0ad09b339mart">搜索文件获得模式。<a id="idx352" name="idx352"></a></p>
<a name="a167z94020"></a>
<h3 id="a167z94020">语法</h3>
<p><span class="bold">egrep</span> [   <a href="egrep.htm#ahb8170craw"><span class="bold">-h  </span></a>] [   <a href="egrep.htm#a167z94013"><span class="bold">-i  </span></a>]
[  <a href="egrep.htm#sep270jeff"><span class="bold">-p</span></a> [ <span class="italic">Separator</span>  ] ] [   <a href="egrep.htm#qjb82f0craw"><span class="bold">-s  </span></a>]
[   <a href="egrep.htm#kkb8230craw"><span class="bold">-v  </span></a>]  [   <a href="egrep.htm#pylb360harr"><span class="bold">-w  </span></a>] [   <a href="egrep.htm#fylb300harr"><span class="bold">-x  </span></a>] [   <a href="egrep.htm#wylbharr"><span class="bold">-y  </span></a>] [
 [   <a href="egrep.htm#edb850craw"><span class="bold">-b  </span></a>] [   <a href="egrep.htm#azib82f0craw"><span class="bold">-n  </span></a>] | [   <a href="egrep.htm#a5eb8230craw"><span class="bold">-c  </span></a>|   <a href="egrep.htm#a5ib82f0craw"><span class="bold">-l  </span></a>|
  <a href="egrep.htm#pzlb300harr"><span class="bold">-q  </span></a>] ] {  {   <a href="egrep.htm#a38l82e0craw"><span class="bold">-e</span></a><span class="italic">Pattern</span>  |   <a href="egrep.htm#cdb8350craw"><span class="bold">-f</span></a><span class="italic">StringFile</span>  }  ...  |  <span class="italic">Pattern</span>  } [  <span class="italic">File  ...</span>  ]</p>
<a name="a167z94024"></a>
<h3 id="a167z94024">描述</h3>
<a name="f0ad09b783mart"></a>
<p id="f0ad09b783mart"><span class="bold">egrep</span> 命令会在输入文件（缺省值为标准输入）中搜索与用 <span class="italic">Pattern</span> 参数指定的模式相匹配的行。这些模式是完整的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/file_types.htm#db42fc0399stcl"> 正则表达式</a>就像在 <a href="ed.htm#a133z9c66"><span class="bold">ed</span></a> 命令中的那样(除了 \ (反斜杠)和 \\ (双反斜杠))。下列规则也应用于 <span class="bold">egrep</span> 命令:</p>
<ul>
<li><a name="a167z94026"></a><span id="a167z94026" class="pk"></span>一个正则表达式后面带一个 ＋ (加号)会匹配一个或多个的正则表达式。</li>
<li><a name="a167z94027"></a><span id="a167z94027" class="pk"></span>一个正则表达式后面带一个 ？ (问号)会匹配零个或一个该正则表达式。</li>
<li><a name="a167z94028"></a><span id="a167z94028" class="pk"></span>由 | (竖线)或者换行符隔开的多个正则表达式会匹配与任何一个正则表达式所匹配的字符串。</li>
<li><a name="a167z94029"></a><span id="a167z94029" class="pk"></span>一个正则表达式可以被包括在“()”（括弧）中进行分组。</li></ul>
<a name="f0ad09c178mart"></a>
<p id="f0ad09c178mart">换行符将不会被正则表达式匹配。</p>
<a name="f0ad09c273mart"></a>
<p id="f0ad09c273mart">运算符的优先顺序是 [, ], *, ?,
+, 合并, | 和换行符。</p>
<p></p><blockquote><a name="a167z94018"></a><span id="a167z94018" class="pk"></span><span class="bold">注意：</span>  <span class="bold">egrep</span> 命令与 <a href="grep.htm#kxf1170fish"><span class="bold">grep</span></a> 命令带 <span class="bold">-E</span> 标志是一样的，除了错误消息和使用消息不同以及  <span class="bold">-s</span> 标志的功能不同之外。</blockquote>
<a name="f0ad09c457mart"></a>
<p id="f0ad09c457mart"><span class="bold">egrep</span> 命令会显示包含该匹配行的文件，如果您指定了多于一个  <span class="italic">File</span> 参数的话。对 shell 有特殊含义的字符 ($, *, [, |, ^, (, ), \ ) 出现在 <span class="italic">Pattern</span> 参数中时必须带双引号。如果 <span class="italic">Pattern</span> 参数不是简单字符串，通常必须用单引号将整个模式括起来。在表达式中比如 <tt>[a-z]</tt>，减号表示通过当前整理序列。整理序列可以定义等价的类以供在字符范围中使用。它使用了快速确定性的算法，有时需要外部空间。</p>
<p></p><blockquote><span class="bold">注意：</span> 
<ol type="1">
<li><a name="beedb94380jbau"></a><span id="beedb94380jbau" class="pk"></span>行被限制在 2048 字节。</li>
<li><a name="beedb94459jbau"></a><span id="beedb94459jbau" class="pk"></span>段落(在 <a href="egrep.htm#sep270jeff"><span class="bold">-p</span></a> 标志下)当前限制在 5000 字符长。</li>
<li><a name="beedb94539jbau"></a><span id="beedb94539jbau" class="pk"></span>不要在特殊文件上运行 <span class="bold">grep</span> 命令，因为它会产生不可预测的结果。</li>
<li><a name="beedb94617jbau"></a><span id="beedb94617jbau" class="pk"></span>输入行不应该包含 NULL 字符。</li>
<li><a name="beedb94697jbau"></a><span id="beedb94697jbau" class="pk"></span>输入文件应该以换行符结束。</li>
<li><a name="beedb94906jbau"></a><span id="beedb94906jbau" class="pk"></span>尽管有些标志可以同时被指定，但是有些标志会覆盖其他的标志。例如，如果同时指定<span class="bold"> -l </span>和<span class="bold"> -n </span>，只有文件名写入到标准输出中去。</li></ol></blockquote>
<a name="a167z94031"></a>
<h3 id="a167z94031">标志</h3>
<p></p>
<a name="wq730"></a>
<table id="wq730" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="edb850craw" name="edb850craw"></a><span class="bold">-b</span></td>
<td width="78%">  在每行前面加上找到该行的块号码。使用此标志有助于按照上下文查找磁盘块号码。<span class="bold">-b</span> 标志不能用于来自标准输入和管道的输入。</td>
</tr>
<tr>
<td>
<a id="a5eb8230craw" name="a5eb8230craw"></a><span class="bold">-c</span></td>
<td>  仅显示匹配行的计数。</td>
</tr>
<tr>
<td>
<a id="a38l82e0craw" name="a38l82e0craw"></a><span class="bold">-e</span><span class="italic"> 模式</span></td>
<td>  指定一个<span class="italic">模式</span>。这象一个简单的<span class="italic">模式</span>，但是它在 <span class="italic">模式</span> 以一个 －（负号）开始时很有用。</td>
</tr>
<tr>
<td>
<a id="cdb8350craw" name="cdb8350craw"></a><span class="bold">-f</span><span class="italic"> StringFile</span></td>
<td>  指定包含字符串的文件。</td>
</tr>
<tr>
<td>
<a id="ahb8170craw" name="ahb8170craw"></a><span class="bold">-h</span></td>
<td>  当处理多个文件时排除文件名。</td>
</tr>
<tr>
<td>
<a id="a167z94013" name="a167z94013"></a><span class="bold">-i</span></td>
<td>  当进行比较时忽略字符的大小写。</td>
</tr>
<tr>
<td>
<a id="a5ib82f0craw" name="a5ib82f0craw"></a><span class="bold">-l</span></td>
<td>  列出包含匹配行的文件名（一次）。文件名之间用换行符加以分隔。如果搜索标准输入，会返回一个 <tt>"(StandardInput)"</tt> 路径名。</td>
</tr>
<tr>
<td>
<a id="azib82f0craw" name="azib82f0craw"></a><span class="bold">-n</span></td>
<td>  在每行之前加上该行在文件中的相对行号。</td>
</tr>
<tr>
<td>
<a id="sep270jeff" name="sep270jeff"></a><span class="bold">-p</span>[<span class="italic"> Separator</span>]</td>
<td>  显示包含匹配行的整个段落。段落之间将按照<span class="italic">分隔符 Separator</span>参数指定的段落分隔符加以定界，这些分隔符是与搜索模式有着相同格式的模式。包含段落分隔符的行将仅用作分隔符；它们不会被包含在输出中。缺省的段落分隔符是空白行。</td>
</tr>
<tr>
<td>
<a id="pzlb300harr" name="pzlb300harr"></a><span class="bold">-q</span></td>
<td>  禁止所有的输出到标准输出，不管匹配行。如果选中输入行，以 0 状态退出。</td>
</tr>
<tr>
<td>
<a id="qjb82f0craw" name="qjb82f0craw"></a><span class="bold">-s</span></td>
<td>  仅显示出错消息。这点对检查状态有用。</td>
</tr>
<tr>
<td>
<a id="kkb8230craw" name="kkb8230craw"></a><span class="bold"> -v </span></td>
<td>  显示除了与指定的模式匹配的行之外的所有行。</td>
</tr>
<tr>
<td>
<a id="pylb360harr" name="pylb360harr"></a><span class="bold">-w</span></td>
<td>  执行单词搜索。</td>
</tr>
<tr>
<td>
<a id="fylb300harr" name="fylb300harr"></a><span class="bold">-x</span></td>
<td>  显示与指定模式精确匹配而不含其它字符的行。</td>
</tr>
<tr>
<td>
<a id="wylbharr" name="wylbharr"></a><span class="bold">-y</span></td>
<td>  当进行比较时忽略字符的大小写。</td>
</tr>
</tbody>
</table>
<a name="beedb95981jbau"></a>
<h3 id="beedb95981jbau">退出状态</h3>
<a name="f0ad09e778mart"></a>
<p id="f0ad09e778mart">此命令返回下列出口值:</p>
<a name="wq731"></a>
<table id="wq731" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="beedb96227jbau" name="beedb96227jbau"></a><span class="bold">0</span></td>
<td width="95%">  找到匹配项。</td>
</tr>
<tr>
<td>
<a id="beedb96301jbau" name="beedb96301jbau"></a><span class="bold">1</span></td>
<td>  未找到匹配项。</td>
</tr>
<tr>
<td>
<a id="beedb96380jbau" name="beedb96380jbau"></a><span class="bold">&gt;1</span></td>
<td>  发现语法错误，或者文件不可访问（即使找到了匹配项）。</td>
</tr>
</tbody>
</table>
<a name="a167z94032"></a>
<h3 id="a167z94032">示例</h3>
<a name="f0ad09f131mart"></a>
<p id="f0ad09f131mart">要想使用包含模式匹配字 +, ?, |, (, 和 ) 中的一个扩展模式，请输入：</p>
<p></p>
<a name="f9d7791400mart"></a>
<pre id="f9d7791400mart" class="xmp">  egrep "\(([A-z]+|[0-9]+)\)" my.txt</pre>
<a name="f9d7791568mart"></a>
<p id="f9d7791568mart">它会显示那些包含在圆括号里字母或数字的行，而不是在圆括号里包含数字字母组合的行。它会匹配 <tt>(y)</tt> 和 <tt>(783902)</tt>,而不是 <tt>(alpha19c)</tt>。</p>
<p></p><blockquote><a name="a167z94035"></a><span id="a167z94035" class="pk"></span><span class="bold">注意：</span>当使用 <span class="bold">egrep</span> 命令时 \ ( (斜杠后跟着开括弧)或者 \ ( (斜杠后跟着闭括弧)匹配文本中的括弧，但是 ( (开括弧)和 ) (闭括弧)都是模式组部分中的特殊字符。在使用 <a href="grep.htm#kxf1170fish"><span class="bold">grep</span></a> 命令时，逆向也成立。</blockquote>
<a name="a167z94038"></a>
<h3 id="a167z94038">文件</h3>
<p></p>
<a name="wq732"></a>
<table id="wq732" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="20%">
<a id="a167z94039" name="a167z94039"></a><span class="bold">/usr/bin/egrep</span></td>
<td width="80%">  包含指向 <span class="bold">egrep</span> 命令的硬链接。</td>
</tr>
<tr>
<td>
<a id="a167z94014" name="a167z94014"></a><span class="bold">/bin/egrep</span></td>
<td>  指定了指向 <span class="bold">egrep</span> 命令的符号链接。</td>
</tr>
</tbody>
</table>
<a name="a94c1350"></a>
<h3 id="a94c1350">相关信息</h3>
<a name="f0ad0a0471mart"></a>
<p id="f0ad0a0471mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds1/awk.htm#a1049906"><span class="bold">awk</span></a> 命令,<a href="ed.htm#a133z9c66"><span class="bold">ed</span></a> 命令,<a href="fgrep.htm#a167z9406a"><span class="bold">fgrep</span></a> 命令,<a href="grep.htm#kxf1170fish"><span class="bold">grep</span></a> 命令,<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds5/sed.htm#a10793b"><span class="bold">sed</span></a> 命令。</p>
<a name="f0ad0a0588mart"></a>
<p id="f0ad0a0588mart"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/files.htm#rl33b0fish">『文件概述』</a>。</p>
<a name="f0ad0a0695mart"></a>
<p id="f0ad0a0695mart"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/input_output_redir.htm#aan1340gsc">『输入输出重定向概述』</a>。</p>
<a name="f0ad0a0801mart"></a>
<p id="f0ad0a0801mart"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/shells.htm#a127c1ff">『Shell 概述』</a>。</p>
<a name="f0ad0a0905mart"></a>
<p id="f0ad0a0905mart"><span class="italic">AIX 5L Version 5.2 National Language Support Guide and Reference</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixprggd/nlsgdrf/nat_lang_support.htm">National Language Support Overview</a>。</p>
<a name="logevent"></a>
<h2 id="logevent">elogevent <span>命令、</span>logevent <span>命令</span></h2>
<a name="wq733"></a>
<h3 id="wq733">用途</h3>
<p><span>L</span> 记录事件信息（由事件响应资源管理器（ERRM）产生）到一个指定的日志文件中。<a id="idx353" name="idx353"></a> <a id="idx354" name="idx354"></a> <a id="idx355" name="idx355"></a> <a id="idx356" name="idx356"></a> <a id="idx357" name="idx357"></a> <a id="idx358" name="idx358"></a> <a id="idx359" name="idx359"></a> <a id="idx360" name="idx360"></a> <a id="idx361" name="idx361"></a> <a id="idx362" name="idx362"></a> <a id="idx363" name="idx363"></a> <a id="idx364" name="idx364"></a> <a id="idx365" name="idx365"></a> <a id="idx366" name="idx366"></a> <a id="idx367" name="idx367"></a> <a id="idx368" name="idx368"></a> <a id="idx369" name="idx369"></a> <a id="idx370" name="idx370"></a> <a id="idx371" name="idx371"></a> <a id="idx372" name="idx372"></a> <a id="idx373" name="idx373"></a> <a id="idx374" name="idx374"></a> <a id="idx375" name="idx375"></a></p>
<a name="wq734"></a>
<h3 id="wq734">语法</h3>
<p>elogevent [<span class="pk">-h</span>] <var class="pv">log_file</var></p>
<p>logevent [<span class="pk">-h</span>] <var class="pv">log_file</var></p>
<a name="wq735"></a>
<h3 id="wq735">描述</h3>
<p><span class="pk">elogevent</span> 脚本总是用英文返回消息。返回的<span class="pk">logevent</span> 脚本消息的语言取决于语言环境的设置。</p>
<p>当事件发生时，这些脚本捕捉由 ERRM 产生的环境变量中由 ERRM 公布的事件信息。这些脚本可以当作由事件响应资源运行的操作来使用。还可以用作创建其它用户定义的操作的模板。</p>
<p>将返回有关 ERRM 环境变量的事件信息，还包含以下内容：</p>
<dl>
<dt class="bold">本地时</dt>
<dd>事件或者重新装备事件被发现的时间。由 ERRM 提供的实际的环境变量是 ERRM_TIME。该值是本地化的，在被显示出来之前会被转化成可读的形式。
</dd>
</dl>
<p>这些脚本使用 <span class="pk">alog</span> 命令来将事件信息写入到指定的 <var class="pv">log_file</var> 中并从该文件中读取事件信息。</p>
<a name="wq736"></a>
<h3 id="wq736">标志</h3>
<dl>
<dt class="bold">-h</dt>
<dd>将脚本的用法声明写入到标准输出中。
</dd>
</dl>
<a name="wq737"></a>
<h3 id="wq737">参数</h3>
<dl>
<dt class="bold"><var class="pv">log_file</var></dt>
<dd>指定事件信息被记录的文件的名称。应该指定 <var class="pv">log_file</var> 参数的绝对路径。
<p><var class="pv">log_file</var> 被当作成一个循环标记，具有 64KB 的固定的大小。当 <var class="pv">log_file</var> 满了时，新的条目会覆盖存在最早的条目。</p>  
<p>如果 <var class="pv">log_file</var> 已经存在了，则事件信息会附加到它后面。如果 <var class="pv">log_file</var> 不存在，则它会被创建，这样事件信息就可以写入到它里面了。</p>
</dd>
</dl>
<a name="wq738"></a>
<h3 id="wq738">退出状态</h3>
<dl>
<dt class="bold">0</dt>
<dd>该脚本成功地运行。
</dd>
<dt class="bold">1</dt>
<dd>所要求的 <var class="pv">log_file</var> 未被指定。
</dd>
<dt class="bold">2</dt>
<dd><var class="pv">log_file</var> 路径无效。
</dd>
</dl>
<a name="wq739"></a>
<h3 id="wq739">限制</h3>
<ul>
<li>这些脚本必须运行在 ERRM 运行的节点上。</li>
<li>当该事件信息被记录时，运行这些脚本的用户必须有 <var class="pv">log_file</var> 的写入权限。</li></ul>
<a name="wq740"></a>
<h3 id="wq740">标准输出</h3>
<p>当 <span class="pk">-h</span> <span> flag</span> 被指定时，脚本的用法声明被写入到标准输出中。</p>
<a name="wq741"></a>
<h3 id="wq741">示例</h3>
<ol type="1">
<li>要记录信息，请在<span>在基于 Web 的系统管理器接口中</span>指定 <span class="pk">/tmp/event.log</span>ERRM 运行这个命令：
<pre class="xmp">/usr/sbin/rsct/bin/logevent/tmp/event.log</pre> 
 在该命令运行时，<span class="pk">/tmp/event.log</span>文件不需要存在。</li>
<li>要想看 <span class="pk">/tmp/event.log</span> 文件的内容，请运行这个命令：
<pre class="xmp"><span>alog -f /tmp/event.log -o</span>  </pre>  下列样本输出显示了一条 <span class="pk">/var</span> 文件系统(一个文件系统资源)的警告事件:
<pre class="xmp">=============================================================================
Event reported at Mon Mar 27 16:38:03 2002Condition
Name: /var space usedSeverity:					Warning
Event  Expression:                             PercentTotUsed>90

Resource Name:					/var
Resource Class Name:				IBM.FileSystem
Data Type:					CT_UINT32
Data Value:					91</pre></li></ol>
<a name="wq743"></a>
<h3 id="wq743">位置</h3>
<dl>
<dt class="bold">/usr/sbin/rsct/bin/elogevent</dt>
<dd>包含了 <span class="pk">elogevent</span> 脚本
</dd>
<dt class="bold">/usr/sbin/rsct/bin/logevent</dt>
<dd>包含了 <span class="pk">logevent</span>脚本
</dd>
</dl>
<a name="wq744"></a>
<h3 id="wq744">相关信息</h3>
<p>命令：<span class="pk">alog</span></p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="egrep.htm#Top_Of_Page">页的顶部</a> | <a href="edquota.htm">上一页</a> | <a href="emgr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
