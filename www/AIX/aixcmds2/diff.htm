<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 2，d - h - diff 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-29" />
<meta name="copyright" content="(C) IBM公司版权 1997,  2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="diff 命令, diff, 命令, 文本, 比较, 文件, 文本文件" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="diff.htm#Bot_Of_Page">页的底部</a> | <a href="diction.htm">上一页</a> | <a href="diff3.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 2，d - h</h1></center>

<a name="ghi60filt"></a>
<h2 id="ghi60filt">diff 命令</h2>
<p><a id="idx195" name="idx195"></a><a id="idx196" name="idx196"></a></p>
<a name="a133z91a85"></a>
<h3 id="a133z91a85">用途</h3>
<a name="f006f5d807mela"></a>
<p id="f006f5d807mela">比较文本文件。<a id="idx197" name="idx197"></a><a id="idx198" name="idx198"></a></p>
<a name="a133z91a87"></a>
<h3 id="a133z91a87">语法</h3>
<a name="wq306"></a>
<h4 id="wq306">比较两个文件的内容</h4>
<p><span class="bold">diff</span> [ <a href="diff.htm#a133z91a9c"><span class="bold">-c</span></a>  | <a href="diff.htm#a133z91a7a"><span class="bold">-C</span></a><span class="italic"> Lines</span> | <a href="diff.htm#a133z91a9e"><span class="bold">-D</span> </a>[ <span class="italic">String</span> ] |  <a href="diff.htm#syy590fish"><span class="bold">-e </span></a> |   <a href="diff.htm#mmy5140fish"><span class="bold">-f</span></a> |   <a href="diff.htm#a133z91a9b"><span class="bold">-n </span></a>] [   <a href="diff.htm#ggy590fish"><span class="bold">-b </span></a>] [   <a href="diff.htm#a133z91aa0"><span class="bold">-i</span></a>] [   <a href="diff.htm#a133z91aa1"><span class="bold">-t </span></a>] <span class="italic">File 1 File2</span></p>
<p><span class="bold">diff</span> [  <a href="diff.htm#a133z91a9d"><span class="bold">-h </span></a>] [  <a href="diff.htm#ggy590fish"><span class="bold">-b </span></a>] <span class="italic">File 1 File2</span></p>
<a name="wq307"></a>
<h4 id="wq307">排序字典的内容并比较不同的文件</h4>
<p><span class="bold">diff</span> [  <a href="diff.htm#a133z91a9c"><span class="bold">-c </span></a>|  <a href="diff.htm#a133z91a7a"><span class="bold">-C</span></a><span class="italic"> Lines</span> |  <a href="diff.htm#syy590fish"><span class="bold">-e </span></a>|  <a href="diff.htm#mmy5140fish"><span class="bold">-f </span></a>|  <a href="diff.htm#a133z91a9b"><span class="bold">-n </span></a>] [  <a href="diff.htm#ggy590fish"><span class="bold">-b </span></a>] [  <a href="diff.htm#a133z91aa0"><span class="bold">-i </span></a>] [  <a href="diff.htm#a133z91a93"><span class="bold">-l </span></a>] [  <a href="diff.htm#a133z91a94"><span class="bold">-r </span></a>] [  <a href="diff.htm#a133z91a95"><span class="bold">-s </span></a>] [  <a href="diff.htm#a133z91a96"><span class="bold">-S</span></a><span class="italic"> File</span> ] [  <a href="diff.htm#a133z91aa1"><span class="bold">-t </span></a>] [  <a href="diff.htm#a133z91a9f"><span class="bold">-w </span></a>] <span class="italic">Directory1
Directory2</span></p>
<p><span class="bold">diff</span> [  <a href="diff.htm#a133z91a9d"><span class="bold">-h </span></a>] [  <a href="diff.htm#ggy590fish"><span class="bold">-b </span></a>] <span class="italic">Directory1 Directory2</span></p>
<a name="a133z91a89"></a>
<h3 id="a133z91a89">描述</h3>
<a name="f006f5f176mela"></a>
<p id="f006f5f176mela"><span class="bold">diff</span> 命令比较文本文件。它能比较单个文件或者目录内容。</p>
<a name="wq308"></a>
<div class="notetitle" id="wq308">注:</div>
<div class="notebody"><span class="bold">diff</span> 命令只有当输入为文本文件时才有效。</div>
<a name="f006f5f341mela"></a>
<p id="f006f5f341mela">如果指定了 <span class="italic">Directory1</span> 和 <span class="italic">Directory2</span> 参数，<span class="bold">diff</span> 命令比较两个目录下名字相同的文本文件。列出不同的二进制文件、公共子目录和只在一个目录出现的文件。</p>
<a name="f006f5f438mela"></a>
<p id="f006f5f438mela">当 <span class="bold">diff</span> 命令运行于常规文件时，且当目录比较期间比较不同的文本文件时，<span class="bold">diff</span> 命令显示文件中哪些行必须更改以保持它们一致。如果 <span class="italic">File1</span> 和 <span class="italic">File2</span> 参数都不是目录，其中之一可能给定负号“-”，以采用标准输入。如果 <span class="italic">File1</span> 参数是目录，则使用目录中
与 <span class="italic">File2</span> 参数指定的文件名一致的那个文件。</p>
<a name="f006f5f532mela"></a>
<p id="f006f5f532mela">典型的输出包含这些格式的行：</p>
<p></p>
<pre class="xmp"><span class="bold">Lines Affected in</span> File1   <span class="bold">Action</span><span class="bold">        Lines Affected in</span> File2
Number1<span class="bold">                   a</span>             Number2[<span class="bold">,</span>Number3]
Number1[,Number2]<span class="bold">         d</span>             Number3
Number1[<span class="bold">,</span>Number2]         <span class="bold">c</span>             Number3[<span class="bold">,</span>Number4] </pre>
<a name="a133z91a8d"></a>
<p id="a133z91a8d">这些行类似于 <span class="bold">ed</span> 子命令
将 <span class="italic">File1</span> 文件转换成 <span class="italic">File2</span> 文件。Action 字母之前的数字指 <span class="italic">File1</span>；后面的数字则指 <span class="italic">File2</span>。因此，通过将 <span class="bold">a</span> 替换成 <span class="bold">d</span>，从右往左读，您就能知道如何将 <span class="italic">File2</span> 转换成 <span class="italic">File1</span>。在 <span class="bold">ed</span> 命令下，相同的对（即 <span class="italic"> Number1</span> ＝ <span class="italic">Number2</span>）会简略为单个数字。</p>
<a name="f006f5f773mela"></a>
<p id="f006f5f773mela">下列每一行，<span class="bold">diff</span> 命令显示以 <span class="bold">&lt;:</span>（小于符号，冒号）开始的第一个文件中的所有受影响行，然后显示以 <span class="bold">&gt;</span>（大于符号）开始的第二个文件中的所有受影响行。</p>
<a name="f006f5f870mela"></a>
<p id="f006f5f870mela">退出值 0 表示没有不同，1 表示找到不同处，2 表示出错。</p>
<a name="d76402f951jani"></a>
<div class="notetitle" id="d76402f951jani">注:</div>
<div class="notebody">如果指定了多于一个的 <span class="bold">-c</span>、<span class="bold">-C</span>、<span class="bold">-D</span>、<span class="bold">-e</span>、<span class="bold">-f</span> 或者 <span class="bold">-n</span> 标志，命令行上的最后一个具有优先权。系统不发出错误消息。</div>
<a name="a133z91a91"></a>
<h3 id="a133z91a91">标志</h3>
<p></p>
<a name="wq309"></a>
<table id="wq309" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="ggy590fish" name="ggy590fish"></a><span class="bold">-b</span></td>
<td width="78%">  将每行末尾当作单个新行标记处理（忽略新行字符前的空格字符）的任意数量空格字符与其他空格字符串（除了新行标记）同样地比较。</td>
</tr>
<tr>
<td>
<a id="a133z91a7a" name="a133z91a7a"></a><span class="bold">-C</span><span class="italic"> Lines</span></td>
<td>  启动 <span class="bold">diff</span> 命令，但只比较 <span class="italic">Lines</span> 变量指定的行数。<span class="bold">-C</span> 标志稍微修改输出。输出以文件的相同部分和创建日期开始。每个更改以 12 个 <tt>*</tt>（星号）组成的行分隔。从 <span class="italic">File1</span> 中要删的行以 <tt>-</tt>（减号）标记，<span class="italic">File2</span> 中要添加的行以 <tt>+</tt>（加号）标记。从一个文件更改到另一个文件的行在两个文件中都
以 <tt>!</tt>（惊叹号）标记。在每一个文件的指定上下文行中的更改会被整组一起输出。</td>
</tr>
<tr>
<td>
<a id="a133z91a9c" name="a133z91a9c"></a><span class="bold">-c</span></td>
<td>  启动 <span class="bold">diff</span> 命令，比较三行上下文。<span class="bold">-c</span> 标志稍微修改输出。输出以涉及文件的标识和它们的创建日期开始。每个更改以 12 个 <tt>*</tt>（星号）组成的行分隔。<span class="italic">File1</span> 中要删的行
以 <tt>-</tt>（减号）标记，要被添加到 <span class="italic">File2</span> 的行以 <tt>+</tt> （加号）标记。从一个文件更改到另一个文件的行在两个文件中都
以 <tt>!</tt>（惊叹号）标记。在每一个文件的指定上下文行中的更改会被整组一起输出。</td>
</tr>
<tr>
<td>
<a id="a133z91a9e" name="a133z91a9e"></a><span class="bold">-D</span> [ <span class="italic">String</span> ]<span class="italic"></span></td>
<td>  使得 <span class="bold">diff</span> 命令在标准输出上建立
一个 <span class="italic">File1</span> 和 <span class="italic">File2</span> 的合并版本。包含了 C 预处理器控件以便没有
定义 <span class="italic">String</span> 的结果编译等同于
编译 <span class="italic">File1</span>，同时定义 <span class="italic">String</span> 产生 <span class="italic">File2</span>。</td>
</tr>
<tr>
<td>
<a id="syy590fish" name="syy590fish"></a><span class="bold">-e</span></td>
<td>  以适合 <span class="bold">ed</span> 编辑器的格式进行输出，将 <span class="italic">File1</span> 转换成 <span class="italic">File2</span>。当使用这个标志时，以下 shell 程序可以帮助维护一个文件的多个版本。手头仅需要由 <span class="bold">diff</span> 命令生成的一个祖先文件（<span class="bold">$1</span>）
和一系列版本的 <span class="bold">ed</span> 脚本（<span class="bold">$2</span>、<span class="bold">$3</span>、...）。标准输出上的最近版本如下：
<p></p>
<a name="a133z91a98"></a>
<pre id="a133z91a98" class="xmp">(shift; cat $*; echo '1,$p') | ed - $1</pre>
<a name="f006f60751mela"></a>
<p id="f006f60751mela">当使用 <span class="bold">-e</span> 标志比较目录时，输出上添加了额外的命令，
因此，结果是一个 shell 脚本，将两个目录上的共有文本文件
从 <span class="italic">Directory1</span> 上的状态转换到 <span class="italic">Directory2</span> 上的状态。</p>
<a name="wq310"></a>
<div class="notetitle" id="wq310">注:</div>
<div class="notebody">由 <span class="bold">-e</span> 或 <span class="bold">-f</span> 标志产生的编辑脚本无法创建由单个组成的行。（周期）。</div></td>
</tr>
<tr>
<td>
<a id="mmy5140fish" name="mmy5140fish"></a><span class="bold">-f</span></td>
<td>  以不适合 <span class="bold">ed</span> 编辑器的格式创建输出，按照在 <span class="bold">-e</span> 标志下产生的逆向顺序显示从 <span class="italic">File1</span> 到 <span class="italic">File2</span> 的转换的必要修改。</td>
</tr>
<tr>
<td>
<a id="a133z91a9d" name="a133z91a9d"></a><span class="bold">-h</span></td>
<td>  如果要更改的部分比较短而且分隔清晰，则执行备用的比较可能会更快。<span class="bold">-h</span> 标志可用于任意长度的文件。<span class="bold">-c</span>、<span class="bold">-C</span>、<span class="bold">-D</span>、<span class="bold">-e</span>、<span class="bold">-f</span> 和 <span class="bold">-n</span> 标志无法与 <span class="bold">-h</span> 标志一起使用。当使用 <span class="bold">-h</span> 标志时，除了 <span class="bold">-b</span> 标志，其他标志一律忽略。</td>
</tr>
<tr>
<td>
<a id="a133z91aa0" name="a133z91aa0"></a><span class="bold">-i</span></td>
<td>  忽略字母大小写。例如，小写 <span class="bold">a</span> 被认为同大写 <span class="bold">A</span> 一样。</td>
</tr>
<tr>
<td>
<a id="a133z91a93" name="a133z91a93"></a><span class="bold">-l</span></td>
<td>  长输出格式。每个由文本文件比较 <span class="bold">diff</span> 命令
获得的结果通过命令 <span class="bold">pr</span> 输送
分页。在报告所有文本文件不同之处后，其他不同之处将被记忆和总结。</td>
</tr>
<tr>
<td>
<a id="a133z91a9b" name="a133z91a9b"></a><span class="bold">-n</span></td>
<td>  产生类似于 <span class="bold">-e</span> 标志创建的输出，但是顺序相反，而且在每一插入或删除命令上进行更改计数。这是修订控件系统（RCS）所用的格式。</td>
</tr>
<tr>
<td>
<a id="a133z91a94" name="a133z91a94"></a><span class="bold">-r</span></td>
<td>  使 <span class="bold">diff</span> 命令的应用程序递归到遇到的公共子目录。</td>
</tr>
<tr>
<td>
<a id="a133z91a95" name="a133z91a95"></a><span class="bold">-s</span></td>
<td>  报告相同的文件，否则不提。</td>
</tr>
<tr>
<td>
<a id="a133z91a96" name="a133z91a96"></a><span class="bold">-S</span> [ <span class="italic">File</span> ]<span class="italic"></span></td>
<td>  当比较目录时，忽略在 <span class="italic">File</span> 变量指定的文件之前整理名称的文件。<span class="bold">-S</span> 标志只用于 <span class="italic">Directory1</span> 和 <span class="italic">Directory2</span> 参数指定的目录。如果您将 <span class="bold">-r</span> 标志与 <span class="bold">-S</span> 标志一起使用，
<span class="bold">-S</span> 标志在 <span class="italic">Directory1</span> 和 <span class="italic">Directory2</span> 子目录中不进行递归。</td>
</tr>
<tr>
<td>
<a id="a133z91aa1" name="a133z91aa1"></a><span class="bold">-t</span></td>
<td>  在输出行扩展制表符。典型输出或者 <span class="bold">-c</span> 标志输出会添加字符到每一行首，这会影响初始行的缩进，使得输出列表难以解释。该标志则保留原始源的缩进。</td>
</tr>
<tr>
<td>
<a id="a133z91a9f" name="a133z91a9f"></a><span class="bold">-w</span></td>
<td>  忽略所有空格和制表符，将所有其他空白字符串视为一致。例如，<tt>if   ( a ==
b  )</tt> 与 <tt>if(a==b)</tt> 相等。</td>
</tr>
</tbody>
</table>
<a name="be6adb8053doug"></a>
<h3 id="be6adb8053doug">退出状态</h3>
<a name="f006f61843mela"></a>
<p id="f006f61843mela">此命令返回下列退出值：</p>
<a name="wq311"></a>
<table id="wq311" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="5%">
<a id="be6adb8391doug" name="be6adb8391doug"></a><span class="bold">0</span></td>
<td width="95%">  未找到不同处。</td>
</tr>
<tr>
<td>
<a id="be6adb8540doug" name="be6adb8540doug"></a><span class="bold">1</span></td>
<td>  找到不同处。</td>
</tr>
<tr>
<td>
<a id="be6adb8679doug" name="be6adb8679doug"></a><span class="bold">&gt;1</span></td>
<td>  发生错误。</td>
</tr>
</tbody>
</table>
<a name="nfk2c0fish"></a>
<h3 id="nfk2c0fish">示例</h3>
<ol type="1">
<li><a name="wui510fish"></a><span id="wui510fish" class="pk"></span>要比较两个文件，请输入：
<p></p>
<a name="d764030882jani"></a>
<pre id="d764030882jani" class="xmp">diff chap1.back chap1</pre><p class="indatacontent"> 这显示文件 <tt>chap1.bak</tt> 和 <tt>chap1</tt> 的不同处。</p></li>
<li><a name="a133z91aa4"></a><span id="a133z91aa4" class="pk"></span>要比较两个文件，但是忽略空格字符个数的区别，请输入：
<a id="a133z91aa5" name="a133z91aa5"></a>
<div class="lines"><tt>diff&nbsp;&nbsp;<a href="diff.htm#a133z91a9f">-w </a>prog.c.bak prog.c</tt><br />
</div> 如果两行仅仅空格和制表符数目不同，则 <span class="bold">diff -w</span> 目录认为它们相等。</li>
<li><a name="a133z91aa7"></a><span id="a133z91aa7" class="pk"></span>要创建一个包含 <span class="bold">ed</span> 命令可以用于从另一个文件重构文件的命令的文件，请输入：
<a id="a133z91aa8" name="a133z91aa8"></a>
<div class="lines"><tt>diff&nbsp;&nbsp;<a href="diff.htm#syy590fish">-e </a>chap2 chap2.old &gt;new.to.old.ed</tt><br />
</div> 这将创建一个名为 <tt>new.to.old.ed</tt> 的文件，它包含 <span class="bold">ed</span> 子命令，把 <tt>chap2</tt> 转换
回在 <tt>chap2.old</tt> 中找到的文本版本。在大多数情况下，<tt>new.to.old.ed</tt> 比 <tt>chap2.old</tt> 要小很多。您可以通过删除 <tt>chap2.old</tt> 以节省磁盘空间，您也可以在任何时候重建它，通过输入：
<a id="a133z91aaa" name="a133z91aaa"></a>
<div class="lines"><tt>(<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds1/cat.htm#ndb390fish">cat </a>new.to.old.ed ; echo '1,$p') | ed - chap2 &gt;chap2.old</tt><br />
</div>
括号中的命令把 <tt>1,$p</tt> 添加到
编辑命令的末尾，发送给 <span class="bold">ed</span> 编辑器。<tt>1,$p</tt> 使得 <span class="bold">ed</span> 命令在编辑完成后将文件写到标准输出。这一修改的命令序列然后
从管道传给 <span class="bold">ed</span> 命令（<tt>| ed</tt>），编辑器读取它作为标准输入。<span class="bold">-</span> 标志使 <span class="bold">ed</span> 命令不显示文件大小以及其他附加信息因为它们易与 <tt>chap2.old</tt> 的文本混肴。</li></ol>
<a name="a133z91aae"></a>
<h3 id="a133z91aae">文件</h3>
<p></p>
<a name="wq313"></a>
<table id="wq313" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="a133z91ab0" name="a133z91ab0"></a><span class="bold">/usr/bin/diff</span></td>
<td width="78%">  包含 <span class="bold">diff</span> 命令。</td>
</tr>
</tbody>
</table>
<a name="a133z91ab3"></a>
<h3 id="a133z91ab3">相关信息</h3>
<a name="f006f63591mela"></a>
<p id="f006f63591mela"><a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds1/bdiff.htm#i5i60filt"><span class="bold">bdiff</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds1/cmp.htm#avz1f0fish"><span class="bold">cmp</span></a>
<span class="bold"> 命令、</span> <a href="diff3.htm#wr2250fish"><span class="bold">diff3</span></a> 命令、<a href="ed.htm#a133z9c66"><span class="bold">ed</span></a><span class="bold"> 命令、</span> <a href="http://study.chyangwa.com/IT/AIX/aixcmds2/cmds/aixcmds4/pr.htm#a49i130craw"><span class="bold">pr</span></a> 命令。</p>
<a name="f006f63684mela"></a>
<p id="f006f63684mela"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/files.htm#rl33b0fish">『文件概述』</a>向您提供文件
并且告知您处理它们的方式。</p>
<a name="f006f63778mela"></a>
<p id="f006f63778mela"><span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds2/aixuser/usrosdev/input_output_redir.htm#aan1340gsc">『输入输出重定向概述』</a>描述了操作系统如何处理输入输出。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="diff.htm#Top_Of_Page">页的顶部</a> | <a href="diction.htm">上一页</a> | <a href="diff3.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds202.htm#wq1815">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
