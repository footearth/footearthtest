<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - ikedb 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="ikedb 命令, ikedb, 命令, 使用 ikedb 命令,
检索、更新、删除、导入和导出信息, IKE 数据库" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="ikedb.htm#Bot_Of_Page">页的底部</a> | <a href="ike.htm">上一页</a> | <a href="imake.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="ikedb"></a>
<h2 id="ikedb">ikedb 命令</h2><a id="idx16" name="idx16"></a><a id="idx17" name="idx17"></a>
<a name="wq43"></a>
<h3 id="wq43">用途</h3><a id="idx18" name="idx18"></a>
<p>检索、更新、删除、导入和导出 IKE 数据库中的信息。</p>
<a name="wq44"></a>
<h3 id="wq44">语法</h3>
<p><span class="bold">ikedb</span> <a href="ikedb.htm#ikedb-p"><span class="bold">-p</span></a>[<a href="ikedb.htm#ikedb-p"><span class="bold">F s</span></a>] [ <a href="ikedb.htm#ikedb-p"><span class="bold">-e</span> <span class="italic">entity-file</span></a> ] [ <a href="ikedb.htm#ikedb-p"><span class="italic">XML-file</span></a> ]</p>
<p><span class="bold">ikedb</span> <a href="ikedb.htm#ikedb-g"><span class="bold">-g</span></a>[<a href="ikedb.htm#ikedb-g"><span class="bold">r</span></a>] [ <a href="ikedb.htm#ikedb-g"><span class="bold">-t</span> <span class="italic">type</span></a> [ <a href="ikedb.htm#ikedb-g"><span class="bold">-n</span> <span class="italic">name</span></a> | <a href="ikedb.htm#ikedb-g"><span class="bold">-i</span> <span class="italic">ID</span></a> <a href="ikedb.htm#ikedb-g"><span class="bold">-y</span> <span class="italic">ID-type</span></a> ] ]</p>
<p><span class="bold">ikedb</span><a href="ikedb.htm#ikedb-d"> <span class="bold">-d</span></a> <span class="bold">-t</span> <span class="italic">type</span> [ <span class="bold">-n</span> <span class="italic">name</span> | <span class="bold">-i</span> <span class="italic">ID</span> <span class="bold">-y</span> <span class="italic">ID-type</span> ]</p>
<p><span class="bold">ikedb</span> <a href="ikedb.htm#ikedb-c"><span class="bold">-c</span></a>[<a href="ikedb.htm#ikedb-c"><span class="bold">F</span></a>] [ <a href="ikedb.htm#ikedb-c"><span class="bold">-l</span> <span class="italic">linux-file</span></a> ] [ <a href="ikedb.htm#ikedb-c"><span class="bold">-k</span> <span class="italic">secrets-file</span></a> ] [ <a href="ikedb.htm#ikedb-c"><span class="bold">-f</span> <span class="italic">XML-file</span></a> ]</p>
<p><span class="bold">ikedb</span> <a href="ikedb.htm#ikedb-x"><span class="bold">-x</span></a></p>
<p><span class="bold">ikedb</span> <a href="ikedb.htm#ikedb-o"><span class="bold">-o</span></a></p>
<a name="wq45"></a>
<h3 id="wq45">描述</h3>
<p><span class="bold">ikedb</span> 命令允许用户写到（<span class="bold">put</span>）IKE 数据库或从（<span class="bold">get</span>）IKE 数据库中读取。输入和输出格式是可扩展标记语言（XML）文件。通过文档类型定义（DTD）指定 XML 文件格式。当执行放入操作时，<span class="bold">ikedb</span> 命令允许用户查看用来验证 XML 文件的 DTD。DTD 唯一可以的修改是使用 <span class="bold">-e</span> 标志添加实体声明到 DTD。</p>
<p>忽略输入 XML 文件中任意外部 DOCTYPE 声明并且任意内部 DOCTYPE 声明可能导致错误。XML 标准指定了使用 DTD 解析 XML 文件所要遵循的规则。<span class="bold">/usr/samples/ipsec</span> 中有与定义公共隧道情况的典型 XML 文件相似的样本。</p>
<a name="wq46"></a>
<h3 id="wq46">标志</h3>
<a name="wq47"></a>
<table id="wq47" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td width="6%">
<a id="ikedb-p" name="ikedb-p"></a><span class="bold">-p</span></td>
<td width="93%">
<p>基于给定的<span class="italic">XML-file</span>，执行 <span class="bold">put</span> 写入数据库。</p>
<dl>
<dt class="bold">-F</dt>
<dd>强制执行 <span class="bold">put</span>，即使是一个指定的隧道、保护、建议、组或预共享密钥也将覆盖数据库中已存在的隧道。缺省值是 <span class="bold">put</span> 尝试失败。
</dd>
<dt class="bold">-s</dt>
<dd>交换所有隧道的本地和远程标识。这有利于导入同级机器生成的隧道。标志仅影响隧道。如果任意隧道的远程标识是一个组的，则该选项非法。
</dd>
<dt class="bold">-e <span class="italic">entity-file</span></dt>
<dd>如 <span class="italic">entity-file</span> 定义的那样来指定包含 <tt class="xph">&lt;!ENTITY ...></tt> 行的文件名。添加这些行到内部 DTD 并且允许在别的 XML 文件包含 XML 文件。
</dd>
<dt class="bold"><span class="italic">XML-file</span></dt>
<dd>指定使用的 <span class="bold">XML-file</span> 并且必须是显示在命令行中最后的参数。<span class="italic">XML-file</span> 确定是写否到隧道、保护、建议、组、预共享密钥或所有这些。如果没有指定 <span class="italic">XML-file </span>，从 <span class="bold">stdin</span> 读取输入。-（连字符）也能用于指定 <span class="bold">stdin</span>。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="ikedb-g" name="ikedb-g"></a><span class="bold">-g</span></td>
<td>执行 <span class="bold">get</span> 显示 IKE 数据库的存储内容。输出发送到 <span class="bold">stdout</span> 并且是 XML 格式，适合用 <span class="bold">ikedb -p</span> 处理。
<dl>
<dt class="bold">-r</dt>
<dd>递归的。如果为阶段 1 隧道指定了此标志志，也返回所有关联的阶段 2 隧道、所有与两个隧道集有关的保护和建议的信息。
</dd>
<dt class="bold">-t <span class="italic">type</span></dt>
<dd>指定被请求的输出的 <span class="italic">type</span>。<span class="italic">Type</span> 可以是 AIX_VPN 下的任意 XML 元素值，比如 <span class="bold">IKETunnel</span>、<span class="bold">IPSecProtection</span> 等等。如果省略，输出完整数据库。
</dd>
<dt class="bold">-n <span class="italic">name</span></dt>
<dd>指定被请求对象的 <span class="italic">name</span>。<span class="italic">Name</span> 可能是建议、保护、隧道或组的名称，取决于 <span class="bold">-t</span> 标志值。<span class="bold">-n</span> 标志对 <span class="bold">-t</span> 标志指定的所有值都是有效的，除了 <span class="bold">IKEPresharedKey</span>。如果省略，输出指定的 <span class="italic">type</span> 全部对象。
</dd>
<dt class="bold">-i <span class="italic">ID</span></dt>
<dd>指定与预共享密钥有关的 <span class="italic">ID</span>。<span class="bold">-i</span> 标志仅对<span class="bold">-t</span> 标志的 <span class="bold">IKEPresharedKey</span> 值的是有效的。如果省略，输出指定的 <span class="italic">type</span> 全部对象。<span class="bold">-i</span> 标志必须和 <span class="bold">-y</span> 标志合用。
</dd>
<dt class="bold">-y <span class="italic">ID-type</span></dt>
<dd>指定由 <span class="bold">-i</span>标志指定的 <span class="italic">ID-type</span>。ID-type 可能是 XML 文件中允许的合法类型之一，诸如 <span class="bold">User_FQDN</span>、<span class="bold">IPV4_Address</span>,
等等。<span class="bold">-y</span> 标志必须和 <span class="bold">-i</span> 标志协同使用。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="ikedb-d" name="ikedb-d"></a><span class="bold">-d</span></td>
<td>在数据库中指定项上执行 <span class="bold">delete</span>。该标志和 <span class="bold">-g</span> 标志一样，除了不支持 <span class="bold">-r</span>。</td>
</tr>
<tr>
<td>
<a id="ikedb-c" name="ikedb-c"></a><span class="bold">-c</span></td>
<td>
<p>执行从 Linux IPSec 配置文件到 AIX 配置文件（XML 格式）的转换。要求从 Linux 输入一个或两个文件，一个配置文件，以及可能是一个含有预共享密钥的秘密文件。</p>
<dl>
<dt class="bold">-F</dt>
<dd>强制执行 <span class="bold">put</span>，即使是指定的隧道、保护、建议、组或预共享密钥将覆盖数据库中已存在的隧道。缺省值是 <span class="bold">put</span> 尝试失败。如果也使用 <span class="bold">-f</span> 标志，<span class="bold">-F</span> 标志无效。
</dd>
<dt class="bold">-l <span class="italic">linux-file</span></dt>
<dd>指定 Linux 配置文件，由 <span class="italic">linux-file</span> 定义。如果无指定文件，系统在当前目录中查找 <span class="bold">ipsec.conf</span> 文件。
</dd>
<dt class="bold">-k <span class="italic">secrets-file</span></dt>
<dd>指定 Linux 预共享密钥文件，由 <span class="italic">secrets-file</span> 参数确定。如果无指定文件，系统在当前目录中查找 <span class="bold">ipsec.secrets</span> 文件。
</dd>
<dt class="bold"> -f <span class="italic">XML-file</span></dt>
<dd>指定 Linux 配置文件将转换到的 XML 配置文件。缺省行为是对 IKE 数据库直接执行 <span class="bold">put</span> 操作。如果给定文件名是一个连字符（-），则结果发送到<span class="bold">标准输出</span>。
</dd>
</dl></td>
</tr>
<tr>
<td>
<a id="ikedb-x" name="ikedb-x"></a><span class="bold">-x</span></td>
<td>在数据库上执行 <span class="bold">expunge</span>。清空数据库。</td>
</tr>
<tr>
<td>
<a id="ikedb-o" name="ikedb-o"></a><span class="bold">-o</span></td>
<td>执行 DTD 的 <span class="bold">output</span>，这个 DTD 指定 XML 文件的所有元素和属性，此文件由 <span class="bold">ikedb</span> 命令使用。发送 DTD 到 <span class="bold">stdout</span>。</td>
</tr>
</tbody>
</table>
<a name="wq48"></a>
<h3 id="wq48">文件</h3>
<p></p>
<a name="wq49"></a>
<table id="wq49" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="20%"><span class="bold">/usr/samples/ipsec</span></td>
<td width="79%">设置不同隧道配置的 XML 文件的示例。</td>
</tr>
</tbody>
</table>
<a name="wq50"></a>
<h3 id="wq50">示例</h3>
<p></p>
<ol type="1">
<li>要把定义从在同级机器上生成的 XML 文件<span class="bold">放入</span>到 IKE 数据库，并且覆盖数据库中以相同名称存在的对象，请输入：
<pre class="xmp"> ikedb -pFs peer_tunnel_conf.xml   </pre>
<p><tt class="xph">peer_tunnel_conf.xml</tt> 是同级机器上生成的 XML 文件。</p></li>
<li>要 <span class="bold">get</span> 名为 <tt class="xph">tunnel_sys1_and_sys2</tt> 的阶段 1 隧道和所有相关阶段 2 隧道的定义，还有各自的建议和保护，请输入：
<pre class="xmp"> ikedb -gr -t IKETunnel -n tunnel_sys1_and_sys2</pre></li>
<li>要从数据库中<span class="bold">删除</span>所有预共享密钥，请输入：
<pre class="xmp"> ikedb -d -t IKEPresharedKey</pre></li></ol>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="ikedb.htm#Top_Of_Page">页的顶部</a> | <a href="ike.htm">上一页</a> | <a href="imake.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
