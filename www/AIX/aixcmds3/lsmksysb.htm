<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - lsmksysb 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="lsmksysb 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="lsmksysb.htm#Bot_Of_Page">页的底部</a> | <a href="lsmcode.htm">上一页</a> | <a href="lsnamsv.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>
<a id="idx419" name="idx419"></a>
<a name="lsmksysb"></a>
<h2 id="lsmksysb">lsmksysb 命令</h2>
<a name="wq1020"></a>
<h3 id="wq1020">用途</h3>
<p>列出或恢复备份在指定介质上的卷组内容。</p>
<a name="wq1021"></a>
<h3 id="wq1021">语法</h3>
<p><span class="bold">lsmksysb</span> [ <a href="lsmksysb.htm#lsmksysb-b"><span class="bold">-b</span> <span class="italic">blocks</span></a> ] [ <a href="lsmksysb.htm#lsmksysb-f"><span class="bold">-f</span> <span class="italic">device</span></a> ]  [ <a href="lsmksysb.htm#lsmksysb-a"><span class="bold">-a</span></a> ] [ <a href="lsmksysb.htm#lsmksysb_flags_c"><span class="bold">-c</span></a> ] [ <a href="lsmksysb.htm#lsmksysb_flags_l"><span class="bold">-l</span></a> ]
[ <a href="lsmksysb.htm#lsmksysb-r"><span class="bold">-r</span></a> ] [ <a href="lsmksysb.htm#lsmksysb-s"><span class="bold">-s</span></a> ] [ <a href="lsmksysb.htm#lsmksysb-ld"><span class="bold">-d</span> <span class="italic">path</span></a> ] [ <a href="lsmksysb.htm#lsmksysb_flags_bigb"><span class="bold">-B</span></a> ] [ <a href="lsmksysb.htm#lsmksysb-ud"><span class="bold">-D</span></a> ] [ <a href="lsmksysb.htm#lsmksysb_flags_bigl"><span class="bold">-L</span></a> ]
[ <a href="lsmksysb.htm#lsmksysb_flags_bigv"><span class="bold">-V</span></a> ] [ <a href="lsmksysb.htm#lsmksysb-file_list"><span class="italic">file_list</span></a> ]</p>
<a name="wq1022"></a>
<h3 id="wq1022">描述</h3>
<p><span class="bold">lsmksysb</span> 命令列出来自磁带、文件、CD-ROM 或其它源上的卷组备份的内容，也可以用来从有效备份源恢复文件。
<span class="bold">lsmksysb</span> 命令也用于如多个 CD、DVD 或磁带的多卷备份。</p>
<p><span class="bold">lsmksysb -r</span> 和 <span class="bold">restorevgfiles</span> 命令执行同样的操作，应该认为是可以互换的。</p>
<a name="wq1023"></a>
<h3 id="wq1023">标志</h3>
<p></p>
<a name="wq1024"></a>
<table id="wq1024" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="19%">
<a id="lsmksysb-a" name="lsmksysb-a"></a><span class="bold">-a</span></td>
<td width="80%">验证 <span class="bold">-b</span> <span class="italic">block</span> 标志指定的磁带备份的物理块大小。如果需要读备份，有可能要改变块大小。<span class="bold">-a</span> 标志仅在使用磁带备份时有效。</td>
</tr>
<tr>
<td>
<a id="lsmksysb-b" name="lsmksysb-b"></a><span class="bold">-b</span> <span class="italic"> blocks</span></td>
<td>指定用 <span class="italic">blocks</span> 参数定义的，在单独的一次输入操作中读取的 512 字节块的数目。如果该 <span class="italic">blocks</span> 参数未指定，读取的块数目缺省为 100。</td>
</tr>
<tr>
<td>
<a id="lsmksysb_flags_bigb" name="lsmksysb_flags_bigb"></a><span class="bold">-B</span></td>
<td>打印卷组备份日志至<span class="bold">标准输出</span>。
<p>该标志显示以往的 256 个备份（粗略地）。该日志是 alog 格式的，保存在 <span class="bold">/var/adm/ras/vgbackuplog</span> 中。日志每行由分号隔开的文件或设备名列表组成，该命令用于设置备份、日期、收缩大小、备份的总大小以及建议维护包（如果有的话）。
</p>
<a name="wq1025"></a>
<div class="notetitle" id="wq1025">注:</div>
<div class="notebody"> 收缩大小是全部文件系统数据的大小。全部大小是每个文件系统（未用的＋数据）大小的总和。</div></td>
</tr>
<tr>
<td>
<a id="lsmksysb_flags_c" name="lsmksysb_flags_c"></a><span class="bold">-c</span></td>
<td>产生以冒号隔开的输出。该标志仅和 <span class="bold">-l</span> 及 <span class="bold">-L</span> 标志一起使用。</td>
</tr>
<tr>
<td>
<a id="lsmksysb-ld" name="lsmksysb-ld"></a><span class="bold">-d</span> <span class="italic"> path </span></td>
<td>指定文件将恢复的目录路径，用 <span class="italic">path</span> 参数定义。如果未使用 <span class="bold">-d</span> 参数，将使用当前的工作目录。
如果当前的工作目录是根目录，这将存在问题。建议使用临时文件夹代替根目录写入。</td>
</tr>
<tr>
<td>
<a id="lsmksysb-ud" name="lsmksysb-ud"></a><span class="bold">-D</span></td>
<td>产生调试输出。</td>
</tr>
<tr>
<td>
<a id="lsmksysb_flags_l" name="lsmksysb_flags_l"></a><span class="bold">-l</span></td>
<td>显示卷组备份的有用信息。
<p>该标志需要 <span class="bold">-f</span> <span class="italic">device</span> 标志。
该标志使得 <span class="bold">lsmksysb</span> 显示诸如卷组、备份的日期和时间、从备份系统的 unname 输出、操作系统级别（oslevel）、建议维护级别、以兆字节表示的备份大小以及以兆字节表示的备份收缩大小。
收缩大小是全部文件系统数据的大小。
全部大小是每个文件系统（未用的＋数据）大小的总和。
<span class="bold">-l</span> 标志也显示卷组备份的逻辑卷和文件系统信息，等同于运行
“<span class="bold">lsvg -l</span> <span class="italic">vgname</span>”。</p></td>
</tr>
<tr>
<td>
<a id="lsmksysb_flags_bigl" name="lsmksysb_flags_bigl"></a><span class="bold">-L</span></td>
<td>仅显示关于 <span class="bold">mksysb</span> 备份的 lpp 文件集信息。
<p>该标志需要 <span class="bold">-f</span> <span class="italic">device</span> 标志，并显示与正在运行的备份系统上调用 "<span class="bold">lslpp -l</span>" 所产生的相同的信息。
该标志只产生由 <span class="bold">mksysb</span> 产生的有关卷组备份的输出。</p></td>
</tr>
<tr>
<td>
<a id="lsmksysb-f" name="lsmksysb-f"></a><span class="bold">-f</span> <span class="italic">device</span></td>
<td>指定包含备份（文件、CD-ROM 或其他源）的设备类型，用参数 <span class="italic">device</span> 定义。当 <span class="bold">-f</span> 未指定时，<span class="italic">device</span> 缺省为 <span class="bold">/dev/rmt0</span>。</td>
</tr>
<tr>
<td>
<a id="lsmksysb-r" name="lsmksysb-r"></a><span class="bold">-r</span></td>
<td>指定恢复备份文件，如参数 <span class="italic">file-list</span> 所定义。如果 <span class="italic">file-list</span> 参数未指定时，备份的所有文件都将恢复。
如果未使用 <span class="bold">-r</span> 标志，执行 <span class="bold">lsmksysb</span> 命令仅列出指定备份中的文件。</td>
</tr>
<tr>
<td>
<a id="lsmksysb-s" name="lsmksysb-s"></a><span class="bold">-s</span></td>
<td>指定备份源是用户卷组而并非 rootvg。</td>
</tr>
<tr>
<td>
<a id="lsmksysb_flags_bigv" name="lsmksysb_flags_bigv"></a><span class="bold">-V</span></td>
<td>验证磁带备份。
<p>该标志要求 <span class="bold">-f</span> <span class="italic">device</span> 标志并且仅对磁带设备工作。
<span class="bold">-V</span> 标志使得 <span class="bold">lsmksysb</span> 验证卷组备份中每个文件头的可读性，并打印涉及<span class="bold">标准错误</span>的任何错误。</p></td>
</tr>
</tbody>
</table>
<a name="wq1026"></a>
<h3 id="wq1026">参数</h3>
<p></p>
<a name="wq1027"></a>
<table id="wq1027" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="17%">
<a id="lsmksysb-file_list" name="lsmksysb-file_list"></a><span class="italic">file_list</span></td>
<td width="82%">标识要恢复的文件列表。该参数仅在 <span class="bold">-r</span> 标志指定时使用。相对于当前目录的文件的全路径应在以空格分隔的列表中指定。除非已另外指定，在指定的目录下的全部文件将被恢复。如果恢复一个目录下的所有文件，建议写入临时文件夹而非根目录。</td>
</tr>
</tbody>
</table>
<a name="wq1028"></a>
<h3 id="wq1028">示例</h3>
<ol type="1">
<li>要列出位于缺省设备 <span class="bold">/dev/rmt0</span> 下的系统备份内容，请输入：
<pre class="xmp">lsmksysb</pre></li>
<li>要列出位于设备 <span class="bold">/dev/cd1</span> 下的系统备份内容，请输入：
<pre class="xmp">lsmksysb -f /dev/cd1</pre></li>
<li>要列出位于设备 <span class="bold">/dev/cd1</span> 下用户卷组而非 rootvg 的系统备份内容，请输入：
<pre class="xmp">lsmksysb -f /dev/cd1 -s</pre></li>
<li>要从位于 <span class="bold">/dev/cd1</span> 上的系统备份恢复 <span class="bold">/etc/filesystems</span>，请输入：
<pre class="xmp">lsmksysb -f /dev/cd1 -r ./etc/filesystems</pre></li>
<li>要恢复位于设备 <span class="bold">/dev/cd1</span> 上的非 rootvg 备份的 <span class="bold">/myfs/test</span> 目录里的所有文件，并将恢复后的文件写入 <span class="bold">/data/myfiles</span>，请输入：

<pre class="xmp">lsmksysb -f /dev/cd1 -r -s -d /data/myfiles ./myfs/test</pre></li>
<li>要显示位于 <span class="bold">/dev/rmt0</span> 下的 <span class="bold">mksysb</span> 的磁带备份的用冒号分隔的 lpp 信息，请输入：
<pre class="xmp">lsmksysb -Lc -f /dev/rmt0</pre></li>
<li>要显示卷组备份日志到<span class="bold">标准输出</span>，请输入：
<pre class="xmp">lssavevg -B</pre></li>
<li>要列出位于 <span class="bold">/tmp/mybackup</span> 下的备份的相关卷组和常规备份数据，请输入：
<pre class="xmp">lsmksysb -l -f /tmp/mybackup</pre></li>
<li>要验证 <span class="bold">/dev/rmt0</span> 中的卷组备份磁带的每个头的可读性，请输入：
<pre class="xmp">lsmksysb -V -f /dev/rmt0</pre></li></ol>
<a name="wq1030"></a>
<h3 id="wq1030">文件</h3>
<a name="wq1031"></a>
<table id="wq1031" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td><span class="bold">/usr/bin/lsmksysb</span></td>
<td>包含 <span class="bold">lsmksysb</span> 命令</td>
</tr>
</tbody>
</table>
<a name="wq1032"></a>
<h3 id="wq1032">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/restorevgfiles.htm"><span class="bold">restorevgfiles</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="lsmksysb.htm#Top_Of_Page">页的顶部</a> | <a href="lsmcode.htm">上一页</a> | <a href="lsnamsv.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
