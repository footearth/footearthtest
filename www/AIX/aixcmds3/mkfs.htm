<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - mkfs 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="mkfs 命令, mkfs, 命令, 使用 mkfs 命令, 制作,
文件系统, 创建" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="mkfs.htm#Bot_Of_Page">页的底部</a> | <a href="mkfontdir.htm">上一页</a> | <a href="mkgroup.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="a1019296c"></a>
<h2 id="a1019296c">mkfs 命令</h2>
<p><a id="idx600" name="idx600"></a><a id="idx601" name="idx601"></a></p>
<a name="a1019296e"></a>
<h3 id="a1019296e">用途</h3><a id="idx602" name="idx602"></a><a id="idx603" name="idx603"></a>
<p>制作一个文件系统。</p>
<a name="a10192970"></a>
<h3 id="a10192970">语法</h3>
<p><span class="bold">mkfs</span> [  <a href="mkfs.htm#a1019298b"><span class="bold">-b</span></a><span class="italic"> Boot</span> ] [  <a href="mkfs.htm#a1019298c"><span class="bold">-l</span></a><span class="italic"> Label</span> ] [  <a href="mkfs.htm#a10192941"><span class="bold">-i</span></a> <span class="italic">i-Nodes</span> ] [  <a href="mkfs.htm#a145985"><span class="bold">-o</span></a><span class="italic"> Options</span> ] [  <a href="mkfs.htm#a1019298d"><span class="bold">-p</span></a><span class="italic"> Prototype</span> ] [  <a href="mkfs.htm#a1019298e"><span class="bold">-s</span></a> <span class="italic">Size</span> ] [  <a href="mkfs.htm#a1019298f"><span class="bold">-v</span></a><span class="italic"> VolumeLabel</span> ] [  <a href="mkfs.htm#a145986"><span class="bold">-V </span></a><span class="italic">VfsName</span> ]  <span class="italic">Device</span></p>
<a name="a10192972"></a>
<h3 id="a10192972">描述</h3>
<p><span class="bold">mkfs</span> 命令在一个指定的设备上制作一个新的文件系统。<span class="bold">mkfs</span> 命令初始化卷标、文件系统卷标和启动块。</p>
<p><span class="italic">Device</span> 参数指定一个块设备名称、原始设备名称或文件系统名称。如果此参数指定了一个文件系统名称，则 <span class="bold">mkfs</span> 命令使用此命令从 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/filesystems.htm#a1249cf"><span class="bold">/etc/filesystems</span></a> 文件的适用节中获取以下参数，除非用 <span class="bold">mkfs</span> 命令输入这些参数：</p>
<a name="wq1581"></a>
<table id="wq1581" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="11%">
<a id="a10192975" name="a10192975"></a><span class="bold">dev</span></td>
<td width="88%">  设备名</td>
</tr>
<tr>
<td>
<a id="a10192978" name="a10192978"></a><span class="bold">vol</span></td>
<td>  卷标识</td>
</tr>
<tr>
<td>
<a id="a1019297a" name="a1019297a"></a><span class="bold">size</span></td>
<td>  文件系统大小</td>
</tr>
<tr>
<td>
<a id="a1019297b" name="a1019297b"></a><span class="bold">boot</span></td>
<td>  安装在启动块中的程序</td>
</tr>
<tr>
<td>
<a id="a14294e6" name="a14294e6"></a><span class="bold">vfs</span></td>
<td>  虚拟文件系统的定义</td>
</tr>
<tr>
<td>
<a id="a14294e7" name="a14294e7"></a><span class="bold">options</span></td>
<td>  <span class="italic">Keyword</span><span class="bold">、</span><span class="italic">Keyword</span><span class="bold">=</span><span class="italic">Value</span> 格式的文件系统实现细节选项。</td>
</tr>
</tbody>
</table>
<a name="wq1582"></a>
<div class="notelisttitle" id="wq1582">注:</div>
<ol type="1">
<li>用启用位的 setgid（设置组标识）创建文件系统。setgid 位确定了缺省的组许可权。在新文件系统下创建的所有目录都有相同的缺省组许可权。</li>
<li><span class="bold">mkfs</span> 命令不会改变已安装的文件系统中的任何内容，包括文件系统标号。当更改安装点时，如果没有安装文件系统，那么文件系统标号就会更改。</li>
<li>有关在条带逻辑卷上创建文件系统的信息，请参考 <a href="mklv.htm#izk4160frit"><span class="bold">mklv</span></a> 文档中的<a href="mklv.htm#mklv_description_fs_on_striped_lv">条带逻辑卷上的文件系统</a>。</li>
</ol>
<a name="a1019298a"></a>
<h3 id="a1019298a">标志</h3>
<p></p>
<a name="wq1584"></a>
<table id="wq1584" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="a1019298b" name="a1019298b"></a><span class="bold">-b</span>  <span class="italic">Boot</span></td>
<td width="83%">命名要在新文件系统的块 0 安装的程序。</td>
</tr>
<tr>
<td>
<a id="a10192941" name="a10192941"></a><span class="bold">-i</span>  <span class="italic">i-Nodes</span></td>
<td>  指定文件系统上的 i-nodes 的初始数量。当创建日志文件系统时，忽略此标记。</td>
</tr>
<tr>
<td>
<a id="a1019298c" name="a1019298c"></a><span class="bold">-l</span>  <span class="italic">Label</span></td>
<td>  为新文件系统指定文件系统标号。</td>
</tr>
<tr>
<td>
<a id="a145985" name="a145985"></a><span class="bold">-o</span>  <span class="italic">Options</span></td>
<td>指定用逗号分隔的虚拟文件系统实现细节选项列表。</td>
</tr>
</tbody>
</table>
<a name="a240748e294mart"></a>
<p id="a240748e294mart">以下选项是“日志文件系统”（JFS）专用的：</p>
<a name="wq1585"></a>
<table id="wq1585" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="26%"><span class="bold">-o ag=</span>{ <span class="bold">8</span> | <span class="bold">16</span> | <span class="bold">32</span> | <span class="bold">64</span> }</td>
<td width="73%">以兆字节为单位指定分配组大小。一个分配组是一个 inodes 的分组，其磁盘块类似于 BSD 柱面组。ag 的缺省值是 8。</td>
</tr>
<tr>
<td>
<a id="a240748e410mart" name="a240748e410mart"></a><span class="bold">-o bf=</span>{ <span class="bold">true</span> | <span class="bold">false</span> }</td>
<td>指定一个启用大文件的文件系统。请参阅“Understanding Large File Enabled File Systems”以获取更多信息。如果不需要一个启用大文件的文件系统，则将此项设置为 false；这是缺省值。指定 <span class="bold">bf=true</span> 需要一个 4096 的分段大小和 <span class="bold">compress=no</span>。</td>
</tr>
<tr>
<td>
<a id="dqoli49ria" name="dqoli49ria"></a><span class="bold">-o  frag=</span>{  <span class="bold">512</span> | <span class="bold">1024</span> | <span class="bold">2048</span> | <span class="bold">4096</span> }</td>
<td>  以字节为单位指定 JFS 分段大小。文件系统分段是分配到文件的磁盘存储的最小单元。缺省的分段大小是 4096 字节。</td>
</tr>
<tr>
<td>
<a id="d7e2cda971jani" name="d7e2cda971jani"></a><span class="bold">-o  compress=</span>{ <span class="bold">no</span> | <span class="bold">LZ</span> }</td>
<td>指定数据压缩。如果不想压缩数据，则将此项设置为 <tt>no</tt>。选择压缩要求分段大小为 2048 或更小。</td>
</tr>
<tr>
<td>
<a id="upoli388ria" name="upoli388ria"></a><span class="bold">-o nbpi=</span>{ <span class="bold">512</span> | <span class="bold">1024</span> | <span class="bold">2048</span> | <span class="bold">4096</span> |<span class="bold">8192</span> | <span class="bold">16384</span> | <span class="bold">32768</span> | <span class="bold">65536</span> | <span class="bold">131072</span> }</td>
<td>指定每个 i-node 的字节数（<span class="bold">nbpi</span>）。<span class="bold">nbpi</span> 表示以字节为单位的文件系统大小占 i-node 总数的比率。缺省的 <span class="bold">nbpi</span> 值是 4096 字节。值 32768、65536 和 131072 <span class="bold"></span>仅适用于 AIX 4.2 或更新版本。</td>
</tr>
</tbody>
</table>
<a name="wq1586"></a>
<div class="notelisttitle" id="wq1586">注:</div>
<ol type="1">
<li>用大于 8 的 <span class="bold">ag</span> 值创建的文件系统在 AIX 4.1 系统上不被识别。</li>
<li><span class="bold">ag</span>、<span class="bold">bf</span>、<span class="bold">compress</span>、<span class="bold">frag</span> 和 <span class="bold">nbpi</span> 属性是在创建文件系统时设置的，并且在成功创建文件系统之后无法更改。<span class="bold">size</span> 属性定义了文件系统大小的最小值，并且在创建文件系统之后无法将其减小。</li>
<li>无法压缩根文件系统（<span class="bold">/</span> ）。</li>
<li>一些 <span class="bold">nbpi</span> 值和分配组大小是互斥的。请参阅“Understanding JFS Size Limitations”以获取信息。</li>
</ol>
<p>以下命令是“增强的日志文件系统”（JFS2）专用的：</p>
<a name="wq1588"></a>
<table id="wq1588" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="27%"><span class="bold">-o agblksize={ 512 | 1024 | 2048 | 4096 }</span></td>
<td width="72%">以字节为单位指定 JFS2 块大小。文件系统块是可分配到文件上的磁盘存储的最小单元。缺省的块大小是 4096 字节。</td>
</tr>
<tr>
<td><span class="bold">-o name=</span><span class="italic">mountpoint</span></td>
<td>为文件系统指定安装点。</td>
</tr>
<tr>
<td><span class="bold">-o log=</span><span class="italic">LVName</span></td>
<td>指定日志逻辑卷名称。指定的逻辑卷是新的 JFS2 的记录设备。</td>
</tr>
<tr>
<td><span class="bold">-o log=INLINE</span></td>
<td>
<p>指定将日志放置到带有 JFS2 文件系统的逻辑卷中。如果没有指定日志文件的大小，那么 <span class="bold">INLINE</span> 日志将缺省为逻辑卷大小的 .4%。</p></td>
</tr>
<tr>
<td><span class="bold">-o logsize=</span><span class="italic">Value</span></td>
<td>以兆字节为单位指定 <span class="bold">INLINE</span> 日志的大小。如果没有使用 <span class="bold">INLINE</span> 日志，则将其忽略。不可大于文件系统大小的 10%。</td>
</tr>
</tbody>
</table>
<a name="wq1589"></a>
<div class="notetitle" id="wq1589">注:</div>
<div class="notebody"><span class="bold">agblksize</span> 属性在创建文件系统时设置，不能在成功创建文件系统后更改。<span class="bold">size</span> 属性定义了文件系统大小的最小值，并且在创建文件系统之后无法将其减小。</div>
<a name="wq1590"></a>
<table id="wq1590" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="20%">
<a id="a1019298d" name="a1019298d"></a><span class="bold">-p</span>  <span class="italic">Prototype</span></td>
<td width="80%">指定原型文件的名称。命令行上指定的项覆盖了原型文件中的属性。</td>
</tr>
<tr>
<td>
<a id="a1019298e" name="a1019298e"></a><span class="bold">-s</span><span class="italic"> Size</span></td>
<td>指定文件系统的大小。大小可以用 512 字节块、兆字节（使用后缀 M）和千兆字节（使用后缀 G）单元定义。请参阅<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/admnconc/fs_types.htm#jfs_under">“Understanding JFS Size Limitations”</a>以获取更多信息。</td>
</tr>
</tbody>
</table>
<a name="wq1591"></a>
<div class="notelisttitle" id="wq1591">注:</div>
<ol type="1">
<li>文件系统所驻留的卷组定义了一个逻辑卷大小的最大值，并且也限制了文件系统大小。</li>
<li><span class="bold">-s</span><span class="italic"> Size</span> 标志指定了文件大小的最小值，并且在成功创建文件系统之后无法减小。</li>
</ol>
<a name="wq1593"></a>
<table id="wq1593" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a1019298f" name="a1019298f"></a><span class="bold">-v</span>  <span class="italic">VolumeLabel</span></td>
<td width="76%">指定新的文件系统的卷标号。</td>
</tr>
<tr>
<td>
<a id="a145986" name="a145986"></a><span class="bold">-V</span>  <span class="italic">VfsName</span></td>
<td>指定虚拟文件系统（VFS）类型。 VFS 必须在 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/vfs.htm#a12491ed"><span class="bold">/etc/vfs</span></a> 文件中有一项。</td>
</tr>
</tbody>
</table>
<a name="a10192991"></a>
<h3 id="a10192991">示例</h3>
<ol type="1">
<li>要为新的文件系统指定卷和文件系统名称，请输入：
<pre class="xmp">mkfs  -lworks  -vvol001 /dev/hd3</pre> 此命令在 <tt>/dev/hd3</tt> 设备上创建了一个空的文件系统，将卷序列号设为 <tt>vol001</tt>，文件系统名为 <tt>works</tt>。新的文件系统占用了整个设备。文件系统具有缺省分段大小（4096 字节）和缺省 nbpi 比率（4096）。</li>
<li>要用非缺省属性创建一个文件系统，请输入：
<pre class="xmp">mkfs  -s 8192  <a href="mkfs.htm#a145985">-o</a> nbpi=2048,frag=512 /dev/lv01</pre> 此命令在 <tt>/dev/lv01</tt> 设备上创建一个空的 4MB 的文件系统，其分段大小为 512 字节，且每 2048 个字节为一个 i-node。</li>
<li>要创建一个启用大文件的文件系统，请输入：
<p></p>
<pre class="xmp">mkfs -V jfs -o nbpi=131072,bf=true,ag=64 /dev/lv01</pre><p class="indatacontent"> 它创建了一个启用磁盘大文件的 JFS 文件系统，并且分配组大小为 64 兆字节，磁盘的每 131072 字节为一个 inode。文件系统的大小将成为逻辑卷 lv01 的大小。</p></li>
<li>要用非缺省属性创建一个文件系统，请输入：
<pre class="xmp">mkfs -s 4M -o nbpi=2048, frag=512 /dev/lv01
</pre>此命令在 <span class="bold">/dev/lv01</span> 设备上创建一个空的 4MB 的文件系统，其分段大小为 512 字节，且每 2048 字节为一个 i-node。</li></ol>
<a name="a1019299a"></a>
<h3 id="a1019299a">文件</h3>
<p></p>
<a name="wq1595"></a>
<table id="wq1595" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="26%">
<a id="a60f014" name="a60f014"></a><span class="bold">/etc/vfs</span></td>
<td width="73%">  包含虚拟文件系统类型的描述。</td>
</tr>
<tr>
<td>
<a id="a60f015" name="a60f015"></a><span class="bold">/etc/filesystems</span></td>
<td>  列出已知的文件系统并定义它们的特性。</td>
</tr>
</tbody>
</table>
<a name="a1019299d"></a>
<h3 id="a1019299d">相关信息</h3>
<a name="e356243716mart"></a>
<p id="e356243716mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds2/fsck.htm#a10192c87"><span class="bold">fsck</span></a> 命令、<a href="mkproto.htm#a1539be7"><span class="bold">mkproto</span></a> 命令和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/proto.htm#a1049a11"><span class="bold">proto</span></a> 命令。</p>
<a name="e356243862mart"></a>
<p id="e356243862mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/libs/basetrf1/ioctl32.htm"><span class="bold">ioctl</span></a> 子例程。</p>
<a name="e356244012mart"></a>
<p id="e356244012mart"><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/dir.htm#a12492e"><span class="bold">dir</span></a> 文件、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/filesystems.htm#a1249cf"><span class="bold">filesystems</span></a> 文件和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/filsys.h.htm#a1249138"><span class="bold">filsys.h</span></a> 文件。</p>
<a name="e356244162mart"></a>
<p id="e356244162mart"><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/admnconc/file_sys.htm">File Systems</a>。</p>
<a name="a0476f27080mart"></a>
<p id="a0476f27080mart"><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/admnconc/fs_types.htm#jfs_under">Understanding JFS Size Limitations</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="mkfs.htm#Top_Of_Page">页的顶部</a> | <a href="mkfontdir.htm">上一页</a> | <a href="mkgroup.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
