<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - lpq 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="lpq 命令, 使用 lpq 命令, 检查, 假脱机队列" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="lpq.htm#Bot_Of_Page">页的底部</a> | <a href="lppmgr.htm">上一页</a> | <a href="lpr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="a200964e"></a>
<h2 id="a200964e">lpq 命令</h2>
<p><a id="idx344" name="idx344"></a> <a id="idx345" name="idx345"></a></p>
<p><span class="bold">lpq</span> 命令包含有关 AIX 打印子系统 <a href="lpq.htm#lpqppc"><span class="bold">lpq</span></a> 和 System V 打印子系统 <a href="lpq.htm#lpqia64"><span class="bold">lpq</span> 的信息</a>。</p>
<a name="lpqppc"></a>
<p id="lpqppc"><span class="bold">AIX 打印子系统 lpq 命令</span></p>
<a name="a2009650"></a>
<h3 id="a2009650">用途</h3>
<a name="fd32018965endr"></a>
<p id="fd32018965endr">检查假脱机队列。</p>
<a name="a2009652"></a>
<h3 id="a2009652">语法</h3>
<p><span class="bold">lpq</span>  [   <a href="lpq.htm#a2009658"><span class="bold">+</span></a> [  <span class="italic">Number</span>  ]  ]  [   <a href="lpq.htm#a2009657"><span class="bold">-l  </span></a> |   <a href="lpq.htm#a2009mike657"><span class="bold">-W  </span></a>]  [ <a href="lpq.htm#dafvi2cbjoy"><span class="bold">-P</span></a><span class="italic">  Printer</span>  ]  [  <span class="italic">JobNumber</span>  ]
[  <span class="italic">UserName</span>  ]</p>
<a name="a2009654"></a>
<h3 id="a2009654">描述</h3>
<a name="fd32019155endr"></a>
<p id="fd32019155endr"><span class="bold">lpq</span> 命令报告了与指定的
 <span class="italic">UserName</span> 和 <span class="italic"> JobNumber</span> 变量有关的指定作业或所有作业的状态。<span class="italic">JobNumber</span> 变量指定了用户想查看的假脱机队列中的作业数。<span class="italic">UserName</span> 变量指定了将查看其所有作业的用户名，该用户将作业提交到队列。</p>
<a name="fd32019214endr"></a>
<p id="fd32019214endr"><span class="bold">lpq</span> 命令在不带任何选项调用时报告缺省队列里的任何当前作业。
如果所提供的参数没有被识别为参数，则会被解释成用户名或作业编号，以只筛选出感兴趣的作业。</p>
<a name="fd32019274endr"></a>
<p id="fd32019274endr">对于每个已提交的作业（即每个被 <a href="lpr.htm#a20093c"><span class="bold">lpr</span></a> 命令调用的作业），<span class="bold">lpq</span> 命令报告了用户名、在队列中的当前级别、作业名称、作业标识符（一个编号，可以提供给 <a href="lprm.htm#a2009603"><span class="bold">lprm</span></a> 命令以删除指定作业）以及整个区块的大小。通常，只显示一行长度的信息。作业排序取决于扫描假脱机目录的算法，假定为 FIFO（先进先出）。
构成作业的文件名可能不可用（当 <span class="bold">lpr</span> 命令用作象管道里的汇集点时）。这种情况下，文件可以指定为 <span class="bold">-</span>（标准输入）。</p>
<a name="fd32019334endr"></a>
<p id="fd32019334endr"><span class="bold">lpq</span> 命令生成的显示包含两个远程队列的条目。第一个条目包含客户机的本地队列、本地设备名以及其状态信息。第二个条目紧接着第一个；它（重复）包含客户机的本地队列名，后跟远程队列名。所有提交到远程队列的作业首先显示在本地，然后移送到远程设备，因为作业在远程机器处理。</p>
<a name="fd32019394endr"></a>
<p id="fd32019394endr">由于状态命令与远程机器通信，所以在等待远程机器响应时，状态显示偶尔可能会出现挂起。如果两台机器间的连接无法建立，命令最终将超时。</p>
<a name="a2009656"></a>
<h3 id="a2009656">标志</h3>
<p></p>
<a name="wq749"></a>
<table id="wq749" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="23%">
<a id="a2009657" name="a2009657"></a><span class="bold">-l</span></td>
<td width="76%">  生成长输出格式。</td>
</tr>
<tr>
<td>
<a id="a2009658" name="a2009658"></a><span class="bold">+</span> [  <span class="italic">Number</span>  ]</td>
<td>  显示假脱机队列直到其为空。<span class="italic">Number</span> 变量以秒表示重新生成显示前的时间。</td>
</tr>
<tr>
<td>
<a id="dafvi2cbjoy" name="dafvi2cbjoy"></a><span class="bold">-P</span><span class="italic"> Printer</span></td>
<td>  显示 <span class="italic">Printer</span> 变量指定的打印机的假脱机队列。
<p></p><blockquote><span class="bold">注：</span> 任何目标命令行选项都覆盖 <span class="bold">LPDEST</span> 和 <span class="bold">PRINTER</span> 环境变量。</blockquote></td>
</tr>
<tr>
<td>
<a id="a2009mike657" name="a2009mike657"></a><span class="bold">-W</span></td>
<td> 用更长的队列名、设备名和作业编号显示状态信息的全面版本。更长的作业编号信息在 AIX 4.3.2 和更新版本中都是可用的。该标志不能和 -l 标志一起使用。如果同时使用了 -l 标志和 -W 标志，指定的第一个标志优先。</td>
</tr>
</tbody>
</table>
<a name="a200965a"></a>
<h3 id="a200965a">示例</h3>
<p><a name="fd32019642endr"></a><span id="fd32019642endr" class="pk"></span></p>
<ol type="1">
<li>要显示 <tt>lp0</tt> 打印队列里的一个作业编号，请输入：
<div class="lines"><tt>lpq&nbsp;&nbsp;<a href="lpq.htm#dafvi2cbjoy">-P</a> lp0</tt><br />
</div> 
<a name="fd32019724endr"></a>
<p id="fd32019724endr">此命令显示类似以下列表：</p> 
<p></p>
<pre class="xmp">队列      Dev      状态    作业     文件     用户     PP    %      Blks    CP    Rnk
lp0       dlp0   正在运行   39      motd     guest    10    83      12      1     1</pre></li>
<li>要显示 AIX 4.3.2 或更新版本缺省队列状态的全面格式，请输入：
<div class="lines"><tt>lpq&nbsp;&nbsp;<a href="lpq.htm#a2009mike657">-W</a></tt><br />
</div></li></ol>
<a name="a2009666"></a>
<h3 id="a2009666">文件</h3>
<p></p>
<a name="wq751"></a>
<table id="wq751" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="35%">
<a id="a2009668" name="a2009668"></a><span class="bold">/usr/bin/lpq</span></td>
<td width="65%">  包含 <span class="bold">lpq</span> 命令。</td>
</tr>
<tr>
<td>
<a id="a2009646" name="a2009646"></a><span class="bold">/usr/sbin/</span><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/qdaemon.htm#w4220joyc"><span class="bold">qdaemon</span></a><span class="bold"></span></td>
<td>  包含排队守护进程。</td>
</tr>
<tr>
<td>
<a id="a17p0f3" name="a17p0f3"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/qconfig.htm#a33194f1"><span class="bold">/etc/qconfig</span></a></td>
<td>  包含队列配置文件。</td>
</tr>
<tr>
<td>
<a id="a17p0f4" name="a17p0f4"></a><span class="bold">/etc/qconfig.bin</span></td>
<td>  包含 <span class="bold">/etc/qconfig</span> 文件的二进制摘要版本。</td>
</tr>
<tr>
<td>
<a id="a17p0f5" name="a17p0f5"></a><span class="bold">/var/spool/lpd/qdir/*</span></td>
<td>  包含队列请求。</td>
</tr>
<tr>
<td>
<a id="a17p0f6" name="a17p0f6"></a><span class="bold">/var/spool/lpd/stat/*</span></td>
<td>  包含设备状态信息。</td>
</tr>
<tr>
<td>
<a id="a2009647" name="a2009647"></a><span class="bold">/var/spool/qdaemon/*</span></td>
<td>  包含被排队文件的临时副本。</td>
</tr>
</tbody>
</table>
<a name="a2009669"></a>
<h3 id="a2009669">相关信息</h3>
<a name="fd3201a204endr"></a>
<p id="fd3201a204endr"><a href="lpr.htm#a20093c"><span class="bold">lpr</span></a> 命令、<a href="lprm.htm#a2009603"><span class="bold">lprm</span></a> 命令、<a href="lpstat.htm#a9v4230roll"><span class="bold">lpstat</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/qchk.htm#a226997f"><span class="bold">qchk</span></a> 命令。</p>
<a name="fd3201a259endr"></a>
<p id="fd3201a259endr"><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/qconfig.htm#a33194f1"><span class="bold">qconfig</span></a> 文件。</p>
<a name="fd3201a346endr"></a>
<p id="fd3201a346endr">在<span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixuser/usrosdev/check_print_job.htm#a01bbf5791kath">『检查打印作业状态』</a>。</p>
<a name="fd3201a405endr"></a>
<p id="fd3201a405endr">在<span class="italic">《AIX 5L V5.2 系统用户指南：操作系统与设备》</span>中的<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixuser/usrosdev/printers_prtjobs_queues.htm#a350p918c">『打印机、打印作业和队列』</a>。</p>
<a name="fd3201a462endr"></a>
<p id="fd3201a462endr">在 <span class="italic">AIX 5L Version 5.2 Guide to Printers and Printing</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/printrgd/spooler_overview.htm#a350p928a">Spooler Overview for System Management</a>。</p>
<a name="lpqia64"></a>
<p id="lpqia64"><span class="bold">System V 打印子系统 lpq 命令</span></p>
<a name="wq752"></a>
<h3 id="wq752">用途</h3>
<p>（BSD）显示打印机作业队列</p>
<a name="wq753"></a>
<h3 id="wq753">语法</h3>
<p> <span class="bold">/usr/bin/lpq</span> [<span class="bold">-P</span><span class="italic">printer</span>]  [-l] [+ [<span class="italic">interval</span>] ] [<span class="italic">job#</span> ... ] [<span class="italic">username</span> ... ]</p>
<a name="wq754"></a>
<h3 id="wq754">描述</h3>
<p><span class="bold">lpq</span> 命令显示打印机队列的内容。它报告由 <span class="italic">job#</span> 指定的作业的状态，或者报告由 <span class="italic">username</span> 指定的用户的所有作业的状态。<span class="bold">lpq</span> 无参数调用时报告默认打印机队列里的所有作业。</p>
<p>对于队列里的每个打印作业，<span class="bold">lpq</span> 报告用户名、当前位置、组成作业的输入文件名、作业编号（使用 <a href="lprm.htm#a2009603"><span class="bold">lprm</span></a> 命令时调用）以及总计字节数。通常，只显示一行长度的信息。通常作业按先进先出的原则排队。组成一个作业的文件名可能不可用，比如当在管道末端使用 <span class="bold">lpr</span>；在此情况下文件名字段表示标准输入。</p>
<p>如果 <span class="bold">lpq</span> 警告当前没有守护进程（即，由于一些故障），<a href="lpc.htm#i053002js"><span class="bold">lpc</span></a> 命令可以用来重新启动打印机守护进程。</p>
<p>输出格式化过程对最终行的长度敏感，这可能导致较大的列间距。</p>
<a name="wq755"></a>
<h3 id="wq755">标志</h3>
<dl>
<dt class="bold"><span class="bold">-P</span><span class="italic"> printer</span></dt>
<dd>显示 <span class="italic">printer</span> 指定的队列的有关信息。当没有 <span class="bold">-P</span> 标志时，使用由环境里 <span class="bold">PRINTER</span> 变量指定的打印机的队列。如果 <span class="bold">PRINTER</span> 变量未设置，使用默认打印机的队列。
</dd>
<dt class="bold"><span class="bold">-l</span></dt>
<dd>以长格式显示队列信息；包括产生作业的主机的名称。
</dd>
<dt class="bold"><span class="bold">+</span>[<span class="italic">interval</span> ]</dt>
<dd>定时显示假脱机队列直到其为空。此选项在作队列报告之前清除终端屏幕。如果提供了 <span class="italic">interval</span>，<span class="bold">lpq</span> 在每次报告之间休眠此数目的秒数。
</dd>
</dl>
<a name="wq756"></a>
<h3 id="wq756">文件</h3>
<dl>
<dt class="bold"><span class="bold">/var/spool/lp</span></dt>
<dd>假脱机目录。
</dd>
<dt class="bold"><span class="bold">/var/spool/lp/tmp/</span><span class="italic">system_name</span><span class="italic">/*-0</span></dt>
<dd>请求指定作业的文件
</dd>
</dl>
<a name="wq757"></a>
<h3 id="wq757">错误代码</h3>
<dl>
<dt class="bold"><tt>lpq：</tt><span class="italic">打印机</span><tt>正在打印</tt></dt>
<dd><span class="bold">lpq</span> 程序向假脱机程序 <span class="bold">LPSCHED</span> 查询打印机状态。如果打印机是禁用的，系统管理员可以用 <a href="lpc.htm#i053002js"><span class="bold">lpc</span></a> 重新启动假脱机程序。
</dd>
<dt class="bold"><tt>lpq：</tt><span class="italic">打印机</span><tt>正在等待自动重试（脱机？）</tt></dt>
<dd>守护进程无法打开打印机设备。打印机可能已脱机。在打印机纸张耗尽、纸张堵塞等情况下，这条消息也可能出现。另一个可能的原因是一个进程在使用时独占了设备，比如一个输出过滤程序。这种情况下只能求助于杀死产生问题的进程，并用 <span class="bold">lpc</span> 重新启动打印机。
</dd>
<dt class="bold"><tt>lpq：正在等待</tt> <span class="italic">host</span> <tt>启动</tt></dt>
<dd>守护进程正在尝试连接名为 <span class="italic">host</span> 的远程机器，以便发送本地队列里的文件。如果远程机器已启动，则远程机器上的 <span class="bold">lpd</span> 可能已经僵死或者挂起，应当使用 <span class="bold">lpc</span> 来重新启动。
</dd>
<dt class="bold"><tt>lpq：发送到 </tt><span class="italic">host</span></dt>
<dd>文件正在传送到远程 <span class="italic">host</span>，或者当试图传送文件时本地守护进程已挂起。
</dd>
<dt class="bold"><tt>lpq：打印机禁用原因：</tt></dt>
<dd>打印机已被 <span class="bold">lpc</span> 标记为不可用。
</dd>
<dt class="bold"><tt>lpq：LP 打印服务不在运行或不能到达。</tt></dt>
<dd>监视假脱机队列的 <span class="bold">lpsched</span> 进程不存在。可以使用 <span class="bold">lpc</span> 重新启动打印机守护进程。
</dd>
<dt class="bold"><tt>lpq：</tt><span class="italic">打印机</span><tt>：未知打印机</tt></dt>
<dd>在 System V 的 LP 数据库里未发现<span class="italic">打印机</span>。通常此为一个输入错误，可能表示打印机不在系统上。使用 <span class="bold">lpstat -p</span> 来查找原因。
</dd>
<dt class="bold"><tt>lpq：打开假脱机程序队列出错</tt></dt>
<dd>在本地机器上连接到 <span class="bold">lpsched</span> 失败。这通常表示引导时启动的打印机服务器已僵死或挂起。检查打印机假脱机程序守护进程 <span class="italic">/usr/lib/lp/lpsched</span> 是否在运行。
</dd>
<dt class="bold"><tt>lpq：不能发送消息到 LP 打印服务</tt></dt>
<dd>
</dd>
<dt class="bold"><tt>lpq：不能建立与 LP 打印服务的联系</tt></dt>
<dd>这些表示 LP 打印服务已停止。请从系统管理员处获取帮助。
</dd>
<dt class="bold"><tt>lpq：从 LP 打印服务接收到意外消息</tt></dt>
<dd>可能软件里有错误。请从系统管理员处获取帮助。
</dd>
</dl>
<a name="wq758"></a>
<h3 id="wq758">相关信息</h3>
<p><a href="lpc.htm#i053002js"><span class="bold">lpc</span></a> 命令、<a href="lpr.htm#a20093c"><span class="bold">lpr</span></a> 命令和 <a href="lprm.htm#a2009603"><span class="bold">lprm</span></a>  命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="lpq.htm#Top_Of_Page">页的顶部</a> | <a href="lppmgr.htm">上一页</a> | <a href="lpr.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
