<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - inusave 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="描述, inusave 命令, 保存文件在, 安装过程,
保存已改变的文件, 过程, 更新" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="inusave.htm#Bot_Of_Page">页的底部</a> | <a href="inurid.htm">上一页</a> | <a href="inutoc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="a22393cb"></a>
<h2 id="a22393cb">inusave 命令</h2>
<p><a id="idx77" name="idx77"></a></p>
<a name="a22393ce"></a>
<h3 id="a22393ce">用途</h3>
<a name="e58f260241mart"></a>
<p id="e58f260241mart">保存那些在安装过程中已安装的或更新的文件。这个命令由 <a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令和安装脚本来使用。</p><a id="idx78" name="idx78"></a>
<p><a id="idx79" name="idx79"></a></p>
<a name="a22393d0"></a>
<h3 id="a22393d0">语法</h3>
<p><span class="bold">inusave</span>  <a href="inusave.htm#a22393b8"><span class="italic">ListFile</span></a> <a href="inusave.htm#a116f12ea"><span class="italic">ProductName</span></a></p>
<a name="a22393d3"></a>
<h3 id="a22393d3">描述</h3>
<a name="e58f260606mart"></a>
<p id="e58f260606mart"><span class="bold">inusave</span> 命令保存那些由 <span class="italic">ListFile</span> 参数为 <span class="italic">ProductName</span> 软件产品指定的文件中的文件和归档文件。<span class="bold">inusave</span> 命令旨在和 <a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令一起使用。</p>
<a name="e58f260896mart"></a>
<p id="e58f260896mart">The <span class="bold">inusave</span> 命令创建 <span class="bold">/usr/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span> 目录，
如果它还不存在的话，其中 <span class="italic">Level</span> 有
<span class="italic">vv.rr.mmmm.ffff</span> 和 <span class="italic">vv</span> =
版本、<span class="italic">rr</span> = 发行版、<span class="italic">mmmm</span> = 修改 和 <span class="italic">ffff</span> = 补丁。这就是安装过程存储保存文件的目录。该保存目录由 <span class="bold">INUSAVEDIR</span> 环境变量定义。</p>
<a name="e58f260991mart"></a>
<p id="e58f260991mart">安装的 / (root)、<span class="bold">/usr</span> 和 <span class="bold">/usr/share</span> 部分的保存目录分别是：</p>
<ul>
<li><a name="e58f261086mart"></a><span id="e58f261086mart" class="pk"></span><span class="bold">/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span>、</li>
<li><a name="e58f261183mart"></a><span id="e58f261183mart" class="pk"></span><span class="bold">/usr/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span> 和</li>
<li><a name="e58f261278mart"></a><span id="e58f261278mart" class="pk"></span><span class="bold">/usr/share/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span></li></ul>
<a name="e58f261376mart"></a>
<p id="e58f261376mart">，前提是它们是由 <a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令设置的。<span class="bold">installp</span> 命令为这三个目录的每一个都调用 <span class="bold">inusave</span>。<span class="italic">ListFile</span> 参数是文件的全路径名，这些文件列出了如果当前拷贝存在时需要保存的文件。</p>
<a name="e58f261473mart"></a>
<p id="e58f261473mart">如果在 <span class="italic">ListFile</span> 中指定的文件已经存在，<span class="bold">inusave</span> 命令把那个文件复制到 <span class="bold">$INUSAVEDIR/update</span><span class="italic">.n</span> 文件，其中 <span class="italic">n</span> 是一个由 <span class="bold">inusave</span> 命令分配的整数。如果文件不存在，<span class="bold"> inusave</span> 命令就假定在 <span class="italic">ListFile</span> 参数中的这项代表一个新文件或者一个由归档程序处理的文件，这将在本节的稍后部分介绍。</p>
<a name="e58f261570mart"></a>
<p id="e58f261570mart"><span class="bold">inusave</span> 命令维护 <span class="bold">$INUSAVEDIR/update.list</span> 文件中的保存文件列表。这个文件是一个对于每个保存文件都有一项的节文件。在 <span class="bold">update.list</span> 文件中的项类似于以下内容：</p>
<p></p>
<a name="a22393c5"></a>
<pre id="a22393c5" class="xmp">/usr/bin/chkey:
         update.n = update.1
         option = bosnet.nfs.obj
         _id = 209
         _reserved = 0
         _scratch = 0
         lpp_id = 72
         private = 0
         file_type = 0
         format = 1
         loc0 = /usr/bin/chkey
         size = 7800
         checksum = 44561
   
/usr/bin/domainname:
         update.n = update.2
         option = bosnet.nfs.obj
         _id = 210
         _reserved = 0
         _scratch = 0
         lpp_id = 72
         private = 0
         file_type = 0
         format = 1
         loc0 = /usr/bin/domainname
         size = 2526
         checksum = 12439</pre>
<a name="e58f261813mart"></a>
<p id="e58f261813mart">在前面的例子中，<span class="bold">/usr/bin/chkey</span>（节的名称）是保存的原始文件的名称，
<span class="bold">update.1</span> 是 <span class="bold">$INUSAVEDIR</span> 目录下的文件的名称，而文件都是复制到这个目录下。文件 <span class="bold">/usr/bin/chkey</span> 属于软件产品 <span class="bold">bosnet</span> 的 <span class="bold">bosnet.nfs.obj</span> 可安装选项。节文件中的节名和的前两项（update.n 和 option）为 <span class="bold">update.list</span> 文件中的每个节而存在。节中的剩余项（也许会变化）是来自“软件重要产品数据”（SWVPD）数据库的信息。</p>
<a name="e58f261911mart"></a>
<p id="e58f261911mart">如果在当前目录下存在有效的归档控制文件 <span class="bold">lpp.acf</span>，那么归档组成文件就会被保存。 如果 <span class="bold">lpp.acf</span> 文件存在，<span class="bold">inusave</span> 命令会把 <span class="italic">ListFile</span> 中的每个文件名和 <span class="bold">lpp.acf</span> 中的组成文件名相比较。当查找到一个匹配时，<span class="bold">inusave</span> 命令使用 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds1/ar.htm#a0949a5b"><span class="bold">ar</span></a> 命令以从它的相关归档文件中解压缩组成文件。然后它会把文件移动到 <span class="bold">$INUSAVEDIR/archive</span><span class="italic">.n</span>文件中，其中 <span class="italic">n</span> 是由<span class="bold"> inusave</span> 命令选定的一个整数。</p>
<a name="e58f262010mart"></a>
<p id="e58f262010mart"><span class="bold">inusave</span> 命令维护那些保存在 <span class="bold"> $INUSAVEDIR/archive.list</span> 文件中的解压缩文件列表。这个文件是一个对于每个保存的组成文件都有对应项的节文件。在 <span class="bold">archive.list </span> 文件中的项类似于以下内容：</p>
<p></p>
<a name="a176f1198"></a>
<pre id="a176f1198" class="xmp">/prodx.filea:
        archive.n = archive.1
        arc_name = /usr/lib/productx/libprodx.a
        option = productx.option1.obj
        _id = 833
        _reserved = 0
        _scratch = 0
        lpp_id = 7
        private = 0
        file_type = 0
        format = 1
        loc0 = /prodx.filea
        loc1 = "h11,h12"
        loc2 =
"/usr/lpp/productx.filea/s11,/usr/lpp/productx.filea/s12"
        size = 1611
        checksum = 62793</pre>
<a name="e58f262186mart"></a>
<p id="e58f262186mart">在前面的例子中 <span class="bold">/prodx.filea </span>（节的名称）是保存的原始组成文件的名称，<span class="bold">archive.1</span> 是它要复制到的 <span class="bold">$INUSAVEDIR</span> 目录中的文件名称，而文件都是复制到这个目录下。<span class="bold">/usr/lib/productx/libprodx.a</span> 是 <span class="bold">lpp.acf</span> 归档控制文件中定义的归档文件的全路径名。组成文件 <span class="bold">/prodx.filea</span> 属于软件产品 <span class="bold">productx</span> 的 <span class="bold">productx.option1.obj</span> 可安装选项。节名和节中的前三项（archive.n、arc_name、和 option）为 <span class="bold">archive.list</span> 文件中的每个节而存在。节中的剩余项（也许会改变）是来自 SWVPD 数据库的信息。</p>
<a name="a22393c7"></a>
<h3 id="a22393c7">参数</h3>
<p></p>
<a name="wq197"></a>
<table id="wq197" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="18%">
<a id="a22393b8" name="a22393b8"></a><span class="italic">ListFile</span></td>
<td width="81%">  指定文件的全路径名，它包含了要保存的文件的相对路径名的列表，每行一个。</td>
</tr>
<tr>
<td>
<a id="a116f12ea" name="a116f12ea"></a><span class="italic">ProductName</span></td>
<td>  指定可安装的软件产品，它们的文件将被保存。</td>
</tr>
</tbody>
</table>
<a name="a176f1199"></a>
<h4 id="a176f1199">环境变量</h4>
<p></p>
<a name="wq198"></a>
<table id="wq198" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="a176f119d" name="a176f119d"></a><span class="bold">INUEXPAND</span></td>
<td width="83%">  如果要扩展文件系统并且有必要进行保存（也就是说，<span class="bold">-X</span> 标志会传递给<span class="bold">installp</span>），<a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令将会把该标志设为 1。如果不需要扩展文件系统，该标志就设为0。如果没有设置该环境变量，缺省值是不扩展文件系统。</td>
</tr>
<tr>
<td>
<a id="a176f119a" name="a176f119a"></a><span class="bold">INUSAVE</span></td>
<td>  <a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令将会把该标志设为 1，如果要保存文件（也就是说，<span class="bold"> -N</span> 标志被传递给 <span class="bold">installp</span>）。如果不保存文件就设为 0。如果没有设置该环境变量，缺省值是保存文件。</td>
</tr>
<tr>
<td>
<a id="a176f119b" name="a176f119b"></a><span class="bold">INUSAVEDIR</span></td>
<td>  文件要保存的目录的全路径名。如果没有设置该环境变量，那么使用的目录就是 <span class="bold">/usr/lpp/</span><span class="italic">ProductName</span><span class="bold">/inst_updt.save</span>。</td>
</tr>
<tr>
<td>
<a id="a176f119c" name="a176f119c"></a><span class="bold">INUTEMPDIR</span></td>
<td>  该目录用于该命令执行期间所需的临时空间。如果没有设置该环境变量，那么使用的目录就是 <span class="bold">/tmp</span>。</td>
</tr>
</tbody>
</table>
<a name="a157f1c5"></a>
<h3 id="a157f1c5">错误代码</h3>
<a name="e58f262905mart"></a>
<p id="e58f262905mart">下面的错误代码都是定义在 <span class="bold"> /usr/include/inuerr.h</span>：</p>
<a name="wq199"></a>
<table id="wq199" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="13%">
<a id="a157f1c7" name="a157f1c7"></a><span class="bold">INUBADSC</span></td>
<td width="86%">  不能创建保存目录。</td>
</tr>
<tr>
<td>
<a id="a157f1c8" name="a157f1c8"></a><span class="bold">INUBADC2</span></td>
<td>  文件不能从一个目录复制到另外一个目录。</td>
</tr>
<tr>
<td>
<a id="a157f1c6" name="a157f1c6"></a><span class="bold">INUGOOD</span></td>
<td>  没有出现出错条件。</td>
</tr>
<tr>
<td>
<a id="a157f1cb" name="a157f1cb"></a><span class="bold">INUNOAP1</span></td>
<td>  不能访问 <span class="italic">ListFile</span>。</td>
</tr>
<tr>
<td>
<a id="a157f1c9" name="a157f1c9"></a><span class="bold">INUTOOFW</span></td>
<td>  遗漏一个或多个参数。</td>
</tr>
<tr>
<td>
<a id="a157f1ca" name="a157f1ca"></a><span class="bold">INUTOOMN</span></td>
<td>  指定的参数过多。</td>
</tr>
</tbody>
</table>
<a name="a176f119e"></a>
<h3 id="a176f119e">安全性</h3>
<a name="e58f263484mart"></a>
<p id="e58f263484mart">权限控制：只有 root 用户才能执行该命令。</p>
<a name="a22393dc"></a>
<h3 id="a22393dc">示例</h3>
<a name="e58f263638mart"></a>
<p id="e58f263638mart">要保存列在 <span class="bold">snaserv</span> 程序的<span class="bold"> snaserv.al</span> 文件中的所有文件，请输入：</p>
<p></p>
<a name="a22393de"></a>
<pre id="a22393de" class="xmp">inusave /usr/lpp/snaserv/snaserv.al snaserv</pre>
<a name="a22393ed"></a>
<h3 id="a22393ed">文件</h3>
<dl>
<dt id="a22393a3" class="bold">
<a name="a22393a3"></a><span class="bold">/usr/lpp/</span><span class="italic">PackageName</span><span class="bold">/lpp.acf</span></dt>
<dd>  指定归档控制文件。
</dd>
<dt id="a116f12eb" class="bold">
<a name="a116f12eb"></a><span class="bold">/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span></dt>
<dd>  指定根的保存目录。
</dd>
<dt id="a116f12ec" class="bold">
<a name="a116f12ec"></a><span class="bold">/usr/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span></dt>
<dd>  指定 <span class="bold">/usr</span> 文件的保存目录。
</dd>
<dt id="a22393a4" class="bold">
<a name="a22393a4"></a><span class="bold">/usr/share/lpp/</span><span class="italic">PackageName</span><span class="bold">/</span><span class="italic">FilesetName</span><span class="bold">/V.R.M.F.save</span></dt>
<dd>  指定 <span class="bold">/usr/share</span> 文件的保存目录。
</dd>
</dl>
<a name="a30f1e"></a>
<h3 id="a30f1e">相关信息</h3>
<a name="e58f264769mart"></a>
<p id="e58f264769mart"><a href="installp.htm#a1539ad6"><span class="bold">installp</span></a> 命令、<a href="inurecv.htm#a22392ca"><span class="bold">inurecv</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="inusave.htm#Top_Of_Page">页的顶部</a> | <a href="inurid.htm">上一页</a> | <a href="inutoc.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
