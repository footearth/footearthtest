<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - mkboot 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="mkboot 命令, mkboot, 命令, 使用 mkboot 命令,
引导映像、引导记录和服务记录, 创建, 引导映像, 引导记录, 构造 mkboot 命令,
服务记录" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="mkboot.htm#Bot_Of_Page">页的底部</a> | <a href="mk_nispasswdd.htm">上一页</a> | <a href="mkC2admin.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="a2789c1c"></a>
<h2 id="a2789c1c">mkboot 命令</h2>
<p><a id="idx559" name="idx559"></a><a id="idx560" name="idx560"></a></p>
<a name="a2789c1e"></a>
<h3 id="a2789c1e">用途</h3><a id="idx561" name="idx561"></a><a id="idx562" name="idx562"></a><a id="idx563" name="idx563"></a><a id="idx564" name="idx564"></a>
<a name="fd3296f675endr"></a>
<p id="fd3296f675endr">创建引导映像、引导记录和服务记录。
这条命令<span class="italic">不是</span>用户级命令，并在
AIX 4.2 或更新版本中不受支持。</p>
<a name="d6a1b50515bolt"></a>
<h3 id="d6a1b50515bolt">语法</h3>
<p><span class="bold">mkboot</span>  <a href="mkboot.htm#a2789c26"><span class="bold">-d</span></a> <span class="italic">Device</span> [  <a href="mkboot.htm#a175c1d40"><span class="bold">-b </span></a>] [  <a href="mkboot.htm#a61f0a8"><span class="bold">-D </span></a>] [  <a href="mkboot.htm#a175c1d41"><span class="bold">-c </span></a>] [  <a href="mkboot.htm#xbauia0kbar"><span class="bold">-h </span></a>]  [  <a href="mkboot.htm#a2789c28"><span class="bold">-i </span></a>] [  <a href="mkboot.htm#a61f0a9"><span class="bold">-I </span></a>] [  <a href="mkboot.htm#iw2340jvh"><span class="bold">-l </span></a><span class="italic">LVDev</span> ] {  <a href="mkboot.htm#a2789c29"><span class="bold">-k</span></a><span class="italic"> Kernel</span> |  <a href="mkboot.htm#a2789c27"><span class="bold">-e </span></a><span class="italic">Expander</span> } [ <a href="mkboot.htm#ifkqj31flynn"><span class="bold">-L</span></a>]  [  <a href="mkboot.htm#a2789c2b"><span class="bold">-s </span></a>]
[  <a href="mkboot.htm#ucaui337kbar"><span class="bold">-r </span></a>] [  <a href="mkboot.htm#qcaui313kbar"><span class="bold">-p</span></a><span class="italic"> Offset</span> ] [  <a href="mkboot.htm#hdaui34fkbar"><span class="bold">-w </span></a>]  <a href="mkboot.htm#p67210jvh"><span class="bold">-f </span></a><span class="italic">FileSystem</span></p>
<a name="a2789c23"></a>
<h3 id="a2789c23">描述</h3>
<a name="fd32970140endr"></a>
<p id="fd32970140endr"><span class="bold">mkboot</span> 命令将内核和文件系统结合到引导映像中。
把作为结果的映像写到标准输出中。将它与相应的引导记录信息复制到一个引导设备上。在映像的开始，可以带引导记录或不带引导记录创建压缩或非压缩的引导映像。为磁带创建的映像与映像文件的开始处的引导记录一起压缩。磁盘引导映像可以不用压缩而创建，也可以没有引导记录。将引导记录写到磁盘的第一个扇区中。记录包含关于映像被写到磁盘的引导逻辑卷之后的大小和位置信息。</p>
<a name="fd32970323endr"></a>
<p id="fd32970323endr">如果引导逻辑卷已镜像，那么 <span class="bold">mkboot</span> 命令不仅把引导映像写到引导逻辑卷的每一个副本上，而且把引导记录写到相应镜像的每一个物理磁盘上。只要 <span class="bold">mkboot</span> 命令能够更新镜像的引导一个逻辑卷的副本，就不会返回任何错误。要启用镜像的引导逻辑卷的每一个副本上的引导，必须用 <span class="bold">bootlist</span> 命令指定每个物理磁盘。关于镜像的逻辑卷的更多信息，请参阅 <span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/admnconc/logical_vol.htm">Logical Volume Storage Overview</a>。</p>
<a name="fd32970406endr"></a>
<p id="fd32970406endr"><span class="bold">mkboot</span> 命令通常由 <span class="bold">bosboot</span> 命令调用。然而，也可以再次运行 <span class="bold">mkboot</span> 命令来在压缩的引导映像的开始写入扩展代码。</p>
<a name="a2789c25"></a>
<h3 id="a2789c25">标志</h3>
<p></p>
<a name="wq1462"></a>
<table id="wq1462" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="36%">
<a id="a175c1d40" name="a175c1d40"></a><span class="bold">-b</span></td>
<td width="63%">  置零保存库字段。此标志是可选的。</td>
</tr>
<tr>
<td>
<a id="a2789c26" name="a2789c26"></a><span class="bold">-d</span><span class="italic"> Device</span></td>
<td>  指定用于 IPL 记录的设备。此标志为必要的。</td>
</tr>
<tr>
<td>
<a id="a175c1d41" name="a175c1d41"></a><span class="bold">-c</span></td>
<td>  设备上的置零引导记录。此标志是可选的。</td>
</tr>
<tr>
<td>
<a id="a61f0a8" name="a61f0a8"></a><span class="bold">-D</span></td>
<td>  在引导时装入低级调试器。</td>
</tr>
<tr>
<td>
<a id="a2789c27" name="a2789c27"></a><span class="bold">-e</span><span class="italic"> Expander</span></td>
<td>  指定内核扩展代码以创建压缩的引导映像文件。必须指定 <span class="bold">-e</span> 标志或 <span class="bold">-k</span> 标志。</td>
</tr>
<tr>
<td>
<a id="p67210jvh" name="p67210jvh"></a><span class="bold">-f</span><span class="italic"> FileSystem</span></td>
<td>  指定引导文件系统。此标志为必要的。</td>
</tr>
<tr>
<td>
<a id="xbauia0kbar" name="xbauia0kbar"></a><span class="bold">-h</span></td>
<td>  阻止 <span class="bold">mkboot</span> 命令更新引导头。此标志是可选的。</td>
</tr>
<tr>
<td>
<a id="a2789c28" name="a2789c28"></a><span class="bold">-i</span></td>
<td>  写入引导记录的正常部分。</td>
</tr>
<tr>
<td>
<a id="a61f0a9" name="a61f0a9"></a><span class="bold">-I</span>（大写 i）</td>
<td>  在引导时调用低级调试器。</td>
</tr>
<tr>
<td>
<a id="a2789c29" name="a2789c29"></a><span class="bold">-k</span><span class="italic"> Kernel</span></td>
<td>  指定引导映像的内核。必须指定 <span class="bold">-k</span> 标志或 <span class="bold">-e</span> 标志。</td>
</tr>
<tr>
<td>
<a id="iw2340jvh" name="iw2340jvh"></a><span class="bold">-l</span>（小写 L）<span class="italic"> LVDev</span></td>
<td>  指定包含可装入引导代码的逻辑卷设备。</td>
</tr>
<tr>
<td>
<a id="ifkqj31flynn" name="ifkqj31flynn"></a><span class="bold">-L</span></td>
<td>  为 MP 系统启用锁检测。这个标志对不使用 MP 内核的系统无效。</td>
</tr>
<tr>
<td>
<a id="qcaui313kbar" name="qcaui313kbar"></a><span class="bold">-p</span><span class="italic"> Offset</span></td>
<td>  在引导记录中指定用作 <tt>boot_pr_start</tt> 字段的地址。这个标志在创建 CD-ROM 引导映像中使用。此标志是可选的。</td>
</tr>
<tr>
<td>
<a id="ucaui337kbar" name="ucaui337kbar"></a><span class="bold">-r</span></td>
<td>  创建一个只读存储器（ROS）仿真代码的映像。</td>
</tr>
<tr>
<td>
<a id="a2789c2b" name="a2789c2b"></a><span class="bold">-s</span></td>
<td>  写入引导记录的服务部分。</td>
</tr>
<tr>
<td>
<a id="hdaui34fkbar" name="hdaui34fkbar"></a><span class="bold">-w</span></td>
<td>   在引导映像前输出引导逻辑卷的前两个块。此标志仅适用于磁盘引导映像。</td>
</tr>
</tbody>
</table>
<a name="a31794c1"></a>
<h3 id="a31794c1">安全性</h3>
<a name="fd32972250endr"></a>
<p id="fd32972250endr">访问控制：只有 root 用户才能读取和执行此命令。</p>
<a name="a2789c2c"></a>
<h3 id="a2789c2c">示例</h3>
<ol type="1">
<li><a name="d6a1b52169bolt"></a><span id="d6a1b52169bolt" class="pk"></span>要创建非压缩的引导映像，在设备 <span class="bold">/dev/hdisk0</span> 上使用内核 <span class="bold">/usr/lib/boot/unix</span> 和 <span class="bold">/tmp/bootfs</span> 文件系统，请输入

<p></p>
<pre class="xmp">mkboot -d /dev/hdisk0 -k /usr/lib/boot/unix -f /tmp/bootfs \
-b -i -s &gt; /tmp/boot.image</pre></li>
<li><a name="a175c1d43"></a><span id="a175c1d43" class="pk"></span>要清除磁盘 <span class="bold">hdisk0</span> 的引导记录但保留 PVID，请输入：
<p></p>
<pre class="xmp">mkboot -d /dev/hdisk0 -c</pre></li>
<li><a name="a175c1d3d"></a><span id="a175c1d3d" class="pk"></span>虽然 <span class="bold">mkboot</span> 命令结合内核和随机存取存储器（RAM）文件系统来创建一个引导映像，但可以再次运行 <span class="bold">mkboot</span> 命令以在一个压缩的引导映像的开始写入扩展代码。例如，输入：

<p></p>
<pre class="xmp">mkboot -b -d /dev/rmt0 -k unix -f ramfs | compress &gt; /tmp/image
mkboot -b -i -s -d /dev/rmt0 -k bootexpand -f /tmp/image \
&gt; bootfile</pre><p class="indatacontent"> 对于可引导的磁带，其中：</p>
<a name="wq1464"></a>
<table id="wq1464" width="90%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="16%">
<a id="a220c1700" name="a220c1700"></a><tt>unix</tt></td>
<td width="83%">  指定内核。</td>
</tr>
<tr>
<td>
<a id="a9e37a31948kirk" name="a9e37a31948kirk"></a><tt>ramfs</tt></td>
<td>  指定 RAM 磁盘文件系统。</td>
</tr>
<tr>
<td>
<a id="a9e37a32152kirk" name="a9e37a32152kirk"></a><tt>compress</tt></td>
<td>  指定压缩或压缩例程。</td>
</tr>
<tr>
<td>
<a id="a9e37a32363kirk" name="a9e37a32363kirk"></a><tt>bootexpand</tt></td>
<td>  指定扩充或内核非压缩例程。</td>
</tr>
</tbody>
</table></li></ol>
<a name="d6a1b53547bolt"></a>
<h3 id="d6a1b53547bolt">文件</h3>
<p></p>
<a name="wq1465"></a>
<table id="wq1465" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="48%">
<a id="d6a1b53653bolt" name="d6a1b53653bolt"></a><span class="bold">/usr/include/sys/bootrecord.h</span></td>
<td width="51%">  指定引导记录的结构。</td>
</tr>
</tbody>
</table>
<a name="a2789c37"></a>
<h3 id="a2789c37">相关信息</h3>
<a name="fd32974702endr"></a>
<p id="fd32974702endr"><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds1/bosboot.htm#a275977f"><span class="bold">bosboot</span></a> 命令和 <a href="locktrace.htm#bet9i14dthom"><span class="bold">lockstat</span></a> 命令。</p>
<a name="fd32974780endr"></a>
<p id="fd32974780endr"><span class="italic">AIX 5L Version 5.2 System Management Concepts: Operating System and Devices</span> 中的 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/admnconc/under_boot.htm#a42f23e6">Understanding the Boot Process</a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="mkboot.htm#Top_Of_Page">页的顶部</a> | <a href="mk_nispasswdd.htm">上一页</a> | <a href="mkC2admin.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
