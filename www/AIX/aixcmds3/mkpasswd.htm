<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - mkpasswd 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="mkpasswd 命令, 使用 mkpasswd 命令,
为搜索创建一个版本, 用户数据库" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="mkpasswd.htm#Bot_Of_Page">页的底部</a> | <a href="mknotify.htm">上一页</a> | <a href="mkpath.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>

<a name="a3069ab"></a>
<h2 id="a3069ab">mkpasswd 命令</h2>
<p><a id="idx653" name="idx653"></a> <a id="idx654" name="idx654"></a></p>
<a name="a3069ad"></a>
<h3 id="a3069ad">用途</h3>
<a name="f786378670mart"></a>
<p id="f786378670mart">为有效的搜索组织基础用户数据库。</p>
<a name="a3069af"></a>
<h3 id="a3069af">语法</h3>
<p><span class="bold">mkpasswd</span> [  <a href="mkpasswd.htm#a3069b4"><span class="bold">-v </span></a>] { <a href="mkpasswd.htm#i0813970929mkm"><span class="bold">-f</span></a> |
  <a href="mkpasswd.htm#i0813970931mkm"><span class="bold">-d</span></a> |   <a href="mkpasswd.htm#i0813970932mkm"><span class="bold">-c</span></a>} |<span class="italic">indexname</span></p>
<a name="a3069b1"></a>
<h3 id="a3069b1">描述</h3>
<a name="f786379039mart"></a>
<p id="f786379039mart"><span class="bold">mkpasswd</span> 在某些安全文件上生成索引。这些索引由 <span class="bold">getpwnam</span>、<span class="bold">getpwuid</span>、<span class="bold">getuserattr</span> 和 <span class="bold">putuserattr</span> 库子例程使用。</p>
<p>该方法显著地增强了大型用户基础系统的性能。创建了在 <span class="bold">/usr/include/usersec.h</span> 中定义的以下索引：</p>
<a name="wq1692"></a>
<table id="wq1692" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="32%"><span class="bold">/etc/passwd.nm.idx:</span></td>
<td width="67%">使用用户名作为关键字的 <span class="bold">/etc/passwd</span> 文件上的索引。</td>
</tr>
<tr>
<td><span class="bold">/etc/passwd.id.idx:</span></td>
<td>使用用户标识号作为关键字的 <span class="bold">/etc/passwd</span> 文件上的索引。</td>
</tr>
<tr>
<td><span class="bold">/etc/security/passwd.idx:</span></td>
<td><span class="bold">/etc/security/passwd</span> 文件上的索引。</td>
</tr>
<tr>
<td><span class="bold">/etc/security/lastlog.idx:</span></td>
<td><span class="bold">/etc/security/lastlog</span> 文件上的索引。</td>
</tr>
</tbody>
</table>
<p></p><blockquote><span class="bold">注：</span>
<ol type="1">
<li><a name="a115c1f92"></a><span id="a115c1f92" class="pk"></span>修改其上的索引由编辑器构建的安全文件将禁用索引机制。</li>
<li>如果数据文件上存在对应的索引并且不比该文件旧（除了最新的日志索引），将自动完成该数据文件的索引读取。</li>
<li>为了在登录时使用索引机制，<span class="bold">mkpasswd</span> 命令必须已生成了索引。</li>
<li>索引机制代替了原先使用 dbm 文件的散列法（hash）机制。</li></ol></blockquote>
<a name="a3069b3"></a>
<h3 id="a3069b3">标志</h3>
<p></p>
<a name="wq1694"></a>
<table id="wq1694" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="15%">
<a id="a3069b4" name="a3069b4"></a><span class="bold">-v</span></td>
<td width="85%">  如果构建了索引，则报告进程。</td>
</tr>
<tr>
<td>
<a id="i0813970929mkm" name="i0813970929mkm"></a><span class="bold">-f</span></td>
<td>强制构建所有索引。</td>
</tr>
<tr>
<td>
<a id="i0813970931mkm" name="i0813970931mkm"></a><span class="bold">-d</span></td>
<td>删除所有索引。</td>
</tr>
<tr>
<td>
<a id="i0813970932mkm" name="i0813970932mkm"></a><span class="bold">-c</span></td>
<td>检查所有索引并且重新构建那些看来可疑的索引。</td>
</tr>
<tr>
<td><span class="italic">indexname</span></td>
<td>强制构建某个特定的索引。</td>
</tr>
</tbody>
</table>
<a name="a3069b7"></a>
<h3 id="a3069b7">安全性</h3>
<a name="f786379594mart"></a>
<p id="f786379594mart">访问控制：只有 root 用户和安全组成员才应有该命令的执行（x）权限。该命令应该对 root 用户设置用户标识以便该命令可以访问用户数据库。安全组成员应该可以访问 <a href="mkpasswd.htm#ahn12461">Files</a> 区中的所有文件。该命令应该有<span class="bold">可信计算库</span>属性。</p>
<a name="f786379678mart"></a>
<p id="f786379678mart">访问的文件：</p>
<a name="wq1695"></a>
<table id="wq1695" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="6%"><span class="bold">方式</span></td>
<td width="93%"><span class="bold">文件</span></td>
</tr>
<tr>
<td>
<a id="a3069be" name="a3069be"></a><span class="bold">r</span></td>
<td>  <span class="bold">/etc/passwd</span></td>
</tr>
<tr>
<td>
<a id="a3099155" name="a3099155"></a><span class="bold">rw</span></td>
<td>  <span class="bold">/etc/passwd.nm.idx</span><span class="italic">nnnn</span><span class="bold">.tmp</span> and <span class="bold">/etc/passwd.id.idx</span><span class="italic">nnnn</span><span class="bold">.tmp</span>  
<p>其中 <span class="italic">nnnn</span> 是进程标识。</p></td>
</tr>
<tr>
<td>
<a id="a3069bemkm" name="a3069bemkm"></a><span class="bold">r</span></td>
<td>  <span class="bold">/etc/security/passwd</span></td>
</tr>
<tr>
<td>
<a id="a3099155mkm" name="a3099155mkm"></a><span class="bold">rw</span></td>
<td>  <span class="bold">/etc/security/passwd.idx</span></td>
</tr>
<tr>
<td>
<a id="a3099155mckm" name="a3099155mckm"></a><span class="bold">rw</span></td>
<td>  <span class="bold">/etc/security/passwd.idx</span><span class="italic">nnnn</span><span class="bold">.tmp</span> 
<p>其中 <span class="italic">nnnn</span> 是进程标识。</p></td>
</tr>
<tr>
<td>
<a id="a3069bemkmc" name="a3069bemkmc"></a><span class="bold">r</span></td>
<td>  <span class="bold">/etc/security/lastlog</span></td>
</tr>
<tr>
<td>
<a id="a3099155mkmc" name="a3099155mkmc"></a><span class="bold">rw</span></td>
<td>  <span class="bold">/etc/security/lastlog.idx</span></td>
</tr>
<tr>
<td>
<a id="a3099155mckmc" name="a3099155mckmc"></a><span class="bold">rw</span></td>
<td>  <span class="bold">/etc/security/lastlog.idx</span><span class="italic">nnnn</span><span class="bold">.tmp</span> 
<p>其中 <span class="italic">nnnn</span> 是进程标识。</p></td>
</tr>
</tbody>
</table>
<a name="a3069c4"></a>
<h3 id="a3069c4">示例</h3>
<ol type="1">
<li>要创建并启用安全文件的索引读取，输入：
<p></p>
<pre class="xmp">mkpasswd -f</pre></li>
<li>要仅创建并启用 /etc/security/passwd 文件的索引读取，输入：
<p></p>
<pre class="xmp">mkpasswd /etc/security/passwd.idx</pre></li>
<li>要检查且重新构建过期的或损坏的索引，输入：
<p></p>
<pre class="xmp">mkpasswd -c</pre></li></ol>
<a name="ahn12461"></a>
<h3 id="ahn12461">文件</h3>
<p></p>
<a name="wq1697"></a>
<table id="wq1697" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="35%"><span class="bold">/usr/sbin/mkpasswd</span></td>
<td width="65%">  包含 mkpasswd 命令。</td>
</tr>
<tr>
<td>
<a id="ahn12463" name="ahn12463"></a><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/files/aixfiles/passwd.htm#x9a1f0frit"><span class="bold">/etc/passwd</span></a><span class="bold"></span></td>
<td>  包含基本用户属性。</td>
</tr>
<tr>
<td><span class="bold">/etc/security/passwd</span></td>
<td>包含用户密码属性</td>
</tr>
<tr>
<td><span class="bold">/etc/security/lastlog</span></td>
<td>包含最新日志的相关属性</td>
</tr>
</tbody>
</table>
<a name="ahn12464"></a>
<h3 id="ahn12464">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/passwd.htm#oah1a0craw"><span class="bold">passwd</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/pwdadm.htm#a349f935"><span class="bold">pwdadm</span></a> 命令 <a href="mkuser.htm#ga32320frit"><span class="bold">mkuser</span></a> 命令 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds1/chuser.htm#a067913d9"><span class="bold">chuser</span></a> 命令 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/rmuser.htm#rmuser"><span class="bold">rmusers</span></a> 命令。</p>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/libs/basetrf1/getpwent.htm#a090910df"><span class="bold">getpwnam</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/libs/basetrf1/getpwent.htm#a090910df"><span class="bold">getpwuid</span></a> 子例程、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/libs/basetrf1/getuserattr.htm#a16691a89"><span class="bold">getuserattr</span></a> 子例程和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/libs/basetrf1/getuserattr.htm#a16691a89"><span class="bold">putuserattr</span></a> 子例程。</p>
<p>有关用户的识别和认证、自主访问控制、可信计算库和审计方面的更多信息，请参考<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/aixbman/security/About.htm"><span class="italic">《AIX 5L V5.2 安全指南》</span></a>。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="mkpasswd.htm#Top_Of_Page">页的顶部</a> | <a href="mknotify.htm">上一页</a> | <a href="mkpath.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
