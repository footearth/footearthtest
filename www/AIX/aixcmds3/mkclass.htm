<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - mkclass 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="mkclass 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="mkclass.htm#Bot_Of_Page">页的底部</a> | <a href="mkcfsmnt.htm">上一页</a> | <a href="mkclient.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>
<a id="idx575" name="idx575"></a>
<a name="mkclass"></a>
<h2 id="mkclass">mkclass 命令</h2>
<a name="wq1499"></a>
<h3 id="wq1499">用途</h3>
<p>创建一个“工作负载管理”类。</p>
<a name="wq1500"></a>
<h3 id="wq1500">语法</h3>
<p><span class="bold">mkclass</span> [ <span class="bold">-a</span><span class="italic"> Attribute</span><span class="bold">=</span><span class="italic">Value&nbsp; ...&nbsp; </span>  ]  [ <span class="bold">-c</span> | <span class="bold">-m</span> | <span class="bold"> -b</span> | <a href="mkclass.htm#mkclass_flags_bigc"><span class="bold">-C</span></a> | <a href="mkclass.htm#mkclass_flags_bigb"><span class="bold">-B</span></a> | <a href="mkclass.htm#mkclass_flags_bigp"><span class="bold"> -P</span></a> | <a href="mkclass.htm#mkclass_flags_bigt"><span class="bold">-T</span></a> | <a href="mkclass.htm#mkclass_flags_bigl"><span class="bold">-L</span></a> | <a href="mkclass.htm#mkclass_flags_biga"><span class="bold"> -A</span></a> <span class="italic">KeyWord</span>=<span class="italic">Value</span> ] [ <a href="mkclass.htm#config_dir"><span class="bold">-d</span> </a><span class="italic"> Config_Dir</span> ]  [  <a href="mkclass.htm#mkclassflagups"><span class="bold">-S</span> </a><span class="italic">SuperClass</span> ] <span class="italic">Name</span></p>
<a name="wq1501"></a>
<h3 id="wq1501">描述</h3>
<p><span class="bold">mkclass</span> 命令创建 <span class="italic">Name</span> 参数所识别的超类或子类。这个类不能是已经存在的。<span class="italic">Name</span> 参数只能包含大小写字母、数字和下划线。名称的格式为 <span class="italic">supername</span> 或 <span class="italic">subname</span>（带有 <span class="bold">-S</span> <span class="italic">supername</span> 标志）或 <span class="italic">supername</span><span class="bold">.</span><span class="italic">subname</span>。<span class="italic">Supername</span> 和 <span class="italic">subname</span> 的长度都限制在 16 个字符以内。保留名称 <span class="bold">Default</span>、<span class="bold">System</span> 和 <span class="bold">Shared</span>。它们称为预定义的类。任何 <span class="italic">Attribute</span><span class="bold">=</span><span class="italic">Value</span> 或是 <span class="italic">KeyWord</span><span class="bold">=</span><span class="bold">Value</span> 的参数初始化了指定的属性或资源限制。要获取更多信息，请参阅 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds1/chclass.htm"><span class="bold">chclass</span></a>。要设置进程总数限制（适用于类中每个进程的限制），请使用选项 <span class="bold">-C</span>（CPU 总数）、<span class="bold">-B</span>（磁盘输入输出总数）或者 <span class="bold">-A</span>（连接时间总数）中的一个或多个，同时带有 hardmax 关键字的值。要设置类总数限制（适用于整个类的限制），请使用选项 <span class="bold">-P</span>（进程总数）、<span class="bold">-T</span>（线程总数）或者 <span class="bold">-L</span>（登陆总数）中的一个或多个，同时带有 hardmax 关键字值。要重新设置总的限制，请使用“-”作为 <span class="italic">Value</span>。进程总数、类总数或二者总数的限制可能在启动或更新 WLM 时被禁用（请参阅 <span class="bold">wlmcntrl</span> 命令）。</p>
<p>通常地，<span class="bold">mkclass</span> 命令在 WLM 相关的属性文件中增加类及其属性，并且只有当使用 <span class="bold">wlmcntrl</span> 更新 WLM 之后，这些修改才适用于内核类定义（活动类）。</p>
<p>如果将一个空的字符串作为带有 <span class="bold">-d</span> 标志的配置名称（<span class="italic">Config_dir</span>）传递，那么只在 WLM 内核数据结构中创建类，并且不更新属性文件，使新创建的类为暂时的（如果停止、重新启动 WLM 或系统重新引导时，将丢失更改）。</p>
<a name="wq1502"></a>
<div class="notetitle" id="wq1502">注:</div>
<div class="notebody">该命令不适用于基于时间的配置集合（不能用标志 <span class="bold">-d</span> 来指定一个集合）。
如果当前配置是一个集合，则必须给出 <span class="bold">-d</span> 标志以指明该命令适用于哪个常规配置。</div>
<a name="wq1503"></a>
<h3 id="wq1503">标志</h3>
<p></p>
<a name="wq1504"></a>
<table id="wq1504" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="21%">
<a id="mkclass_flags_biga" name="mkclass_flags_biga"></a><span class="bold">-A hardmax</span>=<span class="bold-italic">Value</span></td>
<td width="78%">设置类中的登录会话保持活动的最大时间。值作为整数指定，可能追加有单位（s 代表秒，m 代表分钟，h 代表小时，d 代表天，w 代表星期，缺省值是秒）。
当一个使用者接近连接时间限制时，WML 会向会话终端发送一个警告消息。
当快要接近限制时，将会通知用户并且使会话引导符发送 <span class="bold">SIGTERM</span> 信号，在一个简短的宽延时间之后，会话将终止（<span class="bold">SIGKILL</span>）。</td>
</tr>
<tr>
<td>
<a id="mkclass_flags_bigb" name="mkclass_flags_bigb"></a><span class="bold">-B hardmax</span>=<span class="italic">Value</span></td>
<td>设置类中每个进程允许的磁盘输入输出总数。
值作为整数指定，可能追加有单位（KB 表示千字节，MB 表示兆字节，TB 表示太字节，PB 表示 petabyte，EB 表示 exabytes，缺省值是千字节）。
当一个进程使用达到了磁盘的输入输出总量限制时，将使进程发送信号 <span class="bold">SIGTERM</span>，经过一段宽延时间之后，进程会终止（<span class="bold">SIGKILL</span>）。</td>
</tr>
<tr>
<td>
<a id="mkclass_flags_bigc" name="mkclass_flags_bigc"></a><span class="bold">-C hardmax</span>=<span class="italic">Value</span></td>
<td>设置类中每个进程允许的 CPU 总数。
值作为整数指定，可能追加有单位（s 代表秒，m 代表分钟，h 代表小时，d 代表天，w 代表星期，缺省值是秒）。
当一个进程使用达到了这个时间限制时，使进程发送信号 <span class="bold">SIGTERM</span>，经过一段宽延时间之后，进程会终止（<span class="bold">SIGKILL</span>）。</td>
</tr>
<tr>
<td>
<a id="config_dir" name="config_dir"></a><span class="bold">-d</span><span class="italic"> Config_Dir</span></td>
<td>使用 <span class="bold">/etc/wlm/</span><span class="italic">Config_Dir</span> 作为属性文件的备用目录。
当没有使用这个标志时，<span class="bold">mkclass</span> 使用由 <span class="bold">/etc/wlm/current</span> 指向目录中的配置文件。如果将一个空的字符串作为配置名称传递（<tt>-d ""</tt>），则仅在 WLM 内核数据结构中创建新的类，不会修改配置文件。</td>
</tr>
<tr>
<td>
<a id="mkclass_flags_bigl" name="mkclass_flags_bigl"></a><span class="bold">-L hardmax</span>=<span class="italic">Value</span></td>
<td>设置在类中同时可用的登录会话的总数。如果一个用户尝试登录到该系统，则登录 shell 将在达到总登录限制的类中结束，登录操作将会失败。</td>
</tr>
<tr>
<td>
<a id="mkclass_flags_bigp" name="mkclass_flags_bigp"></a><span class="bold">-P hardmax</span>=<span class="italic">Value</span></td>
<td>设置类中允许的最大进程数。如果一个操作导致一个新的进程进入类，当类中已包含太多进程时，该操作将会失败。</td>
</tr>
<tr>
<td>
<a id="mkclassflagups" name="mkclassflagups"></a><span class="bold">-S</span><span class="italic"> SuperClass</span></td>
<td>当创建一个子类时，指定超类的名称。有两种方法创建超类 <span class="bold">Super</span> 的子类 <span class="bold">Sub</span>：
<ol type="1">
<li>指定子类的全名 <span class="italic">Name</span> 为 <span class="bold">Super.Sub</span>，不要使用 <span class="bold">-S</span></li>
<li>指定 <span class="bold">-S</span> 以给出超类的名称，并且使用子类的短名称：

<p></p>
<pre class="xmp">mkclass <span class="italic">options</span> -S Super  Sub</pre></li></ol></td>
</tr>
<tr>
<td>
<a id="mkclass_flags_bigt" name="mkclass_flags_bigt"></a><span class="bold">-T hardmax</span>=<span class="italic">Value</span></td>
<td>设置类中允许的线程总数。如果一个操作导致了一个新的线程进入类，当类中已包含太多进程时，该操作将会失败。类中允许的总的线程数至少要大于类中总的进程数。如果一个类有总线程数的限制，而没有总进程数的限制，则总进程数的限制值将会设置为总线程数限制。</td>
</tr>
</tbody>
</table>
<a name="wq1506"></a>
<h3 id="wq1506">安全性</h3>
<p>访问控制：只有 root 用户才能创建超类。只有 root 用户或者用户标识或组标识与用户名或组名匹配的授权用户才可以创建此超类中的子类，用户名和组名在超类属性 <span class="bold">adminuser</span> 和 <span class="bold">admingroup</span> 中指定。</p>
<a name="wq1507"></a>
<h3 id="wq1507">文件</h3>
<p></p>
<a name="wq1508"></a>
<table id="wq1508" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="11%">
<a id="mkclassfileclasses" name="mkclassfileclasses"></a><span class="bold">classes</span></td>
<td width="88%">包含类的名称和定义。</td>
</tr>
<tr>
<td>
<a id="mkclassfilelimits" name="mkclassfilelimits"></a><span class="bold">limits</span></td>
<td>包含强制每个类的资源限制。</td>
</tr>
<tr>
<td>
<a id="mkclassfileshares" name="mkclassfileshares"></a><span class="bold">shares</span></td>
<td>包含属于每个类的资源共享。</td>
</tr>
</tbody>
</table>
<a name="wq1509"></a>
<h3 id="wq1509">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds6/wlmcntrl.htm#a2709234"><span class="bold">wlmcntrl</span></a> 命令、
<a href="lsclass.htm#lsclass"><span class="bold">lsclass</span></a> 命令、<a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds1/chclass.htm"><span class="bold">chclass</span></a> 命令和 <a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/rmclass.htm"><span class="bold">rmclass</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="mkclass.htm#Top_Of_Page">页的顶部</a> | <a href="mkcfsmnt.htm">上一页</a> | <a href="mkclient.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
