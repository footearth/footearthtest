<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>命令参考大全，卷 3，i - m - listvgbackup 命令</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta name="dc.date" scheme="iso8601" content="2004-07-28" />
<meta name="copyright" content="(C) IBM公司版权 1997, 2004" />
<meta name="security" content="public" />
<meta name="dc.language" scheme="rfc1766" content="zh-cn" />
<meta name="Robots" content="index,follow"/>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="owner" content="ctscrcf@cn.ibm.com" />
<meta name="keywords" content="listvgbackup 命令" />
<link rel="stylesheet" type="text/css" href="ibmidwb.css" />
<link rel="stylesheet" type="text/css" href="text.css" />
</head>
<body>
<a id="Top_Of_Page" name="Top_Of_Page"></a> <P><center>
<B>[ <a href="listvgbackup.htm#Bot_Of_Page">页的底部</a> | <a href="listdgrp.htm">上一页</a> | <a href="listX11input.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> |  <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>
<center><h1>命令参考大全，卷 3，i - m</h1></center>
<a id="idx268" name="idx268"></a>
<a name="listvgbackup"></a>
<h2 id="listvgbackup">listvgbackup 命令</h2>
<a name="wq552"></a>
<h3 id="wq552">用途</h3>
<p>列出或恢复备份在指定介质上的卷组的内容。</p>
<a name="wq553"></a>
<h3 id="wq553">语法</h3>
<p><span class="bold">listvgbackup</span> [ <a href="listvgbackup.htm#listvgbackup-b"><span class="bold">-b</span> <span class="italic">blocks</span></a> ] [ <a href="listvgbackup.htm#listvgbackup-f"><span class="bold">-f</span> <span class="italic">device</span></a> ]  [ <a href="listvgbackup.htm#listvgbackup-a"><span class="bold">-a</span></a> ] [ <a href="listvgbackup.htm#listvgbackup_flags_c"><span class="bold">-c</span></a> ] [ <a href="listvgbackup.htm#listvgbackup_flags_l"><span class="bold">-l</span></a> ]
[ <a href="listvgbackup.htm#listvgbackup-r"><span class="bold">-r</span></a> ] [ <a href="listvgbackup.htm#listvgbackup-s"><span class="bold">-s</span></a> ] [ <a href="listvgbackup.htm#listvgbackup-ld"><span class="bold">-d</span> <span class="italic">path</span></a> ] [ <a href="listvgbackup.htm#listvgbackup_flags_bigb"><span class="bold">-B</span></a> ] [ <a href="listvgbackup.htm#listvgbackup-ud"><span class="bold">-D</span></a> ] [ <a href="listvgbackup.htm#listvgbackup_flags_bigl"><span class="bold">-L</span></a> ]
[ <a href="listvgbackup.htm#listvgbackup_flags_bigv"><span class="bold">-V</span></a> ] [ <a href="listvgbackup.htm#listvgbackup-file_list"><span class="italic">file_list</span></a> ]</p>
<a name="wq554"></a>
<h3 id="wq554">描述</h3>
<p><span class="bold">listvgbackup</span> 命令列出备份在磁带、文件、CD-ROM 或其它源上的卷组的内容，也可以用来从有效的备份源恢复文件。
<span class="bold">listvgbackup</span> 命令也用于多卷备份，诸如多 CD、DVD 或磁带。</p>
<p><span class="bold">listvgbackup -r</span> 和 <span class="bold">restorevgfiles</span> 命令执行相同的操作，应该认为是可相互替换的。</p>
<a name="wq555"></a>
<h3 id="wq555">标志</h3>
<p></p>
<a name="wq556"></a>
<table id="wq556" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="19%">
<a id="listvgbackup-a" name="listvgbackup-a"></a><span class="bold">-a</span></td>
<td width="80%">验证了由 <span class="bold">-b</span> <span class="italic">block</span> 标志指定的备份磁带的物理块大小。
如果有必要读备份，那么可能需要修改块大小。<span class="bold">-a</span> 标志只是在使用磁带进行备份的时候才有效。</td>
</tr>
<tr>
<td>
<a id="listvgbackup-b" name="listvgbackup-b"></a><span class="bold">-b</span> <span class="italic">blocks</span></td>
<td>指定在一次单独的输入操作中读入的 512 字节块的数量，使用 <span class="italic">blocks</span> 参数来定义。如果没有指定 <span class="italic">blocks</span> 参数，读取块的数量缺省值为 100。</td>
</tr>
<tr>
<td>
<a id="listvgbackup_flags_bigb" name="listvgbackup_flags_bigb"></a><span class="bold">-B</span></td>
<td>将卷组备份日志打印到 <span class="bold">stdout</span>。
<p>此标志会概略地显示过去的 256 个备份。日志的格式为 alog，保存在 <span class="bold">/var/adm/ras/vgbackuplog</span>。日志的每行
是使用分号隔开的文件或设备名列表、用于备份、日期、缩减大小、备份的完全大小和推荐维护包（如果有的话）的命令。
</p>
<a name="wq557"></a>
<div class="notetitle" id="wq557">注:</div>
<div class="notebody"> 缩减大小是所有文件系统上数据的大小。
完全大小是每个文件系统的全部大小（未使用的＋数据）。</div></td>
</tr>
<tr>
<td>
<a id="listvgbackup_flags_c" name="listvgbackup_flags_c"></a><span class="bold">-c</span></td>
<td>生成以冒号分隔的输出。此标志只与 <span class="bold">-l</span> 和 <span class="bold">-L</span> 标志一起使用。</td>
</tr>
<tr>
<td>
<a id="listvgbackup-ld" name="listvgbackup-ld"></a><span class="bold">-d</span> <span class="italic">path</span></td>
<td>指定使用 <span class="italic">path</span> 参数定义的恢复文件的目录路径。如果
没有使用 <span class="bold">-d</span> 参数，那么会使用当前的工作目录。
如果当前工作目录为根目录的话，这就是一个问题了。我们推荐写入临时文件夹而不是写入根目录。</td>
</tr>
<tr>
<td>
<a id="listvgbackup-ud" name="listvgbackup-ud"></a><span class="bold">-D</span></td>
<td>生成调试输出。</td>
</tr>
<tr>
<td>
<a id="listvgbackup_flags_l" name="listvgbackup_flags_l"></a><span class="bold">-l</span></td>
<td>显示关于卷组备份的有用信息。
<p>这个标志需要 <span class="bold">-f</span> <span class="italic">device</span> 标志。
这个标志促使 <span class="bold">listvgbackup</span> 显示诸如卷组、备份的日期和时间、备份系统的 uname 输出、oslevel、推荐维护级别、以兆字节表示的备份大小和以兆字节表示的缩减大小的信息。
缩减大小是所有文件系统上数据的大小。
完全大小是每个文件系统的全部大小（未使用的＋数据）。
<span class="bold">-l</span> 标志还显示备份卷组的逻辑卷和文件系统信息，等价于运行
“<span class="bold">lsvg -l</span> <span class="italic">vgname</span>”。</p></td>
</tr>
<tr>
<td>
<a id="listvgbackup_flags_bigl" name="listvgbackup_flags_bigl"></a><span class="bold">-L</span></td>
<td>仅显示关于 <span class="bold">mksysb</span> 备份的 lpp 文件集信息。
<p>这个标志需要 <span class="bold">-f</span> <span class="italic">device</span> 标志，通过在运行的备份系统上调用“<span class="bold">lslpp -l</span>”来为该产品显示等价信息。除了由 <span class="bold">mksysb</span> 生成的卷组备份之外，此标志不会为其它卷组备份生成输出。</p></td>
</tr>
<tr>
<td>
<a id="listvgbackup-f" name="listvgbackup-f"></a><span class="bold">-f</span> <span class="italic">device</span></td>
<td>指定包含了由 <span class="italic">device</span> 参数定义的备份设备类型（文件、磁带、CD-ROM 或其它源）。当没有指定 <span class="bold">-f</span> 的时候，<span class="italic">device</span> 的缺省值为 <span class="bold">/dev/rmt0</span>。</td>
</tr>
<tr>
<td>
<a id="listvgbackup-r" name="listvgbackup-r"></a><span class="bold">-r</span></td>
<td>指定使用 <span class="italic">file-list</span> 参数定义的需要恢复的备份文件。如果没有指定 <span class="italic">file-list</span> 参数，那么所有备份的文件都会被恢复。
如果没有使用 <span class="bold">-r</span> 标志，那么执行 <span class="bold">listvgbackup</span> 命令只会列出指定的备份中的文件。</td>
</tr>
<tr>
<td>
<a id="listvgbackup-s" name="listvgbackup-s"></a><span class="bold">-s</span></td>
<td>指定了备份源是一个用户卷组，不是根卷组（rootvg）。</td>
</tr>
<tr>
<td>
<a id="listvgbackup_flags_bigv" name="listvgbackup_flags_bigv"></a><span class="bold">-V</span></td>
<td>验证了磁带备份。
<p>此标志需要 <span class="bold">-f</span> <span class="italic">device</span> 标志，只为磁带设备工作。<span class="bold">-V</span> 标志促使 <span class="bold">listvgbackup</span> 验证
卷组备份中每个文件头的可读性，打印所有发生的 <span class="bold">stderr</span>。</p></td>
</tr>
</tbody>
</table>
<a name="wq558"></a>
<h3 id="wq558">参数</h3>
<p></p>
<a name="wq559"></a>
<table id="wq559" width="100%" summary="" border="0" frame="void" rules="none">
<tbody valign="top">
<tr>
<td width="17%">
<a id="listvgbackup-file_list" name="listvgbackup-file_list"></a><span class="italic">file_list</span></td>
<td width="82%">标识了需要恢复的文件列表。此参数只是在 <span class="bold">-r</span> 标志被指定的时候使用到。在使用空格分隔的列表中应该指定与当前目录相关的文件的全路径。
除非有其它指示，否则指定目录中的所有文件都会被恢复。
如果需要恢复某个目录中的所有文件，我们建议将文件写到临时文件夹中，而不是写到根目录中。</td>
</tr>
</tbody>
</table>
<a name="wq560"></a>
<h3 id="wq560">示例</h3>
<ol type="1">
<li>为了列出定位在缺省设备 <span class="bold">/dev/rmt0</span> 上的系统备份的内容，请输入：
<pre class="xmp">listvgbackup</pre></li>
<li>为了列出定位在设备 <span class="bold">/dev/cd1</span> 上的系统备份的内容，请输入：
<pre class="xmp">listvgbackup -f /dev/cd1</pre></li>
<li>为了列出定位在设备 <span class="bold">/dev/cd1</span>（该设备是一个用户卷组而不是根卷组）上的系统备份的内容，请输入：
<pre class="xmp">listvgbackup -f /dev/cd1 -s</pre></li>
<li>为了从定位在设备 <span class="bold">/dev/cd1</span> 上的系统备份中恢复 <span class="bold">/etc/filesystems</span>，输入：

<pre class="xmp">listvgbackup -f /dev/cd1 -r ./etc/filesystems</pre></li>
<li>为了恢复定位在设备 <span class="bold">/dev/cd1</span> 上，位于非根卷组备份 <span class="bold">/myfs/test</span> 目录中的所有文件，并将恢复文件写出到 <span class="bold">/data/myfiles</span> 中，请输入：

<pre class="xmp">listvgbackup -f /dev/cd1 -r -s -d /data/myfiles ./myfs/test</pre></li>
<li>为了显示用逗号分隔的有关定位在 <span class="bold">/dev/rmt0</span> 上的 <span class="bold">mksysb</span> 备份磁带的 lpp 信息，请输入如下：
<pre class="xmp">lsmksysb -Lc -f /dev/rmt0</pre></li>
<li>为了在 <span class="bold">stdout</span> 上显示卷组备份日志，请输入：

<pre class="xmp">lssavevg -B</pre></li>
<li>为了列出关于定位在 <span class="bold">/tmp/mybackup</span> 上的备份的卷组和常规备份数据，请输入：
<pre class="xmp">listvgbackup -l -f /tmp/mybackup</pre></li>
<li>为了验证定位在 <span class="bold">/dev/rmt0</span>上的卷组备份磁带的每个包头的可读性，请输入：
<pre class="xmp">lsmksysb -V -f /dev/rmt0</pre></li></ol>
<a name="wq562"></a>
<h3 id="wq562">文件</h3>
<a name="wq563"></a>
<table id="wq563" width="100%" summary="" border="0" frame="void" rules="all">
<tbody valign="top">
<tr>
<td><span class="bold">/usr/bin/listvgbackup</span></td>
<td>包含了 <span class="bold">listvgbackup</span> 命令</td>
</tr>
</tbody>
</table>
<a name="wq564"></a>
<h3 id="wq564">相关信息</h3>
<p><a href="http://study.chyangwa.com/IT/AIX/aixcmds3/zh_CN/cmds/aixcmds4/restorevgfiles.htm"><span class="bold">restorevgfiles</span></a> 命令。</p>
<FONT COLOR="#A62A2A"></FONT><p></p>
   <center>
<B>[ <a href="listvgbackup.htm#Top_Of_Page">页的顶部</a> | <a href="listdgrp.htm">上一页</a> | <a href="listX11input.htm">下一页</a> | <a href="mastertoc.htm#mtoc">目录</a> | <a href="aixcmds302.htm#wq2149">索引</a> | <A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>资料库</B></A> |
<A HREF="notices.htm"><B>法律条款</B></A> |
<A HREF="file:///C|/download/www16.boulder.ibm.com/cgi-bin/ds_form@lang=zh_CN&viewset=AIX" TARGET="_top"><B>搜索</B></A> ]</B>
</center>

<a id="Bot_Of_Page" name="Bot_Of_Page"></a>
</body>
</html>
