<html lang="en">
<head>
<title>Nextfile Statement - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Statements.html#Statements" title="Statements">
<link rel="prev" href="Next-Statement.html#Next-Statement" title="Next Statement">
<link rel="next" href="Exit-Statement.html#Exit-Statement" title="Exit Statement">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Nextfile-Statement"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Exit-Statement.html#Exit-Statement">Exit Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Next-Statement.html#Next-Statement">Next Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Statements.html#Statements">Statements</a>
<hr>
</div>

<h4 class="subsection">6.4.9 Using <samp><span class="command">gawk</span></samp>'s <code>nextfile</code> Statement</h4>

<p><a name="index-g_t_0040code_007bnextfile_007d-statement-982"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-983"></a>
<samp><span class="command">gawk</span></samp> provides the <code>nextfile</code> statement,
which is similar to the <code>next</code> statement. 
However, instead of abandoning processing of the current record, the
<code>nextfile</code> statement instructs <samp><span class="command">gawk</span></samp> to stop processing the
current data file.

   <p>The <code>nextfile</code> statement is a <samp><span class="command">gawk</span></samp> extension. 
In most other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="Options.html#Options">Options</a>),
<code>nextfile</code> is not special.

   <p>Upon execution of the <code>nextfile</code> statement, <code>FILENAME</code> is
updated to the name of the next data file listed on the command line,
<code>FNR</code> is reset to one, <code>ARGIND</code> is incremented, and processing
starts over with the first rule in the program. 
(<code>ARGIND</code> hasn't been introduced yet. See <a href="Built_002din-Variables.html#Built_002din-Variables">Built-in Variables</a>.) 
If the <code>nextfile</code> statement causes the end of the input to be reached,
then the code in any <code>END</code> rules is executed. 
See <a href="BEGIN_002fEND.html#BEGIN_002fEND">BEGIN/END</a>.

   <p>The <code>nextfile</code> statement is useful when there are many data files
to process but it isn't necessary to process every record in every file. 
Normally, in order to move on to the next data file, a program
has to continue scanning the unwanted records.  The <code>nextfile</code>
statement accomplishes this much more efficiently.

   <p>While one might think that &lsquo;<samp><span class="samp">close(FILENAME)</span></samp>&rsquo; would accomplish
the same as <code>nextfile</code>, this isn't true.  <code>close</code> is
reserved for closing files, pipes, and coprocesses that are
opened with redirections.  It is not related to the main processing that
<samp><span class="command">awk</span></samp> does with the files listed in <code>ARGV</code>.

   <p>If it's necessary to use an <samp><span class="command">awk</span></samp> version that doesn't support
<code>nextfile</code>, see
<a href="Nextfile-Function.html#Nextfile-Function">Nextfile Function</a>,
for a user-defined function that simulates the <code>nextfile</code>
statement.

   <p><a name="index-functions_002c-user_002ddefined_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-984"></a><a name="index-g_t_0040code_007bnextfile_007d-statement_002c-user_002ddefined-functions-and-985"></a>The current version of the Bell Laboratories <samp><span class="command">awk</span></samp>
(see <a href="Other-Versions.html#Other-Versions">Other Versions</a>)
also supports <code>nextfile</code>.  However, it doesn't allow the <code>nextfile</code>
statement inside function bodies
(see <a href="User_002ddefined.html#User_002ddefined">User-defined</a>). 
<samp><span class="command">gawk</span></samp> does; a <code>nextfile</code> inside a
function body reads the next record and starts processing it with the
first rule in the program, just as any other <code>nextfile</code> statement.

   <p><a name="index-g_t_0040code_007bnext-file_007d-statement_002c-in-_0040command_007bgawk_007d-986"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bnext-file_007d-statement-in-987"></a><a name="index-g_t_0040code_007bnextfile_007d-statement_002c-in-_0040command_007bgawk_007d-988"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bnextfile_007d-statement-in-989"></a><strong>Caution:</strong>  Versions of <samp><span class="command">gawk</span></samp> prior to 3.0 used two
words (&lsquo;<samp><span class="samp">next file</span></samp>&rsquo;) for the <code>nextfile</code> statement. 
In version 3.0, this was changed
to one word, because the treatment of &lsquo;<samp><span class="samp">file</span></samp>&rsquo; was
inconsistent. When it appeared after <code>next</code>, &lsquo;<samp><span class="samp">file</span></samp>&rsquo; was a keyword;
otherwise, it was a regular identifier.  The old usage is no longer
accepted; &lsquo;<samp><span class="samp">next file</span></samp>&rsquo; generates a syntax error.

   </body></html>

