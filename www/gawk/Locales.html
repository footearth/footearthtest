<html lang="en">
<head>
<title>Locales - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Regexp.html#Regexp" title="Regexp">
<link rel="prev" href="Computed-Regexps.html#Computed-Regexps" title="Computed Regexps">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Locales"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Computed-Regexps.html#Computed-Regexps">Computed Regexps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Regexp.html#Regexp">Regexp</a>
<hr>
</div>

<h3 class="section">2.9 Where You Are Makes A Difference</h3>

<p><a name="index-locale_002c-definition-of-341"></a>
Modern systems support the notion of <dfn>locales</dfn>: a way to tell
the system about the local character set and language.  The current
locale setting can affect the way regexp matching works, often
in surprising ways.  In particular, many locales do case-insensitive
matching, even when you may have specified characters of only
one particular case.

   <p>The following example uses the <code>sub</code> function, which
does text replacement
(see <a href="String-Functions.html#String-Functions">String Functions</a>). 
Here, the intent is to remove trailing uppercase characters:

<pre class="example">     $ echo something1234abc | gawk '{ sub("[A-Z]*$", ""); print }'
     -| something1234
</pre>
   <p class="noindent">This output is unexpected, since the &lsquo;<samp><span class="samp">abc</span></samp>&rsquo; at the end of &lsquo;<samp><span class="samp">something1234abc</span></samp>&rsquo;
should not normally match &lsquo;<samp><span class="samp">[A-Z]*</span></samp>&rsquo;.  This result is due to the
locale setting (and thus you may not see it on your system). 
There are two fixes.  The first is to use the POSIX character
class &lsquo;<samp><span class="samp">[[:upper:]]</span></samp>&rsquo;, instead of &lsquo;<samp><span class="samp">[A-Z]</span></samp>&rsquo;. 
(This is preferred, since then your program will work everywhere.) 
The second is to change the locale setting in the environment,
before running <samp><span class="command">gawk</span></samp>,
by using the shell statements:

<pre class="example">     LANG=C LC_ALL=C
     export LANG LC_ALL
</pre>
   <p>The setting &lsquo;<samp><span class="samp">C</span></samp>&rsquo; forces <samp><span class="command">gawk</span></samp> to behave in the traditional
Unix manner, where case distinctions do matter. 
You may wish to put these statements into your shell startup file,
e.g., <samp><span class="file">$HOME/.profile</span></samp>.

   <p>Similar considerations apply to other ranges.  For example,
&lsquo;<samp><span class="samp">["-/]</span></samp>&rsquo; is perfectly valid in ASCII, but is not valid in many
Unicode locales, such as &lsquo;<samp><span class="samp">en_US.UTF-8</span></samp>&rsquo;.  (In general, such
ranges should be avoided; either list the characters individually,
or use a POSIX character class such as &lsquo;<samp><span class="samp">[[:punct:]]</span></samp>&rsquo;.)

   <p>For the normal case of &lsquo;<samp><span class="samp">RS = "\n"</span></samp>&rsquo;, the locale is largely irrelevant. 
For other single-character record separators, using &lsquo;<samp><span class="samp">LC_ALL=C</span></samp>&rsquo;
will give you much better performance when reading records.  Otherwise,
<samp><span class="command">gawk</span></samp> has to make several function calls, <em>per input
character</em> to find the record terminator.

   <p>Finally, the locale affects the value of the decimal point character
used when <samp><span class="command">gawk</span></samp> parses input data.  This is discussed in
detail in <a href="Conversion.html#Conversion">Conversion</a>.

   </body></html>

