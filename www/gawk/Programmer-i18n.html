<html lang="en">
<head>
<title>Programmer i18n - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Internationalization.html#Internationalization" title="Internationalization">
<link rel="prev" href="Explaining-gettext.html#Explaining-gettext" title="Explaining gettext">
<link rel="next" href="Translator-i18n.html#Translator-i18n" title="Translator i18n">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Programmer-i18n"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Translator-i18n.html#Translator-i18n">Translator i18n</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Explaining-gettext.html#Explaining-gettext">Explaining gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Internationalization.html#Internationalization">Internationalization</a>
<hr>
</div>

<h3 class="section">9.3 Internationalizing <samp><span class="command">awk</span></samp> Programs</h3>

<!-- STARTOFRANGE inap -->
<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-internationalizing-1349"></a>
<samp><span class="command">gawk</span></samp> provides the following variables and functions for
internationalization:

     
<a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable-1350"></a>
<dl><dt><code>TEXTDOMAIN</code><dd>This variable indicates the application's text domain. 
For compatibility with GNU <code>gettext</code>, the default
value is <code>"messages"</code>.

     <p><a name="index-internationalization_002c-localization_002c-marked-strings-1351"></a><a name="index-strings_002c-for-localization-1352"></a><br><dt><code>_"your message here"</code><dd>String constants marked with a leading underscore
are candidates for translation at runtime. 
String constants without a leading underscore are not translated.

     <p><a name="index-g_t_0040code_007bdcgettext_007d-function-_0028_0040command_007bgawk_007d_0029-1353"></a><br><dt><code>dcgettext(</code><var>string</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>This built-in function returns the translation of <var>string</var> in
text domain <var>domain</var> for locale category <var>category</var>. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>.

     <p>If you supply a value for <var>category</var>, it must be a string equal to
one of the known locale categories described in
the previous section. 
You must also supply a text domain.  Use <code>TEXTDOMAIN</code> if
you want to use the current domain.

     <p><strong>Caution:</strong> The order of arguments to the <samp><span class="command">awk</span></samp> version
of the <code>dcgettext</code> function is purposely different from the order for
the C version.  The <samp><span class="command">awk</span></samp> version's order was
chosen to be simple and to allow for reasonable <samp><span class="command">awk</span></samp>-style
default arguments.

     <p><a name="index-g_t_0040code_007bdcngettext_007d-function-_0028_0040command_007bgawk_007d_0029-1354"></a><br><dt><code>dcngettext(</code><var>string1</var><code>, </code><var>string2</var><code>, </code><var>number</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>This built-in function returns the plural form used for <var>number</var> of the
translation of <var>string1</var> and <var>string2</var> in text domain
<var>domain</var> for locale category <var>category</var>. <var>string1</var> is the
English singular variant of a message, and <var>string2</var> the English plural
variant of the same message. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>.

     <p>The same remarks as for the <code>dcgettext</code> function apply.

     <p><a name="index-g_t_0040code_007b_002emo_007d-files_002c-specifying-directory-of-1355"></a><a name="index-files_002c-_0040code_007b_002emo_007d_002c-specifying-directory-of-1356"></a><a name="index-message-object-files_002c-specifying-directory-of-1357"></a><a name="index-files_002c-message-object_002c-specifying-directory-of-1358"></a><a name="index-g_t_0040code_007bbindtextdomain_007d-function-_0028_0040command_007bgawk_007d_0029-1359"></a><br><dt><code>bindtextdomain(</code><var>directory</var> <span class="roman">[</span><code>, </code><var>domain</var><span class="roman">]</span><code>)</code><dd>This built-in function allows you to specify the directory in which
<code>gettext</code> looks for <samp><span class="file">.mo</span></samp> files, in case they
will not or cannot be placed in the standard locations
(e.g., during testing). 
It returns the directory in which <var>domain</var> is &ldquo;bound.&rdquo;

     <p>The default <var>domain</var> is the value of <code>TEXTDOMAIN</code>. 
If <var>directory</var> is the null string (<code>""</code>), then
<code>bindtextdomain</code> returns the current binding for the
given <var>domain</var>. 
</dl>

   <p>To use these facilities in your <samp><span class="command">awk</span></samp> program, follow the steps
outlined in
the previous section,
like so:

     <ol type=1 start=1>
<a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bTEXTDOMAIN_007d-variable-and-1360"></a><a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable_002c-_0040code_007bBEGIN_007d-pattern-and-1361"></a><li>Set the variable <code>TEXTDOMAIN</code> to the text domain of
your program.  This is best done in a <code>BEGIN</code> rule
(see <a href="BEGIN_002fEND.html#BEGIN_002fEND">BEGIN/END</a>),
or it can also be done via the <samp><span class="option">-v</span></samp> command-line
option (see <a href="Options.html#Options">Options</a>):

     <pre class="example">          BEGIN {
              TEXTDOMAIN = "guide"
              ...
          }
</pre>
     <p><a name="index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-translatable-string-1362"></a><a name="index-underscore-_0028_0040code_007b_005f_007d_0029_002c-translatable-string-1363"></a><li>Mark all translatable strings with a leading underscore (&lsquo;<samp><span class="samp">_</span></samp>&rsquo;)
character.  It <em>must</em> be adjacent to the opening
quote of the string.  For example:

     <pre class="example">          print _"hello, world"
          x = _"you goofed"
          printf(_"Number of users is %d\n", nusers)
</pre>
     <li>If you are creating strings dynamically, you can
still translate them, using the <code>dcgettext</code>
built-in function:

     <pre class="example">          message = nusers " users logged in"
          message = dcgettext(message, "adminprog")
          print message
</pre>
     <p>Here, the call to <code>dcgettext</code> supplies a different
text domain (<code>"adminprog"</code>) in which to find the
message, but it uses the default <code>"LC_MESSAGES"</code> category.

     <p><a name="index-g_t_0040code_007bLC_005fMESSAGES_007d-locale-category_002c-_0040code_007bbindtextdomain_007d-function-_0028_0040command_007bgawk_007d_0029-1364"></a><li>During development, you might want to put the <samp><span class="file">.mo</span></samp>
file in a private directory for testing.  This is done
with the <code>bindtextdomain</code> built-in function:

     <pre class="example">          BEGIN {
             TEXTDOMAIN = "guide"   # our text domain
             if (Testing) {
                 # where to find our files
                 bindtextdomain("testdir")
                 # joe is in charge of adminprog
                 bindtextdomain("../joe/testdir", "adminprog")
             }
             ...
          }
</pre>
        </ol>

   <p>See <a href="I18N-Example.html#I18N-Example">I18N Example</a>,
for an example program showing the steps to create
and use translations from <samp><span class="command">awk</span></samp>.

   </body></html>

