<html lang="en">
<head>
<title>Numeric Functions - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Built_002din.html#Built_002din" title="Built-in">
<link rel="prev" href="Calling-Built_002din.html#Calling-Built_002din" title="Calling Built-in">
<link rel="next" href="String-Functions.html#String-Functions" title="String Functions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Numeric-Functions"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="String-Functions.html#String-Functions">String Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Calling-Built_002din.html#Calling-Built_002din">Calling Built-in</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Built_002din.html#Built_002din">Built-in</a>
<hr>
</div>

<h4 class="subsection">8.1.2 Numeric Functions</h4>

<p>The following list describes all of
the built-in functions that work with numbers. 
Optional parameters are enclosed in square brackets&nbsp;([&nbsp;]):<!-- /@w -->

     <dl>
<dt><code>int(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bint_007d-function-1155"></a>This returns the nearest integer to <var>x</var>, located between <var>x</var> and zero and
truncated toward zero.

     <p>For example, <code>int(3)</code> is 3, <code>int(3.9)</code> is 3, <code>int(-3.9)</code>
is &minus;3, and <code>int(-3)</code> is &minus;3 as well.

     <br><dt><code>sqrt(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bsqrt_007d-function-1156"></a>This returns the positive square root of <var>x</var>. 
<samp><span class="command">gawk</span></samp> reports an error
if <var>x</var> is negative.  Thus, <code>sqrt(4)</code> is 2.

     <br><dt><code>exp(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bexp_007d-function-1157"></a>This returns the exponential of <var>x</var> (<code>e ^ </code><var>x</var>) or reports
an error if <var>x</var> is out of range.  The range of values <var>x</var> can have
depends on your machine's floating-point representation.

     <br><dt><code>log(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007blog_007d-function-1158"></a>This returns the natural logarithm of <var>x</var>, if <var>x</var> is positive;
otherwise, it reports an error.

     <br><dt><code>sin(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bsin_007d-function-1159"></a>This returns the sine of <var>x</var>, with <var>x</var> in radians.

     <br><dt><code>cos(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bcos_007d-function-1160"></a>This returns the cosine of <var>x</var>, with <var>x</var> in radians.

     <br><dt><code>atan2(</code><var>y</var><code>, </code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007batan2_007d-function-1161"></a>This returns the arctangent of <var>y</var><code> / </code><var>x</var> in radians.

     <br><dt><code>rand()</code><dd><a name="index-g_t_0040code_007brand_007d-function-1162"></a><a name="index-random-numbers_002c-_0040code_007brand_007d_002f_0040code_007bsrand_007d-functions-1163"></a>This returns a random number.  The values of <code>rand</code> are
uniformly distributed between zero and one. 
The value could be zero but is never one.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>

     <p>Often random integers are needed instead.  Following is a user-defined function
that can be used to obtain a random non-negative integer less than <var>n</var>:

     <pre class="example">          function randint(n) {
               return int(n * rand())
          }
</pre>
     <p class="noindent">The multiplication produces a random number greater than zero and less
than <code>n</code>.  Using <code>int</code>, this result is made into
an integer between zero and <code>n</code> &minus; 1, inclusive.

     <p>The following example uses a similar function to produce random integers
between one and <var>n</var>.  This program prints a new random number for
each input record:

     <pre class="example">          # Function to roll a simulated die.
          function roll(n) { return 1 + int(rand() * n) }
          
          # Roll 3 six-sided dice and
          # print total number of points.
          {
                printf("%d points\n",
                       roll(6)+roll(6)+roll(6))
          }
</pre>
     <p><a name="index-numbers_002c-random-1164"></a><a name="index-random-numbers_002c-seed-of-1165"></a><!-- MAWK uses a different seed each time. -->
<strong>Caution:</strong> In most <samp><span class="command">awk</span></samp> implementations, including <samp><span class="command">gawk</span></samp>,
<code>rand</code> starts generating numbers from the same
starting number, or <dfn>seed</dfn>, each time you run <samp><span class="command">awk</span></samp>.  Thus,
a program generates the same results each time you run it. 
The numbers are random within one <samp><span class="command">awk</span></samp> run but predictable
from run to run.  This is convenient for debugging, but if you want
a program to do different things each time it is used, you must change
the seed to a value that is different in each run.  To do this,
use <code>srand</code>.

     <br><dt><code>srand(</code><span class="roman">[</span><var>x</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bsrand_007d-function-1166"></a>The function <code>srand</code> sets the starting point, or seed,
for generating random numbers to the value <var>x</var>.

     <p>Each seed value leads to a particular sequence of random
numbers.<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>
Thus, if the seed is set to the same value a second time,
the same sequence of random numbers is produced again.

     <p>Different <samp><span class="command">awk</span></samp> implementations use different random-number
generators internally.  Don't expect the same <samp><span class="command">awk</span></samp> program
to produce the same series of random numbers when executed by
different versions of <samp><span class="command">awk</span></samp>.

     <p>If the argument <var>x</var> is omitted, as in &lsquo;<samp><span class="samp">srand()</span></samp>&rsquo;, then the current
date and time of day are used for a seed.  This is the way to get random
numbers that are truly unpredictable.

     <p>The return value of <code>srand</code> is the previous seed.  This makes it
easy to keep track of the seeds in case you need to consistently reproduce
sequences of random numbers. 
</dl>

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> The C version of <code>rand</code>
is known to produce fairly poor sequences of random numbers. 
However, nothing requires that an <samp><span class="command">awk</span></samp> implementation use the C
<code>rand</code> to implement the <samp><span class="command">awk</span></samp> version of <code>rand</code>. 
In fact, <samp><span class="command">gawk</span></samp> uses the BSD <code>random</code> function, which is
considerably better than <code>rand</code>, to produce random numbers.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> Computer-generated random numbers really are not truly
random.  They are technically known as &ldquo;pseudorandom.&rdquo;  This means
that while the numbers in a sequence appear to be random, you can in
fact generate the same sequence of random numbers over and over again.</p>

   <hr></div>

   </body></html>

