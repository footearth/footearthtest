<html lang="en">
<head>
<title>Increment Ops - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Expressions.html#Expressions" title="Expressions">
<link rel="prev" href="Assignment-Ops.html#Assignment-Ops" title="Assignment Ops">
<link rel="next" href="Truth-Values.html#Truth-Values" title="Truth Values">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Increment-Ops"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Truth-Values.html#Truth-Values">Truth Values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Assignment-Ops.html#Assignment-Ops">Assignment Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Expressions.html#Expressions">Expressions</a>
<hr>
</div>

<h3 class="section">5.8 Increment and Decrement Operators</h3>

<!-- STARTOFRANGE inop -->
<p><a name="index-increment-operators-716"></a><!-- STARTOFRANGE opde -->
<a name="index-operators_002c-decrement_002fincrement-717"></a><dfn>Increment</dfn> and <dfn>decrement operators</dfn> increase or decrease the value of
a variable by one.  An assignment operator can do the same thing, so
the increment operators add no power to the <samp><span class="command">awk</span></samp> language; however, they
are convenient abbreviations for very common operations.

   <p><a name="index-side-effects-718"></a><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-decrement_002fincrement-operators-719"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-decrement_002fincrement-operators-720"></a><a name="index-side-effects_002c-decrement_002fincrement-operators-721"></a>The operator used for adding one is written &lsquo;<samp><span class="samp">++</span></samp>&rsquo;.  It can be used to increment
a variable either before or after taking its value. 
To pre-increment a variable <code>v</code>, write &lsquo;<samp><span class="samp">++v</span></samp>&rsquo;.  This adds
one to the value of <code>v</code>&mdash;that new value is also the value of the
expression. (The assignment expression &lsquo;<samp><span class="samp">v += 1</span></samp>&rsquo; is completely
equivalent.) 
Writing the &lsquo;<samp><span class="samp">++</span></samp>&rsquo; after the variable specifies post-increment.  This
increments the variable value just the same; the difference is that the
value of the increment expression itself is the variable's <em>old</em>
value.  Thus, if <code>foo</code> has the value four, then the expression &lsquo;<samp><span class="samp">foo++</span></samp>&rsquo;
has the value four, but it changes the value of <code>foo</code> to five. 
In other words, the operator returns the old value of the variable,
but with the side effect of incrementing it.

   <p>The post-increment &lsquo;<samp><span class="samp">foo++</span></samp>&rsquo; is nearly the same as writing &lsquo;<samp><span class="samp">(foo
+= 1) - 1</span></samp>&rsquo;.  It is not perfectly equivalent because all numbers in
<samp><span class="command">awk</span></samp> are floating-point&mdash;in floating-point, &lsquo;<samp><span class="samp">foo + 1 - 1</span></samp>&rsquo; does
not necessarily equal <code>foo</code>.  But the difference is minute as
long as you stick to numbers that are fairly small (less than 10e12).

   <p><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-incrementing-fields-and-arrays-722"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-incrementing-fields-and-arrays-723"></a>Fields and array elements are incremented
just like variables.  (Use &lsquo;<samp><span class="samp">$(i++)</span></samp>&rsquo; when you want to do a field reference
and a variable increment at the same time.  The parentheses are necessary
because of the precedence of the field reference operator &lsquo;<samp><span class="samp">$</span></samp>&rsquo;.)

   <p><a name="index-decrement-operators-724"></a>The decrement operator &lsquo;<samp><span class="samp">--</span></samp>&rsquo; works just like &lsquo;<samp><span class="samp">++</span></samp>&rsquo;, except that
it subtracts one instead of adding it.  As with &lsquo;<samp><span class="samp">++</span></samp>&rsquo;, it can be used before
the lvalue to pre-decrement or after it to post-decrement. 
Following is a summary of increment and decrement expressions:

     
<a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-operator-725"></a>
<a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-operator-726"></a>
<dl><dt><code>++</code><var>lvalue</var><dd>This expression increments <var>lvalue</var>, and the new value becomes the
value of the expression.

     <br><dt><var>lvalue</var><code>++</code><dd>This expression increments <var>lvalue</var>, but
the value of the expression is the <em>old</em> value of <var>lvalue</var>.

     <p><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_002d_007d-operator-727"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_002d_007d-operator-728"></a><br><dt><code>--</code><var>lvalue</var><dd>This expression is
like &lsquo;<samp><span class="samp">++</span><var>lvalue</var></samp>&rsquo;, but instead of adding, it subtracts.  It
decrements <var>lvalue</var> and delivers the value that is the result.

     <br><dt><var>lvalue</var><code>--</code><dd>This expression is
like &lsquo;<samp><var>lvalue</var><span class="samp">++</span></samp>&rsquo;, but instead of adding, it subtracts.  It
decrements <var>lvalue</var>.  The value of the expression is the <em>old</em>
value of <var>lvalue</var>. 
</dl>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Operator Evaluation Order</h4>

<p><a name="index-advanced-features_002c-operators_0040comma_007b_007d-precedence-729"></a><a name="index-precedence-730"></a><a name="index-operators_002c-precedence-731"></a><a name="index-portability_002c-operators-732"></a><a name="index-evaluation-order-733"></a><a name="index-Marx_002c-Groucho-734"></a><blockquote>
<i>Doctor, doctor!  It hurts when I do this!<br>
So don't do that!</i><br>
Groucho Marx
</blockquote>

<p class="noindent">What happens for something like the following?

<pre class="example">     b = 6
     print b += b++
</pre>
   <p class="noindent">Or something even stranger?

<pre class="example">     b = 6
     b += ++b + b++
     print b
</pre>
   <p><a name="index-side-effects-735"></a>In other words, when do the various side effects prescribed by the
postfix operators (&lsquo;<samp><span class="samp">b++</span></samp>&rsquo;) take effect? 
When side effects happen is <dfn>implementation defined</dfn>. 
In other words, it is up to the particular version of <samp><span class="command">awk</span></samp>. 
The result for the first example may be 12 or 13, and for the second, it
may be 22 or 23.

   <p>In short, doing things like this is not recommended and definitely
not anything that you can rely upon for portability. 
You should avoid such things in your own programs. 
<!-- You'll sleep better at night and be able to look at yourself -->
<!-- in the mirror in the morning. -->
<!-- ENDOFRANGE inop -->
<!-- ENDOFRANGE opde -->
<!-- ENDOFRANGE deop -->

   </body></html>

