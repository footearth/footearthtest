<html lang="en">
<head>
<title>ARGC and ARGV - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Built_002din-Variables.html#Built_002din-Variables" title="Built-in Variables">
<link rel="prev" href="Auto_002dset.html#Auto_002dset" title="Auto-set">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="ARGC-and-ARGV"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Auto_002dset.html#Auto_002dset">Auto-set</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Built_002din-Variables.html#Built_002din-Variables">Built-in Variables</a>
<hr>
</div>

<h4 class="subsection">6.5.3 Using <code>ARGC</code> and <code>ARGV</code></h4>

<p><a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1076"></a><a name="index-arguments_002c-command_002dline-1077"></a><a name="index-command-line_002c-arguments-1078"></a>
<a href="Auto_002dset.html#Auto_002dset">Auto-set</a>,
presented the following program describing the information contained in <code>ARGC</code>
and <code>ARGV</code>:

<pre class="example">     $ awk 'BEGIN {
     &gt;        for (i = 0; i &lt; ARGC; i++)
     &gt;            print ARGV[i]
     &gt;      }' inventory-shipped BBS-list
     -| awk
     -| inventory-shipped
     -| BBS-list
</pre>
   <p class="noindent">In this example, <code>ARGV[0]</code> contains &lsquo;<samp><span class="samp">awk</span></samp>&rsquo;, <code>ARGV[1]</code>
contains &lsquo;<samp><span class="samp">inventory-shipped</span></samp>&rsquo;, and <code>ARGV[2]</code> contains
&lsquo;<samp><span class="samp">BBS-list</span></samp>&rsquo;. 
Notice that the <samp><span class="command">awk</span></samp> program is not entered in <code>ARGV</code>.  The
other special command-line options, with their arguments, are also not
entered.  This includes variable assignments done with the <samp><span class="option">-v</span></samp>
option (see <a href="Options.html#Options">Options</a>). 
Normal variable assignments on the command line <em>are</em>
treated as arguments and do show up in the <code>ARGV</code> array:

<pre class="example">     $ cat showargs.awk
     -| BEGIN {
     -|     printf "A=%d, B=%d\n", A, B
     -|     for (i = 0; i &lt; ARGC; i++)
     -|         printf "\tARGV[%d] = %s\n", i, ARGV[i]
     -| }
     -| END   { printf "A=%d, B=%d\n", A, B }
     $ awk -v A=1 -f showargs.awk B=2 /dev/null
     -| A=1, B=0
     -|        ARGV[0] = awk
     -|        ARGV[1] = B=2
     -|        ARGV[2] = /dev/null
     -| A=1, B=2
</pre>
   <p>A program can alter <code>ARGC</code> and the elements of <code>ARGV</code>. 
Each time <samp><span class="command">awk</span></samp> reaches the end of an input file, it uses the next
element of <code>ARGV</code> as the name of the next input file.  By storing a
different string there, a program can change which files are read. 
Use <code>"-"</code> to represent the standard input.  Storing
additional elements and incrementing <code>ARGC</code> causes
additional files to be read.

   <p>If the value of <code>ARGC</code> is decreased, that eliminates input files
from the end of the list.  By recording the old value of <code>ARGC</code>
elsewhere, a program can treat the eliminated arguments as
something other than file names.

   <p>To eliminate a file from the middle of the list, store the null string
(<code>""</code>) into <code>ARGV</code> in place of the file's name.  As a
special feature, <samp><span class="command">awk</span></samp> ignores file names that have been
replaced with the null string. 
Another option is to
use the <code>delete</code> statement to remove elements from
<code>ARGV</code> (see <a href="Delete.html#Delete">Delete</a>).

   <p>All of these actions are typically done in the <code>BEGIN</code> rule,
before actual processing of the input begins. 
See <a href="Split-Program.html#Split-Program">Split Program</a>, and see
<a href="Tee-Program.html#Tee-Program">Tee Program</a>, for examples
of each way of removing elements from <code>ARGV</code>. 
The following fragment processes <code>ARGV</code> in order to examine, and
then remove, command-line options:
<!-- NEXT ED: Add xref to rewind() function -->

<pre class="example">     BEGIN {
         for (i = 1; i &lt; ARGC; i++) {
             if (ARGV[i] == "-v")
                 verbose = 1
             else if (ARGV[i] == "-d")
                 debug = 1
             else if (ARGV[i] ~ /^-./) {
                 e = sprintf("%s: unrecognized option -- %c",
                         ARGV[0], substr(ARGV[i], 2, 1))
                 print e &gt; "/dev/stderr"
             } else
                 break
             delete ARGV[i]
         }
     }
</pre>
   <p>To actually get the options into the <samp><span class="command">awk</span></samp> program,
end the <samp><span class="command">awk</span></samp> options with <samp><span class="option">--</span></samp> and then supply
the <samp><span class="command">awk</span></samp> program's options, in the following manner:

<pre class="example">     awk -f myprog -- -v -d file1 file2 ...
</pre>
   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1079"></a>This is not necessary in <samp><span class="command">gawk</span></samp>. Unless <samp><span class="option">--posix</span></samp> has
been specified, <samp><span class="command">gawk</span></samp> silently puts any unrecognized options
into <code>ARGV</code> for the <samp><span class="command">awk</span></samp> program to deal with.  As soon
as it sees an unknown option, <samp><span class="command">gawk</span></samp> stops looking for other
options that it might otherwise recognize.  The previous example with
<samp><span class="command">gawk</span></samp> would be:

<pre class="example">     gawk -f myprog -d -v file1 file2 ...
</pre>
   <p class="noindent">Because <samp><span class="option">-d</span></samp> is not a valid <samp><span class="command">gawk</span></samp> option,
it and the following <samp><span class="option">-v</span></samp>
are passed on to the <samp><span class="command">awk</span></samp> program.

   </body></html>

