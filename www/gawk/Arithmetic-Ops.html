<html lang="en">
<head>
<title>Arithmetic Ops - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Expressions.html#Expressions" title="Expressions">
<link rel="prev" href="Conversion.html#Conversion" title="Conversion">
<link rel="next" href="Concatenation.html#Concatenation" title="Concatenation">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Arithmetic-Ops"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Concatenation.html#Concatenation">Concatenation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Conversion.html#Conversion">Conversion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Expressions.html#Expressions">Expressions</a>
<hr>
</div>

<h3 class="section">5.5 Arithmetic Operators</h3>

<p><a name="index-arithmetic-operators-657"></a><a name="index-operators_002c-arithmetic-658"></a><!-- @cindex addition -->
<!-- @cindex subtraction -->
<!-- @cindex multiplication -->
<!-- @cindex division -->
<!-- @cindex remainder -->
<!-- @cindex quotient -->
<!-- @cindex exponentiation -->

   <p>The <samp><span class="command">awk</span></samp> language uses the common arithmetic operators when
evaluating expressions.  All of these arithmetic operators follow normal
precedence rules and work as you would expect them to.

   <p>The following example uses a file named <samp><span class="file">grades</span></samp>, which contains
a list of student names as well as three test scores per student (it's
a small class):

<pre class="example">     Pat   100 97 58
     Sandy  84 72 93
     Chris  72 92 89
</pre>
   <p class="noindent">This programs takes the file <samp><span class="file">grades</span></samp> and prints the average
of the scores:

<pre class="example">     $ awk '{ sum = $2 + $3 + $4 ; avg = sum / 3
     &gt;        print $1, avg }' grades
     -| Pat 85
     -| Sandy 83
     -| Chris 84.3333
</pre>
   <p>The following list provides the arithmetic operators in <samp><span class="command">awk</span></samp>, in order from
the highest precedence to the lowest:

     <dl>
<dt><code>- </code><var>x</var><dd>Negation.

     <br><dt><code>+ </code><var>x</var><dd>Unary plus; the expression is converted to a number.

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-arithmetic-operators-and-659"></a><br><dt><var>x</var><code> ^ </code><var>y</var><dt><var>x</var><code> ** </code><var>y</var><dd>Exponentiation; <var>x</var> raised to the <var>y</var> power.  &lsquo;<samp><span class="samp">2 ^ 3</span></samp>&rsquo; has
the value eight; the character sequence &lsquo;<samp><span class="samp">**</span></samp>&rsquo; is equivalent to
&lsquo;<samp><span class="samp">^</span></samp>&rsquo;.

     <br><dt><var>x</var><code> * </code><var>y</var><dd>Multiplication.

     <p><a name="index-troubleshooting_002c-division-660"></a><a name="index-division-661"></a><br><dt><var>x</var><code> / </code><var>y</var><dd>Division;  because all numbers in <samp><span class="command">awk</span></samp> are floating-point
numbers, the result is <em>not</em> rounded to an integer&mdash;&lsquo;<samp><span class="samp">3 / 4</span></samp>&rsquo; has
the value 0.75.  (It is a common mistake, especially for C programmers,
to forget that <em>all</em> numbers in <samp><span class="command">awk</span></samp> are floating-point,
and that division of integer-looking constants produces a real number,
not an integer.)

     <br><dt><var>x</var><code> % </code><var>y</var><dd>Remainder; further discussion is provided in the text, just
after this list.

     <br><dt><var>x</var><code> + </code><var>y</var><dd>Addition.

     <br><dt><var>x</var><code> - </code><var>y</var><dd>Subtraction. 
</dl>

   <p>Unary plus and minus have the same precedence,
the multiplication operators all have the same precedence, and
addition and subtraction have the same precedence.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-trunc_002dmod-operation-662"></a><a name="index-trunc_002dmod-operation-663"></a>When computing the remainder of <var>x</var><code> % </code><var>y</var>,
the quotient is rounded toward zero to an integer and
multiplied by <var>y</var>. This result is subtracted from <var>x</var>;
this operation is sometimes known as &ldquo;trunc-mod.&rdquo;  The following
relation always holds:

<pre class="example">     b * int(a / b) + (a % b) == a
</pre>
   <p>One possibly undesirable effect of this definition of remainder is that
<var>x</var><code> % </code><var>y</var> is negative if <var>x</var> is negative.  Thus:

<pre class="example">     -17 % 8 = -1
</pre>
   <p>In other <samp><span class="command">awk</span></samp> implementations, the signedness of the remainder
may be machine-dependent. 
<!-- !!! what does posix say? -->

   <p><a name="index-portability_002c-_0040code_007b_002a_002a_007d-operator-and-664"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_007d-operator-665"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_007d-operator-666"></a><blockquote>
<b>NOTE:</b> The POSIX standard only specifies the use of &lsquo;<samp><span class="samp">^</span></samp>&rsquo;
for exponentiation. 
For maximum portability, do not use the &lsquo;<samp><span class="samp">**</span></samp>&rsquo; operator. 
</blockquote>

   </body></html>

