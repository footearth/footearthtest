<html lang="en">
<head>
<title>Very Simple - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Getting-Started.html#Getting-Started" title="Getting Started">
<link rel="prev" href="Sample-Data-Files.html#Sample-Data-Files" title="Sample Data Files">
<link rel="next" href="Two-Rules.html#Two-Rules" title="Two Rules">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Very-Simple"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Two-Rules.html#Two-Rules">Two Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Sample-Data-Files.html#Sample-Data-Files">Sample Data Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Getting-Started.html#Getting-Started">Getting Started</a>
<hr>
</div>

<h3 class="section">1.3 Some Simple Examples</h3>

<p>The following command runs a simple <samp><span class="command">awk</span></samp> program that searches the
input file <samp><span class="file">BBS-list</span></samp> for the character string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; (a
grouping of characters is usually called a <dfn>string</dfn>;
the term <dfn>string</dfn> is based on similar usage in English, such
as &ldquo;a string of pearls,&rdquo; or &ldquo;a string of cars in a train&rdquo;):

<pre class="example">     awk '/foo/ { print $0 }' BBS-list
</pre>
   <p class="noindent">When lines containing &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; are found, they are printed because
&lsquo;<samp><span class="samp">print&nbsp;$0</span></samp>&rsquo;<!-- /@w --> means print the current line.  (Just &lsquo;<samp><span class="samp">print</span></samp>&rsquo; by
itself means the same thing, so we could have written that
instead.)

   <p>You will notice that slashes (&lsquo;<samp><span class="samp">/</span></samp>&rsquo;) surround the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
in the <samp><span class="command">awk</span></samp> program.  The slashes indicate that &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
is the pattern to search for.  This type of pattern is called a
<dfn>regular expression</dfn>, which is covered in more detail later
(see <a href="Regexp.html#Regexp">Regexp</a>). 
The pattern is allowed to match parts of words. 
There are
single quotes around the <samp><span class="command">awk</span></samp> program so that the shell won't
interpret any of it as special shell characters.

   <p>Here is what this program prints:

<pre class="example">     $ awk '/foo/ { print $0 }' BBS-list
     -| fooey        555-1234     2400/1200/300     B
     -| foot         555-6699     1200/300          B
     -| macfoo       555-6480     1200/300          A
     -| sabafoo      555-2127     1200/300          C
</pre>
   <p><a name="index-actions_002c-default-137"></a><a name="index-patterns_002c-default-138"></a>In an <samp><span class="command">awk</span></samp> rule, either the pattern or the action can be omitted,
but not both.  If the pattern is omitted, then the action is performed
for <em>every</em> input line.  If the action is omitted, the default
action is to print all lines that match the pattern.

   <p><a name="index-actions_002c-empty-139"></a>Thus, we could leave out the action (the <code>print</code> statement and the curly
braces) in the previous example and the result would be the same: all
lines matching the pattern &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; are printed.  By comparison,
omitting the <code>print</code> statement but retaining the curly braces makes an
empty action that does nothing (i.e., no lines are printed).

   <p><a name="index-g_t_0040command_007bawk_007d-programs_002c-one_002dline-examples-140"></a>Many practical <samp><span class="command">awk</span></samp> programs are just a line or two.  Following is a
collection of useful, short programs to get you started.  Some of these
programs contain constructs that haven't been covered yet. (The description
of the program will give you a good idea of what is going on, but please
read the rest of the Web page to become an <samp><span class="command">awk</span></samp> expert!) 
Most of the examples use a data file named <samp><span class="file">data</span></samp>.  This is just a
placeholder; if you use these programs yourself, substitute
your own file names for <samp><span class="file">data</span></samp>. 
For future reference, note that there is often more than
one way to do things in <samp><span class="command">awk</span></samp>.  At some point, you may want
to look back at these examples and see if
you can come up with different ways to do the same things shown here:

     <ul>
<li>Print the length of the longest input line:

     <pre class="example">          awk '{ if (length($0) &gt; max) max = length($0) }
               END { print max }' data
</pre>
     <li>Print every line that is longer than 80 characters:

     <pre class="example">          awk 'length($0) &gt; 80' data
</pre>
     <p>The sole rule has a relational expression as its pattern and it has no
action&mdash;so the default action, printing the record, is used.

     <p><a name="index-g_t_0040command_007bexpand_007d-utility-141"></a><li>Print the length of the longest line in <samp><span class="file">data</span></samp>:

     <pre class="example">          expand data | awk '{ if (x &lt; length()) x = length() }
                        END { print "maximum line length is " x }'
</pre>
     <p>The input is processed by the <samp><span class="command">expand</span></samp> utility to change TABs
into spaces, so the widths compared are actually the right-margin columns.

     <li>Print every line that has at least one field:

     <pre class="example">          awk 'NF &gt; 0' data
</pre>
     <p>This is an easy way to delete blank lines from a file (or rather, to
create a new file similar to the old file but from which the blank lines
have been removed).

     <li>Print seven random numbers from 0 to 100, inclusive:

     <pre class="example">          awk 'BEGIN { for (i = 1; i &lt;= 7; i++)
                           print int(101 * rand()) }'
</pre>
     <li>Print the total number of bytes used by <var>files</var>:

     <pre class="example">          ls -l <var>files</var> | awk '{ x += $5 }
                            END { print "total bytes: " x }'
</pre>
     <li>Print the total number of kilobytes used by <var>files</var>:

     <!-- Don't use \ continuation, not discussed yet -->
     <pre class="example">          ls -l <var>files</var> | awk '{ x += $5 }
             END { print "total K-bytes: " (x + 1023)/1024 }'
</pre>
     <li>Print a sorted list of the login names of all users:

     <pre class="example">          awk -F: '{ print $1 }' /etc/passwd | sort
</pre>
     <li>Count the lines in a file:

     <pre class="example">          awk 'END { print NR }' data
</pre>
     <li>Print the even-numbered lines in the data file:

     <pre class="example">          awk 'NR % 2 == 0' data
</pre>
     <p>If you use the expression &lsquo;<samp><span class="samp">NR % 2 == 1</span></samp>&rsquo; instead,
the program would print the odd-numbered lines. 
</ul>

   </body></html>

