<html lang="en">
<head>
<title>Regexp Operators - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Regexp.html#Regexp" title="Regexp">
<link rel="prev" href="Escape-Sequences.html#Escape-Sequences" title="Escape Sequences">
<link rel="next" href="Character-Lists.html#Character-Lists" title="Character Lists">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Regexp-Operators"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Character-Lists.html#Character-Lists">Character Lists</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Escape-Sequences.html#Escape-Sequences">Escape Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Regexp.html#Regexp">Regexp</a>
<hr>
</div>

<h3 class="section">2.3 Regular Expression Operators</h3>

<!-- STARTOFRANGE regexpo -->
<p><a name="index-regular-expressions_002c-operators-220"></a>
You can combine regular expressions with special characters,
called <dfn>regular expression operators</dfn> or <dfn>metacharacters</dfn>, to
increase the power and versatility of regular expressions.

   <p>The escape sequences described
earlier
in <a href="Escape-Sequences.html#Escape-Sequences">Escape Sequences</a>,
are valid inside a regexp.  They are introduced by a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and
are recognized and converted into corresponding real characters as
the very first step in processing regexps.

   <p>Here is a list of metacharacters.  All characters that are not escape
sequences and that are not listed in the table stand for themselves:

     
<a name="index-backslash-_0028_0040code_007b_005c_007d_0029-221"></a>
<a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029-222"></a>
<dl><dt><code>\</code><dd>This is used to suppress the special meaning of a character when
matching.  For example, &lsquo;<samp><span class="samp">\$</span></samp>&rsquo;
matches the character &lsquo;<samp><span class="samp">$</span></samp>&rsquo;.

     <p><a name="index-regular-expressions_002c-anchors-in-223"></a><a name="index-Texinfo_002c-chapter-beginnings-in-files-224"></a><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029-225"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029-226"></a><br><dt><code>^</code><dd>This matches the beginning of a string.  For example, &lsquo;<samp><span class="samp">^@chapter</span></samp>&rsquo;
matches &lsquo;<samp><span class="samp">@chapter</span></samp>&rsquo; at the beginning of a string and can be used
to identify chapter beginnings in Texinfo source files. 
The &lsquo;<samp><span class="samp">^</span></samp>&rsquo; is known as an <dfn>anchor</dfn>, because it anchors the pattern to
match only at the beginning of the string.

     <p>It is important to realize that &lsquo;<samp><span class="samp">^</span></samp>&rsquo; does not match the beginning of
a line embedded in a string. 
The condition is not true in the following example:

     <pre class="example">          if ("line1\nLINE 2" ~ /^L/) ...
</pre>
     <p><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029-227"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029-228"></a><br><dt><code>$</code><dd>This is similar to &lsquo;<samp><span class="samp">^</span></samp>&rsquo;, but it matches only at the end of a string. 
For example, &lsquo;<samp><span class="samp">p$</span></samp>&rsquo;
matches a record that ends with a &lsquo;<samp><span class="samp">p</span></samp>&rsquo;.  The &lsquo;<samp><span class="samp">$</span></samp>&rsquo; is an anchor
and does not match the end of a line embedded in a string. 
The condition in the following example is not true:

     <pre class="example">          if ("line1\nLINE 2" ~ /1$/) ...
</pre>
     <p><a name="index-g_t_0040code_007b_002e_007d-_0028period_0029-229"></a><a name="index-period-_0028_0040code_007b_002e_007d_0029-230"></a><br><dt><code>.</code><dd>This matches any single character,
<em>including</em> the newline character.  For example, &lsquo;<samp><span class="samp">.P</span></samp>&rsquo;
matches any single character followed by a &lsquo;<samp><span class="samp">P</span></samp>&rsquo; in a string.  Using
concatenation, we can make a regular expression such as &lsquo;<samp><span class="samp">U.A</span></samp>&rsquo;, which
matches any three-character sequence that begins with &lsquo;<samp><span class="samp">U</span></samp>&rsquo; and ends
with &lsquo;<samp><span class="samp">A</span></samp>&rsquo;.

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-period-_0028_0040code_007b_002e_007d_0029_0040comma_007b_007d-using-231"></a>In strict POSIX mode (see <a href="Options.html#Options">Options</a>),
&lsquo;<samp><span class="samp">.</span></samp>&rsquo; does not match the <span class="sc">nul</span>
character, which is a character with all bits equal to zero. 
Otherwise, <span class="sc">nul</span> is just another character. Other versions of <samp><span class="command">awk</span></samp>
may not be able to match the <span class="sc">nul</span> character.

     <p><a name="index-g_t_0040code_007b_005b_005d_007d-_0028square-brackets_0029-232"></a><a name="index-square-brackets-_0028_0040code_007b_005b_005d_007d_0029-233"></a><a name="index-character-lists-234"></a><a name="index-character-sets_002c-See-Also-character-lists-235"></a><a name="index-bracket-expressions_002c-See-character-lists-236"></a><br><dt><code>[...]</code><dd>This is called a <dfn>character list</dfn>.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
It matches any <em>one</em> of the characters that are enclosed in
the square brackets.  For example, &lsquo;<samp><span class="samp">[MVX]</span></samp>&rsquo; matches any one of
the characters &lsquo;<samp><span class="samp">M</span></samp>&rsquo;, &lsquo;<samp><span class="samp">V</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">X</span></samp>&rsquo; in a string.  A full
discussion of what can be inside the square brackets of a character list
is given in
<a href="Character-Lists.html#Character-Lists">Character Lists</a>.

     <p><a name="index-character-lists_002c-complemented-237"></a><br><dt><code>[^ ...]</code><dd>This is a <dfn>complemented character list</dfn>.  The first character after
the &lsquo;<samp><span class="samp">[</span></samp>&rsquo; <em>must</em> be a &lsquo;<samp><span class="samp">^</span></samp>&rsquo;.  It matches any characters
<em>except</em> those in the square brackets.  For example, &lsquo;<samp><span class="samp">[^awk]</span></samp>&rsquo;
matches any character that is not an &lsquo;<samp><span class="samp">a</span></samp>&rsquo;, &lsquo;<samp><span class="samp">w</span></samp>&rsquo;,
or &lsquo;<samp><span class="samp">k</span></samp>&rsquo;.

     <p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029-238"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029-239"></a><br><dt><code>|</code><dd>This is the <dfn>alternation operator</dfn> and it is used to specify
alternatives. 
The &lsquo;<samp><span class="samp">|</span></samp>&rsquo; has the lowest precedence of all the regular
expression operators. 
For example, &lsquo;<samp><span class="samp">^P|[[:digit:]]</span></samp>&rsquo;
matches any string that matches either &lsquo;<samp><span class="samp">^P</span></samp>&rsquo; or &lsquo;<samp><span class="samp">[[:digit:]]</span></samp>&rsquo;.  This
means it matches any string that starts with &lsquo;<samp><span class="samp">P</span></samp>&rsquo; or contains a digit.

     <p>The alternation applies to the largest possible regexps on either side.

     <p><a name="index-g_t_0040code_007b_0028_0029_007d-_0028parentheses_0029-240"></a><a name="index-parentheses-_0040code_007b_0028_0029_007d-241"></a><br><dt><code>(...)</code><dd>Parentheses are used for grouping in regular expressions, as in
arithmetic.  They can be used to concatenate regular expressions
containing the alternation operator, &lsquo;<samp><span class="samp">|</span></samp>&rsquo;.  For example,
&lsquo;<samp><span class="samp">@(samp|code)\{[^}]+\}</span></samp>&rsquo; matches both &lsquo;<samp><span class="samp">@code{foo}</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">@samp{bar}</span></samp>&rsquo;. 
(These are Texinfo formatting control sequences. The &lsquo;<samp><span class="samp">+</span></samp>&rsquo; is
explained further on in this list.)

     <p><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-242"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-243"></a><br><dt><code>*</code><dd>This symbol means that the preceding regular expression should be
repeated as many times as necessary to find a match.  For example, &lsquo;<samp><span class="samp">ph*</span></samp>&rsquo;
applies the &lsquo;<samp><span class="samp">*</span></samp>&rsquo; symbol to the preceding &lsquo;<samp><span class="samp">h</span></samp>&rsquo; and looks for matches
of one &lsquo;<samp><span class="samp">p</span></samp>&rsquo; followed by any number of &lsquo;<samp><span class="samp">h</span></samp>&rsquo;s.  This also matches
just &lsquo;<samp><span class="samp">p</span></samp>&rsquo; if no &lsquo;<samp><span class="samp">h</span></samp>&rsquo;s are present.

     <p>The &lsquo;<samp><span class="samp">*</span></samp>&rsquo; repeats the <em>smallest</em> possible preceding expression. 
(Use parentheses if you want to repeat a larger expression.)  It finds
as many repetitions as possible.  For example,
&lsquo;<samp><span class="samp">awk '/\(c[ad][ad]*r x\)/ { print }' sample</span></samp>&rsquo;
prints every record in <samp><span class="file">sample</span></samp> containing a string of the form
&lsquo;<samp><span class="samp">(car x)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">(cdr x)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">(cadr x)</span></samp>&rsquo;, and so on. 
Notice the escaping of the parentheses by preceding them
with backslashes.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029-244"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029-245"></a><br><dt><code>+</code><dd>This symbol is similar to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, except that the preceding expression must be
matched at least once.  This means that &lsquo;<samp><span class="samp">wh+y</span></samp>&rsquo;
would match &lsquo;<samp><span class="samp">why</span></samp>&rsquo; and &lsquo;<samp><span class="samp">whhy</span></samp>&rsquo;, but not &lsquo;<samp><span class="samp">wy</span></samp>&rsquo;, whereas
&lsquo;<samp><span class="samp">wh*y</span></samp>&rsquo; would match all three of these strings. 
The following is a simpler
way of writing the last &lsquo;<samp><span class="samp">*</span></samp>&rsquo; example:

     <pre class="example">          awk '/\(c[ad]+r x\)/ { print }' sample
</pre>
     <p><a name="index-g_t_0040code_007b_003f_007d-_0028question-mark_0029-246"></a><a name="index-question-mark-_0028_0040code_007b_003f_007d_0029-247"></a><br><dt><code>?</code><dd>This symbol is similar to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, except that the preceding expression can be
matched either once or not at all.  For example, &lsquo;<samp><span class="samp">fe?d</span></samp>&rsquo;
matches &lsquo;<samp><span class="samp">fed</span></samp>&rsquo; and &lsquo;<samp><span class="samp">fd</span></samp>&rsquo;, but nothing else.

     <p><a name="index-interval-expressions-248"></a><br><dt><code>{</code><var>n</var><code>}</code><dt><code>{</code><var>n</var><code>,}</code><dt><code>{</code><var>n</var><code>,</code><var>m</var><code>}</code><dd>One or two numbers inside braces denote an <dfn>interval expression</dfn>. 
If there is one number in the braces, the preceding regexp is repeated
<var>n</var> times. 
If there are two numbers separated by a comma, the preceding regexp is
repeated <var>n</var> to <var>m</var> times. 
If there is one number followed by a comma, then the preceding regexp
is repeated at least <var>n</var> times:

          <dl>
<dt><code>wh{3}y</code><dd>Matches &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, but not &lsquo;<samp><span class="samp">why</span></samp>&rsquo; or &lsquo;<samp><span class="samp">whhhhy</span></samp>&rsquo;.

          <br><dt><code>wh{3,5}y</code><dd>Matches &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, &lsquo;<samp><span class="samp">whhhhy</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">whhhhhy</span></samp>&rsquo;, only.

          <br><dt><code>wh{2,}y</code><dd>Matches &lsquo;<samp><span class="samp">whhy</span></samp>&rsquo; or &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, and so on. 
</dl>

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-interval-expressions-in-249"></a>Interval expressions were not traditionally available in <samp><span class="command">awk</span></samp>. 
They were added as part of the POSIX standard to make <samp><span class="command">awk</span></samp>
and <samp><span class="command">egrep</span></samp> consistent with each other.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-interval-expressions-and-250"></a>However, because old programs may use &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; in regexp
constants, by default <samp><span class="command">gawk</span></samp> does <em>not</em> match interval expressions
in regexps.  If either <samp><span class="option">--posix</span></samp> or <samp><span class="option">--re-interval</span></samp> are specified
(see <a href="Options.html#Options">Options</a>), then interval expressions
are allowed in regexps.

     <p>For new programs that use &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; in regexp constants,
it is good practice to always escape them with a backslash.  Then the
regexp constants are valid and work the way you want them to, using
any version of <samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>
</dl>

   <p><a name="index-precedence_002c-regexp-operators-251"></a><a name="index-regular-expressions_002c-operators_002c-precedence-of-252"></a>In regular expressions, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">?</span></samp>&rsquo; operators,
as well as the braces &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo;,
have
the highest precedence, followed by concatenation, and finally by &lsquo;<samp><span class="samp">|</span></samp>&rsquo;. 
As in arithmetic, parentheses can change how operators are grouped.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-regular-expressions-and-253"></a><a name="index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-precedence-254"></a>In POSIX <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">?</span></samp>&rsquo; operators
stand for themselves when there is nothing in the regexp that precedes them. 
For example, &lsquo;<samp><span class="samp">/+/</span></samp>&rsquo; matches a literal plus sign.  However, many other versions of
<samp><span class="command">awk</span></samp> treat such a usage as a syntax error.

   <p>If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="Options.html#Options">Options</a>),
POSIX character classes and interval expressions are not available in
regular expressions. 
<!-- ENDOFRANGE regexpo -->

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> In other literature,
you may see a character list referred to as either a
<dfn>character set</dfn>, a <dfn>character class</dfn>, or a <dfn>bracket expression</dfn>.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> Use two backslashes if you're
using a string constant with a regexp operator or function.</p>

   <hr></div>

   </body></html>

