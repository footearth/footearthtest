<html lang="en">
<head>
<title>PC Using - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="PC-Installation.html#PC-Installation" title="PC Installation">
<link rel="prev" href="PC-Dynamic.html#PC-Dynamic" title="PC Dynamic">
<link rel="next" href="Cygwin.html#Cygwin" title="Cygwin">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="PC-Using"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Cygwin.html#Cygwin">Cygwin</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="PC-Dynamic.html#PC-Dynamic">PC Dynamic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="PC-Installation.html#PC-Installation">PC Installation</a>
<hr>
</div>

<h5 class="appendixsubsubsec">B.3.3.4 Using <samp><span class="command">gawk</span></samp> on PC Operating Systems</h5>

<!-- STARTOFRANGE opgawx -->
<p><a name="index-operating-systems_002c-PC_002c-_0040command_007bgawk_007d-on-1917"></a><!-- STARTOFRANGE pcgawon -->
<a name="index-PC-operating-systems_002c-_0040command_007bgawk_007d-on-1918"></a>
With the exception of the Cygwin environment,
the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator and TCP/IP networking
(see <a href="TCP_002fIP-Networking.html#TCP_002fIP-Networking">TCP/IP Networking</a>)
are not supported for MS-DOS or MS-Windows. EMX (OS/2 only) does support
at least the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator.

   <p><a name="index-search-paths-1919"></a><a name="index-g_t_0040command_007bgawk_007d_002c-OS_002f2-version-of-1920"></a><a name="index-g_t_0040command_007bgawk_007d_002c-MS_002dDOS-version-of-1921"></a><a name="index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-_0040code_007bAWKPATH_007d-variable-and-1922"></a><a name="index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-_0040code_007bAWKPATH_007d-variable-and-1923"></a><a name="index-g_t_0040code_007bAWKPATH_007d-environment-variable-1924"></a>The OS/2 and MS-DOS versions of <samp><span class="command">gawk</span></samp> search for program files as
described in <a href="AWKPATH-Variable.html#AWKPATH-Variable">AWKPATH Variable</a>. 
However, semicolons (rather than colons) separate elements
in the <samp><span class="env">AWKPATH</span></samp> variable. If <samp><span class="env">AWKPATH</span></samp> is not set or is empty,
then the default search path for OS/2 (16 bit) and MS-DOS versions is
<code>".;c:/lib/awk;c:/gnu/lib/awk"<!-- /@w --></code>.

   <p>The search path for OS/2 (32 bit, EMX) is determined by the prefix directory
(most likely <samp><span class="file">/usr</span></samp> or <samp><span class="file">c:/usr</span></samp>) that has been specified as an option of
the <samp><span class="command">configure</span></samp> script like it is the case for the Unix versions. 
If <samp><span class="file">c:/usr</span></samp> is the prefix directory then the default search path contains <samp><span class="file">.</span></samp>
and <samp><span class="file">c:/usr/share/awk</span></samp>. 
Additionally, to support binary distributions of <samp><span class="command">gawk</span></samp> for OS/2
systems whose drive &lsquo;<samp><span class="samp">c:</span></samp>&rsquo; might not support long file names or might not exist
at all, there is a special environment variable. If <samp><span class="env">UNIXROOT</span></samp> specifies
a drive then this specific drive is also searched for program files. 
E.g., if <samp><span class="env">UNIXROOT</span></samp> is set to <samp><span class="file">e:</span></samp> the complete default search path is
<code>".;c:/usr/share/awk;e:/usr/share/awk"<!-- /@w --></code>.

   <p>An <samp><span class="command">sh</span></samp>-like shell (as opposed to <samp><span class="command">command.com</span></samp> under MS-DOS
or <samp><span class="command">cmd.exe</span></samp> under OS/2) may be useful for <samp><span class="command">awk</span></samp> programming. 
Ian Stewartson has written an excellent shell for MS-DOS and OS/2,
Daisuke Aoyama has ported GNU <samp><span class="command">bash</span></samp> to MS-DOS using the DJGPP tools,
and several shells are available for OS/2, including <samp><span class="command">ksh</span></samp>.  The file
<samp><span class="file">README_d/README.pc</span></samp> in the <samp><span class="command">gawk</span></samp> distribution contains
information on these shells.  Users of Stewartson's shell on DOS should
examine its documentation for handling command lines; in particular,
the setting for <samp><span class="command">gawk</span></samp> in the shell configuration may need to be
changed and the <code>ignoretype</code> option may also be of interest.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBINMODE_007d-variable-1925"></a><a name="index-g_t_0040code_007bBINMODE_007d-variable-1926"></a>Under OS/2 and DOS, <samp><span class="command">gawk</span></samp> (and many other text programs) silently
translate end-of-line <code>"\r\n"</code> to <code>"\n"</code> on input and <code>"\n"</code>
to <code>"\r\n"</code> on output.  A special <code>BINMODE</code> variable allows
control over these translations and is interpreted as follows:

     <ul>
<li>If <code>BINMODE</code> is &lsquo;<samp><span class="samp">"r"</span></samp>&rsquo;, or one,
then
binary mode is set on read (i.e., no translations on reads).

     <li>If <code>BINMODE</code> is <code>"w"</code>, or two,
then
binary mode is set on write (i.e., no translations on writes).

     <li>If <code>BINMODE</code> is <code>"rw"</code> or <code>"wr"</code> or three,
binary mode is set for both read and write.

     <li><code>BINMODE=</code><var>non-null-string</var> is
the same as &lsquo;<samp><span class="samp">BINMODE=3</span></samp>&rsquo; (i.e., no translations on
reads or writes).  However, <samp><span class="command">gawk</span></samp> issues a warning
message if the string is not one of <code>"rw"</code> or <code>"wr"</code>. 
</ul>

<p class="noindent">The modes for standard input and standard output are set one time
only (after the
command line is read, but before processing any of the <samp><span class="command">awk</span></samp> program). 
Setting <code>BINMODE</code> for standard input or
standard output is accomplished by using an
appropriate &lsquo;<samp><span class="samp">-v BINMODE=</span><var>N</var></samp>&rsquo; option on the command line. 
<code>BINMODE</code> is set at the time a file or pipe is opened and cannot be
changed mid-stream.

   <p>The name <code>BINMODE</code> was chosen to match <samp><span class="command">mawk</span></samp>
(see <a href="Other-Versions.html#Other-Versions">Other Versions</a>). 
Both <samp><span class="command">mawk</span></samp> and <samp><span class="command">gawk</span></samp> handle <code>BINMODE</code> similarly; however,
<samp><span class="command">mawk</span></samp> adds a &lsquo;<samp><span class="samp">-W BINMODE=</span><var>N</var></samp>&rsquo; option and an environment
variable that can set <code>BINMODE</code>, <code>RS</code>, and <code>ORS</code>.  The
files <samp><span class="file">binmode[1-3].awk</span></samp> (under <samp><span class="file">gnu/lib/awk</span></samp> in some of the
prepared distributions) have been chosen to match <samp><span class="command">mawk</span></samp>'s &lsquo;<samp><span class="samp">-W
BINMODE=</span><var>N</var></samp>&rsquo; option.  These can be changed or discarded; in particular,
the setting of <code>RS</code> giving the fewest &ldquo;surprises&rdquo; is open to debate. 
<samp><span class="command">mawk</span></samp> uses &lsquo;<samp><span class="samp">RS = "\r\n"</span></samp>&rsquo; if binary mode is set on read, which is
appropriate for files with the DOS-style end-of-line.

   <p>To illustrate, the following examples set binary mode on writes for standard
output and other files, and set <code>ORS</code> as the &ldquo;usual&rdquo; DOS-style
end-of-line:

<pre class="example">     gawk -v BINMODE=2 -v ORS="\r\n" ...
</pre>
   <p class="noindent">or:

<pre class="example">     gawk -v BINMODE=w -f binmode2.awk ...
</pre>
   <p class="noindent">These give the same result as the &lsquo;<samp><span class="samp">-W BINMODE=2</span></samp>&rsquo; option in
<samp><span class="command">mawk</span></samp>. 
The following changes the record separator to <code>"\r\n"</code> and sets binary
mode on reads, but does not affect the mode on standard input:

<pre class="example">     gawk -v RS="\r\n" --source "BEGIN { BINMODE = 1 }" ...
</pre>
   <p class="noindent">or:

<pre class="example">     gawk -f binmode1.awk ...
</pre>
   <p class="noindent">With proper quoting, in the first example the setting of <code>RS</code> can be
moved into the <code>BEGIN</code> rule.

   </body></html>

