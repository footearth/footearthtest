<html lang="en">
<head>
<title>Executable Scripts - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Running-gawk.html#Running-gawk" title="Running gawk">
<link rel="prev" href="Long.html#Long" title="Long">
<link rel="next" href="Comments.html#Comments" title="Comments">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Executable-Scripts"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Comments.html#Comments">Comments</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Long.html#Long">Long</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Running-gawk.html#Running-gawk">Running gawk</a>
<hr>
</div>

<h4 class="subsection">1.1.4 Executable <samp><span class="command">awk</span></samp> Programs</h4>

<p><a name="index-g_t_0040command_007bawk_007d-programs-103"></a><a name="index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-104"></a><a name="index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-105"></a><a name="index-Unix_002c-_0040command_007bawk_007d-scripts-and-106"></a><a name="index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-107"></a><a name="index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-108"></a>
Once you have learned <samp><span class="command">awk</span></samp>, you may want to write self-contained
<samp><span class="command">awk</span></samp> scripts, using the &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; script mechanism.  You can do
this on many Unix systems<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a> as well as on the GNU system. 
For example, you could update the file <samp><span class="file">advice</span></samp> to look like this:

<pre class="example">     #! /bin/awk -f
     
     BEGIN { print "Don't Panic!" }
</pre>
   <p class="noindent">After making this file executable (with the <samp><span class="command">chmod</span></samp> utility),
simply type &lsquo;<samp><span class="samp">advice</span></samp>&rsquo;
at the shell and the system arranges to run <samp><span class="command">awk</span></samp><a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a> as if you had
typed &lsquo;<samp><span class="samp">awk -f advice</span></samp>&rsquo;:

<pre class="example">     $ chmod +x advice
     $ advice
     -| Don't Panic!
</pre>
   <p class="noindent">(We assume you have the current directory in your shell's search
path variable (typically <code>$PATH</code>).  If not, you may need
to type &lsquo;<samp><span class="samp">./advice</span></samp>&rsquo; at the shell.)

   <p>Self-contained <samp><span class="command">awk</span></samp> scripts are useful when you want to write a
program that users can invoke without their having to know that the program is
written in <samp><span class="command">awk</span></samp>.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Portability Issues with &lsquo;<samp><span class="samp">#!</span></samp>&rsquo;</h4>

<p><a name="index-portability_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-109"></a>
Some systems limit the length of the interpreter name to 32 characters. 
Often, this can be dealt with by using a symbolic link.

   <p>You should not put more than one argument on the &lsquo;<samp><span class="samp">#!</span></samp>&rsquo;
line after the path to <samp><span class="command">awk</span></samp>. It does not work. The operating system
treats the rest of the line as a single argument and passes it to <samp><span class="command">awk</span></samp>. 
Doing this leads to confusing behavior&mdash;most likely a usage diagnostic
of some sort from <samp><span class="command">awk</span></samp>.

   <p><a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables_002c-portability-and-110"></a><a name="index-portability_002c-_0040code_007bARGV_007d-variable-111"></a>Finally,
the value of <code>ARGV[0]</code>
(see <a href="Built_002din-Variables.html#Built_002din-Variables">Built-in Variables</a>)
varies depending upon your operating system. 
Some systems put &lsquo;<samp><span class="samp">awk</span></samp>&rsquo; there, some put the full pathname
of <samp><span class="command">awk</span></samp> (such as <samp><span class="file">/bin/awk</span></samp>), and some put the name
of your script (&lsquo;<samp><span class="samp">advice</span></samp>&rsquo;).  Don't rely on the value of <code>ARGV[0]</code>
to provide your script name.

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> The &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; mechanism works on
Linux systems,
systems derived from the 4.4-Lite Berkeley Software Distribution,
and most commercial Unix systems.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> The
line beginning with &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; lists the full file name of an interpreter
to run and an optional initial command-line argument to pass to that
interpreter.  The operating system then runs the interpreter with the given
argument and the full argument list of the executed program.  The first argument
in the list is the full file name of the <samp><span class="command">awk</span></samp> program.  The rest of the
argument list contains either options to <samp><span class="command">awk</span></samp>, or data files,
or both.</p>

   <hr></div>

   </body></html>

