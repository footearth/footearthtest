<html lang="en">
<head>
<title>Concatenation - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Expressions.html#Expressions" title="Expressions">
<link rel="prev" href="Arithmetic-Ops.html#Arithmetic-Ops" title="Arithmetic Ops">
<link rel="next" href="Assignment-Ops.html#Assignment-Ops" title="Assignment Ops">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Concatenation"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Assignment-Ops.html#Assignment-Ops">Assignment Ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Arithmetic-Ops.html#Arithmetic-Ops">Arithmetic Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Expressions.html#Expressions">Expressions</a>
<hr>
</div>

<h3 class="section">5.6 String Concatenation</h3>

<p><a name="index-Kernighan_002c-Brian-667"></a><blockquote>
<i>It seemed like a good idea at the time.</i><br>
Brian Kernighan
</blockquote>

   <p><a name="index-string-operators-668"></a><a name="index-operators_002c-string-669"></a><a name="index-concatenating-670"></a>There is only one string operation: concatenation.  It does not have a
specific operator to represent it.  Instead, concatenation is performed by
writing expressions next to one another, with no operator.  For example:

<pre class="example">     $ awk '{ print "Field number one: " $1 }' BBS-list
     -| Field number one: aardvark
     -| Field number one: alpo-net
     ...
</pre>
   <p>Without the space in the string constant after the &lsquo;<samp><span class="samp">:</span></samp>&rsquo;, the line
runs together.  For example:

<pre class="example">     $ awk '{ print "Field number one:" $1 }' BBS-list
     -| Field number one:aardvark
     -| Field number one:alpo-net
     ...
</pre>
   <p><a name="index-troubleshooting_002c-string-concatenation-671"></a>Because string concatenation does not have an explicit operator, it is
often necessary to insure that it happens at the right time by using
parentheses to enclose the items to concatenate.  For example,
you might expect that the
following code fragment concatenates <code>file</code> and <code>name</code>:

<pre class="example">     file = "file"
     name = "name"
     print "something meaningful" &gt; file name
</pre>
   <p class="noindent">This produces a syntax error with Unix <samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
It is necessary to use the following:

<pre class="example">     print "something meaningful" &gt; (file name)
</pre>
   <p><a name="index-order-of-evaluation_002c-concatenation-672"></a><a name="index-evaluation-order_002c-concatenation-673"></a><a name="index-side-effects-674"></a>Parentheses should be used around concatenation in all but the
most common contexts, such as on the righthand side of &lsquo;<samp><span class="samp">=</span></samp>&rsquo;. 
Be careful about the kinds of expressions used in string concatenation. 
In particular, the order of evaluation of expressions used for concatenation
is undefined in the <samp><span class="command">awk</span></samp> language.  Consider this example:

<pre class="example">     BEGIN {
         a = "don't"
         print (a " " (a = "panic"))
     }
</pre>
   <p class="noindent">It is not defined whether the assignment to <code>a</code> happens
before or after the value of <code>a</code> is retrieved for producing the
concatenated value.  The result could be either &lsquo;<samp><span class="samp">don't panic</span></samp>&rsquo;,
or &lsquo;<samp><span class="samp">panic panic</span></samp>&rsquo;. 
<!-- see test/nasty.awk for a worse example -->
The precedence of concatenation, when mixed with other operators, is often
counter-intuitive.  Consider this example:

<pre class="example">     $ awk 'BEGIN { print -12 " " -24 }'
     -| -12-24
</pre>
   <p>This &ldquo;obviously&rdquo; is concatenating &minus;12, a space, and &minus;24. 
But where did the space disappear to? 
The answer lies in the combination of operator precedences and
<samp><span class="command">awk</span></samp>'s automatic conversion rules.  To get the desired result,
write the program in the following manner:

<pre class="example">     $ awk 'BEGIN { print -12 " " (-24) }'
     -| -12 -24
</pre>
   <p>This forces <samp><span class="command">awk</span></samp> to treat the &lsquo;<samp><span class="samp">-</span></samp>&rsquo; on the &lsquo;<samp><span class="samp">-24</span></samp>&rsquo; as unary. 
Otherwise, it's parsed as follows:

<pre class="display">         &minus;12 (<code>" "</code> &minus; 24)
     &rArr; &minus;12 (0 &minus; 24)
     &rArr; &minus;12 (&minus;24)
     &rArr; &minus;12&minus;24
</pre>
   <p>As mentioned earlier,
when doing concatenation, <em>parenthesize</em>.  Otherwise,
you're never quite sure what you'll get.

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> It happens
that <samp><span class="command">gawk</span></samp> and <samp><span class="command">mawk</span></samp> &ldquo;get it right,&rdquo; but you should
not rely on this.</p>

   <hr></div>

   </body></html>

