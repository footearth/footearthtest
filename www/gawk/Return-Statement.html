<html lang="en">
<head>
<title>Return Statement - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="User_002ddefined.html#User_002ddefined" title="User-defined">
<link rel="prev" href="Function-Caveats.html#Function-Caveats" title="Function Caveats">
<link rel="next" href="Dynamic-Typing.html#Dynamic-Typing" title="Dynamic Typing">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Return-Statement"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Dynamic-Typing.html#Dynamic-Typing">Dynamic Typing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Function-Caveats.html#Function-Caveats">Function Caveats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="User_002ddefined.html#User_002ddefined">User-defined</a>
<hr>
</div>

<h4 class="subsection">8.2.4 The <code>return</code> Statement</h4>

<p><a name="index-g_t_0040code_007breturn_007d-statement_0040comma_007b_007d-user_002ddefined-functions-1305"></a>
The body of a user-defined function can contain a <code>return</code> statement. 
This statement returns control to the calling part of the <samp><span class="command">awk</span></samp> program.  It
can also be used to return a value for use in the rest of the <samp><span class="command">awk</span></samp>
program.  It looks like this:

<pre class="example">     return <span class="roman">[</span><var>expression</var><span class="roman">]</span>
</pre>
   <p>The <var>expression</var> part is optional.  If it is omitted, then the returned
value is undefined, and therefore, unpredictable.

   <p>A <code>return</code> statement with no value expression is assumed at the end of
every function definition.  So if control reaches the end of the function
body, then the function returns an unpredictable value.  <samp><span class="command">awk</span></samp>
does <em>not</em> warn you if you use the return value of such a function.

   <p>Sometimes, you want to write a function for what it does, not for
what it returns.  Such a function corresponds to a <code>void</code> function
in C or to a <code>procedure</code> in Pascal.  Thus, it may be appropriate to not
return any value; simply bear in mind that if you use the return
value of such a function, you do so at your own risk.

   <p>The following is an example of a user-defined function that returns a value
for the largest number among the elements of an array:

<pre class="example">     function maxelt(vec,   i, ret)
     {
          for (i in vec) {
               if (ret == "" || vec[i] &gt; ret)
                    ret = vec[i]
          }
          return ret
     }
</pre>
   <p><a name="index-programming-conventions_002c-function-parameters-1306"></a>You call <code>maxelt</code> with one argument, which is an array name.  The local
variables <code>i</code> and <code>ret</code> are not intended to be arguments;
while there is nothing to stop you from passing more than one argument
to <code>maxelt</code>, the results would be strange.  The extra space before
<code>i</code> in the function parameter list indicates that <code>i</code> and
<code>ret</code> are not supposed to be arguments. 
You should follow this convention when defining functions.

   <p>The following program uses the <code>maxelt</code> function.  It loads an
array, calls <code>maxelt</code>, and then reports the maximum number in that
array:

<pre class="example">     function maxelt(vec,   i, ret)
     {
          for (i in vec) {
               if (ret == "" || vec[i] &gt; ret)
                    ret = vec[i]
          }
          return ret
     }
     
     # Load all fields of each record into nums.
     {
          for(i = 1; i &lt;= NF; i++)
               nums[NR, i] = $i
     }
     
     END {
          print maxelt(nums)
     }
</pre>
   <p>Given the following input:

<pre class="example">      1 5 23 8 16
     44 3 5 2 8 26
     256 291 1396 2962 100
     -6 467 998 1101
     99385 11 0 225
</pre>
   <p class="noindent">the program reports (predictably) that <code>99385</code> is the largest number
in the array.

   </body></html>

