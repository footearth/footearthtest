<html lang="en">
<head>
<title>Comparison Operators - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Typing-and-Comparison.html#Typing-and-Comparison" title="Typing and Comparison">
<link rel="prev" href="Variable-Typing.html#Variable-Typing" title="Variable Typing">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Comparison-Operators"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Variable-Typing.html#Variable-Typing">Variable Typing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Typing-and-Comparison.html#Typing-and-Comparison">Typing and Comparison</a>
<hr>
</div>

<h4 class="subsection">5.10.2 Comparison Operators</h4>

<p><dfn>Comparison expressions</dfn> compare strings or numbers for
relationships such as equality.  They are written using <dfn>relational
operators</dfn>, which are a superset of those in C. 
<a href="table_002drelational_002dops.html#table_002drelational_002dops">table-relational-ops</a> describes them.

   <p><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-753"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-754"></a><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_003d_007d-operator-755"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_003d_007d-operator-756"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003d_007d-operator-757"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003d_007d-operator-758"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-759"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-760"></a><a name="index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_003d_007d-operator-761"></a><a name="index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_003d_007d-operator-762"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_003d_007d-operator-763"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_003d_007d-operator-764"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-765"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-766"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-767"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-768"></a><a name="index-g_t_0040code_007bin_007d-operator-769"></a><div class="float">
<a name="table_002drelational_002dops"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="25%">Expression </th><th valign="top" width="75%">Result
<br></th></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&lt;</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is less than <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&lt;=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is less than or equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&gt;</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is greater than <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&gt;=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is greater than or equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>==</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>!=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is not equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>~</code> <var>y</var> </td><td valign="top" width="75%">True if the string <var>x</var> matches the regexp denoted by <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>!~</code> <var>y</var> </td><td valign="top" width="75%">True if the string <var>x</var> does not match the regexp denoted by <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>subscript</var> <code>in</code> <var>array</var> </td><td valign="top" width="75%">True if the array <var>array</var> has an element with the subscript <var>subscript</var>.
   <br></td></tr></table>
<p><strong class="float-caption">Table 5.3: Relational Operators</strong></p></div>

   <p>Comparison expressions have the value one if true and zero if false. 
When comparing operands of mixed types, numeric operands are converted
to strings using the value of <code>CONVFMT</code>
(see <a href="Conversion.html#Conversion">Conversion</a>).

   <p>Strings are compared
by comparing the first character of each, then the second character of each,
and so on.  Thus, <code>"10"</code> is less than <code>"9"</code>.  If there are two
strings where one is a prefix of the other, the shorter string is less than
the longer one.  Thus, <code>"abc"</code> is less than <code>"abcd"</code>.

   <p><a name="index-troubleshooting_002c-_0040code_007b_003d_003d_007d-operator-770"></a>It is very easy to accidentally mistype the &lsquo;<samp><span class="samp">==</span></samp>&rsquo; operator and
leave off one of the &lsquo;<samp><span class="samp">=</span></samp>&rsquo; characters.  The result is still valid <samp><span class="command">awk</span></samp>
code, but the program does not do what is intended:

<pre class="example">     if (a = b)   # oops! should be a == b
        ...
     else
        ...
</pre>
   <p class="noindent">Unless <code>b</code> happens to be zero or the null string, the <code>if</code>
part of the test always succeeds.  Because the operators are
so similar, this kind of error is very difficult to spot when
scanning the source code.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-comparison-operators-and-771"></a>The following table of expressions illustrates the kind of comparison
<samp><span class="command">gawk</span></samp> performs, as well as what the result of the comparison is:

     <dl>
<dt><code>1.5 &lt;= 2.0</code><dd>numeric comparison (true)

     <br><dt><code>"abc" &gt;= "xyz"</code><dd>string comparison (false)

     <br><dt><code>1.5 != " +2"</code><dd>string comparison (true)

     <br><dt><code>"1e2" &lt; "3"</code><dd>string comparison (true)

     <br><dt><code>a = 2; b = "2"</code><dt><code>a == b</code><dd>string comparison (true)

     <br><dt><code>a = 2; b = " +2"</code><br><dt><code>a == b</code><dd>string comparison (false)
</dl>

   <p>In the next example:

<pre class="example">     $ echo 1e2 3 | awk '{ print ($1 &lt; $2) ? "true" : "false" }'
     -| false
</pre>
   <p><a name="index-comparison-expressions_002c-string-vs_002e_0040_003a-regexp-772"></a><!-- @cindex string comparison vs.@: regexp comparison -->
<!-- @cindex regexp comparison vs.@: string comparison -->
the result is &lsquo;<samp><span class="samp">false</span></samp>&rsquo; because both <code>$1</code> and <code>$2</code>
are user input.  They are numeric strings&mdash;therefore both have
the <var>strnum</var> attribute, dictating a numeric comparison. 
The purpose of the comparison rules and the use of numeric strings is
to attempt to produce the behavior that is &ldquo;least surprising,&rdquo; while
still &ldquo;doing the right thing.&rdquo;
String comparisons and regular expression comparisons are very different. 
For example:

<pre class="example">     x == "foo"
</pre>
   <p class="noindent">has the value one, or is true if the variable <code>x</code>
is precisely &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.  By contrast:

<pre class="example">     x ~ /foo/
</pre>
   <p class="noindent">has the value one if <code>x</code> contains &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;, such as
<code>"Oh, what a fool am I!"</code>.

   <p><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-773"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-774"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-775"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-776"></a>The righthand operand of the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; operators may be
either a regexp constant (<code>/.../</code>) or an ordinary
expression. In the latter case, the value of the expression as a string is used as a
dynamic regexp (see <a href="Regexp-Usage.html#Regexp-Usage">Regexp Usage</a>; also
see <a href="Computed-Regexps.html#Computed-Regexps">Computed Regexps</a>).

   <p><a name="index-g_t_0040command_007bawk_007d_002c-regexp-constants-and-777"></a><a name="index-regexp-constants-778"></a>In modern implementations of <samp><span class="command">awk</span></samp>, a constant regular
expression in slashes by itself is also an expression.  The regexp
<code>/</code><var>regexp</var><code>/</code> is an abbreviation for the following comparison expression:

<pre class="example">     $0 ~ /<var>regexp</var>/
</pre>
   <p>One special place where <code>/foo/</code> is <em>not</em> an abbreviation for
&lsquo;<samp><span class="samp">$0 ~ /foo/</span></samp>&rsquo; is when it is the righthand operand of &lsquo;<samp><span class="samp">~</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">!~</span></samp>&rsquo;. 
See <a href="Using-Constant-Regexps.html#Using-Constant-Regexps">Using Constant Regexps</a>,
where this is discussed in more detail. 
<!-- ENDOFRANGE comex -->
<!-- ENDOFRANGE excom -->
<!-- ENDOFRANGE vartypc -->
<!-- ENDOFRANGE varting -->

   </body></html>

