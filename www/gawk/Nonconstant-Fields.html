<html lang="en">
<head>
<title>Nonconstant Fields - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Reading-Files.html#Reading-Files" title="Reading Files">
<link rel="prev" href="Fields.html#Fields" title="Fields">
<link rel="next" href="Changing-Fields.html#Changing-Fields" title="Changing Fields">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Nonconstant-Fields"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Changing-Fields.html#Changing-Fields">Changing Fields</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Fields.html#Fields">Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Reading-Files.html#Reading-Files">Reading Files</a>
<hr>
</div>

<h3 class="section">3.3 Nonconstant Field Numbers</h3>

<p><a name="index-fields_002c-numbers-390"></a><a name="index-field-numbers-391"></a>
The number of a field does not need to be a constant.  Any expression in
the <samp><span class="command">awk</span></samp> language can be used after a &lsquo;<samp><span class="samp">$</span></samp>&rsquo; to refer to a
field.  The value of the expression specifies the field number.  If the
value is a string, rather than a number, it is converted to a number. 
Consider this example:

<pre class="example">     awk '{ print $NR }'
</pre>
   <p class="noindent">Recall that <code>NR</code> is the number of records read so far: one in the
first record, two in the second, etc.  So this example prints the first
field of the first record, the second field of the second record, and so
on.  For the twentieth record, field number 20 is printed; most likely,
the record has fewer than 20 fields, so this prints a blank line. 
Here is another example of using expressions as field numbers:

<pre class="example">     awk '{ print $(2*2) }' BBS-list
</pre>
   <p><samp><span class="command">awk</span></samp> evaluates the expression &lsquo;<samp><span class="samp">(2*2)</span></samp>&rsquo; and uses
its value as the number of the field to print.  The &lsquo;<samp><span class="samp">*</span></samp>&rsquo; sign
represents multiplication, so the expression &lsquo;<samp><span class="samp">2*2</span></samp>&rsquo; evaluates to four. 
The parentheses are used so that the multiplication is done before the
&lsquo;<samp><span class="samp">$</span></samp>&rsquo; operation; they are necessary whenever there is a binary
operator in the field-number expression.  This example, then, prints the
hours of operation (the fourth field) for every line of the file
<samp><span class="file">BBS-list</span></samp>.  (All of the <samp><span class="command">awk</span></samp> operators are listed, in
order of decreasing precedence, in
<a href="Precedence.html#Precedence">Precedence</a>.)

   <p>If the field number you compute is zero, you get the entire record. 
Thus, &lsquo;<samp><span class="samp">$(2-2)</span></samp>&rsquo; has the same value as <code>$0</code>.  Negative field
numbers are not allowed; trying to reference one usually terminates
the program.  (The POSIX standard does not define
what happens when you reference a negative field number.  <samp><span class="command">gawk</span></samp>
notices this and terminates your program.  Other <samp><span class="command">awk</span></samp>
implementations may behave differently.)

   <p>As mentioned in <a href="Fields.html#Fields">Fields</a>,
<samp><span class="command">awk</span></samp> stores the current record's number of fields in the built-in
variable <code>NF</code> (also see <a href="Built_002din-Variables.html#Built_002din-Variables">Built-in Variables</a>).  The expression
<code>$NF</code> is not a special feature&mdash;it is the direct consequence of
evaluating <code>NF</code> and using its value as a field number.

   </body></html>

