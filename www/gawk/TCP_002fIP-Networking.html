<html lang="en">
<head>
<title>TCP/IP Networking - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Advanced-Features.html#Advanced-Features" title="Advanced Features">
<link rel="prev" href="Two_002dway-I_002fO.html#Two_002dway-I_002fO" title="Two-way I/O">
<link rel="next" href="Portal-Files.html#Portal-Files" title="Portal Files">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="TCP%2fIP-Networking"></a>
<a name="TCP_002fIP-Networking"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Portal-Files.html#Portal-Files">Portal Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Two_002dway-I_002fO.html#Two_002dway-I_002fO">Two-way I/O</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Advanced-Features.html#Advanced-Features">Advanced Features</a>
<hr>
</div>

<h3 class="section">10.3 Using <samp><span class="command">gawk</span></samp> for Network Programming</h3>

<p><a name="index-advanced-features_002c-_0040command_007bgawk_007d_002c-network-programming-1424"></a><a name="index-networks_002c-programming-1425"></a><!-- STARTOFRANGE tcpip -->
<a name="index-TCP_002fIP-1426"></a><a name="index-g_t_0040code_007b_002finet_002f_007d-files-_0028_0040command_007bgawk_007d_0029-1427"></a><a name="index-files_002c-_0040code_007b_002finet_002f_007d-_0028_0040command_007bgawk_007d_0029-1428"></a><a name="index-g_t_0040code_007bEMISTERED_007d-1429"></a><blockquote>
<code>EMISTERED</code>: <i>A host is a host from coast to coast,<br>
and no-one can talk to host that's close,<br>
unless the host that isn't close<br>
is busy hung or dead.</i>
</blockquote>

   <p>In addition to being able to open a two-way pipeline to a coprocess
on the same system
(see <a href="Two_002dway-I_002fO.html#Two_002dway-I_002fO">Two-way I/O</a>),
it is possible to make a two-way connection to
another process on another system across an IP networking connection.

   <p>You can think of this as just a <em>very long</em> two-way pipeline to
a coprocess. 
The way <samp><span class="command">gawk</span></samp> decides that you want to use TCP/IP networking is
by recognizing special file names that begin with &lsquo;<samp><span class="samp">/inet/</span></samp>&rsquo;.

   <p>The full syntax of the special file name is
<samp><span class="file">/inet/</span><var>protocol</var><span class="file">/</span><var>local-port</var><span class="file">/</span><var>remote-host</var><span class="file">/</span><var>remote-port</var></samp>. 
The components are:

     <dl>
<dt><var>protocol</var><dd>The protocol to use over IP.  This must be either &lsquo;<samp><span class="samp">tcp</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">udp</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">raw</span></samp>&rsquo;, for a TCP, UDP, or raw IP connection,
respectively.  The use of TCP is recommended for most applications.

     <p><a name="index-raw-sockets-1430"></a><a name="index-sockets-1431"></a><strong>Caution:</strong> The use of raw sockets is not currently supported
in version 3.1 of <samp><span class="command">gawk</span></samp>.

     <br><dt><var>local-port</var><dd><a name="index-g_t_0040code_007bgetservbyname_007d-function-_0028C-library_0029-1432"></a>The local TCP or UDP port number to use.  Use a port number of &lsquo;<samp><span class="samp">0</span></samp>&rsquo;
when you want the system to pick a port. This is what you should do
when writing a TCP or UDP client. 
You may also use a well-known service name, such as &lsquo;<samp><span class="samp">smtp</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">http</span></samp>&rsquo;, in which case <samp><span class="command">gawk</span></samp> attempts to determine
the predefined port number using the C <code>getservbyname</code> function.

     <br><dt><var>remote-host</var><dd>The IP address or fully-qualified domain name of the Internet
host to which you want to connect.

     <br><dt><var>remote-port</var><dd>The TCP or UDP port number to use on the given <var>remote-host</var>. 
Again, use &lsquo;<samp><span class="samp">0</span></samp>&rsquo; if you don't care, or else a well-known
service name. 
</dl>

   <p>Consider the following very simple example:

<pre class="example">     BEGIN {
       Service = "/inet/tcp/0/localhost/daytime"
       Service |&amp; getline
       print $0
       close(Service)
     }
</pre>
   <p>This program reads the current date and time from the local system's
TCP &lsquo;<samp><span class="samp">daytime</span></samp>&rsquo; server. 
It then prints the results and closes the connection.

   <p>Because this topic is extensive, the use of <samp><span class="command">gawk</span></samp> for
TCP/IP programming is documented separately. 
See <cite>TCP/IP Internetworking with </cite><samp><span class="command">gawk</span></samp>,
which comes as part of the <samp><span class="command">gawk</span></samp> distribution,
for a much more complete introduction and discussion, as well as
extensive examples.

   </body></html>

