<html lang="en">
<head>
<title>Unexpected Results - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Floating-Point-Issues.html#Floating-Point-Issues" title="Floating Point Issues">
<link rel="prev" href="String-Conversion-Precision.html#String-Conversion-Precision" title="String Conversion Precision">
<link rel="next" href="POSIX-Floating-Point-Problems.html#POSIX-Floating-Point-Problems" title="POSIX Floating Point Problems">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Unexpected-Results"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="POSIX-Floating-Point-Problems.html#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="String-Conversion-Precision.html#String-Conversion-Precision">String Conversion Precision</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Floating-Point-Issues.html#Floating-Point-Issues">Floating Point Issues</a>
<hr>
</div>

<h4 class="appendixsubsec">D.3.2 Floating Point Numbers Are Not Abstract Numbers</h4>

<p><a name="index-floating_002dpoint-2079"></a>Unlike numbers in the abstract sense (such as what you studied in high school
or college math), numbers stored in computers are limited in certain ways. 
They cannot represent an infinite number of digits, nor can they always
represent things exactly. 
In particular,
floating-point numbers cannot
always represent values exactly.  Here is an example:

<pre class="example">     $ awk '{ printf("%010d\n", $1 * 100) }'
     515.79
     -| 0000051579
     515.80
     -| 0000051579
     515.81
     -| 0000051580
     515.82
     -| 0000051582
     <kbd>Ctrl-d</kbd>
</pre>
   <p class="noindent">This shows that some values can be represented exactly,
whereas others are only approximated.  This is not a &ldquo;bug&rdquo;
in <samp><span class="command">awk</span></samp>, but simply an artifact of how computers
represent numbers.

   <p><a name="index-negative-zero-2080"></a><a name="index-positive-zero-2081"></a><a name="index-zero_0040comma_007b_007d-negative-vs_002e_0040_003a-positive-2082"></a>Another peculiarity of floating-point numbers on modern systems
is that they often have more than one representation for the number zero! 
In particular, it is possible to represent &ldquo;minus zero&rdquo; as well as
regular, or &ldquo;positive&rdquo; zero.

   <p>This example shows that negative and positive zero are distinct values
when stored internally, but that they are in fact equal to each other,
as well as to &ldquo;regular&rdquo; zero:

<pre class="smallexample">     $ gawk 'BEGIN { mz = -0 ; pz = 0
     &gt; printf "-0 = %g, +0 = %g, (-0 == +0) -&gt; %d\n", mz, pz, mz == pz
     &gt; printf "mz == 0 -&gt; %d, pz == 0 -&gt; %d\n", mz == 0, pz == 0
     &gt; }'
     -| -0 = -0, +0 = 0, (-0 == +0) -&gt; 1
     -| mz == 0 -&gt; 1, pz == 0 -&gt; 1
</pre>
   <p>It helps to keep this in mind should you process numeric data
that contains negative zero values; the fact that the zero is negative
is noted and can affect comparisons.

   </body></html>

