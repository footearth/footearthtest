<html lang="en">
<head>
<title>Future Extensions - The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Notes.html#Notes" title="Notes">
<link rel="prev" href="Dynamic-Extensions.html#Dynamic-Extensions" title="Dynamic Extensions">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.



   This is Edition 3 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 3.1.7 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Future-Extensions"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Dynamic-Extensions.html#Dynamic-Extensions">Dynamic Extensions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Notes.html#Notes">Notes</a>
<hr>
</div>

<h3 class="appendixsec">C.4 Probable Future Extensions</h3>

<p><a name="index-PERL-2050"></a><a name="index-Wall_002c-Larry-2051"></a><a name="index-Robbins_002c-Arnold-2052"></a><blockquote>
<i>AWK is a language similar to PERL, only considerably more elegant.</i><br>
Arnold Robbins

   <p><i>Hey!</i><br>
Larry Wall
</blockquote>

   <p>This section briefly lists extensions and possible improvements
that indicate the directions we are
currently considering for <samp><span class="command">gawk</span></samp>.  The file <samp><span class="file">FUTURES</span></samp> in the
<samp><span class="command">gawk</span></samp> distribution lists these extensions as well.

   <p>Following is a list of probable future changes visible at the
<samp><span class="command">awk</span></samp> language level:

<!-- these are ordered by likelihood -->
     <dl>
<dt>Loadable module interface<dd>It is not clear that the <samp><span class="command">awk</span></samp>-level interface to the
modules facility is as good as it should be.  The interface needs to be
redesigned, particularly taking namespace issues into account, as
well as possibly including issues such as library search path order
and versioning.

     <br><dt><code>RECLEN</code> variable for fixed-length records<dd>Along with <code>FIELDWIDTHS</code>, this would speed up the processing of
fixed-length records. 
<code>PROCINFO["RS"]</code> would be <code>"RS"</code> or <code>"RECLEN"</code>,
depending upon which kind of record processing is in effect.

     <br><dt>Additional <code>printf</code> specifiers<dd>The 1999 ISO C standard added a number of additional <code>printf</code>
format specifiers.  These should be evaluated for possible inclusion
in <samp><span class="command">gawk</span></samp>.

     <br><dt>Databases<dd>It may be possible to map a GDBM/NDBM/SDBM file into an <samp><span class="command">awk</span></samp> array.

     <br><dt>More <code>lint</code> warnings<dd>There are more things that could be checked for portability. 
</dl>

   <p>Following is a list of probable improvements that will make <samp><span class="command">gawk</span></samp>'s
source code easier to work with:

     <dl>
<dt>Loadable module mechanics<dd>The current extension mechanism works
(see <a href="Dynamic-Extensions.html#Dynamic-Extensions">Dynamic Extensions</a>),
but is rather primitive. It requires a fair amount of manual work
to create and integrate a loadable module. 
Nor is the current mechanism as portable as might be desired. 
The GNU <samp><span class="command">libtool</span></samp> package provides a number of features that
would make using loadable modules much easier. 
<samp><span class="command">gawk</span></samp> should be changed to use <samp><span class="command">libtool</span></samp>.

     <br><dt>Loadable module internals<dd>The API to its internals that <samp><span class="command">gawk</span></samp> &ldquo;exports&rdquo; should be revised. 
Too many things are needlessly exposed.  A new API should be designed
and implemented to make module writing easier.

     <br><dt>Better array subscript management<dd><samp><span class="command">gawk</span></samp>'s management of array subscript storage could use revamping,
so that using the same value to index multiple arrays only
stores one copy of the index value.

     <br><dt>Integrating the DBUG library<dd>Integrating Fred Fish's DBUG library would be helpful during development,
but it's a lot of work to do. 
</dl>

   <p>Following is a list of probable improvements that will make <samp><span class="command">gawk</span></samp>
perform better:

     <dl>
<!-- NEXT ED: remove this item. awka and mawk do these respectively -->
<dt>Compilation of <samp><span class="command">awk</span></samp> programs<dd><samp><span class="command">gawk</span></samp> uses a Bison (YACC-like)
parser to convert the script given it into a syntax tree; the syntax
tree is then executed by a simple recursive evaluator.  This method incurs
a lot of overhead, since the recursive evaluator performs many procedure
calls to do even the simplest things.

     <p>It should be possible for <samp><span class="command">gawk</span></samp> to convert the script's parse tree
into a C program which the user would then compile, using the normal
C compiler and a special <samp><span class="command">gawk</span></samp> library to provide all the needed
functions (regexps, fields, associative arrays, type coercion, and so on).

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-interpreter_0040comma_007b_007d-adding-code-to-2053"></a>An easier possibility might be for an intermediate phase of <samp><span class="command">gawk</span></samp> to
convert the parse tree into a linear byte code form like the one used
in GNU Emacs Lisp.  The recursive evaluator would then be replaced by
a straight line byte code interpreter that would be intermediate in speed
between running a compiled program and doing what <samp><span class="command">gawk</span></samp> does
now. 
</dl>

   <p>Finally,
the programs in the test suite could use documenting in this Web page.

   <p>See <a href="Additions.html#Additions">Additions</a>,
if you are interested in tackling any of these projects. 
<!-- ENDOFRANGE impis -->
<!-- ENDOFRANGE gawii -->

   </body></html>

