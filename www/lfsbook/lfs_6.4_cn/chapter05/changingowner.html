<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      5.34.&nbsp;改变所有者
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-6.4">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 6.4
      </h4>
      <h3>
        第&nbsp;5&nbsp;章&nbsp;构建临时系统
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title="清理系统">上一页</a>
          <p>
            清理系统
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../part3.html" title="构建 LFS 系统">下一页</a>
          <p>
            构建 LFS 系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;构建临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 6.4">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-tools-changingowner" name=
        "ch-tools-changingowner"></a>5.34. 改变所有者
      </h1>
      <div class="admon note">
        <img alt="[注意]" src="../images/note.png" />
        <h3>
          注意
        </h3>
        <p>
          本书剩余部分的命令必须以 <code class="systemitem">root</code> 用户登陆后执行而不再使用
          <code class="systemitem">lfs</code>用户了。同样，有必要再一次检查 <code class=
          "systemitem">root</code> 用户环境下的 <code class="envar">$LFS</code>
          环境变量是否被正确的设置了。
        </p>
      </div>
      <p>
        目前，<code class="filename">$LFS/tools</code> 目录的所有者是仅存在于宿主环境中的
        <code class="systemitem">lfs</code> 用户。如果保留 <code class=
        "filename">$LFS/tools</code> 目录，那么该目录内文件的所有者的 user ID
        就没有对应的账号。这会带来安全上的问题，在以后创建一个用户帐号的时候，如果该用户帐号的 user ID 刚好与目录
        <code class="filename">$LFS/tools</code> 所有者的 user ID
        相同，那么该目录下的文件就会面临被恶意操作的危险。
      </p>
      <p>
        为了避免这个问题，在后面建立LFS 系统的时候，在创建<code class="filename">/etc/passwd</code>
        文件时添加与宿主系统的 user ID 和 group ID相同的 <code class="systemitem">lfs</code>
        用户。另外一个更好的办法是通过下面的指令把 <code class="filename">$LFS/tools</code>
        目录以及其中文件的所有者改为 <code class="systemitem">root</code> 用户:
      </p>
      <pre class="userinput">
<kbd class="command">chown -R root:root $LFS/tools</kbd>
</pre>
      <p>
        虽然在 LFS 系统完成的时候，可以把 <code class="filename">$LFS/tools</code>
        目录删除，但是它还可以再用来建立多个<span class="emphasis"><em>相同版本</em></span> 的 LFS
        系统，所以很多人会选择保留该目录。如何以最好的方法备份 <code class="filename">$LFS/tools</code>
        目录取决于个人喜好，我们把这个任务留给读者作为练习。
      </p>
      <div class="admon caution">
        <img alt="[小心]" src="../images/caution.png" />
        <h3>
          小心
        </h3>
        <p>
          如果你打算保留临时工具用来建立今后的 LFS 系统，那么<span class=
          "emphasis"><em>现在</em></span>是把它备份的时候了。在接下来<a class="xref" href=
          "../chapter06/chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装系统基础软件">第六章</a>的命令会改变工具目前的位置，工具是为了以后的编译作准备。
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title="清理系统">上一页</a>
          <p>
            清理系统
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../part3.html" title="构建 LFS 系统">下一页</a>
          <p>
            构建 LFS 系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;构建临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 6.4">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
